(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();/**
* @vue/shared v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function $p(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const an={},Fl=[],os=()=>{},rb=()=>!1,mf=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Wp=t=>t.startsWith("onUpdate:"),Ar=Object.assign,Kp=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},ib=Object.prototype.hasOwnProperty,Jt=(t,e)=>ib.call(t,e),dt=Array.isArray,Ml=t=>Tu(t)==="[object Map]",lc=t=>Tu(t)==="[object Set]",Fm=t=>Tu(t)==="[object Date]",Tt=t=>typeof t=="function",Un=t=>typeof t=="string",fs=t=>typeof t=="symbol",fn=t=>t!==null&&typeof t=="object",b2=t=>(fn(t)||Tt(t))&&Tt(t.then)&&Tt(t.catch),w2=Object.prototype.toString,Tu=t=>w2.call(t),sb=t=>Tu(t).slice(8,-1),A2=t=>Tu(t)==="[object Object]",Jp=t=>Un(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,$c=$p(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),yf=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},ob=/-(\w)/g,mi=yf(t=>t.replace(ob,(e,n)=>n?n.toUpperCase():"")),ab=/\B([A-Z])/g,Wa=yf(t=>t.replace(ab,"-$1").toLowerCase()),vf=yf(t=>t.charAt(0).toUpperCase()+t.slice(1)),dd=yf(t=>t?`on${vf(t)}`:""),Qo=(t,e)=>!Object.is(t,e),Eh=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},Jd=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},qh=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Mm;const _f=()=>Mm||(Mm=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function bf(t){if(dt(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=Un(r)?hb(r):bf(r);if(i)for(const s in i)e[s]=i[s]}return e}else if(Un(t)||fn(t))return t}const lb=/;(?![^(]*\))/g,cb=/:([^]+)/,ub=/\/\*[^]*?\*\//g;function hb(t){const e={};return t.replace(ub,"").split(lb).forEach(n=>{if(n){const r=n.split(cb);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Zr(t){let e="";if(Un(t))e=t;else if(dt(t))for(let n=0;n<t.length;n++){const r=Zr(t[n]);r&&(e+=r+" ")}else if(fn(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const fb="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",db=$p(fb);function I2(t){return!!t||t===""}function pb(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=Su(t[r],e[r]);return n}function Su(t,e){if(t===e)return!0;let n=Fm(t),r=Fm(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=fs(t),r=fs(e),n||r)return t===e;if(n=dt(t),r=dt(e),n||r)return n&&r?pb(t,e):!1;if(n=fn(t),r=fn(e),n||r){if(!n||!r)return!1;const i=Object.keys(t).length,s=Object.keys(e).length;if(i!==s)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!Su(t[o],e[o]))return!1}}return String(t)===String(e)}function Qp(t,e){return t.findIndex(n=>Su(n,e))}const E2=t=>!!(t&&t.__v_isRef===!0),qe=t=>Un(t)?t:t==null?"":dt(t)||fn(t)&&(t.toString===w2||!Tt(t.toString))?E2(t)?qe(t.value):JSON.stringify(t,T2,2):String(t),T2=(t,e)=>E2(e)?T2(t,e.value):Ml(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,i],s)=>(n[pd(r,s)+" =>"]=i,n),{})}:lc(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>pd(n))}:fs(e)?pd(e):fn(e)&&!dt(e)&&!A2(e)?String(e):e,pd=(t,e="")=>{var n;return fs(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Br;class S2{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Br,!e&&Br&&(this.index=(Br.scopes||(Br.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Br;try{return Br=this,e()}finally{Br=n}}}on(){++this._on===1&&(this.prevScope=Br,Br=this)}off(){this._on>0&&--this._on===0&&(Br=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function gb(t){return new S2(t)}function mb(){return Br}let hn;const gd=new WeakSet;class x2{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Br&&Br.active&&Br.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,gd.has(this)&&(gd.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||R2(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Vm(this),N2(this);const e=hn,n=ki;hn=this,ki=!0;try{return this.fn()}finally{L2(this),hn=e,ki=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Zp(e);this.deps=this.depsTail=void 0,Vm(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?gd.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Qd(this)&&this.run()}get dirty(){return Qd(this)}}let P2=0,Wc,Kc;function R2(t,e=!1){if(t.flags|=8,e){t.next=Kc,Kc=t;return}t.next=Wc,Wc=t}function Yp(){P2++}function Xp(){if(--P2>0)return;if(Kc){let e=Kc;for(Kc=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;Wc;){let e=Wc;for(Wc=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function N2(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function L2(t){let e,n=t.depsTail,r=n;for(;r;){const i=r.prevDep;r.version===-1?(r===n&&(n=i),Zp(r),yb(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=i}t.deps=e,t.depsTail=n}function Qd(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(C2(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function C2(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===cu)||(t.globalVersion=cu,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Qd(t))))return;t.flags|=2;const e=t.dep,n=hn,r=ki;hn=t,ki=!0;try{N2(t);const i=t.fn(t._value);(e.version===0||Qo(i,t._value))&&(t.flags|=128,t._value=i,e.version++)}catch(i){throw e.version++,i}finally{hn=n,ki=r,L2(t),t.flags&=-3}}function Zp(t,e=!1){const{dep:n,prevSub:r,nextSub:i}=t;if(r&&(r.nextSub=i,t.prevSub=void 0),i&&(i.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let s=n.computed.deps;s;s=s.nextDep)Zp(s,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function yb(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let ki=!0;const k2=[];function Js(){k2.push(ki),ki=!1}function Qs(){const t=k2.pop();ki=t===void 0?!0:t}function Vm(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=hn;hn=void 0;try{e()}finally{hn=n}}}let cu=0;class vb{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class eg{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!hn||!ki||hn===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==hn)n=this.activeLink=new vb(hn,this),hn.deps?(n.prevDep=hn.depsTail,hn.depsTail.nextDep=n,hn.depsTail=n):hn.deps=hn.depsTail=n,D2(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=hn.depsTail,n.nextDep=void 0,hn.depsTail.nextDep=n,hn.depsTail=n,hn.deps===n&&(hn.deps=r)}return n}trigger(e){this.version++,cu++,this.notify(e)}notify(e){Yp();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Xp()}}}function D2(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)D2(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const Yd=new WeakMap,Fa=Symbol(""),Xd=Symbol(""),uu=Symbol("");function mr(t,e,n){if(ki&&hn){let r=Yd.get(t);r||Yd.set(t,r=new Map);let i=r.get(n);i||(r.set(n,i=new eg),i.map=r,i.key=n),i.track()}}function qs(t,e,n,r,i,s){const o=Yd.get(t);if(!o){cu++;return}const a=l=>{l&&l.trigger()};if(Yp(),e==="clear")o.forEach(a);else{const l=dt(t),h=l&&Jp(n);if(l&&n==="length"){const d=Number(r);o.forEach((p,v)=>{(v==="length"||v===uu||!fs(v)&&v>=d)&&a(p)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),h&&a(o.get(uu)),e){case"add":l?h&&a(o.get("length")):(a(o.get(Fa)),Ml(t)&&a(o.get(Xd)));break;case"delete":l||(a(o.get(Fa)),Ml(t)&&a(o.get(Xd)));break;case"set":Ml(t)&&a(o.get(Fa));break}}Xp()}function wl(t){const e=Kt(t);return e===t?e:(mr(e,"iterate",uu),gi(t)?e:e.map(rr))}function wf(t){return mr(t=Kt(t),"iterate",uu),t}const _b={__proto__:null,[Symbol.iterator](){return md(this,Symbol.iterator,rr)},concat(...t){return wl(this).concat(...t.map(e=>dt(e)?wl(e):e))},entries(){return md(this,"entries",t=>(t[1]=rr(t[1]),t))},every(t,e){return Ms(this,"every",t,e,void 0,arguments)},filter(t,e){return Ms(this,"filter",t,e,n=>n.map(rr),arguments)},find(t,e){return Ms(this,"find",t,e,rr,arguments)},findIndex(t,e){return Ms(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Ms(this,"findLast",t,e,rr,arguments)},findLastIndex(t,e){return Ms(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Ms(this,"forEach",t,e,void 0,arguments)},includes(...t){return yd(this,"includes",t)},indexOf(...t){return yd(this,"indexOf",t)},join(t){return wl(this).join(t)},lastIndexOf(...t){return yd(this,"lastIndexOf",t)},map(t,e){return Ms(this,"map",t,e,void 0,arguments)},pop(){return Dc(this,"pop")},push(...t){return Dc(this,"push",t)},reduce(t,...e){return Um(this,"reduce",t,e)},reduceRight(t,...e){return Um(this,"reduceRight",t,e)},shift(){return Dc(this,"shift")},some(t,e){return Ms(this,"some",t,e,void 0,arguments)},splice(...t){return Dc(this,"splice",t)},toReversed(){return wl(this).toReversed()},toSorted(t){return wl(this).toSorted(t)},toSpliced(...t){return wl(this).toSpliced(...t)},unshift(...t){return Dc(this,"unshift",t)},values(){return md(this,"values",rr)}};function md(t,e,n){const r=wf(t),i=r[e]();return r!==t&&!gi(t)&&(i._next=i.next,i.next=()=>{const s=i._next();return s.value&&(s.value=n(s.value)),s}),i}const bb=Array.prototype;function Ms(t,e,n,r,i,s){const o=wf(t),a=o!==t&&!gi(t),l=o[e];if(l!==bb[e]){const p=l.apply(t,s);return a?rr(p):p}let h=n;o!==t&&(a?h=function(p,v){return n.call(this,rr(p),v,t)}:n.length>2&&(h=function(p,v){return n.call(this,p,v,t)}));const d=l.call(o,h,r);return a&&i?i(d):d}function Um(t,e,n,r){const i=wf(t);let s=n;return i!==t&&(gi(t)?n.length>3&&(s=function(o,a,l){return n.call(this,o,a,l,t)}):s=function(o,a,l){return n.call(this,o,rr(a),l,t)}),i[e](s,...r)}function yd(t,e,n){const r=Kt(t);mr(r,"iterate",uu);const i=r[e](...n);return(i===-1||i===!1)&&rg(n[0])?(n[0]=Kt(n[0]),r[e](...n)):i}function Dc(t,e,n=[]){Js(),Yp();const r=Kt(t)[e].apply(t,n);return Xp(),Qs(),r}const wb=$p("__proto__,__v_isRef,__isVue"),O2=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(fs));function Ab(t){fs(t)||(t=String(t));const e=Kt(this);return mr(e,"has",t),e.hasOwnProperty(t)}class F2{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const i=this._isReadonly,s=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return s;if(n==="__v_raw")return r===(i?s?Cb:j2:s?U2:V2).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=dt(e);if(!i){let l;if(o&&(l=_b[n]))return l;if(n==="hasOwnProperty")return Ab}const a=Reflect.get(e,n,wr(e)?e:r);return(fs(n)?O2.has(n):wb(n))||(i||mr(e,"get",n),s)?a:wr(a)?o&&Jp(n)?a:a.value:fn(a)?i?q2(a):cc(a):a}}class M2 extends F2{constructor(e=!1){super(!1,e)}set(e,n,r,i){let s=e[n];if(!this._isShallow){const l=ta(s);if(!gi(r)&&!ta(r)&&(s=Kt(s),r=Kt(r)),!dt(e)&&wr(s)&&!wr(r))return l?!1:(s.value=r,!0)}const o=dt(e)&&Jp(n)?Number(n)<e.length:Jt(e,n),a=Reflect.set(e,n,r,wr(e)?e:i);return e===Kt(i)&&(o?Qo(r,s)&&qs(e,"set",n,r):qs(e,"add",n,r)),a}deleteProperty(e,n){const r=Jt(e,n);e[n];const i=Reflect.deleteProperty(e,n);return i&&r&&qs(e,"delete",n,void 0),i}has(e,n){const r=Reflect.has(e,n);return(!fs(n)||!O2.has(n))&&mr(e,"has",n),r}ownKeys(e){return mr(e,"iterate",dt(e)?"length":Fa),Reflect.ownKeys(e)}}class Ib extends F2{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const Eb=new M2,Tb=new Ib,Sb=new M2(!0);const Zd=t=>t,uh=t=>Reflect.getPrototypeOf(t);function xb(t,e,n){return function(...r){const i=this.__v_raw,s=Kt(i),o=Ml(s),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,h=i[t](...r),d=n?Zd:e?Hh:rr;return!e&&mr(s,"iterate",l?Xd:Fa),{next(){const{value:p,done:v}=h.next();return v?{value:p,done:v}:{value:a?[d(p[0]),d(p[1])]:d(p),done:v}},[Symbol.iterator](){return this}}}}function hh(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function Pb(t,e){const n={get(i){const s=this.__v_raw,o=Kt(s),a=Kt(i);t||(Qo(i,a)&&mr(o,"get",i),mr(o,"get",a));const{has:l}=uh(o),h=e?Zd:t?Hh:rr;if(l.call(o,i))return h(s.get(i));if(l.call(o,a))return h(s.get(a));s!==o&&s.get(i)},get size(){const i=this.__v_raw;return!t&&mr(Kt(i),"iterate",Fa),Reflect.get(i,"size",i)},has(i){const s=this.__v_raw,o=Kt(s),a=Kt(i);return t||(Qo(i,a)&&mr(o,"has",i),mr(o,"has",a)),i===a?s.has(i):s.has(i)||s.has(a)},forEach(i,s){const o=this,a=o.__v_raw,l=Kt(a),h=e?Zd:t?Hh:rr;return!t&&mr(l,"iterate",Fa),a.forEach((d,p)=>i.call(s,h(d),h(p),o))}};return Ar(n,t?{add:hh("add"),set:hh("set"),delete:hh("delete"),clear:hh("clear")}:{add(i){!e&&!gi(i)&&!ta(i)&&(i=Kt(i));const s=Kt(this);return uh(s).has.call(s,i)||(s.add(i),qs(s,"add",i,i)),this},set(i,s){!e&&!gi(s)&&!ta(s)&&(s=Kt(s));const o=Kt(this),{has:a,get:l}=uh(o);let h=a.call(o,i);h||(i=Kt(i),h=a.call(o,i));const d=l.call(o,i);return o.set(i,s),h?Qo(s,d)&&qs(o,"set",i,s):qs(o,"add",i,s),this},delete(i){const s=Kt(this),{has:o,get:a}=uh(s);let l=o.call(s,i);l||(i=Kt(i),l=o.call(s,i)),a&&a.call(s,i);const h=s.delete(i);return l&&qs(s,"delete",i,void 0),h},clear(){const i=Kt(this),s=i.size!==0,o=i.clear();return s&&qs(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=xb(i,t,e)}),n}function tg(t,e){const n=Pb(t,e);return(r,i,s)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?r:Reflect.get(Jt(n,i)&&i in r?n:r,i,s)}const Rb={get:tg(!1,!1)},Nb={get:tg(!1,!0)},Lb={get:tg(!0,!1)};const V2=new WeakMap,U2=new WeakMap,j2=new WeakMap,Cb=new WeakMap;function kb(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Db(t){return t.__v_skip||!Object.isExtensible(t)?0:kb(sb(t))}function cc(t){return ta(t)?t:ng(t,!1,Eb,Rb,V2)}function B2(t){return ng(t,!1,Sb,Nb,U2)}function q2(t){return ng(t,!0,Tb,Lb,j2)}function ng(t,e,n,r,i){if(!fn(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=Db(t);if(s===0)return t;const o=i.get(t);if(o)return o;const a=new Proxy(t,s===2?r:n);return i.set(t,a),a}function Vl(t){return ta(t)?Vl(t.__v_raw):!!(t&&t.__v_isReactive)}function ta(t){return!!(t&&t.__v_isReadonly)}function gi(t){return!!(t&&t.__v_isShallow)}function rg(t){return t?!!t.__v_raw:!1}function Kt(t){const e=t&&t.__v_raw;return e?Kt(e):t}function H2(t){return!Jt(t,"__v_skip")&&Object.isExtensible(t)&&Jd(t,"__v_skip",!0),t}const rr=t=>fn(t)?cc(t):t,Hh=t=>fn(t)?q2(t):t;function wr(t){return t?t.__v_isRef===!0:!1}function It(t){return z2(t,!1)}function Ob(t){return z2(t,!0)}function z2(t,e){return wr(t)?t:new Fb(t,e)}class Fb{constructor(e,n){this.dep=new eg,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Kt(e),this._value=n?e:rr(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||gi(e)||ta(e);e=r?e:Kt(e),Qo(e,n)&&(this._rawValue=e,this._value=r?e:rr(e),this.dep.trigger())}}function qt(t){return wr(t)?t.value:t}const Mb={get:(t,e,n)=>e==="__v_raw"?t:qt(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return wr(i)&&!wr(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function G2(t){return Vl(t)?t:new Proxy(t,Mb)}class Vb{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new eg(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=cu-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&hn!==this)return R2(this,!0),!0}get value(){const e=this.dep.track();return C2(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function Ub(t,e,n=!1){let r,i;return Tt(t)?r=t:(r=t.get,i=t.set),new Vb(r,i,n)}const fh={},zh=new WeakMap;let La;function jb(t,e=!1,n=La){if(n){let r=zh.get(n);r||zh.set(n,r=[]),r.push(t)}}function Bb(t,e,n=an){const{immediate:r,deep:i,once:s,scheduler:o,augmentJob:a,call:l}=n,h=Z=>i?Z:gi(Z)||i===!1||i===0?Hs(Z,1):Hs(Z);let d,p,v,g,L=!1,P=!1;if(wr(t)?(p=()=>t.value,L=gi(t)):Vl(t)?(p=()=>h(t),L=!0):dt(t)?(P=!0,L=t.some(Z=>Vl(Z)||gi(Z)),p=()=>t.map(Z=>{if(wr(Z))return Z.value;if(Vl(Z))return h(Z);if(Tt(Z))return l?l(Z,2):Z()})):Tt(t)?e?p=l?()=>l(t,2):t:p=()=>{if(v){Js();try{v()}finally{Qs()}}const Z=La;La=d;try{return l?l(t,3,[g]):t(g)}finally{La=Z}}:p=os,e&&i){const Z=p,fe=i===!0?1/0:i;p=()=>Hs(Z(),fe)}const j=mb(),x=()=>{d.stop(),j&&j.active&&Kp(j.effects,d)};if(s&&e){const Z=e;e=(...fe)=>{Z(...fe),x()}}let U=P?new Array(t.length).fill(fh):fh;const J=Z=>{if(!(!(d.flags&1)||!d.dirty&&!Z))if(e){const fe=d.run();if(i||L||(P?fe.some((Ie,T)=>Qo(Ie,U[T])):Qo(fe,U))){v&&v();const Ie=La;La=d;try{const T=[fe,U===fh?void 0:P&&U[0]===fh?[]:U,g];U=fe,l?l(e,3,T):e(...T)}finally{La=Ie}}}else d.run()};return a&&a(J),d=new x2(p),d.scheduler=o?()=>o(J,!1):J,g=Z=>jb(Z,!1,d),v=d.onStop=()=>{const Z=zh.get(d);if(Z){if(l)l(Z,4);else for(const fe of Z)fe();zh.delete(d)}},e?r?J(!0):U=d.run():o?o(J.bind(null,!0),!0):d.run(),x.pause=d.pause.bind(d),x.resume=d.resume.bind(d),x.stop=x,x}function Hs(t,e=1/0,n){if(e<=0||!fn(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,wr(t))Hs(t.value,e,n);else if(dt(t))for(let r=0;r<t.length;r++)Hs(t[r],e,n);else if(lc(t)||Ml(t))t.forEach(r=>{Hs(r,e,n)});else if(A2(t)){for(const r in t)Hs(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&Hs(t[r],e,n)}return t}/**
* @vue/runtime-core v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function xu(t,e,n,r){try{return r?t(...r):t()}catch(i){Af(i,e,n)}}function ds(t,e,n,r){if(Tt(t)){const i=xu(t,e,n,r);return i&&b2(i)&&i.catch(s=>{Af(s,e,n)}),i}if(dt(t)){const i=[];for(let s=0;s<t.length;s++)i.push(ds(t[s],e,n,r));return i}}function Af(t,e,n,r=!0){const i=e?e.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||an;if(e){let a=e.parent;const l=e.proxy,h=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const d=a.ec;if(d){for(let p=0;p<d.length;p++)if(d[p](t,l,h)===!1)return}a=a.parent}if(s){Js(),xu(s,null,10,[t,l,h]),Qs();return}}qb(t,n,i,r,o)}function qb(t,e,n,r=!0,i=!1){if(i)throw t;console.error(t)}const Cr=[];let ns=-1;const Ul=[];let Fo=null,Sl=0;const $2=Promise.resolve();let Gh=null;function If(t){const e=Gh||$2;return t?e.then(this?t.bind(this):t):e}function Hb(t){let e=ns+1,n=Cr.length;for(;e<n;){const r=e+n>>>1,i=Cr[r],s=hu(i);s<t||s===t&&i.flags&2?e=r+1:n=r}return e}function ig(t){if(!(t.flags&1)){const e=hu(t),n=Cr[Cr.length-1];!n||!(t.flags&2)&&e>=hu(n)?Cr.push(t):Cr.splice(Hb(e),0,t),t.flags|=1,W2()}}function W2(){Gh||(Gh=$2.then(J2))}function zb(t){dt(t)?Ul.push(...t):Fo&&t.id===-1?Fo.splice(Sl+1,0,t):t.flags&1||(Ul.push(t),t.flags|=1),W2()}function jm(t,e,n=ns+1){for(;n<Cr.length;n++){const r=Cr[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;Cr.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function K2(t){if(Ul.length){const e=[...new Set(Ul)].sort((n,r)=>hu(n)-hu(r));if(Ul.length=0,Fo){Fo.push(...e);return}for(Fo=e,Sl=0;Sl<Fo.length;Sl++){const n=Fo[Sl];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Fo=null,Sl=0}}const hu=t=>t.id==null?t.flags&2?-1:1/0:t.id;function J2(t){try{for(ns=0;ns<Cr.length;ns++){const e=Cr[ns];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),xu(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;ns<Cr.length;ns++){const e=Cr[ns];e&&(e.flags&=-2)}ns=-1,Cr.length=0,K2(),Gh=null,(Cr.length||Ul.length)&&J2()}}let ei=null,Q2=null;function $h(t){const e=ei;return ei=t,Q2=t&&t.type.__scopeId||null,e}function Gb(t,e=ei,n){if(!e||t._n)return t;const r=(...i)=>{r._d&&Qm(-1);const s=$h(e);let o;try{o=t(...i)}finally{$h(s),r._d&&Qm(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function $n(t,e){if(ei===null)return t;const n=xf(ei),r=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[s,o,a,l=an]=e[i];s&&(Tt(s)&&(s={mounted:s,updated:s}),s.deep&&Hs(o),r.push({dir:s,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function Ra(t,e,n,r){const i=t.dirs,s=e&&e.dirs;for(let o=0;o<i.length;o++){const a=i[o];s&&(a.oldValue=s[o].value);let l=a.dir[r];l&&(Js(),ds(l,n,8,[t.el,a,t,e]),Qs())}}const $b=Symbol("_vte"),Wb=t=>t.__isTeleport;function sg(t,e){t.shapeFlag&6&&t.component?(t.transition=e,sg(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}/*! #__NO_SIDE_EFFECTS__ */function Y2(t,e){return Tt(t)?Ar({name:t.name},e,{setup:t}):t}function X2(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function Jc(t,e,n,r,i=!1){if(dt(t)){t.forEach((L,P)=>Jc(L,e&&(dt(e)?e[P]:e),n,r,i));return}if(Qc(r)&&!i){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Jc(t,e,n,r.component.subTree);return}const s=r.shapeFlag&4?xf(r.component):r.el,o=i?null:s,{i:a,r:l}=t,h=e&&e.r,d=a.refs===an?a.refs={}:a.refs,p=a.setupState,v=Kt(p),g=p===an?()=>!1:L=>Jt(v,L);if(h!=null&&h!==l&&(Un(h)?(d[h]=null,g(h)&&(p[h]=null)):wr(h)&&(h.value=null)),Tt(l))xu(l,a,12,[o,d]);else{const L=Un(l),P=wr(l);if(L||P){const j=()=>{if(t.f){const x=L?g(l)?p[l]:d[l]:l.value;i?dt(x)&&Kp(x,s):dt(x)?x.includes(s)||x.push(s):L?(d[l]=[s],g(l)&&(p[l]=d[l])):(l.value=[s],t.k&&(d[t.k]=l.value))}else L?(d[l]=o,g(l)&&(p[l]=o)):P&&(l.value=o,t.k&&(d[t.k]=o))};o?(j.id=-1,Xr(j,n)):j()}}}_f().requestIdleCallback;_f().cancelIdleCallback;const Qc=t=>!!t.type.__asyncLoader,Z2=t=>t.type.__isKeepAlive;function Kb(t,e){e5(t,"a",e)}function Jb(t,e){e5(t,"da",e)}function e5(t,e,n=vr){const r=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(Ef(e,r,n),n){let i=n.parent;for(;i&&i.parent;)Z2(i.parent.vnode)&&Qb(r,e,n,i),i=i.parent}}function Qb(t,e,n,r){const i=Ef(e,t,r,!0);t5(()=>{Kp(r[e],i)},n)}function Ef(t,e,n=vr,r=!1){if(n){const i=n[t]||(n[t]=[]),s=e.__weh||(e.__weh=(...o)=>{Js();const a=Pu(n),l=ds(e,n,t,o);return a(),Qs(),l});return r?i.unshift(s):i.push(s),s}}const to=t=>(e,n=vr)=>{(!du||t==="sp")&&Ef(t,(...r)=>e(...r),n)},Yb=to("bm"),uc=to("m"),Xb=to("bu"),Zb=to("u"),ew=to("bum"),t5=to("um"),tw=to("sp"),nw=to("rtg"),rw=to("rtc");function iw(t,e=vr){Ef("ec",t,e)}const sw="components";function og(t,e){return aw(sw,t,!0,e)||t}const ow=Symbol.for("v-ndc");function aw(t,e,n=!0,r=!1){const i=ei||vr;if(i){const s=i.type;{const a=Ww(s,!1);if(a&&(a===e||a===mi(e)||a===vf(mi(e))))return s}const o=Bm(i[t]||s[t],e)||Bm(i.appContext[t],e);return!o&&r?s:o}}function Bm(t,e){return t&&(t[e]||t[mi(e)]||t[vf(mi(e))])}function qn(t,e,n,r){let i;const s=n,o=dt(t);if(o||Un(t)){const a=o&&Vl(t);let l=!1,h=!1;a&&(l=!gi(t),h=ta(t),t=wf(t)),i=new Array(t.length);for(let d=0,p=t.length;d<p;d++)i[d]=e(l?h?Hh(rr(t[d])):rr(t[d]):t[d],d,void 0,s)}else if(typeof t=="number"){i=new Array(t);for(let a=0;a<t;a++)i[a]=e(a+1,a,void 0,s)}else if(fn(t))if(t[Symbol.iterator])i=Array.from(t,(a,l)=>e(a,l,void 0,s));else{const a=Object.keys(t);i=new Array(a.length);for(let l=0,h=a.length;l<h;l++){const d=a[l];i[l]=e(t[d],d,l,s)}}else i=[];return i}const ep=t=>t?A5(t)?xf(t):ep(t.parent):null,Yc=Ar(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>ep(t.parent),$root:t=>ep(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>r5(t),$forceUpdate:t=>t.f||(t.f=()=>{ig(t.update)}),$nextTick:t=>t.n||(t.n=If.bind(t.proxy)),$watch:t=>Pw.bind(t)}),vd=(t,e)=>t!==an&&!t.__isScriptSetup&&Jt(t,e),lw={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:i,props:s,accessCache:o,type:a,appContext:l}=t;let h;if(e[0]!=="$"){const g=o[e];if(g!==void 0)switch(g){case 1:return r[e];case 2:return i[e];case 4:return n[e];case 3:return s[e]}else{if(vd(r,e))return o[e]=1,r[e];if(i!==an&&Jt(i,e))return o[e]=2,i[e];if((h=t.propsOptions[0])&&Jt(h,e))return o[e]=3,s[e];if(n!==an&&Jt(n,e))return o[e]=4,n[e];tp&&(o[e]=0)}}const d=Yc[e];let p,v;if(d)return e==="$attrs"&&mr(t.attrs,"get",""),d(t);if((p=a.__cssModules)&&(p=p[e]))return p;if(n!==an&&Jt(n,e))return o[e]=4,n[e];if(v=l.config.globalProperties,Jt(v,e))return v[e]},set({_:t},e,n){const{data:r,setupState:i,ctx:s}=t;return vd(i,e)?(i[e]=n,!0):r!==an&&Jt(r,e)?(r[e]=n,!0):Jt(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,propsOptions:s}},o){let a;return!!n[o]||t!==an&&Jt(t,o)||vd(e,o)||(a=s[0])&&Jt(a,o)||Jt(r,o)||Jt(Yc,o)||Jt(i.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Jt(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function qm(t){return dt(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let tp=!0;function cw(t){const e=r5(t),n=t.proxy,r=t.ctx;tp=!1,e.beforeCreate&&Hm(e.beforeCreate,t,"bc");const{data:i,computed:s,methods:o,watch:a,provide:l,inject:h,created:d,beforeMount:p,mounted:v,beforeUpdate:g,updated:L,activated:P,deactivated:j,beforeDestroy:x,beforeUnmount:U,destroyed:J,unmounted:Z,render:fe,renderTracked:Ie,renderTriggered:T,errorCaptured:S,serverPrefetch:O,expose:F,inheritAttrs:w,components:E,directives:I,filters:z}=e;if(h&&uw(h,r,null),o)for(const ge in o){const ce=o[ge];Tt(ce)&&(r[ge]=ce.bind(n))}if(i){const ge=i.call(n,n);fn(ge)&&(t.data=cc(ge))}if(tp=!0,s)for(const ge in s){const ce=s[ge],xe=Tt(ce)?ce.bind(n,n):Tt(ce.get)?ce.get.bind(n,n):os,Pe=!Tt(ce)&&Tt(ce.set)?ce.set.bind(n):os,Qe=zt({get:xe,set:Pe});Object.defineProperty(r,ge,{enumerable:!0,configurable:!0,get:()=>Qe.value,set:C=>Qe.value=C})}if(a)for(const ge in a)n5(a[ge],r,n,ge);if(l){const ge=Tt(l)?l.call(n):l;Reflect.ownKeys(ge).forEach(ce=>{Th(ce,ge[ce])})}d&&Hm(d,t,"c");function ae(ge,ce){dt(ce)?ce.forEach(xe=>ge(xe.bind(n))):ce&&ge(ce.bind(n))}if(ae(Yb,p),ae(uc,v),ae(Xb,g),ae(Zb,L),ae(Kb,P),ae(Jb,j),ae(iw,S),ae(rw,Ie),ae(nw,T),ae(ew,U),ae(t5,Z),ae(tw,O),dt(F))if(F.length){const ge=t.exposed||(t.exposed={});F.forEach(ce=>{Object.defineProperty(ge,ce,{get:()=>n[ce],set:xe=>n[ce]=xe})})}else t.exposed||(t.exposed={});fe&&t.render===os&&(t.render=fe),w!=null&&(t.inheritAttrs=w),E&&(t.components=E),I&&(t.directives=I),O&&X2(t)}function uw(t,e,n=os){dt(t)&&(t=np(t));for(const r in t){const i=t[r];let s;fn(i)?"default"in i?s=Di(i.from||r,i.default,!0):s=Di(i.from||r):s=Di(i),wr(s)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[r]=s}}function Hm(t,e,n){ds(dt(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function n5(t,e,n,r){let i=r.includes(".")?m5(n,r):()=>n[r];if(Un(t)){const s=e[t];Tt(s)&&Xc(i,s)}else if(Tt(t))Xc(i,t.bind(n));else if(fn(t))if(dt(t))t.forEach(s=>n5(s,e,n,r));else{const s=Tt(t.handler)?t.handler.bind(n):e[t.handler];Tt(s)&&Xc(i,s,t)}}function r5(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=t.appContext,a=s.get(e);let l;return a?l=a:!i.length&&!n&&!r?l=e:(l={},i.length&&i.forEach(h=>Wh(l,h,o,!0)),Wh(l,e,o)),fn(e)&&s.set(e,l),l}function Wh(t,e,n,r=!1){const{mixins:i,extends:s}=e;s&&Wh(t,s,n,!0),i&&i.forEach(o=>Wh(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=hw[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const hw={data:zm,props:Gm,emits:Gm,methods:Bc,computed:Bc,beforeCreate:Lr,created:Lr,beforeMount:Lr,mounted:Lr,beforeUpdate:Lr,updated:Lr,beforeDestroy:Lr,beforeUnmount:Lr,destroyed:Lr,unmounted:Lr,activated:Lr,deactivated:Lr,errorCaptured:Lr,serverPrefetch:Lr,components:Bc,directives:Bc,watch:dw,provide:zm,inject:fw};function zm(t,e){return e?t?function(){return Ar(Tt(t)?t.call(this,this):t,Tt(e)?e.call(this,this):e)}:e:t}function fw(t,e){return Bc(np(t),np(e))}function np(t){if(dt(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Lr(t,e){return t?[...new Set([].concat(t,e))]:e}function Bc(t,e){return t?Ar(Object.create(null),t,e):e}function Gm(t,e){return t?dt(t)&&dt(e)?[...new Set([...t,...e])]:Ar(Object.create(null),qm(t),qm(e??{})):e}function dw(t,e){if(!t)return e;if(!e)return t;const n=Ar(Object.create(null),t);for(const r in e)n[r]=Lr(t[r],e[r]);return n}function i5(){return{app:null,config:{isNativeTag:rb,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let pw=0;function gw(t,e){return function(r,i=null){Tt(r)||(r=Ar({},r)),i!=null&&!fn(i)&&(i=null);const s=i5(),o=new WeakSet,a=[];let l=!1;const h=s.app={_uid:pw++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:Jw,get config(){return s.config},set config(d){},use(d,...p){return o.has(d)||(d&&Tt(d.install)?(o.add(d),d.install(h,...p)):Tt(d)&&(o.add(d),d(h,...p))),h},mixin(d){return s.mixins.includes(d)||s.mixins.push(d),h},component(d,p){return p?(s.components[d]=p,h):s.components[d]},directive(d,p){return p?(s.directives[d]=p,h):s.directives[d]},mount(d,p,v){if(!l){const g=h._ceVNode||kr(r,i);return g.appContext=s,v===!0?v="svg":v===!1&&(v=void 0),t(g,d,v),l=!0,h._container=d,d.__vue_app__=h,xf(g.component)}},onUnmount(d){a.push(d)},unmount(){l&&(ds(a,h._instance,16),t(null,h._container),delete h._container.__vue_app__)},provide(d,p){return s.provides[d]=p,h},runWithContext(d){const p=jl;jl=h;try{return d()}finally{jl=p}}};return h}}let jl=null;function Th(t,e){if(vr){let n=vr.provides;const r=vr.parent&&vr.parent.provides;r===n&&(n=vr.provides=Object.create(r)),n[t]=e}}function Di(t,e,n=!1){const r=vr||ei;if(r||jl){let i=jl?jl._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&t in i)return i[t];if(arguments.length>1)return n&&Tt(e)?e.call(r&&r.proxy):e}}const s5={},o5=()=>Object.create(s5),a5=t=>Object.getPrototypeOf(t)===s5;function mw(t,e,n,r=!1){const i={},s=o5();t.propsDefaults=Object.create(null),l5(t,e,i,s);for(const o in t.propsOptions[0])o in i||(i[o]=void 0);n?t.props=r?i:B2(i):t.type.props?t.props=i:t.props=s,t.attrs=s}function yw(t,e,n,r){const{props:i,attrs:s,vnode:{patchFlag:o}}=t,a=Kt(i),[l]=t.propsOptions;let h=!1;if((r||o>0)&&!(o&16)){if(o&8){const d=t.vnode.dynamicProps;for(let p=0;p<d.length;p++){let v=d[p];if(Tf(t.emitsOptions,v))continue;const g=e[v];if(l)if(Jt(s,v))g!==s[v]&&(s[v]=g,h=!0);else{const L=mi(v);i[L]=rp(l,a,L,g,t,!1)}else g!==s[v]&&(s[v]=g,h=!0)}}}else{l5(t,e,i,s)&&(h=!0);let d;for(const p in a)(!e||!Jt(e,p)&&((d=Wa(p))===p||!Jt(e,d)))&&(l?n&&(n[p]!==void 0||n[d]!==void 0)&&(i[p]=rp(l,a,p,void 0,t,!0)):delete i[p]);if(s!==a)for(const p in s)(!e||!Jt(e,p))&&(delete s[p],h=!0)}h&&qs(t.attrs,"set","")}function l5(t,e,n,r){const[i,s]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if($c(l))continue;const h=e[l];let d;i&&Jt(i,d=mi(l))?!s||!s.includes(d)?n[d]=h:(a||(a={}))[d]=h:Tf(t.emitsOptions,l)||(!(l in r)||h!==r[l])&&(r[l]=h,o=!0)}if(s){const l=Kt(n),h=a||an;for(let d=0;d<s.length;d++){const p=s[d];n[p]=rp(i,l,p,h[p],t,!Jt(h,p))}}return o}function rp(t,e,n,r,i,s){const o=t[n];if(o!=null){const a=Jt(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Tt(l)){const{propsDefaults:h}=i;if(n in h)r=h[n];else{const d=Pu(i);r=h[n]=l.call(null,e),d()}}else r=l;i.ce&&i.ce._setProp(n,r)}o[0]&&(s&&!a?r=!1:o[1]&&(r===""||r===Wa(n))&&(r=!0))}return r}const vw=new WeakMap;function c5(t,e,n=!1){const r=n?vw:e.propsCache,i=r.get(t);if(i)return i;const s=t.props,o={},a=[];let l=!1;if(!Tt(t)){const d=p=>{l=!0;const[v,g]=c5(p,e,!0);Ar(o,v),g&&a.push(...g)};!n&&e.mixins.length&&e.mixins.forEach(d),t.extends&&d(t.extends),t.mixins&&t.mixins.forEach(d)}if(!s&&!l)return fn(t)&&r.set(t,Fl),Fl;if(dt(s))for(let d=0;d<s.length;d++){const p=mi(s[d]);$m(p)&&(o[p]=an)}else if(s)for(const d in s){const p=mi(d);if($m(p)){const v=s[d],g=o[p]=dt(v)||Tt(v)?{type:v}:Ar({},v),L=g.type;let P=!1,j=!0;if(dt(L))for(let x=0;x<L.length;++x){const U=L[x],J=Tt(U)&&U.name;if(J==="Boolean"){P=!0;break}else J==="String"&&(j=!1)}else P=Tt(L)&&L.name==="Boolean";g[0]=P,g[1]=j,(P||Jt(g,"default"))&&a.push(p)}}const h=[o,a];return fn(t)&&r.set(t,h),h}function $m(t){return t[0]!=="$"&&!$c(t)}const ag=t=>t[0]==="_"||t==="$stable",lg=t=>dt(t)?t.map(rs):[rs(t)],_w=(t,e,n)=>{if(e._n)return e;const r=Gb((...i)=>lg(e(...i)),n);return r._c=!1,r},u5=(t,e,n)=>{const r=t._ctx;for(const i in t){if(ag(i))continue;const s=t[i];if(Tt(s))e[i]=_w(i,s,r);else if(s!=null){const o=lg(s);e[i]=()=>o}}},h5=(t,e)=>{const n=lg(e);t.slots.default=()=>n},f5=(t,e,n)=>{for(const r in e)(n||!ag(r))&&(t[r]=e[r])},bw=(t,e,n)=>{const r=t.slots=o5();if(t.vnode.shapeFlag&32){const i=e.__;i&&Jd(r,"__",i,!0);const s=e._;s?(f5(r,e,n),n&&Jd(r,"_",s,!0)):u5(e,r)}else e&&h5(t,e)},ww=(t,e,n)=>{const{vnode:r,slots:i}=t;let s=!0,o=an;if(r.shapeFlag&32){const a=e._;a?n&&a===1?s=!1:f5(i,e,n):(s=!e.$stable,u5(e,i)),o=e}else e&&(h5(t,e),o={default:1});if(s)for(const a in i)!ag(a)&&o[a]==null&&delete i[a]},Xr=Ow;function Aw(t){return Iw(t)}function Iw(t,e){const n=_f();n.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:o,createText:a,createComment:l,setText:h,setElementText:d,parentNode:p,nextSibling:v,setScopeId:g=os,insertStaticContent:L}=t,P=($,W,ie,te=null,H=null,Te=null,Re=void 0,ve=null,be=!!W.dynamicChildren)=>{if($===W)return;$&&!Oc($,W)&&(te=Y($),C($,H,Te,!0),$=null),W.patchFlag===-2&&(be=!1,W.dynamicChildren=null);const{type:_e,ref:ke,shapeFlag:Le}=W;switch(_e){case Sf:j($,W,ie,te);break;case na:x($,W,ie,te);break;case bd:$==null&&U(W,ie,te,Re);break;case nn:E($,W,ie,te,H,Te,Re,ve,be);break;default:Le&1?fe($,W,ie,te,H,Te,Re,ve,be):Le&6?I($,W,ie,te,H,Te,Re,ve,be):(Le&64||Le&128)&&_e.process($,W,ie,te,H,Te,Re,ve,be,Se)}ke!=null&&H?Jc(ke,$&&$.ref,Te,W||$,!W):ke==null&&$&&$.ref!=null&&Jc($.ref,null,Te,$,!0)},j=($,W,ie,te)=>{if($==null)r(W.el=a(W.children),ie,te);else{const H=W.el=$.el;W.children!==$.children&&h(H,W.children)}},x=($,W,ie,te)=>{$==null?r(W.el=l(W.children||""),ie,te):W.el=$.el},U=($,W,ie,te)=>{[$.el,$.anchor]=L($.children,W,ie,te,$.el,$.anchor)},J=({el:$,anchor:W},ie,te)=>{let H;for(;$&&$!==W;)H=v($),r($,ie,te),$=H;r(W,ie,te)},Z=({el:$,anchor:W})=>{let ie;for(;$&&$!==W;)ie=v($),i($),$=ie;i(W)},fe=($,W,ie,te,H,Te,Re,ve,be)=>{W.type==="svg"?Re="svg":W.type==="math"&&(Re="mathml"),$==null?Ie(W,ie,te,H,Te,Re,ve,be):O($,W,H,Te,Re,ve,be)},Ie=($,W,ie,te,H,Te,Re,ve)=>{let be,_e;const{props:ke,shapeFlag:Le,transition:He,dirs:We}=$;if(be=$.el=o($.type,Te,ke&&ke.is,ke),Le&8?d(be,$.children):Le&16&&S($.children,be,null,te,H,_d($,Te),Re,ve),We&&Ra($,null,te,"created"),T(be,$,$.scopeId,Re,te),ke){for(const et in ke)et!=="value"&&!$c(et)&&s(be,et,null,ke[et],Te,te);"value"in ke&&s(be,"value",null,ke.value,Te),(_e=ke.onVnodeBeforeMount)&&Zi(_e,te,$)}We&&Ra($,null,te,"beforeMount");const Ke=Ew(H,He);Ke&&He.beforeEnter(be),r(be,W,ie),((_e=ke&&ke.onVnodeMounted)||Ke||We)&&Xr(()=>{_e&&Zi(_e,te,$),Ke&&He.enter(be),We&&Ra($,null,te,"mounted")},H)},T=($,W,ie,te,H)=>{if(ie&&g($,ie),te)for(let Te=0;Te<te.length;Te++)g($,te[Te]);if(H){let Te=H.subTree;if(W===Te||v5(Te.type)&&(Te.ssContent===W||Te.ssFallback===W)){const Re=H.vnode;T($,Re,Re.scopeId,Re.slotScopeIds,H.parent)}}},S=($,W,ie,te,H,Te,Re,ve,be=0)=>{for(let _e=be;_e<$.length;_e++){const ke=$[_e]=ve?Mo($[_e]):rs($[_e]);P(null,ke,W,ie,te,H,Te,Re,ve)}},O=($,W,ie,te,H,Te,Re)=>{const ve=W.el=$.el;let{patchFlag:be,dynamicChildren:_e,dirs:ke}=W;be|=$.patchFlag&16;const Le=$.props||an,He=W.props||an;let We;if(ie&&Na(ie,!1),(We=He.onVnodeBeforeUpdate)&&Zi(We,ie,W,$),ke&&Ra(W,$,ie,"beforeUpdate"),ie&&Na(ie,!0),(Le.innerHTML&&He.innerHTML==null||Le.textContent&&He.textContent==null)&&d(ve,""),_e?F($.dynamicChildren,_e,ve,ie,te,_d(W,H),Te):Re||ce($,W,ve,null,ie,te,_d(W,H),Te,!1),be>0){if(be&16)w(ve,Le,He,ie,H);else if(be&2&&Le.class!==He.class&&s(ve,"class",null,He.class,H),be&4&&s(ve,"style",Le.style,He.style,H),be&8){const Ke=W.dynamicProps;for(let et=0;et<Ke.length;et++){const at=Ke[et],it=Le[at],ct=He[at];(ct!==it||at==="value")&&s(ve,at,it,ct,H,ie)}}be&1&&$.children!==W.children&&d(ve,W.children)}else!Re&&_e==null&&w(ve,Le,He,ie,H);((We=He.onVnodeUpdated)||ke)&&Xr(()=>{We&&Zi(We,ie,W,$),ke&&Ra(W,$,ie,"updated")},te)},F=($,W,ie,te,H,Te,Re)=>{for(let ve=0;ve<W.length;ve++){const be=$[ve],_e=W[ve],ke=be.el&&(be.type===nn||!Oc(be,_e)||be.shapeFlag&198)?p(be.el):ie;P(be,_e,ke,null,te,H,Te,Re,!0)}},w=($,W,ie,te,H)=>{if(W!==ie){if(W!==an)for(const Te in W)!$c(Te)&&!(Te in ie)&&s($,Te,W[Te],null,H,te);for(const Te in ie){if($c(Te))continue;const Re=ie[Te],ve=W[Te];Re!==ve&&Te!=="value"&&s($,Te,ve,Re,H,te)}"value"in ie&&s($,"value",W.value,ie.value,H)}},E=($,W,ie,te,H,Te,Re,ve,be)=>{const _e=W.el=$?$.el:a(""),ke=W.anchor=$?$.anchor:a("");let{patchFlag:Le,dynamicChildren:He,slotScopeIds:We}=W;We&&(ve=ve?ve.concat(We):We),$==null?(r(_e,ie,te),r(ke,ie,te),S(W.children||[],ie,ke,H,Te,Re,ve,be)):Le>0&&Le&64&&He&&$.dynamicChildren?(F($.dynamicChildren,He,ie,H,Te,Re,ve),(W.key!=null||H&&W===H.subTree)&&d5($,W,!0)):ce($,W,ie,ke,H,Te,Re,ve,be)},I=($,W,ie,te,H,Te,Re,ve,be)=>{W.slotScopeIds=ve,$==null?W.shapeFlag&512?H.ctx.activate(W,ie,te,Re,be):z(W,ie,te,H,Te,Re,be):re($,W,be)},z=($,W,ie,te,H,Te,Re)=>{const ve=$.component=qw($,te,H);if(Z2($)&&(ve.ctx.renderer=Se),Hw(ve,!1,Re),ve.asyncDep){if(H&&H.registerDep(ve,ae,Re),!$.el){const be=ve.subTree=kr(na);x(null,be,W,ie)}}else ae(ve,$,W,ie,H,Te,Re)},re=($,W,ie)=>{const te=W.component=$.component;if(kw($,W,ie))if(te.asyncDep&&!te.asyncResolved){ge(te,W,ie);return}else te.next=W,te.update();else W.el=$.el,te.vnode=W},ae=($,W,ie,te,H,Te,Re)=>{const ve=()=>{if($.isMounted){let{next:Le,bu:He,u:We,parent:Ke,vnode:et}=$;{const Ft=p5($);if(Ft){Le&&(Le.el=et.el,ge($,Le,Re)),Ft.asyncDep.then(()=>{$.isUnmounted||ve()});return}}let at=Le,it;Na($,!1),Le?(Le.el=et.el,ge($,Le,Re)):Le=et,He&&Eh(He),(it=Le.props&&Le.props.onVnodeBeforeUpdate)&&Zi(it,Ke,Le,et),Na($,!0);const ct=Km($),Ye=$.subTree;$.subTree=ct,P(Ye,ct,p(Ye.el),Y(Ye),$,H,Te),Le.el=ct.el,at===null&&Dw($,ct.el),We&&Xr(We,H),(it=Le.props&&Le.props.onVnodeUpdated)&&Xr(()=>Zi(it,Ke,Le,et),H)}else{let Le;const{el:He,props:We}=W,{bm:Ke,m:et,parent:at,root:it,type:ct}=$,Ye=Qc(W);Na($,!1),Ke&&Eh(Ke),!Ye&&(Le=We&&We.onVnodeBeforeMount)&&Zi(Le,at,W),Na($,!0);{it.ce&&it.ce._def.shadowRoot!==!1&&it.ce._injectChildStyle(ct);const Ft=$.subTree=Km($);P(null,Ft,ie,te,$,H,Te),W.el=Ft.el}if(et&&Xr(et,H),!Ye&&(Le=We&&We.onVnodeMounted)){const Ft=W;Xr(()=>Zi(Le,at,Ft),H)}(W.shapeFlag&256||at&&Qc(at.vnode)&&at.vnode.shapeFlag&256)&&$.a&&Xr($.a,H),$.isMounted=!0,W=ie=te=null}};$.scope.on();const be=$.effect=new x2(ve);$.scope.off();const _e=$.update=be.run.bind(be),ke=$.job=be.runIfDirty.bind(be);ke.i=$,ke.id=$.uid,be.scheduler=()=>ig(ke),Na($,!0),_e()},ge=($,W,ie)=>{W.component=$;const te=$.vnode.props;$.vnode=W,$.next=null,yw($,W.props,te,ie),ww($,W.children,ie),Js(),jm($),Qs()},ce=($,W,ie,te,H,Te,Re,ve,be=!1)=>{const _e=$&&$.children,ke=$?$.shapeFlag:0,Le=W.children,{patchFlag:He,shapeFlag:We}=W;if(He>0){if(He&128){Pe(_e,Le,ie,te,H,Te,Re,ve,be);return}else if(He&256){xe(_e,Le,ie,te,H,Te,Re,ve,be);return}}We&8?(ke&16&&he(_e,H,Te),Le!==_e&&d(ie,Le)):ke&16?We&16?Pe(_e,Le,ie,te,H,Te,Re,ve,be):he(_e,H,Te,!0):(ke&8&&d(ie,""),We&16&&S(Le,ie,te,H,Te,Re,ve,be))},xe=($,W,ie,te,H,Te,Re,ve,be)=>{$=$||Fl,W=W||Fl;const _e=$.length,ke=W.length,Le=Math.min(_e,ke);let He;for(He=0;He<Le;He++){const We=W[He]=be?Mo(W[He]):rs(W[He]);P($[He],We,ie,null,H,Te,Re,ve,be)}_e>ke?he($,H,Te,!0,!1,Le):S(W,ie,te,H,Te,Re,ve,be,Le)},Pe=($,W,ie,te,H,Te,Re,ve,be)=>{let _e=0;const ke=W.length;let Le=$.length-1,He=ke-1;for(;_e<=Le&&_e<=He;){const We=$[_e],Ke=W[_e]=be?Mo(W[_e]):rs(W[_e]);if(Oc(We,Ke))P(We,Ke,ie,null,H,Te,Re,ve,be);else break;_e++}for(;_e<=Le&&_e<=He;){const We=$[Le],Ke=W[He]=be?Mo(W[He]):rs(W[He]);if(Oc(We,Ke))P(We,Ke,ie,null,H,Te,Re,ve,be);else break;Le--,He--}if(_e>Le){if(_e<=He){const We=He+1,Ke=We<ke?W[We].el:te;for(;_e<=He;)P(null,W[_e]=be?Mo(W[_e]):rs(W[_e]),ie,Ke,H,Te,Re,ve,be),_e++}}else if(_e>He)for(;_e<=Le;)C($[_e],H,Te,!0),_e++;else{const We=_e,Ke=_e,et=new Map;for(_e=Ke;_e<=He;_e++){const _t=W[_e]=be?Mo(W[_e]):rs(W[_e]);_t.key!=null&&et.set(_t.key,_e)}let at,it=0;const ct=He-Ke+1;let Ye=!1,Ft=0;const Pt=new Array(ct);for(_e=0;_e<ct;_e++)Pt[_e]=0;for(_e=We;_e<=Le;_e++){const _t=$[_e];if(it>=ct){C(_t,H,Te,!0);continue}let Rt;if(_t.key!=null)Rt=et.get(_t.key);else for(at=Ke;at<=He;at++)if(Pt[at-Ke]===0&&Oc(_t,W[at])){Rt=at;break}Rt===void 0?C(_t,H,Te,!0):(Pt[Rt-Ke]=_e+1,Rt>=Ft?Ft=Rt:Ye=!0,P(_t,W[Rt],ie,null,H,Te,Re,ve,be),it++)}const Qn=Ye?Tw(Pt):Fl;for(at=Qn.length-1,_e=ct-1;_e>=0;_e--){const _t=Ke+_e,Rt=W[_t],Er=_t+1<ke?W[_t+1].el:te;Pt[_e]===0?P(null,Rt,ie,Er,H,Te,Re,ve,be):Ye&&(at<0||_e!==Qn[at]?Qe(Rt,ie,Er,2):at--)}}},Qe=($,W,ie,te,H=null)=>{const{el:Te,type:Re,transition:ve,children:be,shapeFlag:_e}=$;if(_e&6){Qe($.component.subTree,W,ie,te);return}if(_e&128){$.suspense.move(W,ie,te);return}if(_e&64){Re.move($,W,ie,Se);return}if(Re===nn){r(Te,W,ie);for(let Le=0;Le<be.length;Le++)Qe(be[Le],W,ie,te);r($.anchor,W,ie);return}if(Re===bd){J($,W,ie);return}if(te!==2&&_e&1&&ve)if(te===0)ve.beforeEnter(Te),r(Te,W,ie),Xr(()=>ve.enter(Te),H);else{const{leave:Le,delayLeave:He,afterLeave:We}=ve,Ke=()=>{$.ctx.isUnmounted?i(Te):r(Te,W,ie)},et=()=>{Le(Te,()=>{Ke(),We&&We()})};He?He(Te,Ke,et):et()}else r(Te,W,ie)},C=($,W,ie,te=!1,H=!1)=>{const{type:Te,props:Re,ref:ve,children:be,dynamicChildren:_e,shapeFlag:ke,patchFlag:Le,dirs:He,cacheIndex:We}=$;if(Le===-2&&(H=!1),ve!=null&&(Js(),Jc(ve,null,ie,$,!0),Qs()),We!=null&&(W.renderCache[We]=void 0),ke&256){W.ctx.deactivate($);return}const Ke=ke&1&&He,et=!Qc($);let at;if(et&&(at=Re&&Re.onVnodeBeforeUnmount)&&Zi(at,W,$),ke&6)ee($.component,ie,te);else{if(ke&128){$.suspense.unmount(ie,te);return}Ke&&Ra($,null,W,"beforeUnmount"),ke&64?$.type.remove($,W,ie,Se,te):_e&&!_e.hasOnce&&(Te!==nn||Le>0&&Le&64)?he(_e,W,ie,!1,!0):(Te===nn&&Le&384||!H&&ke&16)&&he(be,W,ie),te&&M($)}(et&&(at=Re&&Re.onVnodeUnmounted)||Ke)&&Xr(()=>{at&&Zi(at,W,$),Ke&&Ra($,null,W,"unmounted")},ie)},M=$=>{const{type:W,el:ie,anchor:te,transition:H}=$;if(W===nn){K(ie,te);return}if(W===bd){Z($);return}const Te=()=>{i(ie),H&&!H.persisted&&H.afterLeave&&H.afterLeave()};if($.shapeFlag&1&&H&&!H.persisted){const{leave:Re,delayLeave:ve}=H,be=()=>Re(ie,Te);ve?ve($.el,Te,be):be()}else Te()},K=($,W)=>{let ie;for(;$!==W;)ie=v($),i($),$=ie;i(W)},ee=($,W,ie)=>{const{bum:te,scope:H,job:Te,subTree:Re,um:ve,m:be,a:_e,parent:ke,slots:{__:Le}}=$;Wm(be),Wm(_e),te&&Eh(te),ke&&dt(Le)&&Le.forEach(He=>{ke.renderCache[He]=void 0}),H.stop(),Te&&(Te.flags|=8,C(Re,$,W,ie)),ve&&Xr(ve,W),Xr(()=>{$.isUnmounted=!0},W),W&&W.pendingBranch&&!W.isUnmounted&&$.asyncDep&&!$.asyncResolved&&$.suspenseId===W.pendingId&&(W.deps--,W.deps===0&&W.resolve())},he=($,W,ie,te=!1,H=!1,Te=0)=>{for(let Re=Te;Re<$.length;Re++)C($[Re],W,ie,te,H)},Y=$=>{if($.shapeFlag&6)return Y($.component.subTree);if($.shapeFlag&128)return $.suspense.next();const W=v($.anchor||$.el),ie=W&&W[$b];return ie?v(ie):W};let se=!1;const ne=($,W,ie)=>{$==null?W._vnode&&C(W._vnode,null,null,!0):P(W._vnode||null,$,W,null,null,null,ie),W._vnode=$,se||(se=!0,jm(),K2(),se=!1)},Se={p:P,um:C,m:Qe,r:M,mt:z,mc:S,pc:ce,pbc:F,n:Y,o:t};return{render:ne,hydrate:void 0,createApp:gw(ne)}}function _d({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Na({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function Ew(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function d5(t,e,n=!1){const r=t.children,i=e.children;if(dt(r)&&dt(i))for(let s=0;s<r.length;s++){const o=r[s];let a=i[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[s]=Mo(i[s]),a.el=o.el),!n&&a.patchFlag!==-2&&d5(o,a)),a.type===Sf&&(a.el=o.el),a.type===na&&!a.el&&(a.el=o.el)}}function Tw(t){const e=t.slice(),n=[0];let r,i,s,o,a;const l=t.length;for(r=0;r<l;r++){const h=t[r];if(h!==0){if(i=n[n.length-1],t[i]<h){e[r]=i,n.push(r);continue}for(s=0,o=n.length-1;s<o;)a=s+o>>1,t[n[a]]<h?s=a+1:o=a;h<t[n[s]]&&(s>0&&(e[r]=n[s-1]),n[s]=r)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=e[o];return n}function p5(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:p5(e)}function Wm(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const Sw=Symbol.for("v-scx"),xw=()=>Di(Sw);function Xc(t,e,n){return g5(t,e,n)}function g5(t,e,n=an){const{immediate:r,deep:i,flush:s,once:o}=n,a=Ar({},n),l=e&&r||!e&&s!=="post";let h;if(du){if(s==="sync"){const g=xw();h=g.__watcherHandles||(g.__watcherHandles=[])}else if(!l){const g=()=>{};return g.stop=os,g.resume=os,g.pause=os,g}}const d=vr;a.call=(g,L,P)=>ds(g,d,L,P);let p=!1;s==="post"?a.scheduler=g=>{Xr(g,d&&d.suspense)}:s!=="sync"&&(p=!0,a.scheduler=(g,L)=>{L?g():ig(g)}),a.augmentJob=g=>{e&&(g.flags|=4),p&&(g.flags|=2,d&&(g.id=d.uid,g.i=d))};const v=Bb(t,e,a);return du&&(h?h.push(v):l&&v()),v}function Pw(t,e,n){const r=this.proxy,i=Un(t)?t.includes(".")?m5(r,t):()=>r[t]:t.bind(r,r);let s;Tt(e)?s=e:(s=e.handler,n=e);const o=Pu(this),a=g5(i,s.bind(r),n);return o(),a}function m5(t,e){const n=e.split(".");return()=>{let r=t;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}const Rw=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${mi(e)}Modifiers`]||t[`${Wa(e)}Modifiers`];function Nw(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||an;let i=n;const s=e.startsWith("update:"),o=s&&Rw(r,e.slice(7));o&&(o.trim&&(i=n.map(d=>Un(d)?d.trim():d)),o.number&&(i=n.map(qh)));let a,l=r[a=dd(e)]||r[a=dd(mi(e))];!l&&s&&(l=r[a=dd(Wa(e))]),l&&ds(l,t,6,i);const h=r[a+"Once"];if(h){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,ds(h,t,6,i)}}function y5(t,e,n=!1){const r=e.emitsCache,i=r.get(t);if(i!==void 0)return i;const s=t.emits;let o={},a=!1;if(!Tt(t)){const l=h=>{const d=y5(h,e,!0);d&&(a=!0,Ar(o,d))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!s&&!a?(fn(t)&&r.set(t,null),null):(dt(s)?s.forEach(l=>o[l]=null):Ar(o,s),fn(t)&&r.set(t,o),o)}function Tf(t,e){return!t||!mf(e)?!1:(e=e.slice(2).replace(/Once$/,""),Jt(t,e[0].toLowerCase()+e.slice(1))||Jt(t,Wa(e))||Jt(t,e))}function Km(t){const{type:e,vnode:n,proxy:r,withProxy:i,propsOptions:[s],slots:o,attrs:a,emit:l,render:h,renderCache:d,props:p,data:v,setupState:g,ctx:L,inheritAttrs:P}=t,j=$h(t);let x,U;try{if(n.shapeFlag&4){const Z=i||r,fe=Z;x=rs(h.call(fe,Z,d,p,g,v,L)),U=a}else{const Z=e;x=rs(Z.length>1?Z(p,{attrs:a,slots:o,emit:l}):Z(p,null)),U=e.props?a:Lw(a)}}catch(Z){Zc.length=0,Af(Z,t,1),x=kr(na)}let J=x;if(U&&P!==!1){const Z=Object.keys(U),{shapeFlag:fe}=J;Z.length&&fe&7&&(s&&Z.some(Wp)&&(U=Cw(U,s)),J=Ql(J,U,!1,!0))}return n.dirs&&(J=Ql(J,null,!1,!0),J.dirs=J.dirs?J.dirs.concat(n.dirs):n.dirs),n.transition&&sg(J,n.transition),x=J,$h(j),x}const Lw=t=>{let e;for(const n in t)(n==="class"||n==="style"||mf(n))&&((e||(e={}))[n]=t[n]);return e},Cw=(t,e)=>{const n={};for(const r in t)(!Wp(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function kw(t,e,n){const{props:r,children:i,component:s}=t,{props:o,children:a,patchFlag:l}=e,h=s.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?Jm(r,o,h):!!o;if(l&8){const d=e.dynamicProps;for(let p=0;p<d.length;p++){const v=d[p];if(o[v]!==r[v]&&!Tf(h,v))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?Jm(r,o,h):!0:!!o;return!1}function Jm(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(e[s]!==t[s]&&!Tf(n,s))return!0}return!1}function Dw({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const v5=t=>t.__isSuspense;function Ow(t,e){e&&e.pendingBranch?dt(t)?e.effects.push(...t):e.effects.push(t):zb(t)}const nn=Symbol.for("v-fgt"),Sf=Symbol.for("v-txt"),na=Symbol.for("v-cmt"),bd=Symbol.for("v-stc"),Zc=[];let ti=null;function Ve(t=!1){Zc.push(ti=t?null:[])}function Fw(){Zc.pop(),ti=Zc[Zc.length-1]||null}let fu=1;function Qm(t,e=!1){fu+=t,t<0&&ti&&e&&(ti.hasOnce=!0)}function _5(t){return t.dynamicChildren=fu>0?ti||Fl:null,Fw(),fu>0&&ti&&ti.push(t),t}function je(t,e,n,r,i,s){return _5(k(t,e,n,r,i,s,!0))}function b5(t,e,n,r,i){return _5(kr(t,e,n,r,i,!0))}function Kh(t){return t?t.__v_isVNode===!0:!1}function Oc(t,e){return t.type===e.type&&t.key===e.key}const w5=({key:t})=>t??null,Sh=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Un(t)||wr(t)||Tt(t)?{i:ei,r:t,k:e,f:!!n}:t:null);function k(t,e=null,n=null,r=0,i=null,s=t===nn?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&w5(e),ref:e&&Sh(e),scopeId:Q2,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:ei};return a?(cg(l,n),s&128&&t.normalize(l)):n&&(l.shapeFlag|=Un(n)?8:16),fu>0&&!o&&ti&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&ti.push(l),l}const kr=Mw;function Mw(t,e=null,n=null,r=0,i=null,s=!1){if((!t||t===ow)&&(t=na),Kh(t)){const a=Ql(t,e,!0);return n&&cg(a,n),fu>0&&!s&&ti&&(a.shapeFlag&6?ti[ti.indexOf(t)]=a:ti.push(a)),a.patchFlag=-2,a}if(Kw(t)&&(t=t.__vccOpts),e){e=Vw(e);let{class:a,style:l}=e;a&&!Un(a)&&(e.class=Zr(a)),fn(l)&&(rg(l)&&!dt(l)&&(l=Ar({},l)),e.style=bf(l))}const o=Un(t)?1:v5(t)?128:Wb(t)?64:fn(t)?4:Tt(t)?2:0;return k(t,e,n,r,i,o,s,!0)}function Vw(t){return t?rg(t)||a5(t)?Ar({},t):t:null}function Ql(t,e,n=!1,r=!1){const{props:i,ref:s,patchFlag:o,children:a,transition:l}=t,h=e?Uw(i||{},e):i,d={__v_isVNode:!0,__v_skip:!0,type:t.type,props:h,key:h&&w5(h),ref:e&&e.ref?n&&s?dt(s)?s.concat(Sh(e)):[s,Sh(e)]:Sh(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==nn?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Ql(t.ssContent),ssFallback:t.ssFallback&&Ql(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&r&&sg(d,l.clone(d)),d}function zs(t=" ",e=0){return kr(Sf,null,t,e)}function jt(t="",e=!1){return e?(Ve(),b5(na,null,t)):kr(na,null,t)}function rs(t){return t==null||typeof t=="boolean"?kr(na):dt(t)?kr(nn,null,t.slice()):Kh(t)?Mo(t):kr(Sf,null,String(t))}function Mo(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Ql(t)}function cg(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(dt(e))n=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),cg(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!a5(e)?e._ctx=ei:i===3&&ei&&(ei.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Tt(e)?(e={default:e,_ctx:ei},n=32):(e=String(e),r&64?(n=16,e=[zs(e)]):n=8);t.children=e,t.shapeFlag|=n}function Uw(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=Zr([e.class,r.class]));else if(i==="style")e.style=bf([e.style,r.style]);else if(mf(i)){const s=e[i],o=r[i];o&&s!==o&&!(dt(s)&&s.includes(o))&&(e[i]=s?[].concat(s,o):o)}else i!==""&&(e[i]=r[i])}return e}function Zi(t,e,n,r=null){ds(t,e,7,[n,r])}const jw=i5();let Bw=0;function qw(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||jw,s={uid:Bw++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new S2(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:c5(r,i),emitsOptions:y5(r,i),emit:null,emitted:null,propsDefaults:an,inheritAttrs:r.inheritAttrs,ctx:an,data:an,props:an,attrs:an,slots:an,refs:an,setupState:an,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=Nw.bind(null,s),t.ce&&t.ce(s),s}let vr=null,Jh,ip;{const t=_f(),e=(n,r)=>{let i;return(i=t[n])||(i=t[n]=[]),i.push(r),s=>{i.length>1?i.forEach(o=>o(s)):i[0](s)}};Jh=e("__VUE_INSTANCE_SETTERS__",n=>vr=n),ip=e("__VUE_SSR_SETTERS__",n=>du=n)}const Pu=t=>{const e=vr;return Jh(t),t.scope.on(),()=>{t.scope.off(),Jh(e)}},Ym=()=>{vr&&vr.scope.off(),Jh(null)};function A5(t){return t.vnode.shapeFlag&4}let du=!1;function Hw(t,e=!1,n=!1){e&&ip(e);const{props:r,children:i}=t.vnode,s=A5(t);mw(t,r,s,e),bw(t,i,n||e);const o=s?zw(t,e):void 0;return e&&ip(!1),o}function zw(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,lw);const{setup:r}=n;if(r){Js();const i=t.setupContext=r.length>1?$w(t):null,s=Pu(t),o=xu(r,t,0,[t.props,i]),a=b2(o);if(Qs(),s(),(a||t.sp)&&!Qc(t)&&X2(t),a){if(o.then(Ym,Ym),e)return o.then(l=>{Xm(t,l)}).catch(l=>{Af(l,t,0)});t.asyncDep=o}else Xm(t,o)}else I5(t)}function Xm(t,e,n){Tt(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:fn(e)&&(t.setupState=G2(e)),I5(t)}function I5(t,e,n){const r=t.type;t.render||(t.render=r.render||os);{const i=Pu(t);Js();try{cw(t)}finally{Qs(),i()}}}const Gw={get(t,e){return mr(t,"get",""),t[e]}};function $w(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,Gw),slots:t.slots,emit:t.emit,expose:e}}function xf(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(G2(H2(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Yc)return Yc[n](t)},has(e,n){return n in e||n in Yc}})):t.proxy}function Ww(t,e=!0){return Tt(t)?t.displayName||t.name:t.name||e&&t.__name}function Kw(t){return Tt(t)&&"__vccOpts"in t}const zt=(t,e)=>Ub(t,e,du);function E5(t,e,n){const r=arguments.length;return r===2?fn(e)&&!dt(e)?Kh(e)?kr(t,null,[e]):kr(t,e):kr(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Kh(n)&&(n=[n]),kr(t,e,n))}const Jw="3.5.17";/**
* @vue/runtime-dom v3.5.17
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let sp;const Zm=typeof window<"u"&&window.trustedTypes;if(Zm)try{sp=Zm.createPolicy("vue",{createHTML:t=>t})}catch{}const T5=sp?t=>sp.createHTML(t):t=>t,Qw="http://www.w3.org/2000/svg",Yw="http://www.w3.org/1998/Math/MathML",Bs=typeof document<"u"?document:null,e1=Bs&&Bs.createElement("template"),Xw={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e==="svg"?Bs.createElementNS(Qw,t):e==="mathml"?Bs.createElementNS(Yw,t):n?Bs.createElement(t,{is:n}):Bs.createElement(t);return t==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:t=>Bs.createTextNode(t),createComment:t=>Bs.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Bs.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,i,s){const o=n?n.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===s||!(i=i.nextSibling)););else{e1.innerHTML=T5(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const a=e1.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},Zw=Symbol("_vtc");function eA(t,e,n){const r=t[Zw];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const t1=Symbol("_vod"),tA=Symbol("_vsh"),nA=Symbol(""),rA=/(^|;)\s*display\s*:/;function iA(t,e,n){const r=t.style,i=Un(n);let s=!1;if(n&&!i){if(e)if(Un(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&xh(r,a,"")}else for(const o in e)n[o]==null&&xh(r,o,"");for(const o in n)o==="display"&&(s=!0),xh(r,o,n[o])}else if(i){if(e!==n){const o=r[nA];o&&(n+=";"+o),r.cssText=n,s=rA.test(n)}}else e&&t.removeAttribute("style");t1 in t&&(t[t1]=s?r.display:"",t[tA]&&(r.display="none"))}const n1=/\s*!important$/;function xh(t,e,n){if(dt(n))n.forEach(r=>xh(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=sA(t,e);n1.test(n)?t.setProperty(Wa(r),n.replace(n1,""),"important"):t[r]=n}}const r1=["Webkit","Moz","ms"],wd={};function sA(t,e){const n=wd[e];if(n)return n;let r=mi(e);if(r!=="filter"&&r in t)return wd[e]=r;r=vf(r);for(let i=0;i<r1.length;i++){const s=r1[i]+r;if(s in t)return wd[e]=s}return e}const i1="http://www.w3.org/1999/xlink";function s1(t,e,n,r,i,s=db(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(i1,e.slice(6,e.length)):t.setAttributeNS(i1,e,n):n==null||s&&!I2(n)?t.removeAttribute(e):t.setAttribute(e,s?"":fs(n)?String(n):n)}function o1(t,e,n,r,i){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?T5(n):n);return}const s=t.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const a=s==="OPTION"?t.getAttribute("value")||"":t.value,l=n==null?t.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in t))&&(t.value=l),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=I2(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(i||e)}function Uo(t,e,n,r){t.addEventListener(e,n,r)}function oA(t,e,n,r){t.removeEventListener(e,n,r)}const a1=Symbol("_vei");function aA(t,e,n,r,i=null){const s=t[a1]||(t[a1]={}),o=s[e];if(r&&o)o.value=r;else{const[a,l]=lA(e);if(r){const h=s[e]=hA(r,i);Uo(t,a,h,l)}else o&&(oA(t,a,o,l),s[e]=void 0)}}const l1=/(?:Once|Passive|Capture)$/;function lA(t){let e;if(l1.test(t)){e={};let r;for(;r=t.match(l1);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Wa(t.slice(2)),e]}let Ad=0;const cA=Promise.resolve(),uA=()=>Ad||(cA.then(()=>Ad=0),Ad=Date.now());function hA(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;ds(fA(r,n.value),e,5,[r])};return n.value=t,n.attached=uA(),n}function fA(t,e){if(dt(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const c1=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,dA=(t,e,n,r,i,s)=>{const o=i==="svg";e==="class"?eA(t,r,o):e==="style"?iA(t,n,r):mf(e)?Wp(e)||aA(t,e,n,r,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):pA(t,e,r,o))?(o1(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&s1(t,e,r,o,s,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Un(r))?o1(t,mi(e),r,s,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),s1(t,e,r,o))};function pA(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&c1(e)&&Tt(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=t.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return c1(e)&&Un(n)?!1:e in t}const Yl=t=>{const e=t.props["onUpdate:modelValue"]||!1;return dt(e)?n=>Eh(e,n):e};function gA(t){t.target.composing=!0}function u1(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Ks=Symbol("_assign"),Ma={created(t,{modifiers:{lazy:e,trim:n,number:r}},i){t[Ks]=Yl(i);const s=r||i.props&&i.props.type==="number";Uo(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),s&&(a=qh(a)),t[Ks](a)}),n&&Uo(t,"change",()=>{t.value=t.value.trim()}),e||(Uo(t,"compositionstart",gA),Uo(t,"compositionend",u1),Uo(t,"change",u1))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:i,number:s}},o){if(t[Ks]=Yl(o),t.composing)return;const a=(s||t.type==="number")&&!/^0\d/.test(t.value)?qh(t.value):t.value,l=e??"";a!==l&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||i&&t.value.trim()===l)||(t.value=l))}},Go={deep:!0,created(t,e,n){t[Ks]=Yl(n),Uo(t,"change",()=>{const r=t._modelValue,i=pu(t),s=t.checked,o=t[Ks];if(dt(r)){const a=Qp(r,i),l=a!==-1;if(s&&!l)o(r.concat(i));else if(!s&&l){const h=[...r];h.splice(a,1),o(h)}}else if(lc(r)){const a=new Set(r);s?a.add(i):a.delete(i),o(a)}else o(S5(t,s))})},mounted:h1,beforeUpdate(t,e,n){t[Ks]=Yl(n),h1(t,e,n)}};function h1(t,{value:e,oldValue:n},r){t._modelValue=e;let i;if(dt(e))i=Qp(e,r.props.value)>-1;else if(lc(e))i=e.has(r.props.value);else{if(e===n)return;i=Su(e,S5(t,!0))}t.checked!==i&&(t.checked=i)}const ug={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const i=lc(e);Uo(t,"change",()=>{const s=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?qh(pu(o)):pu(o));t[Ks](t.multiple?i?new Set(s):s:s[0]),t._assigning=!0,If(()=>{t._assigning=!1})}),t[Ks]=Yl(r)},mounted(t,{value:e}){f1(t,e)},beforeUpdate(t,e,n){t[Ks]=Yl(n)},updated(t,{value:e}){t._assigning||f1(t,e)}};function f1(t,e){const n=t.multiple,r=dt(e);if(!(n&&!r&&!lc(e))){for(let i=0,s=t.options.length;i<s;i++){const o=t.options[i],a=pu(o);if(n)if(r){const l=typeof a;l==="string"||l==="number"?o.selected=e.some(h=>String(h)===String(a)):o.selected=Qp(e,a)>-1}else o.selected=e.has(a);else if(Su(pu(o),e)){t.selectedIndex!==i&&(t.selectedIndex=i);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function pu(t){return"_value"in t?t._value:t.value}function S5(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const mA=["ctrl","shift","alt","meta"],yA={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>mA.some(n=>t[`${n}Key`]&&!e.includes(n))},Id=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=(i,...s)=>{for(let o=0;o<e.length;o++){const a=yA[e[o]];if(a&&a(i,e))return}return t(i,...s)})},vA=Ar({patchProp:dA},Xw);let d1;function _A(){return d1||(d1=Aw(vA))}const bA=(...t)=>{const e=_A().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=AA(r);if(!i)return;const s=e._component;!Tt(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=n(i,!1,wA(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e};function wA(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function AA(t){return Un(t)?document.querySelector(t):t}/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const xl=typeof document<"u";function x5(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function IA(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&x5(t.default)}const Wt=Object.assign;function Ed(t,e){const n={};for(const r in e){const i=e[r];n[r]=Oi(i)?i.map(t):t(i)}return n}const eu=()=>{},Oi=Array.isArray,P5=/#/g,EA=/&/g,TA=/\//g,SA=/=/g,xA=/\?/g,R5=/\+/g,PA=/%5B/g,RA=/%5D/g,N5=/%5E/g,NA=/%60/g,L5=/%7B/g,LA=/%7C/g,C5=/%7D/g,CA=/%20/g;function hg(t){return encodeURI(""+t).replace(LA,"|").replace(PA,"[").replace(RA,"]")}function kA(t){return hg(t).replace(L5,"{").replace(C5,"}").replace(N5,"^")}function op(t){return hg(t).replace(R5,"%2B").replace(CA,"+").replace(P5,"%23").replace(EA,"%26").replace(NA,"`").replace(L5,"{").replace(C5,"}").replace(N5,"^")}function DA(t){return op(t).replace(SA,"%3D")}function OA(t){return hg(t).replace(P5,"%23").replace(xA,"%3F")}function FA(t){return t==null?"":OA(t).replace(TA,"%2F")}function gu(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const MA=/\/$/,VA=t=>t.replace(MA,"");function Td(t,e,n="/"){let r,i={},s="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(r=e.slice(0,l),s=e.slice(l+1,a>-1?a:e.length),i=t(s)),a>-1&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=qA(r??e,n),{fullPath:r+(s&&"?")+s+o,path:r,query:i,hash:gu(o)}}function UA(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function p1(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function jA(t,e,n){const r=e.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&Xl(e.matched[r],n.matched[i])&&k5(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Xl(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function k5(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!BA(t[n],e[n]))return!1;return!0}function BA(t,e){return Oi(t)?g1(t,e):Oi(e)?g1(e,t):t===e}function g1(t,e){return Oi(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function qA(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let s=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")s>1&&s--;else break;return n.slice(0,s).join("/")+"/"+r.slice(o).join("/")}const Co={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var mu;(function(t){t.pop="pop",t.push="push"})(mu||(mu={}));var tu;(function(t){t.back="back",t.forward="forward",t.unknown=""})(tu||(tu={}));function HA(t){if(!t)if(xl){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),VA(t)}const zA=/^[^#]+#/;function GA(t,e){return t.replace(zA,"#")+e}function $A(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const Pf=()=>({left:window.scrollX,top:window.scrollY});function WA(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;e=$A(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function m1(t,e){return(history.state?history.state.position-e:-1)+t}const ap=new Map;function KA(t,e){ap.set(t,e)}function JA(t){const e=ap.get(t);return ap.delete(t),e}let QA=()=>location.protocol+"//"+location.host;function D5(t,e){const{pathname:n,search:r,hash:i}=e,s=t.indexOf("#");if(s>-1){let a=i.includes(t.slice(s))?t.slice(s).length:1,l=i.slice(a);return l[0]!=="/"&&(l="/"+l),p1(l,"")}return p1(n,t)+r+i}function YA(t,e,n,r){let i=[],s=[],o=null;const a=({state:v})=>{const g=D5(t,location),L=n.value,P=e.value;let j=0;if(v){if(n.value=g,e.value=v,o&&o===L){o=null;return}j=P?v.position-P.position:0}else r(g);i.forEach(x=>{x(n.value,L,{delta:j,type:mu.pop,direction:j?j>0?tu.forward:tu.back:tu.unknown})})};function l(){o=n.value}function h(v){i.push(v);const g=()=>{const L=i.indexOf(v);L>-1&&i.splice(L,1)};return s.push(g),g}function d(){const{history:v}=window;v.state&&v.replaceState(Wt({},v.state,{scroll:Pf()}),"")}function p(){for(const v of s)v();s=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",d)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",d,{passive:!0}),{pauseListeners:l,listen:h,destroy:p}}function y1(t,e,n,r=!1,i=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:i?Pf():null}}function XA(t){const{history:e,location:n}=window,r={value:D5(t,n)},i={value:e.state};i.value||s(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function s(l,h,d){const p=t.indexOf("#"),v=p>-1?(n.host&&document.querySelector("base")?t:t.slice(p))+l:QA()+t+l;try{e[d?"replaceState":"pushState"](h,"",v),i.value=h}catch(g){console.error(g),n[d?"replace":"assign"](v)}}function o(l,h){const d=Wt({},e.state,y1(i.value.back,l,i.value.forward,!0),h,{position:i.value.position});s(l,d,!0),r.value=l}function a(l,h){const d=Wt({},i.value,e.state,{forward:l,scroll:Pf()});s(d.current,d,!0);const p=Wt({},y1(r.value,l,null),{position:d.position+1},h);s(l,p,!1),r.value=l}return{location:r,state:i,push:a,replace:o}}function ZA(t){t=HA(t);const e=XA(t),n=YA(t,e.state,e.location,e.replace);function r(s,o=!0){o||n.pauseListeners(),history.go(s)}const i=Wt({location:"",base:t,go:r,createHref:GA.bind(null,t)},e,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function e4(t){return typeof t=="string"||t&&typeof t=="object"}function O5(t){return typeof t=="string"||typeof t=="symbol"}const F5=Symbol("");var v1;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(v1||(v1={}));function Zl(t,e){return Wt(new Error,{type:t,[F5]:!0},e)}function Vs(t,e){return t instanceof Error&&F5 in t&&(e==null||!!(t.type&e))}const _1="[^/]+?",t4={sensitive:!1,strict:!1,start:!0,end:!0},n4=/[.+*?^${}()[\]/\\]/g;function r4(t,e){const n=Wt({},t4,e),r=[];let i=n.start?"^":"";const s=[];for(const h of t){const d=h.length?[]:[90];n.strict&&!h.length&&(i+="/");for(let p=0;p<h.length;p++){const v=h[p];let g=40+(n.sensitive?.25:0);if(v.type===0)p||(i+="/"),i+=v.value.replace(n4,"\\$&"),g+=40;else if(v.type===1){const{value:L,repeatable:P,optional:j,regexp:x}=v;s.push({name:L,repeatable:P,optional:j});const U=x||_1;if(U!==_1){g+=10;try{new RegExp(`(${U})`)}catch(Z){throw new Error(`Invalid custom RegExp for param "${L}" (${U}): `+Z.message)}}let J=P?`((?:${U})(?:/(?:${U}))*)`:`(${U})`;p||(J=j&&h.length<2?`(?:/${J})`:"/"+J),j&&(J+="?"),i+=J,g+=20,j&&(g+=-8),P&&(g+=-20),U===".*"&&(g+=-50)}d.push(g)}r.push(d)}if(n.strict&&n.end){const h=r.length-1;r[h][r[h].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const o=new RegExp(i,n.sensitive?"":"i");function a(h){const d=h.match(o),p={};if(!d)return null;for(let v=1;v<d.length;v++){const g=d[v]||"",L=s[v-1];p[L.name]=g&&L.repeatable?g.split("/"):g}return p}function l(h){let d="",p=!1;for(const v of t){(!p||!d.endsWith("/"))&&(d+="/"),p=!1;for(const g of v)if(g.type===0)d+=g.value;else if(g.type===1){const{value:L,repeatable:P,optional:j}=g,x=L in h?h[L]:"";if(Oi(x)&&!P)throw new Error(`Provided param "${L}" is an array but it is not repeatable (* or + modifiers)`);const U=Oi(x)?x.join("/"):x;if(!U)if(j)v.length<2&&(d.endsWith("/")?d=d.slice(0,-1):p=!0);else throw new Error(`Missing required param "${L}"`);d+=U}}return d||"/"}return{re:o,score:r,keys:s,parse:a,stringify:l}}function i4(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function M5(t,e){let n=0;const r=t.score,i=e.score;for(;n<r.length&&n<i.length;){const s=i4(r[n],i[n]);if(s)return s;n++}if(Math.abs(i.length-r.length)===1){if(b1(r))return 1;if(b1(i))return-1}return i.length-r.length}function b1(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const s4={type:0,value:""},o4=/[a-zA-Z0-9_]/;function a4(t){if(!t)return[[]];if(t==="/")return[[s4]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(g){throw new Error(`ERR (${n})/"${h}": ${g}`)}let n=0,r=n;const i=[];let s;function o(){s&&i.push(s),s=[]}let a=0,l,h="",d="";function p(){h&&(n===0?s.push({type:0,value:h}):n===1||n===2||n===3?(s.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${h}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:h,regexp:d,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),h="")}function v(){h+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:l==="/"?(h&&p(),o()):l===":"?(p(),n=1):v();break;case 4:v(),n=r;break;case 1:l==="("?n=2:o4.test(l)?v():(p(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+l:n=3:d+=l;break;case 3:p(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,d="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${h}"`),p(),o(),i}function l4(t,e,n){const r=r4(a4(t.path),n),i=Wt(r,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function c4(t,e){const n=[],r=new Map;e=E1({strict:!1,end:!0,sensitive:!1},e);function i(p){return r.get(p)}function s(p,v,g){const L=!g,P=A1(p);P.aliasOf=g&&g.record;const j=E1(e,p),x=[P];if("alias"in p){const Z=typeof p.alias=="string"?[p.alias]:p.alias;for(const fe of Z)x.push(A1(Wt({},P,{components:g?g.record.components:P.components,path:fe,aliasOf:g?g.record:P})))}let U,J;for(const Z of x){const{path:fe}=Z;if(v&&fe[0]!=="/"){const Ie=v.record.path,T=Ie[Ie.length-1]==="/"?"":"/";Z.path=v.record.path+(fe&&T+fe)}if(U=l4(Z,v,j),g?g.alias.push(U):(J=J||U,J!==U&&J.alias.push(U),L&&p.name&&!I1(U)&&o(p.name)),V5(U)&&l(U),P.children){const Ie=P.children;for(let T=0;T<Ie.length;T++)s(Ie[T],U,g&&g.children[T])}g=g||U}return J?()=>{o(J)}:eu}function o(p){if(O5(p)){const v=r.get(p);v&&(r.delete(p),n.splice(n.indexOf(v),1),v.children.forEach(o),v.alias.forEach(o))}else{const v=n.indexOf(p);v>-1&&(n.splice(v,1),p.record.name&&r.delete(p.record.name),p.children.forEach(o),p.alias.forEach(o))}}function a(){return n}function l(p){const v=f4(p,n);n.splice(v,0,p),p.record.name&&!I1(p)&&r.set(p.record.name,p)}function h(p,v){let g,L={},P,j;if("name"in p&&p.name){if(g=r.get(p.name),!g)throw Zl(1,{location:p});j=g.record.name,L=Wt(w1(v.params,g.keys.filter(J=>!J.optional).concat(g.parent?g.parent.keys.filter(J=>J.optional):[]).map(J=>J.name)),p.params&&w1(p.params,g.keys.map(J=>J.name))),P=g.stringify(L)}else if(p.path!=null)P=p.path,g=n.find(J=>J.re.test(P)),g&&(L=g.parse(P),j=g.record.name);else{if(g=v.name?r.get(v.name):n.find(J=>J.re.test(v.path)),!g)throw Zl(1,{location:p,currentLocation:v});j=g.record.name,L=Wt({},v.params,p.params),P=g.stringify(L)}const x=[];let U=g;for(;U;)x.unshift(U.record),U=U.parent;return{name:j,path:P,params:L,matched:x,meta:h4(x)}}t.forEach(p=>s(p));function d(){n.length=0,r.clear()}return{addRoute:s,resolve:h,removeRoute:o,clearRoutes:d,getRoutes:a,getRecordMatcher:i}}function w1(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function A1(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:u4(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function u4(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function I1(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function h4(t){return t.reduce((e,n)=>Wt(e,n.meta),{})}function E1(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function f4(t,e){let n=0,r=e.length;for(;n!==r;){const s=n+r>>1;M5(t,e[s])<0?r=s:n=s+1}const i=d4(t);return i&&(r=e.lastIndexOf(i,r-1)),r}function d4(t){let e=t;for(;e=e.parent;)if(V5(e)&&M5(t,e)===0)return e}function V5({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function p4(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let i=0;i<r.length;++i){const s=r[i].replace(R5," "),o=s.indexOf("="),a=gu(o<0?s:s.slice(0,o)),l=o<0?null:gu(s.slice(o+1));if(a in e){let h=e[a];Oi(h)||(h=e[a]=[h]),h.push(l)}else e[a]=l}return e}function T1(t){let e="";for(let n in t){const r=t[n];if(n=DA(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(Oi(r)?r.map(s=>s&&op(s)):[r&&op(r)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+n,s!=null&&(e+="="+s))})}return e}function g4(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=Oi(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return e}const m4=Symbol(""),S1=Symbol(""),Rf=Symbol(""),fg=Symbol(""),lp=Symbol("");function Fc(){let t=[];function e(r){return t.push(r),()=>{const i=t.indexOf(r);i>-1&&t.splice(i,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Vo(t,e,n,r,i,s=o=>o()){const o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((a,l)=>{const h=v=>{v===!1?l(Zl(4,{from:n,to:e})):v instanceof Error?l(v):e4(v)?l(Zl(2,{from:e,to:v})):(o&&r.enterCallbacks[i]===o&&typeof v=="function"&&o.push(v),a())},d=s(()=>t.call(r&&r.instances[i],e,n,h));let p=Promise.resolve(d);t.length<3&&(p=p.then(h)),p.catch(v=>l(v))})}function Sd(t,e,n,r,i=s=>s()){const s=[];for(const o of t)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(x5(l)){const d=(l.__vccOpts||l)[e];d&&s.push(Vo(d,n,r,o,a,i))}else{let h=l();s.push(()=>h.then(d=>{if(!d)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const p=IA(d)?d.default:d;o.mods[a]=d,o.components[a]=p;const g=(p.__vccOpts||p)[e];return g&&Vo(g,n,r,o,a,i)()}))}}return s}function x1(t){const e=Di(Rf),n=Di(fg),r=zt(()=>{const l=qt(t.to);return e.resolve(l)}),i=zt(()=>{const{matched:l}=r.value,{length:h}=l,d=l[h-1],p=n.matched;if(!d||!p.length)return-1;const v=p.findIndex(Xl.bind(null,d));if(v>-1)return v;const g=P1(l[h-2]);return h>1&&P1(d)===g&&p[p.length-1].path!==g?p.findIndex(Xl.bind(null,l[h-2])):v}),s=zt(()=>i.value>-1&&w4(n.params,r.value.params)),o=zt(()=>i.value>-1&&i.value===n.matched.length-1&&k5(n.params,r.value.params));function a(l={}){if(b4(l)){const h=e[qt(t.replace)?"replace":"push"](qt(t.to)).catch(eu);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>h),h}return Promise.resolve()}return{route:r,href:zt(()=>r.value.href),isActive:s,isExactActive:o,navigate:a}}function y4(t){return t.length===1?t[0]:t}const v4=Y2({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:x1,setup(t,{slots:e}){const n=cc(x1(t)),{options:r}=Di(Rf),i=zt(()=>({[R1(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[R1(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const s=e.default&&y4(e.default(n));return t.custom?s:E5("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},s)}}}),_4=v4;function b4(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function w4(t,e){for(const n in e){const r=e[n],i=t[n];if(typeof r=="string"){if(r!==i)return!1}else if(!Oi(i)||i.length!==r.length||r.some((s,o)=>s!==i[o]))return!1}return!0}function P1(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const R1=(t,e,n)=>t??e??n,A4=Y2({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=Di(lp),i=zt(()=>t.route||r.value),s=Di(S1,0),o=zt(()=>{let h=qt(s);const{matched:d}=i.value;let p;for(;(p=d[h])&&!p.components;)h++;return h}),a=zt(()=>i.value.matched[o.value]);Th(S1,zt(()=>o.value+1)),Th(m4,a),Th(lp,i);const l=It();return Xc(()=>[l.value,a.value,t.name],([h,d,p],[v,g,L])=>{d&&(d.instances[p]=h,g&&g!==d&&h&&h===v&&(d.leaveGuards.size||(d.leaveGuards=g.leaveGuards),d.updateGuards.size||(d.updateGuards=g.updateGuards))),h&&d&&(!g||!Xl(d,g)||!v)&&(d.enterCallbacks[p]||[]).forEach(P=>P(h))},{flush:"post"}),()=>{const h=i.value,d=t.name,p=a.value,v=p&&p.components[d];if(!v)return N1(n.default,{Component:v,route:h});const g=p.props[d],L=g?g===!0?h.params:typeof g=="function"?g(h):g:null,j=E5(v,Wt({},L,e,{onVnodeUnmounted:x=>{x.component.isUnmounted&&(p.instances[d]=null)},ref:l}));return N1(n.default,{Component:j,route:h})||j}}});function N1(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const I4=A4;function E4(t){const e=c4(t.routes,t),n=t.parseQuery||p4,r=t.stringifyQuery||T1,i=t.history,s=Fc(),o=Fc(),a=Fc(),l=Ob(Co);let h=Co;xl&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=Ed.bind(null,Y=>""+Y),p=Ed.bind(null,FA),v=Ed.bind(null,gu);function g(Y,se){let ne,Se;return O5(Y)?(ne=e.getRecordMatcher(Y),Se=se):Se=Y,e.addRoute(Se,ne)}function L(Y){const se=e.getRecordMatcher(Y);se&&e.removeRoute(se)}function P(){return e.getRoutes().map(Y=>Y.record)}function j(Y){return!!e.getRecordMatcher(Y)}function x(Y,se){if(se=Wt({},se||l.value),typeof Y=="string"){const ie=Td(n,Y,se.path),te=e.resolve({path:ie.path},se),H=i.createHref(ie.fullPath);return Wt(ie,te,{params:v(te.params),hash:gu(ie.hash),redirectedFrom:void 0,href:H})}let ne;if(Y.path!=null)ne=Wt({},Y,{path:Td(n,Y.path,se.path).path});else{const ie=Wt({},Y.params);for(const te in ie)ie[te]==null&&delete ie[te];ne=Wt({},Y,{params:p(ie)}),se.params=p(se.params)}const Se=e.resolve(ne,se),De=Y.hash||"";Se.params=d(v(Se.params));const $=UA(r,Wt({},Y,{hash:kA(De),path:Se.path})),W=i.createHref($);return Wt({fullPath:$,hash:De,query:r===T1?g4(Y.query):Y.query||{}},Se,{redirectedFrom:void 0,href:W})}function U(Y){return typeof Y=="string"?Td(n,Y,l.value.path):Wt({},Y)}function J(Y,se){if(h!==Y)return Zl(8,{from:se,to:Y})}function Z(Y){return T(Y)}function fe(Y){return Z(Wt(U(Y),{replace:!0}))}function Ie(Y){const se=Y.matched[Y.matched.length-1];if(se&&se.redirect){const{redirect:ne}=se;let Se=typeof ne=="function"?ne(Y):ne;return typeof Se=="string"&&(Se=Se.includes("?")||Se.includes("#")?Se=U(Se):{path:Se},Se.params={}),Wt({query:Y.query,hash:Y.hash,params:Se.path!=null?{}:Y.params},Se)}}function T(Y,se){const ne=h=x(Y),Se=l.value,De=Y.state,$=Y.force,W=Y.replace===!0,ie=Ie(ne);if(ie)return T(Wt(U(ie),{state:typeof ie=="object"?Wt({},De,ie.state):De,force:$,replace:W}),se||ne);const te=ne;te.redirectedFrom=se;let H;return!$&&jA(r,Se,ne)&&(H=Zl(16,{to:te,from:Se}),Qe(Se,Se,!0,!1)),(H?Promise.resolve(H):F(te,Se)).catch(Te=>Vs(Te)?Vs(Te,2)?Te:Pe(Te):ce(Te,te,Se)).then(Te=>{if(Te){if(Vs(Te,2))return T(Wt({replace:W},U(Te.to),{state:typeof Te.to=="object"?Wt({},De,Te.to.state):De,force:$}),se||te)}else Te=E(te,Se,!0,W,De);return w(te,Se,Te),Te})}function S(Y,se){const ne=J(Y,se);return ne?Promise.reject(ne):Promise.resolve()}function O(Y){const se=K.values().next().value;return se&&typeof se.runWithContext=="function"?se.runWithContext(Y):Y()}function F(Y,se){let ne;const[Se,De,$]=T4(Y,se);ne=Sd(Se.reverse(),"beforeRouteLeave",Y,se);for(const ie of Se)ie.leaveGuards.forEach(te=>{ne.push(Vo(te,Y,se))});const W=S.bind(null,Y,se);return ne.push(W),he(ne).then(()=>{ne=[];for(const ie of s.list())ne.push(Vo(ie,Y,se));return ne.push(W),he(ne)}).then(()=>{ne=Sd(De,"beforeRouteUpdate",Y,se);for(const ie of De)ie.updateGuards.forEach(te=>{ne.push(Vo(te,Y,se))});return ne.push(W),he(ne)}).then(()=>{ne=[];for(const ie of $)if(ie.beforeEnter)if(Oi(ie.beforeEnter))for(const te of ie.beforeEnter)ne.push(Vo(te,Y,se));else ne.push(Vo(ie.beforeEnter,Y,se));return ne.push(W),he(ne)}).then(()=>(Y.matched.forEach(ie=>ie.enterCallbacks={}),ne=Sd($,"beforeRouteEnter",Y,se,O),ne.push(W),he(ne))).then(()=>{ne=[];for(const ie of o.list())ne.push(Vo(ie,Y,se));return ne.push(W),he(ne)}).catch(ie=>Vs(ie,8)?ie:Promise.reject(ie))}function w(Y,se,ne){a.list().forEach(Se=>O(()=>Se(Y,se,ne)))}function E(Y,se,ne,Se,De){const $=J(Y,se);if($)return $;const W=se===Co,ie=xl?history.state:{};ne&&(Se||W?i.replace(Y.fullPath,Wt({scroll:W&&ie&&ie.scroll},De)):i.push(Y.fullPath,De)),l.value=Y,Qe(Y,se,ne,W),Pe()}let I;function z(){I||(I=i.listen((Y,se,ne)=>{if(!ee.listening)return;const Se=x(Y),De=Ie(Se);if(De){T(Wt(De,{replace:!0,force:!0}),Se).catch(eu);return}h=Se;const $=l.value;xl&&KA(m1($.fullPath,ne.delta),Pf()),F(Se,$).catch(W=>Vs(W,12)?W:Vs(W,2)?(T(Wt(U(W.to),{force:!0}),Se).then(ie=>{Vs(ie,20)&&!ne.delta&&ne.type===mu.pop&&i.go(-1,!1)}).catch(eu),Promise.reject()):(ne.delta&&i.go(-ne.delta,!1),ce(W,Se,$))).then(W=>{W=W||E(Se,$,!1),W&&(ne.delta&&!Vs(W,8)?i.go(-ne.delta,!1):ne.type===mu.pop&&Vs(W,20)&&i.go(-1,!1)),w(Se,$,W)}).catch(eu)}))}let re=Fc(),ae=Fc(),ge;function ce(Y,se,ne){Pe(Y);const Se=ae.list();return Se.length?Se.forEach(De=>De(Y,se,ne)):console.error(Y),Promise.reject(Y)}function xe(){return ge&&l.value!==Co?Promise.resolve():new Promise((Y,se)=>{re.add([Y,se])})}function Pe(Y){return ge||(ge=!Y,z(),re.list().forEach(([se,ne])=>Y?ne(Y):se()),re.reset()),Y}function Qe(Y,se,ne,Se){const{scrollBehavior:De}=t;if(!xl||!De)return Promise.resolve();const $=!ne&&JA(m1(Y.fullPath,0))||(Se||!ne)&&history.state&&history.state.scroll||null;return If().then(()=>De(Y,se,$)).then(W=>W&&WA(W)).catch(W=>ce(W,Y,se))}const C=Y=>i.go(Y);let M;const K=new Set,ee={currentRoute:l,listening:!0,addRoute:g,removeRoute:L,clearRoutes:e.clearRoutes,hasRoute:j,getRoutes:P,resolve:x,options:t,push:Z,replace:fe,go:C,back:()=>C(-1),forward:()=>C(1),beforeEach:s.add,beforeResolve:o.add,afterEach:a.add,onError:ae.add,isReady:xe,install(Y){const se=this;Y.component("RouterLink",_4),Y.component("RouterView",I4),Y.config.globalProperties.$router=se,Object.defineProperty(Y.config.globalProperties,"$route",{enumerable:!0,get:()=>qt(l)}),xl&&!M&&l.value===Co&&(M=!0,Z(i.location).catch(De=>{}));const ne={};for(const De in Co)Object.defineProperty(ne,De,{get:()=>l.value[De],enumerable:!0});Y.provide(Rf,se),Y.provide(fg,B2(ne)),Y.provide(lp,l);const Se=Y.unmount;K.add(Y),Y.unmount=function(){K.delete(Y),K.size<1&&(h=Co,I&&I(),I=null,l.value=Co,M=!1,ge=!1),Se()}}};function he(Y){return Y.reduce((se,ne)=>se.then(()=>O(ne)),Promise.resolve())}return ee}function T4(t,e){const n=[],r=[],i=[],s=Math.max(e.matched.length,t.matched.length);for(let o=0;o<s;o++){const a=e.matched[o];a&&(t.matched.find(h=>Xl(h,a))?r.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(h=>Xl(h,l))||i.push(l))}return[n,r,i]}function Nf(){return Di(Rf)}function U5(t){return Di(fg)}/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const S4=Symbol();var L1;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(L1||(L1={}));function x4(){const t=gb(!0),e=t.run(()=>It({}));let n=[],r=[];const i=H2({install(s){i._a=s,s.provide(S4,i),s.config.globalProperties.$pinia=i,r.forEach(o=>n.push(o)),r=[]},use(s){return this._a?n.push(s):r.push(s),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return i}const Ka=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n},P4={name:"App"},R4={id:"app"};function N4(t,e,n,r,i,s){const o=og("router-view");return Ve(),je("div",R4,[kr(o)])}const L4=Ka(P4,[["render",N4]]);var C1={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j5=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},C4=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},B5={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,h=l?t[i+2]:0,d=s>>2,p=(s&3)<<4|a>>4;let v=(a&15)<<2|h>>6,g=h&63;l||(g=64,o||(v=64)),r.push(n[d],n[p],n[v],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(j5(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):C4(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const h=i<t.length?n[t.charAt(i)]:64;++i;const p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||h==null||p==null)throw new k4;const v=s<<2|a>>4;if(r.push(v),h!==64){const g=a<<4&240|h>>2;if(r.push(g),p!==64){const L=h<<6&192|p;r.push(L)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class k4 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const D4=function(t){const e=j5(t);return B5.encodeByteArray(e,!0)},Qh=function(t){return D4(t).replace(/\./g,"")},q5=function(t){try{return B5.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O4(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F4=()=>O4().__FIREBASE_DEFAULTS__,M4=()=>{if(typeof process>"u"||typeof C1>"u")return;const t=C1.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},V4=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&q5(t[1]);return e&&JSON.parse(e)},Lf=()=>{try{return F4()||M4()||V4()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},H5=t=>{var e,n;return(n=(e=Lf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},z5=t=>{const e=H5(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},G5=()=>{var t;return(t=Lf())===null||t===void 0?void 0:t.config},$5=t=>{var e;return(e=Lf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U4{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W5(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Qh(JSON.stringify(n)),Qh(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ir(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function j4(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ir())}function B4(){var t;const e=(t=Lf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function q4(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function H4(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function z4(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function G4(){const t=Ir();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function $4(){return!B4()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function W4(){try{return typeof indexedDB=="object"}catch{return!1}}function K4(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J4="FirebaseError";class ms extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=J4,Object.setPrototypeOf(this,ms.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ru.prototype.create)}}class Ru{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?Q4(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new ms(i,a,r)}}function Q4(t,e){return t.replace(Y4,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const Y4=/\{\$([^}]+)}/g;function X4(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Yh(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(k1(s)&&k1(o)){if(!Yh(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function k1(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nu(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Z4(t,e){const n=new eI(t,e);return n.subscribe.bind(n)}class eI{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");tI(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=xd),i.error===void 0&&(i.error=xd),i.complete===void 0&&(i.complete=xd);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function tI(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function xd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yi(t){return t&&t._delegate?t._delegate:t}class ra{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ca="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new U4;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(iI(e))try{this.getOrInitializeService({instanceIdentifier:Ca})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Ca){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ca){return this.instances.has(e)}getOptions(e=Ca){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:rI(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ca){return this.component?this.component.multipleInstances?e:Ca:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function rI(t){return t===Ca?void 0:t}function iI(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new nI(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ct;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ct||(Ct={}));const oI={debug:Ct.DEBUG,verbose:Ct.VERBOSE,info:Ct.INFO,warn:Ct.WARN,error:Ct.ERROR,silent:Ct.SILENT},aI=Ct.INFO,lI={[Ct.DEBUG]:"log",[Ct.VERBOSE]:"log",[Ct.INFO]:"info",[Ct.WARN]:"warn",[Ct.ERROR]:"error"},cI=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=lI[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class dg{constructor(e){this.name=e,this._logLevel=aI,this._logHandler=cI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ct))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?oI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ct.DEBUG,...e),this._logHandler(this,Ct.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ct.VERBOSE,...e),this._logHandler(this,Ct.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ct.INFO,...e),this._logHandler(this,Ct.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ct.WARN,...e),this._logHandler(this,Ct.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ct.ERROR,...e),this._logHandler(this,Ct.ERROR,...e)}}const uI=(t,e)=>e.some(n=>t instanceof n);let D1,O1;function hI(){return D1||(D1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function fI(){return O1||(O1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const K5=new WeakMap,cp=new WeakMap,J5=new WeakMap,Pd=new WeakMap,pg=new WeakMap;function dI(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Yo(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&K5.set(n,t)}).catch(()=>{}),pg.set(e,t),e}function pI(t){if(cp.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});cp.set(t,e)}let up={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return cp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||J5.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Yo(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function gI(t){up=t(up)}function mI(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Rd(this),e,...n);return J5.set(r,e.sort?e.sort():[e]),Yo(r)}:fI().includes(t)?function(...e){return t.apply(Rd(this),e),Yo(K5.get(this))}:function(...e){return Yo(t.apply(Rd(this),e))}}function yI(t){return typeof t=="function"?mI(t):(t instanceof IDBTransaction&&pI(t),uI(t,hI())?new Proxy(t,up):t)}function Yo(t){if(t instanceof IDBRequest)return dI(t);if(Pd.has(t))return Pd.get(t);const e=yI(t);return e!==t&&(Pd.set(t,e),pg.set(e,t)),e}const Rd=t=>pg.get(t);function vI(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Yo(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Yo(o.result),l.oldVersion,l.newVersion,Yo(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),a}const _I=["get","getKey","getAll","getAllKeys","count"],bI=["put","add","delete","clear"],Nd=new Map;function F1(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Nd.get(e))return Nd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=bI.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||_I.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let h=l.store;return r&&(h=h.index(a.shift())),(await Promise.all([h[n](...a),i&&l.done]))[0]};return Nd.set(e,s),s}gI(t=>({...t,get:(e,n,r)=>F1(e,n)||t.get(e,n,r),has:(e,n)=>!!F1(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(AI(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function AI(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const hp="@firebase/app",M1="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ys=new dg("@firebase/app"),II="@firebase/app-compat",EI="@firebase/analytics-compat",TI="@firebase/analytics",SI="@firebase/app-check-compat",xI="@firebase/app-check",PI="@firebase/auth",RI="@firebase/auth-compat",NI="@firebase/database",LI="@firebase/data-connect",CI="@firebase/database-compat",kI="@firebase/functions",DI="@firebase/functions-compat",OI="@firebase/installations",FI="@firebase/installations-compat",MI="@firebase/messaging",VI="@firebase/messaging-compat",UI="@firebase/performance",jI="@firebase/performance-compat",BI="@firebase/remote-config",qI="@firebase/remote-config-compat",HI="@firebase/storage",zI="@firebase/storage-compat",GI="@firebase/firestore",$I="@firebase/vertexai-preview",WI="@firebase/firestore-compat",KI="firebase",JI="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fp="[DEFAULT]",QI={[hp]:"fire-core",[II]:"fire-core-compat",[TI]:"fire-analytics",[EI]:"fire-analytics-compat",[xI]:"fire-app-check",[SI]:"fire-app-check-compat",[PI]:"fire-auth",[RI]:"fire-auth-compat",[NI]:"fire-rtdb",[LI]:"fire-data-connect",[CI]:"fire-rtdb-compat",[kI]:"fire-fn",[DI]:"fire-fn-compat",[OI]:"fire-iid",[FI]:"fire-iid-compat",[MI]:"fire-fcm",[VI]:"fire-fcm-compat",[UI]:"fire-perf",[jI]:"fire-perf-compat",[BI]:"fire-rc",[qI]:"fire-rc-compat",[HI]:"fire-gcs",[zI]:"fire-gcs-compat",[GI]:"fire-fst",[WI]:"fire-fst-compat",[$I]:"fire-vertex","fire-js":"fire-js",[KI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xh=new Map,YI=new Map,dp=new Map;function V1(t,e){try{t.container.addComponent(e)}catch(n){Ys.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function qa(t){const e=t.name;if(dp.has(e))return Ys.debug(`There were multiple attempts to register component ${e}.`),!1;dp.set(e,t);for(const n of Xh.values())V1(n,t);for(const n of YI.values())V1(n,t);return!0}function Cf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function $o(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Xo=new Ru("app","Firebase",XI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ra("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Xo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ja=JI;function Q5(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:fp,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Xo.create("bad-app-name",{appName:String(i)});if(n||(n=G5()),!n)throw Xo.create("no-options");const s=Xh.get(i);if(s){if(Yh(n,s.options)&&Yh(r,s.config))return s;throw Xo.create("duplicate-app",{appName:i})}const o=new sI(i);for(const l of dp.values())o.addComponent(l);const a=new ZI(n,r,o);return Xh.set(i,a),a}function gg(t=fp){const e=Xh.get(t);if(!e&&t===fp&&G5())return Q5();if(!e)throw Xo.create("no-app",{appName:t});return e}function as(t,e,n){var r;let i=(r=QI[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ys.warn(a.join(" "));return}qa(new ra(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e3="firebase-heartbeat-database",t3=1,yu="firebase-heartbeat-store";let Ld=null;function Y5(){return Ld||(Ld=vI(e3,t3,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(yu)}catch(n){console.warn(n)}}}}).catch(t=>{throw Xo.create("idb-open",{originalErrorMessage:t.message})})),Ld}async function n3(t){try{const n=(await Y5()).transaction(yu),r=await n.objectStore(yu).get(X5(t));return await n.done,r}catch(e){if(e instanceof ms)Ys.warn(e.message);else{const n=Xo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ys.warn(n.message)}}}async function U1(t,e){try{const r=(await Y5()).transaction(yu,"readwrite");await r.objectStore(yu).put(e,X5(t)),await r.done}catch(n){if(n instanceof ms)Ys.warn(n.message);else{const r=Xo.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ys.warn(r.message)}}}function X5(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r3=1024,i3=30*24*60*60*1e3;class s3{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new a3(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=j1();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=i3}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Ys.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=j1(),{heartbeatsToSend:r,unsentEntries:i}=o3(this._heartbeatsCache.heartbeats),s=Qh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Ys.warn(n),""}}}function j1(){return new Date().toISOString().substring(0,10)}function o3(t,e=r3){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),B1(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),B1(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class a3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return W4()?K4().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await n3(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return U1(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return U1(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function B1(t){return Qh(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l3(t){qa(new ra("platform-logger",e=>new wI(e),"PRIVATE")),qa(new ra("heartbeat",e=>new s3(e),"PRIVATE")),as(hp,M1,t),as(hp,M1,"esm2017"),as("fire-js","")}l3("");var q1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Va,Z5;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,S){function O(){}O.prototype=S.prototype,T.D=S.prototype,T.prototype=new O,T.prototype.constructor=T,T.C=function(F,w,E){for(var I=Array(arguments.length-2),z=2;z<arguments.length;z++)I[z-2]=arguments[z];return S.prototype[w].apply(F,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,S,O){O||(O=0);var F=Array(16);if(typeof S=="string")for(var w=0;16>w;++w)F[w]=S.charCodeAt(O++)|S.charCodeAt(O++)<<8|S.charCodeAt(O++)<<16|S.charCodeAt(O++)<<24;else for(w=0;16>w;++w)F[w]=S[O++]|S[O++]<<8|S[O++]<<16|S[O++]<<24;S=T.g[0],O=T.g[1],w=T.g[2];var E=T.g[3],I=S+(E^O&(w^E))+F[0]+3614090360&4294967295;S=O+(I<<7&4294967295|I>>>25),I=E+(w^S&(O^w))+F[1]+3905402710&4294967295,E=S+(I<<12&4294967295|I>>>20),I=w+(O^E&(S^O))+F[2]+606105819&4294967295,w=E+(I<<17&4294967295|I>>>15),I=O+(S^w&(E^S))+F[3]+3250441966&4294967295,O=w+(I<<22&4294967295|I>>>10),I=S+(E^O&(w^E))+F[4]+4118548399&4294967295,S=O+(I<<7&4294967295|I>>>25),I=E+(w^S&(O^w))+F[5]+1200080426&4294967295,E=S+(I<<12&4294967295|I>>>20),I=w+(O^E&(S^O))+F[6]+2821735955&4294967295,w=E+(I<<17&4294967295|I>>>15),I=O+(S^w&(E^S))+F[7]+4249261313&4294967295,O=w+(I<<22&4294967295|I>>>10),I=S+(E^O&(w^E))+F[8]+1770035416&4294967295,S=O+(I<<7&4294967295|I>>>25),I=E+(w^S&(O^w))+F[9]+2336552879&4294967295,E=S+(I<<12&4294967295|I>>>20),I=w+(O^E&(S^O))+F[10]+4294925233&4294967295,w=E+(I<<17&4294967295|I>>>15),I=O+(S^w&(E^S))+F[11]+2304563134&4294967295,O=w+(I<<22&4294967295|I>>>10),I=S+(E^O&(w^E))+F[12]+1804603682&4294967295,S=O+(I<<7&4294967295|I>>>25),I=E+(w^S&(O^w))+F[13]+4254626195&4294967295,E=S+(I<<12&4294967295|I>>>20),I=w+(O^E&(S^O))+F[14]+2792965006&4294967295,w=E+(I<<17&4294967295|I>>>15),I=O+(S^w&(E^S))+F[15]+1236535329&4294967295,O=w+(I<<22&4294967295|I>>>10),I=S+(w^E&(O^w))+F[1]+4129170786&4294967295,S=O+(I<<5&4294967295|I>>>27),I=E+(O^w&(S^O))+F[6]+3225465664&4294967295,E=S+(I<<9&4294967295|I>>>23),I=w+(S^O&(E^S))+F[11]+643717713&4294967295,w=E+(I<<14&4294967295|I>>>18),I=O+(E^S&(w^E))+F[0]+3921069994&4294967295,O=w+(I<<20&4294967295|I>>>12),I=S+(w^E&(O^w))+F[5]+3593408605&4294967295,S=O+(I<<5&4294967295|I>>>27),I=E+(O^w&(S^O))+F[10]+38016083&4294967295,E=S+(I<<9&4294967295|I>>>23),I=w+(S^O&(E^S))+F[15]+3634488961&4294967295,w=E+(I<<14&4294967295|I>>>18),I=O+(E^S&(w^E))+F[4]+3889429448&4294967295,O=w+(I<<20&4294967295|I>>>12),I=S+(w^E&(O^w))+F[9]+568446438&4294967295,S=O+(I<<5&4294967295|I>>>27),I=E+(O^w&(S^O))+F[14]+3275163606&4294967295,E=S+(I<<9&4294967295|I>>>23),I=w+(S^O&(E^S))+F[3]+4107603335&4294967295,w=E+(I<<14&4294967295|I>>>18),I=O+(E^S&(w^E))+F[8]+1163531501&4294967295,O=w+(I<<20&4294967295|I>>>12),I=S+(w^E&(O^w))+F[13]+2850285829&4294967295,S=O+(I<<5&4294967295|I>>>27),I=E+(O^w&(S^O))+F[2]+4243563512&4294967295,E=S+(I<<9&4294967295|I>>>23),I=w+(S^O&(E^S))+F[7]+1735328473&4294967295,w=E+(I<<14&4294967295|I>>>18),I=O+(E^S&(w^E))+F[12]+2368359562&4294967295,O=w+(I<<20&4294967295|I>>>12),I=S+(O^w^E)+F[5]+4294588738&4294967295,S=O+(I<<4&4294967295|I>>>28),I=E+(S^O^w)+F[8]+2272392833&4294967295,E=S+(I<<11&4294967295|I>>>21),I=w+(E^S^O)+F[11]+1839030562&4294967295,w=E+(I<<16&4294967295|I>>>16),I=O+(w^E^S)+F[14]+4259657740&4294967295,O=w+(I<<23&4294967295|I>>>9),I=S+(O^w^E)+F[1]+2763975236&4294967295,S=O+(I<<4&4294967295|I>>>28),I=E+(S^O^w)+F[4]+1272893353&4294967295,E=S+(I<<11&4294967295|I>>>21),I=w+(E^S^O)+F[7]+4139469664&4294967295,w=E+(I<<16&4294967295|I>>>16),I=O+(w^E^S)+F[10]+3200236656&4294967295,O=w+(I<<23&4294967295|I>>>9),I=S+(O^w^E)+F[13]+681279174&4294967295,S=O+(I<<4&4294967295|I>>>28),I=E+(S^O^w)+F[0]+3936430074&4294967295,E=S+(I<<11&4294967295|I>>>21),I=w+(E^S^O)+F[3]+3572445317&4294967295,w=E+(I<<16&4294967295|I>>>16),I=O+(w^E^S)+F[6]+76029189&4294967295,O=w+(I<<23&4294967295|I>>>9),I=S+(O^w^E)+F[9]+3654602809&4294967295,S=O+(I<<4&4294967295|I>>>28),I=E+(S^O^w)+F[12]+3873151461&4294967295,E=S+(I<<11&4294967295|I>>>21),I=w+(E^S^O)+F[15]+530742520&4294967295,w=E+(I<<16&4294967295|I>>>16),I=O+(w^E^S)+F[2]+3299628645&4294967295,O=w+(I<<23&4294967295|I>>>9),I=S+(w^(O|~E))+F[0]+4096336452&4294967295,S=O+(I<<6&4294967295|I>>>26),I=E+(O^(S|~w))+F[7]+1126891415&4294967295,E=S+(I<<10&4294967295|I>>>22),I=w+(S^(E|~O))+F[14]+2878612391&4294967295,w=E+(I<<15&4294967295|I>>>17),I=O+(E^(w|~S))+F[5]+4237533241&4294967295,O=w+(I<<21&4294967295|I>>>11),I=S+(w^(O|~E))+F[12]+1700485571&4294967295,S=O+(I<<6&4294967295|I>>>26),I=E+(O^(S|~w))+F[3]+2399980690&4294967295,E=S+(I<<10&4294967295|I>>>22),I=w+(S^(E|~O))+F[10]+4293915773&4294967295,w=E+(I<<15&4294967295|I>>>17),I=O+(E^(w|~S))+F[1]+2240044497&4294967295,O=w+(I<<21&4294967295|I>>>11),I=S+(w^(O|~E))+F[8]+1873313359&4294967295,S=O+(I<<6&4294967295|I>>>26),I=E+(O^(S|~w))+F[15]+4264355552&4294967295,E=S+(I<<10&4294967295|I>>>22),I=w+(S^(E|~O))+F[6]+2734768916&4294967295,w=E+(I<<15&4294967295|I>>>17),I=O+(E^(w|~S))+F[13]+1309151649&4294967295,O=w+(I<<21&4294967295|I>>>11),I=S+(w^(O|~E))+F[4]+4149444226&4294967295,S=O+(I<<6&4294967295|I>>>26),I=E+(O^(S|~w))+F[11]+3174756917&4294967295,E=S+(I<<10&4294967295|I>>>22),I=w+(S^(E|~O))+F[2]+718787259&4294967295,w=E+(I<<15&4294967295|I>>>17),I=O+(E^(w|~S))+F[9]+3951481745&4294967295,T.g[0]=T.g[0]+S&4294967295,T.g[1]=T.g[1]+(w+(I<<21&4294967295|I>>>11))&4294967295,T.g[2]=T.g[2]+w&4294967295,T.g[3]=T.g[3]+E&4294967295}r.prototype.u=function(T,S){S===void 0&&(S=T.length);for(var O=S-this.blockSize,F=this.B,w=this.h,E=0;E<S;){if(w==0)for(;E<=O;)i(this,T,E),E+=this.blockSize;if(typeof T=="string"){for(;E<S;)if(F[w++]=T.charCodeAt(E++),w==this.blockSize){i(this,F),w=0;break}}else for(;E<S;)if(F[w++]=T[E++],w==this.blockSize){i(this,F),w=0;break}}this.h=w,this.o+=S},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var S=1;S<T.length-8;++S)T[S]=0;var O=8*this.o;for(S=T.length-8;S<T.length;++S)T[S]=O&255,O/=256;for(this.u(T),T=Array(16),S=O=0;4>S;++S)for(var F=0;32>F;F+=8)T[O++]=this.g[S]>>>F&255;return T};function s(T,S){var O=a;return Object.prototype.hasOwnProperty.call(O,T)?O[T]:O[T]=S(T)}function o(T,S){this.h=S;for(var O=[],F=!0,w=T.length-1;0<=w;w--){var E=T[w]|0;F&&E==S||(O[w]=E,F=!1)}this.g=O}var a={};function l(T){return-128<=T&&128>T?s(T,function(S){return new o([S|0],0>S?-1:0)}):new o([T|0],0>T?-1:0)}function h(T){if(isNaN(T)||!isFinite(T))return p;if(0>T)return j(h(-T));for(var S=[],O=1,F=0;T>=O;F++)S[F]=T/O|0,O*=4294967296;return new o(S,0)}function d(T,S){if(T.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(T.charAt(0)=="-")return j(d(T.substring(1),S));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var O=h(Math.pow(S,8)),F=p,w=0;w<T.length;w+=8){var E=Math.min(8,T.length-w),I=parseInt(T.substring(w,w+E),S);8>E?(E=h(Math.pow(S,E)),F=F.j(E).add(h(I))):(F=F.j(O),F=F.add(h(I)))}return F}var p=l(0),v=l(1),g=l(16777216);t=o.prototype,t.m=function(){if(P(this))return-j(this).m();for(var T=0,S=1,O=0;O<this.g.length;O++){var F=this.i(O);T+=(0<=F?F:4294967296+F)*S,S*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(L(this))return"0";if(P(this))return"-"+j(this).toString(T);for(var S=h(Math.pow(T,6)),O=this,F="";;){var w=Z(O,S).g;O=x(O,w.j(S));var E=((0<O.g.length?O.g[0]:O.h)>>>0).toString(T);if(O=w,L(O))return E+F;for(;6>E.length;)E="0"+E;F=E+F}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function L(T){if(T.h!=0)return!1;for(var S=0;S<T.g.length;S++)if(T.g[S]!=0)return!1;return!0}function P(T){return T.h==-1}t.l=function(T){return T=x(this,T),P(T)?-1:L(T)?0:1};function j(T){for(var S=T.g.length,O=[],F=0;F<S;F++)O[F]=~T.g[F];return new o(O,~T.h).add(v)}t.abs=function(){return P(this)?j(this):this},t.add=function(T){for(var S=Math.max(this.g.length,T.g.length),O=[],F=0,w=0;w<=S;w++){var E=F+(this.i(w)&65535)+(T.i(w)&65535),I=(E>>>16)+(this.i(w)>>>16)+(T.i(w)>>>16);F=I>>>16,E&=65535,I&=65535,O[w]=I<<16|E}return new o(O,O[O.length-1]&-2147483648?-1:0)};function x(T,S){return T.add(j(S))}t.j=function(T){if(L(this)||L(T))return p;if(P(this))return P(T)?j(this).j(j(T)):j(j(this).j(T));if(P(T))return j(this.j(j(T)));if(0>this.l(g)&&0>T.l(g))return h(this.m()*T.m());for(var S=this.g.length+T.g.length,O=[],F=0;F<2*S;F++)O[F]=0;for(F=0;F<this.g.length;F++)for(var w=0;w<T.g.length;w++){var E=this.i(F)>>>16,I=this.i(F)&65535,z=T.i(w)>>>16,re=T.i(w)&65535;O[2*F+2*w]+=I*re,U(O,2*F+2*w),O[2*F+2*w+1]+=E*re,U(O,2*F+2*w+1),O[2*F+2*w+1]+=I*z,U(O,2*F+2*w+1),O[2*F+2*w+2]+=E*z,U(O,2*F+2*w+2)}for(F=0;F<S;F++)O[F]=O[2*F+1]<<16|O[2*F];for(F=S;F<2*S;F++)O[F]=0;return new o(O,0)};function U(T,S){for(;(T[S]&65535)!=T[S];)T[S+1]+=T[S]>>>16,T[S]&=65535,S++}function J(T,S){this.g=T,this.h=S}function Z(T,S){if(L(S))throw Error("division by zero");if(L(T))return new J(p,p);if(P(T))return S=Z(j(T),S),new J(j(S.g),j(S.h));if(P(S))return S=Z(T,j(S)),new J(j(S.g),S.h);if(30<T.g.length){if(P(T)||P(S))throw Error("slowDivide_ only works with positive integers.");for(var O=v,F=S;0>=F.l(T);)O=fe(O),F=fe(F);var w=Ie(O,1),E=Ie(F,1);for(F=Ie(F,2),O=Ie(O,2);!L(F);){var I=E.add(F);0>=I.l(T)&&(w=w.add(O),E=I),F=Ie(F,1),O=Ie(O,1)}return S=x(T,w.j(S)),new J(w,S)}for(w=p;0<=T.l(S);){for(O=Math.max(1,Math.floor(T.m()/S.m())),F=Math.ceil(Math.log(O)/Math.LN2),F=48>=F?1:Math.pow(2,F-48),E=h(O),I=E.j(S);P(I)||0<I.l(T);)O-=F,E=h(O),I=E.j(S);L(E)&&(E=v),w=w.add(E),T=x(T,I)}return new J(w,T)}t.A=function(T){return Z(this,T).h},t.and=function(T){for(var S=Math.max(this.g.length,T.g.length),O=[],F=0;F<S;F++)O[F]=this.i(F)&T.i(F);return new o(O,this.h&T.h)},t.or=function(T){for(var S=Math.max(this.g.length,T.g.length),O=[],F=0;F<S;F++)O[F]=this.i(F)|T.i(F);return new o(O,this.h|T.h)},t.xor=function(T){for(var S=Math.max(this.g.length,T.g.length),O=[],F=0;F<S;F++)O[F]=this.i(F)^T.i(F);return new o(O,this.h^T.h)};function fe(T){for(var S=T.g.length+1,O=[],F=0;F<S;F++)O[F]=T.i(F)<<1|T.i(F-1)>>>31;return new o(O,T.h)}function Ie(T,S){var O=S>>5;S%=32;for(var F=T.g.length-O,w=[],E=0;E<F;E++)w[E]=0<S?T.i(E+O)>>>S|T.i(E+O+1)<<32-S:T.i(E+O);return new o(w,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Z5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=d,Va=o}).apply(typeof q1<"u"?q1:typeof self<"u"?self:typeof window<"u"?window:{});var dh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ey,qc,ty,Ph,pp,ny,ry,iy;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,_,A){return u==Array.prototype||u==Object.prototype||(u[_]=A.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof dh=="object"&&dh];for(var _=0;_<u.length;++_){var A=u[_];if(A&&A.Math==Math)return A}throw Error("Cannot find global object")}var r=n(this);function i(u,_){if(_)e:{var A=r;u=u.split(".");for(var B=0;B<u.length-1;B++){var pe=u[B];if(!(pe in A))break e;A=A[pe]}u=u[u.length-1],B=A[u],_=_(B),_!=B&&_!=null&&e(A,u,{configurable:!0,writable:!0,value:_})}}function s(u,_){u instanceof String&&(u+="");var A=0,B=!1,pe={next:function(){if(!B&&A<u.length){var Ee=A++;return{value:_(Ee,u[Ee]),done:!1}}return B=!0,{done:!0,value:void 0}}};return pe[Symbol.iterator]=function(){return pe},pe}i("Array.prototype.values",function(u){return u||function(){return s(this,function(_,A){return A})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var _=typeof u;return _=_!="object"?_:u?Array.isArray(u)?"array":_:"null",_=="array"||_=="object"&&typeof u.length=="number"}function h(u){var _=typeof u;return _=="object"&&u!=null||_=="function"}function d(u,_,A){return u.call.apply(u.bind,arguments)}function p(u,_,A){if(!u)throw Error();if(2<arguments.length){var B=Array.prototype.slice.call(arguments,2);return function(){var pe=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(pe,B),u.apply(_,pe)}}return function(){return u.apply(_,arguments)}}function v(u,_,A){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:p,v.apply(null,arguments)}function g(u,_){var A=Array.prototype.slice.call(arguments,1);return function(){var B=A.slice();return B.push.apply(B,arguments),u.apply(this,B)}}function L(u,_){function A(){}A.prototype=_.prototype,u.aa=_.prototype,u.prototype=new A,u.prototype.constructor=u,u.Qb=function(B,pe,Ee){for(var ze=Array(arguments.length-2),bt=2;bt<arguments.length;bt++)ze[bt-2]=arguments[bt];return _.prototype[pe].apply(B,ze)}}function P(u){const _=u.length;if(0<_){const A=Array(_);for(let B=0;B<_;B++)A[B]=u[B];return A}return[]}function j(u,_){for(let A=1;A<arguments.length;A++){const B=arguments[A];if(l(B)){const pe=u.length||0,Ee=B.length||0;u.length=pe+Ee;for(let ze=0;ze<Ee;ze++)u[pe+ze]=B[ze]}else u.push(B)}}class x{constructor(_,A){this.i=_,this.j=A,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function U(u){return/^[\s\xa0]*$/.test(u)}function J(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function Z(u){return Z[" "](u),u}Z[" "]=function(){};var fe=J().indexOf("Gecko")!=-1&&!(J().toLowerCase().indexOf("webkit")!=-1&&J().indexOf("Edge")==-1)&&!(J().indexOf("Trident")!=-1||J().indexOf("MSIE")!=-1)&&J().indexOf("Edge")==-1;function Ie(u,_,A){for(const B in u)_.call(A,u[B],B,u)}function T(u,_){for(const A in u)_.call(void 0,u[A],A,u)}function S(u){const _={};for(const A in u)_[A]=u[A];return _}const O="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function F(u,_){let A,B;for(let pe=1;pe<arguments.length;pe++){B=arguments[pe];for(A in B)u[A]=B[A];for(let Ee=0;Ee<O.length;Ee++)A=O[Ee],Object.prototype.hasOwnProperty.call(B,A)&&(u[A]=B[A])}}function w(u){var _=1;u=u.split(":");const A=[];for(;0<_&&u.length;)A.push(u.shift()),_--;return u.length&&A.push(u.join(":")),A}function E(u){a.setTimeout(()=>{throw u},0)}function I(){var u=xe;let _=null;return u.g&&(_=u.g,u.g=u.g.next,u.g||(u.h=null),_.next=null),_}class z{constructor(){this.h=this.g=null}add(_,A){const B=re.get();B.set(_,A),this.h?this.h.next=B:this.g=B,this.h=B}}var re=new x(()=>new ae,u=>u.reset());class ae{constructor(){this.next=this.g=this.h=null}set(_,A){this.h=_,this.g=A,this.next=null}reset(){this.next=this.g=this.h=null}}let ge,ce=!1,xe=new z,Pe=()=>{const u=a.Promise.resolve(void 0);ge=()=>{u.then(Qe)}};var Qe=()=>{for(var u;u=I();){try{u.h.call(u.g)}catch(A){E(A)}var _=re;_.j(u),100>_.h&&(_.h++,u.next=_.g,_.g=u)}ce=!1};function C(){this.s=this.s,this.C=this.C}C.prototype.s=!1,C.prototype.ma=function(){this.s||(this.s=!0,this.N())},C.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function M(u,_){this.type=u,this.g=this.target=_,this.defaultPrevented=!1}M.prototype.h=function(){this.defaultPrevented=!0};var K=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,_=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const A=()=>{};a.addEventListener("test",A,_),a.removeEventListener("test",A,_)}catch{}return u}();function ee(u,_){if(M.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var A=this.type=u.type,B=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=_,_=u.relatedTarget){if(fe){e:{try{Z(_.nodeName);var pe=!0;break e}catch{}pe=!1}pe||(_=null)}}else A=="mouseover"?_=u.fromElement:A=="mouseout"&&(_=u.toElement);this.relatedTarget=_,B?(this.clientX=B.clientX!==void 0?B.clientX:B.pageX,this.clientY=B.clientY!==void 0?B.clientY:B.pageY,this.screenX=B.screenX||0,this.screenY=B.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:he[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&ee.aa.h.call(this)}}L(ee,M);var he={2:"touch",3:"pen",4:"mouse"};ee.prototype.h=function(){ee.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Y="closure_listenable_"+(1e6*Math.random()|0),se=0;function ne(u,_,A,B,pe){this.listener=u,this.proxy=null,this.src=_,this.type=A,this.capture=!!B,this.ha=pe,this.key=++se,this.da=this.fa=!1}function Se(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function De(u){this.src=u,this.g={},this.h=0}De.prototype.add=function(u,_,A,B,pe){var Ee=u.toString();u=this.g[Ee],u||(u=this.g[Ee]=[],this.h++);var ze=W(u,_,B,pe);return-1<ze?(_=u[ze],A||(_.fa=!1)):(_=new ne(_,this.src,Ee,!!B,pe),_.fa=A,u.push(_)),_};function $(u,_){var A=_.type;if(A in u.g){var B=u.g[A],pe=Array.prototype.indexOf.call(B,_,void 0),Ee;(Ee=0<=pe)&&Array.prototype.splice.call(B,pe,1),Ee&&(Se(_),u.g[A].length==0&&(delete u.g[A],u.h--))}}function W(u,_,A,B){for(var pe=0;pe<u.length;++pe){var Ee=u[pe];if(!Ee.da&&Ee.listener==_&&Ee.capture==!!A&&Ee.ha==B)return pe}return-1}var ie="closure_lm_"+(1e6*Math.random()|0),te={};function H(u,_,A,B,pe){if(Array.isArray(_)){for(var Ee=0;Ee<_.length;Ee++)H(u,_[Ee],A,B,pe);return null}return A=We(A),u&&u[Y]?u.K(_,A,h(B)?!!B.capture:!1,pe):Te(u,_,A,!1,B,pe)}function Te(u,_,A,B,pe,Ee){if(!_)throw Error("Invalid event type");var ze=h(pe)?!!pe.capture:!!pe,bt=Le(u);if(bt||(u[ie]=bt=new De(u)),A=bt.add(_,A,B,ze,Ee),A.proxy)return A;if(B=Re(),A.proxy=B,B.src=u,B.listener=A,u.addEventListener)K||(pe=ze),pe===void 0&&(pe=!1),u.addEventListener(_.toString(),B,pe);else if(u.attachEvent)u.attachEvent(_e(_.toString()),B);else if(u.addListener&&u.removeListener)u.addListener(B);else throw Error("addEventListener and attachEvent are unavailable.");return A}function Re(){function u(A){return _.call(u.src,u.listener,A)}const _=ke;return u}function ve(u,_,A,B,pe){if(Array.isArray(_))for(var Ee=0;Ee<_.length;Ee++)ve(u,_[Ee],A,B,pe);else B=h(B)?!!B.capture:!!B,A=We(A),u&&u[Y]?(u=u.i,_=String(_).toString(),_ in u.g&&(Ee=u.g[_],A=W(Ee,A,B,pe),-1<A&&(Se(Ee[A]),Array.prototype.splice.call(Ee,A,1),Ee.length==0&&(delete u.g[_],u.h--)))):u&&(u=Le(u))&&(_=u.g[_.toString()],u=-1,_&&(u=W(_,A,B,pe)),(A=-1<u?_[u]:null)&&be(A))}function be(u){if(typeof u!="number"&&u&&!u.da){var _=u.src;if(_&&_[Y])$(_.i,u);else{var A=u.type,B=u.proxy;_.removeEventListener?_.removeEventListener(A,B,u.capture):_.detachEvent?_.detachEvent(_e(A),B):_.addListener&&_.removeListener&&_.removeListener(B),(A=Le(_))?($(A,u),A.h==0&&(A.src=null,_[ie]=null)):Se(u)}}}function _e(u){return u in te?te[u]:te[u]="on"+u}function ke(u,_){if(u.da)u=!0;else{_=new ee(_,this);var A=u.listener,B=u.ha||u.src;u.fa&&be(u),u=A.call(B,_)}return u}function Le(u){return u=u[ie],u instanceof De?u:null}var He="__closure_events_fn_"+(1e9*Math.random()>>>0);function We(u){return typeof u=="function"?u:(u[He]||(u[He]=function(_){return u.handleEvent(_)}),u[He])}function Ke(){C.call(this),this.i=new De(this),this.M=this,this.F=null}L(Ke,C),Ke.prototype[Y]=!0,Ke.prototype.removeEventListener=function(u,_,A,B){ve(this,u,_,A,B)};function et(u,_){var A,B=u.F;if(B)for(A=[];B;B=B.F)A.push(B);if(u=u.M,B=_.type||_,typeof _=="string")_=new M(_,u);else if(_ instanceof M)_.target=_.target||u;else{var pe=_;_=new M(B,u),F(_,pe)}if(pe=!0,A)for(var Ee=A.length-1;0<=Ee;Ee--){var ze=_.g=A[Ee];pe=at(ze,B,!0,_)&&pe}if(ze=_.g=u,pe=at(ze,B,!0,_)&&pe,pe=at(ze,B,!1,_)&&pe,A)for(Ee=0;Ee<A.length;Ee++)ze=_.g=A[Ee],pe=at(ze,B,!1,_)&&pe}Ke.prototype.N=function(){if(Ke.aa.N.call(this),this.i){var u=this.i,_;for(_ in u.g){for(var A=u.g[_],B=0;B<A.length;B++)Se(A[B]);delete u.g[_],u.h--}}this.F=null},Ke.prototype.K=function(u,_,A,B){return this.i.add(String(u),_,!1,A,B)},Ke.prototype.L=function(u,_,A,B){return this.i.add(String(u),_,!0,A,B)};function at(u,_,A,B){if(_=u.i.g[String(_)],!_)return!0;_=_.concat();for(var pe=!0,Ee=0;Ee<_.length;++Ee){var ze=_[Ee];if(ze&&!ze.da&&ze.capture==A){var bt=ze.listener,Nt=ze.ha||ze.src;ze.fa&&$(u.i,ze),pe=bt.call(Nt,B)!==!1&&pe}}return pe&&!B.defaultPrevented}function it(u,_,A){if(typeof u=="function")A&&(u=v(u,A));else if(u&&typeof u.handleEvent=="function")u=v(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:a.setTimeout(u,_||0)}function ct(u){u.g=it(()=>{u.g=null,u.i&&(u.i=!1,ct(u))},u.l);const _=u.h;u.h=null,u.m.apply(null,_)}class Ye extends C{constructor(_,A){super(),this.m=_,this.l=A,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:ct(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ft(u){C.call(this),this.h=u,this.g={}}L(Ft,C);var Pt=[];function Qn(u){Ie(u.g,function(_,A){this.g.hasOwnProperty(A)&&be(_)},u),u.g={}}Ft.prototype.N=function(){Ft.aa.N.call(this),Qn(this)},Ft.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var _t=a.JSON.stringify,Rt=a.JSON.parse,Er=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function kt(){}kt.prototype.h=null;function Ui(u){return u.h||(u.h=u.i())}function dn(){}var Yn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Hr(){M.call(this,"d")}L(Hr,M);function ln(){M.call(this,"c")}L(ln,M);var ht={},Mt=null;function si(){return Mt=Mt||new Ke}ht.La="serverreachability";function Cn(u){M.call(this,ht.La,u)}L(Cn,M);function or(u){const _=si();et(_,new Cn(_))}ht.STAT_EVENT="statevent";function zr(u,_){M.call(this,ht.STAT_EVENT,u),this.stat=_}L(zr,M);function rt(u){const _=si();et(_,new zr(_,u))}ht.Ma="timingevent";function Dr(u,_){M.call(this,ht.Ma,u),this.size=_}L(Dr,M);function ar(u,_){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},_)}function kn(){this.g=!0}kn.prototype.xa=function(){this.g=!1};function In(u,_,A,B,pe,Ee){u.info(function(){if(u.g)if(Ee)for(var ze="",bt=Ee.split("&"),Nt=0;Nt<bt.length;Nt++){var wt=bt[Nt].split("=");if(1<wt.length){var $t=wt[0];wt=wt[1];var rn=$t.split("_");ze=2<=rn.length&&rn[1]=="type"?ze+($t+"="+wt+"&"):ze+($t+"=redacted&")}}else ze=null;else ze=Ee;return"XMLHTTP REQ ("+B+") [attempt "+pe+"]: "+_+`
`+A+`
`+ze})}function vn(u,_,A,B,pe,Ee,ze){u.info(function(){return"XMLHTTP RESP ("+B+") [ attempt "+pe+"]: "+_+`
`+A+`
`+Ee+" "+ze})}function Dn(u,_,A,B){u.info(function(){return"XMLHTTP TEXT ("+_+"): "+vi(u,A)+(B?" "+B:"")})}function no(u,_){u.info(function(){return"TIMEOUT: "+_})}kn.prototype.info=function(){};function vi(u,_){if(!u.g)return _;if(!_)return null;try{var A=JSON.parse(_);if(A){for(u=0;u<A.length;u++)if(Array.isArray(A[u])){var B=A[u];if(!(2>B.length)){var pe=B[1];if(Array.isArray(pe)&&!(1>pe.length)){var Ee=pe[0];if(Ee!="noop"&&Ee!="stop"&&Ee!="close")for(var ze=1;ze<pe.length;ze++)pe[ze]=""}}}}return _t(A)}catch{return _}}var lr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Or={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Tr;function Sr(){}L(Sr,kt),Sr.prototype.g=function(){return new XMLHttpRequest},Sr.prototype.i=function(){return{}},Tr=new Sr;function En(u,_,A,B){this.j=u,this.i=_,this.l=A,this.R=B||1,this.U=new Ft(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Gr}function Gr(){this.i=null,this.g="",this.h=!1}var ji={},Bi={};function qi(u,_,A){u.L=1,u.v=Es(xr(_)),u.m=A,u.P=!0,_s(u,null)}function _s(u,_){u.F=Date.now(),ro(u),u.A=xr(u.v);var A=u.A,B=u.R;Array.isArray(B)||(B=[String(B)]),yt(A.i,"t",B),u.C=0,A=u.j.J,u.h=new Gr,u.g=R(u.j,A?_:null,!u.m),0<u.O&&(u.M=new Ye(v(u.Y,u,u.g),u.O)),_=u.U,A=u.g,B=u.ca;var pe="readystatechange";Array.isArray(pe)||(pe&&(Pt[0]=pe.toString()),pe=Pt);for(var Ee=0;Ee<pe.length;Ee++){var ze=H(A,pe[Ee],B||_.handleEvent,!1,_.h||_);if(!ze)break;_.g[ze.key]=ze}_=u.H?S(u.H):{},u.m?(u.u||(u.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,_)):(u.u="GET",u.g.ea(u.A,u.u,null,_)),or(),In(u.i,u.u,u.A,u.l,u.R,u.m)}En.prototype.ca=function(u){u=u.target;const _=this.M;_&&jn(u)==3?_.j():this.Y(u)},En.prototype.Y=function(u){try{if(u==this.g)e:{const rn=jn(this.g);var _=this.g.Ba();const Si=this.g.Z();if(!(3>rn)&&(rn!=3||this.g&&(this.h.h||this.g.oa()||ol(this.g)))){this.J||rn!=4||_==7||(_==8||0>=Si?or(3):or(2)),Hi(this);var A=this.g.Z();this.X=A;t:if(bs(this)){var B=ol(this.g);u="";var pe=B.length,Ee=jn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){_i(this),zi(this);var ze="";break t}this.h.i=new a.TextDecoder}for(_=0;_<pe;_++)this.h.h=!0,u+=this.h.i.decode(B[_],{stream:!(Ee&&_==pe-1)});B.length=0,this.h.g+=u,this.C=0,ze=this.h.g}else ze=this.g.oa();if(this.o=A==200,vn(this.i,this.u,this.A,this.l,this.R,rn,A),this.o){if(this.T&&!this.K){t:{if(this.g){var bt,Nt=this.g;if((bt=Nt.g?Nt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!U(bt)){var wt=bt;break t}}wt=null}if(A=wt)Dn(this.i,this.l,A,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ws(this,A);else{this.o=!1,this.s=3,rt(12),_i(this),zi(this);break e}}if(this.P){A=!0;let Zn;for(;!this.J&&this.C<ze.length;)if(Zn=Ya(this,ze),Zn==Bi){rn==4&&(this.s=4,rt(14),A=!1),Dn(this.i,this.l,null,"[Incomplete Response]");break}else if(Zn==ji){this.s=4,rt(15),Dn(this.i,this.l,ze,"[Invalid Chunk]"),A=!1;break}else Dn(this.i,this.l,Zn,null),ws(this,Zn);if(bs(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),rn!=4||ze.length!=0||this.h.h||(this.s=1,rt(16),A=!1),this.o=this.o&&A,!A)Dn(this.i,this.l,ze,"[Invalid Chunked Response]"),_i(this),zi(this);else if(0<ze.length&&!this.W){this.W=!0;var $t=this.j;$t.g==this&&$t.ba&&!$t.M&&($t.j.info("Great, no buffering proxy detected. Bytes received: "+ze.length),vo($t),$t.M=!0,rt(11))}}else Dn(this.i,this.l,ze,null),ws(this,ze);rn==4&&_i(this),this.o&&!this.J&&(rn==4?Ji(this.j,this):(this.o=!1,ro(this)))}else Wi(this.g),A==400&&0<ze.indexOf("Unknown SID")?(this.s=3,rt(12)):(this.s=0,rt(13)),_i(this),zi(this)}}}catch{}finally{}};function bs(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Ya(u,_){var A=u.C,B=_.indexOf(`
`,A);return B==-1?Bi:(A=Number(_.substring(A,B)),isNaN(A)?ji:(B+=1,B+A>_.length?Bi:(_=_.slice(B,B+A),u.C=B+A,_)))}En.prototype.cancel=function(){this.J=!0,_i(this)};function ro(u){u.S=Date.now()+u.I,Xa(u,u.I)}function Xa(u,_){if(u.B!=null)throw Error("WatchDog timer not null");u.B=ar(v(u.ba,u),_)}function Hi(u){u.B&&(a.clearTimeout(u.B),u.B=null)}En.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(no(this.i,this.A),this.L!=2&&(or(),rt(17)),_i(this),this.s=2,zi(this)):Xa(this,this.S-u)};function zi(u){u.j.G==0||u.J||Ji(u.j,u)}function _i(u){Hi(u);var _=u.M;_&&typeof _.ma=="function"&&_.ma(),u.M=null,Qn(u.U),u.g&&(_=u.g,u.g=null,_.abort(),_.ma())}function ws(u,_){try{var A=u.j;if(A.G!=0&&(A.g==u||ua(A.h,u))){if(!u.K&&ua(A.h,u)&&A.G==3){try{var B=A.Da.g.parse(_)}catch{B=null}if(Array.isArray(B)&&B.length==3){var pe=B;if(pe[0]==0){e:if(!A.u){if(A.g)if(A.g.F+3e3<u.F)Ti(A),po(A);else break e;Rs(A),rt(18)}}else A.za=pe[1],0<A.za-A.T&&37500>pe[2]&&A.F&&A.v==0&&!A.C&&(A.C=ar(v(A.Za,A),6e3));if(1>=As(A.h)&&A.ca){try{A.ca()}catch{}A.ca=void 0}}else cr(A,11)}else if((u.K||A.g==u)&&Ti(A),!U(_))for(pe=A.Da.g.parse(_),_=0;_<pe.length;_++){let wt=pe[_];if(A.T=wt[0],wt=wt[1],A.G==2)if(wt[0]=="c"){A.K=wt[1],A.ia=wt[2];const $t=wt[3];$t!=null&&(A.la=$t,A.j.info("VER="+A.la));const rn=wt[4];rn!=null&&(A.Aa=rn,A.j.info("SVER="+A.Aa));const Si=wt[5];Si!=null&&typeof Si=="number"&&0<Si&&(B=1.5*Si,A.L=B,A.j.info("backChannelRequestTimeoutMs_="+B)),B=A;const Zn=u.g;if(Zn){const Qi=Zn.g?Zn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Qi){var Ee=B.h;Ee.g||Qi.indexOf("spdy")==-1&&Qi.indexOf("quic")==-1&&Qi.indexOf("h2")==-1||(Ee.j=Ee.l,Ee.g=new Set,Ee.h&&(pn(Ee,Ee.h),Ee.h=null))}if(B.D){const Yi=Zn.g?Zn.g.getResponseHeader("X-HTTP-Session-Id"):null;Yi&&(B.ya=Yi,Qt(B.I,B.D,Yi))}}A.G=3,A.l&&A.l.ua(),A.ba&&(A.R=Date.now()-u.F,A.j.info("Handshake RTT: "+A.R+"ms")),B=A;var ze=u;if(B.qa=m(B,B.J?B.ia:null,B.W),ze.K){ha(B.h,ze);var bt=ze,Nt=B.L;Nt&&(bt.I=Nt),bt.B&&(Hi(bt),ro(bt)),B.g=ze}else yo(B);0<A.i.length&&go(A)}else wt[0]!="stop"&&wt[0]!="close"||cr(A,7);else A.G==3&&(wt[0]=="stop"||wt[0]=="close"?wt[0]=="stop"?cr(A,7):Ei(A):wt[0]!="noop"&&A.l&&A.l.ta(wt),A.v=0)}}or(4)}catch{}}var mc=class{constructor(u,_){this.g=u,this.map=_}};function ca(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Za(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function As(u){return u.h?1:u.g?u.g.size:0}function ua(u,_){return u.h?u.h==_:u.g?u.g.has(_):!1}function pn(u,_){u.g?u.g.add(_):u.h=_}function ha(u,_){u.h&&u.h==_?u.h=null:u.g&&u.g.has(_)&&u.g.delete(_)}ca.prototype.cancel=function(){if(this.i=fa(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function fa(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let _=u.i;for(const A of u.g.values())_=_.concat(A.D);return _}return P(u.i)}function el(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var _=[],A=u.length,B=0;B<A;B++)_.push(u[B]);return _}_=[],A=0;for(B in u)_[A++]=u[B];return _}function da(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var _=[];u=u.length;for(var A=0;A<u;A++)_.push(A);return _}_=[],A=0;for(const B in u)_[A++]=B;return _}}}function tl(u,_){if(u.forEach&&typeof u.forEach=="function")u.forEach(_,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,_,void 0);else for(var A=da(u),B=el(u),pe=B.length,Ee=0;Ee<pe;Ee++)_.call(void 0,B[Ee],A&&A[Ee],u)}var Fr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function io(u,_){if(u){u=u.split("&");for(var A=0;A<u.length;A++){var B=u[A].indexOf("="),pe=null;if(0<=B){var Ee=u[A].substring(0,B);pe=u[A].substring(B+1)}else Ee=u[A];_(Ee,pe?decodeURIComponent(pe.replace(/\+/g," ")):"")}}}function _n(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof _n){this.h=u.h,Is(this,u.j),this.o=u.o,this.g=u.g,so(this,u.s),this.l=u.l;var _=u.i,A=new Gi;A.i=_.i,_.g&&(A.g=new Map(_.g),A.h=_.h),pa(this,A),this.m=u.m}else u&&(_=String(u).match(Fr))?(this.h=!1,Is(this,_[1]||"",!0),this.o=Ts(_[2]||""),this.g=Ts(_[3]||"",!0),so(this,_[4]),this.l=Ts(_[5]||"",!0),pa(this,_[6]||"",!0),this.m=Ts(_[7]||"")):(this.h=!1,this.i=new Gi(null,this.h))}_n.prototype.toString=function(){var u=[],_=this.j;_&&u.push(bi(_,nl,!0),":");var A=this.g;return(A||_=="file")&&(u.push("//"),(_=this.o)&&u.push(bi(_,nl,!0),"@"),u.push(encodeURIComponent(String(A)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A=this.s,A!=null&&u.push(":",String(A))),(A=this.l)&&(this.g&&A.charAt(0)!="/"&&u.push("/"),u.push(bi(A,A.charAt(0)=="/"?wi:vc,!0))),(A=this.i.toString())&&u.push("?",A),(A=this.m)&&u.push("#",bi(A,ao)),u.join("")};function xr(u){return new _n(u)}function Is(u,_,A){u.j=A?Ts(_,!0):_,u.j&&(u.j=u.j.replace(/:$/,""))}function so(u,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);u.s=_}else u.s=null}function pa(u,_,A){_ instanceof Gi?(u.i=_,_c(u.i,u.h)):(A||(_=bi(_,oo)),u.i=new Gi(_,u.h))}function Qt(u,_,A){u.i.set(_,A)}function Es(u){return Qt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Ts(u,_){return u?_?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function bi(u,_,A){return typeof u=="string"?(u=encodeURI(u).replace(_,yc),A&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function yc(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var nl=/[#\/\?@]/g,vc=/[#\?:]/g,wi=/[#\?]/g,oo=/[#\?@]/g,ao=/#/g;function Gi(u,_){this.h=this.g=null,this.i=u||null,this.j=!!_}function gn(u){u.g||(u.g=new Map,u.h=0,u.i&&io(u.i,function(_,A){u.add(decodeURIComponent(_.replace(/\+/g," ")),A)}))}t=Gi.prototype,t.add=function(u,_){gn(this),this.i=null,u=$i(this,u);var A=this.g.get(u);return A||this.g.set(u,A=[]),A.push(_),this.h+=1,this};function rl(u,_){gn(u),_=$i(u,_),u.g.has(_)&&(u.i=null,u.h-=u.g.get(_).length,u.g.delete(_))}function ga(u,_){return gn(u),_=$i(u,_),u.g.has(_)}t.forEach=function(u,_){gn(this),this.g.forEach(function(A,B){A.forEach(function(pe){u.call(_,pe,B,this)},this)},this)},t.na=function(){gn(this);const u=Array.from(this.g.values()),_=Array.from(this.g.keys()),A=[];for(let B=0;B<_.length;B++){const pe=u[B];for(let Ee=0;Ee<pe.length;Ee++)A.push(_[B])}return A},t.V=function(u){gn(this);let _=[];if(typeof u=="string")ga(this,u)&&(_=_.concat(this.g.get($i(this,u))));else{u=Array.from(this.g.values());for(let A=0;A<u.length;A++)_=_.concat(u[A])}return _},t.set=function(u,_){return gn(this),this.i=null,u=$i(this,u),ga(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[_]),this.h+=1,this},t.get=function(u,_){return u?(u=this.V(u),0<u.length?String(u[0]):_):_};function yt(u,_,A){rl(u,_),0<A.length&&(u.i=null,u.g.set($i(u,_),P(A)),u.h+=A.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],_=Array.from(this.g.keys());for(var A=0;A<_.length;A++){var B=_[A];const Ee=encodeURIComponent(String(B)),ze=this.V(B);for(B=0;B<ze.length;B++){var pe=Ee;ze[B]!==""&&(pe+="="+encodeURIComponent(String(ze[B]))),u.push(pe)}}return this.i=u.join("&")};function $i(u,_){return _=String(_),u.j&&(_=_.toLowerCase()),_}function _c(u,_){_&&!u.j&&(gn(u),u.i=null,u.g.forEach(function(A,B){var pe=B.toLowerCase();B!=pe&&(rl(this,B),yt(this,pe,A))},u)),u.j=_}function oi(u,_){const A=new kn;if(a.Image){const B=new Image;B.onload=g($r,A,"TestLoadImage: loaded",!0,_,B),B.onerror=g($r,A,"TestLoadImage: error",!1,_,B),B.onabort=g($r,A,"TestLoadImage: abort",!1,_,B),B.ontimeout=g($r,A,"TestLoadImage: timeout",!1,_,B),a.setTimeout(function(){B.ontimeout&&B.ontimeout()},1e4),B.src=u}else _(!1)}function il(u,_){const A=new kn,B=new AbortController,pe=setTimeout(()=>{B.abort(),$r(A,"TestPingServer: timeout",!1,_)},1e4);fetch(u,{signal:B.signal}).then(Ee=>{clearTimeout(pe),Ee.ok?$r(A,"TestPingServer: ok",!0,_):$r(A,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(pe),$r(A,"TestPingServer: error",!1,_)})}function $r(u,_,A,B,pe){try{pe&&(pe.onload=null,pe.onerror=null,pe.onabort=null,pe.ontimeout=null),B(A)}catch{}}function lo(){this.g=new Er}function ma(u,_,A){const B=A||"";try{tl(u,function(pe,Ee){let ze=pe;h(pe)&&(ze=_t(pe)),_.push(B+Ee+"="+encodeURIComponent(ze))})}catch(pe){throw _.push(B+"type="+encodeURIComponent("_badmap")),pe}}function co(u){this.l=u.Ub||null,this.j=u.eb||!1}L(co,kt),co.prototype.g=function(){return new uo(this.l,this.j)},co.prototype.i=function(u){return function(){return u}}({});function uo(u,_){Ke.call(this),this.D=u,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}L(uo,Ke),t=uo.prototype,t.open=function(u,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=_,this.readyState=1,Wr(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(_.body=u),(this.D||a).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ai(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Wr(this)),this.g&&(this.readyState=3,Wr(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;sl(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function sl(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var _=u.value?u.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!u.done}))&&(this.response=this.responseText+=_)}u.done?Ai(this):Wr(this),this.readyState==3&&sl(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,Ai(this))},t.Qa=function(u){this.g&&(this.response=u,Ai(this))},t.ga=function(){this.g&&Ai(this)};function Ai(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Wr(u)}t.setRequestHeader=function(u,_){this.u.append(u,_)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],_=this.h.entries();for(var A=_.next();!A.done;)A=A.value,u.push(A[0]+": "+A[1]),A=_.next();return u.join(`\r
`)};function Wr(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(uo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Ii(u){let _="";return Ie(u,function(A,B){_+=B,_+=":",_+=A,_+=`\r
`}),_}function ya(u,_,A){e:{for(B in A){var B=!1;break e}B=!0}B||(A=Ii(A),typeof u=="string"?A!=null&&encodeURIComponent(String(A)):Qt(u,_,A))}function Gt(u){Ke.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}L(Gt,Ke);var va=/^https?$/i,ho=["POST","PUT"];t=Gt.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,_,A,B){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);_=_?_.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Tr.g(),this.v=this.o?Ui(this.o):Ui(Tr),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(_,String(u),!0),this.B=!1}catch(Ee){_a(this,Ee);return}if(u=A||"",A=new Map(this.headers),B)if(Object.getPrototypeOf(B)===Object.prototype)for(var pe in B)A.set(pe,B[pe]);else if(typeof B.keys=="function"&&typeof B.get=="function")for(const Ee of B.keys())A.set(Ee,B.get(Ee));else throw Error("Unknown input type for opt_headers: "+String(B));B=Array.from(A.keys()).find(Ee=>Ee.toLowerCase()=="content-type"),pe=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(ho,_,void 0))||B||pe||A.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ee,ze]of A)this.g.setRequestHeader(Ee,ze);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Kr(this),this.u=!0,this.g.send(u),this.u=!1}catch(Ee){_a(this,Ee)}};function _a(u,_){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=_,u.m=5,ba(u),Ss(u)}function ba(u){u.A||(u.A=!0,et(u,"complete"),et(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,et(this,"complete"),et(this,"abort"),Ss(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ss(this,!0)),Gt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?wa(this):this.bb())},t.bb=function(){wa(this)};function wa(u){if(u.h&&typeof o<"u"&&(!u.v[1]||jn(u)!=4||u.Z()!=2)){if(u.u&&jn(u)==4)it(u.Ea,0,u);else if(et(u,"readystatechange"),jn(u)==4){u.h=!1;try{const ze=u.Z();e:switch(ze){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var A;if(!(A=_)){var B;if(B=ze===0){var pe=String(u.D).match(Fr)[1]||null;!pe&&a.self&&a.self.location&&(pe=a.self.location.protocol.slice(0,-1)),B=!va.test(pe?pe.toLowerCase():"")}A=B}if(A)et(u,"complete"),et(u,"success");else{u.m=6;try{var Ee=2<jn(u)?u.g.statusText:""}catch{Ee=""}u.l=Ee+" ["+u.Z()+"]",ba(u)}}finally{Ss(u)}}}}function Ss(u,_){if(u.g){Kr(u);const A=u.g,B=u.v[0]?()=>{}:null;u.g=null,u.v=null,_||et(u,"ready");try{A.onreadystatechange=B}catch{}}}function Kr(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function jn(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<jn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var _=this.g.responseText;return u&&_.indexOf(u)==0&&(_=_.substring(u.length)),Rt(_)}};function ol(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Wi(u){const _={};u=(u.g&&2<=jn(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let B=0;B<u.length;B++){if(U(u[B]))continue;var A=w(u[B]);const pe=A[0];if(A=A[1],typeof A!="string")continue;A=A.trim();const Ee=_[pe]||[];_[pe]=Ee,Ee.push(A)}T(_,function(B){return B.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Xn(u,_,A){return A&&A.internalChannelParams&&A.internalChannelParams[u]||_}function fo(u){this.Aa=0,this.i=[],this.j=new kn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Xn("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Xn("baseRetryDelayMs",5e3,u),this.cb=Xn("retryDelaySeedMs",1e4,u),this.Wa=Xn("forwardChannelMaxRetries",2,u),this.wa=Xn("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new ca(u&&u.concurrentRequestLimit),this.Da=new lo,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=fo.prototype,t.la=8,t.G=1,t.connect=function(u,_,A,B){rt(0),this.W=u,this.H=_||{},A&&B!==void 0&&(this.H.OSID=A,this.H.OAID=B),this.F=this.X,this.I=m(this,null,this.W),go(this)};function Ei(u){if(xs(u),u.G==3){var _=u.U++,A=xr(u.I);if(Qt(A,"SID",u.K),Qt(A,"RID",_),Qt(A,"TYPE","terminate"),Ki(u,A),_=new En(u,u.j,_),_.L=2,_.v=Es(xr(A)),A=!1,a.navigator&&a.navigator.sendBeacon)try{A=a.navigator.sendBeacon(_.v.toString(),"")}catch{}!A&&a.Image&&(new Image().src=_.v,A=!0),A||(_.g=R(_.j,null),_.g.ea(_.v)),_.F=Date.now(),ro(_)}bo(u)}function po(u){u.g&&(vo(u),u.g.cancel(),u.g=null)}function xs(u){po(u),u.u&&(a.clearTimeout(u.u),u.u=null),Ti(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function go(u){if(!Za(u.h)&&!u.s){u.s=!0;var _=u.Ga;ge||Pe(),ce||(ge(),ce=!0),xe.add(_,u),u.B=0}}function Aa(u,_){return As(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=_.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=ar(v(u.Ga,u,_),_o(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const pe=new En(this,this.j,u);let Ee=this.o;if(this.S&&(Ee?(Ee=S(Ee),F(Ee,this.S)):Ee=this.S),this.m!==null||this.O||(pe.H=Ee,Ee=null),this.P)e:{for(var _=0,A=0;A<this.i.length;A++){t:{var B=this.i[A];if("__data__"in B.map&&(B=B.map.__data__,typeof B=="string")){B=B.length;break t}B=void 0}if(B===void 0)break;if(_+=B,4096<_){_=A;break e}if(_===4096||A===this.i.length-1){_=A+1;break e}}_=1e3}else _=1e3;_=Ps(this,pe,_),A=xr(this.I),Qt(A,"RID",u),Qt(A,"CVER",22),this.D&&Qt(A,"X-HTTP-Session-Id",this.D),Ki(this,A),Ee&&(this.O?_="headers="+encodeURIComponent(String(Ii(Ee)))+"&"+_:this.m&&ya(A,this.m,Ee)),pn(this.h,pe),this.Ua&&Qt(A,"TYPE","init"),this.P?(Qt(A,"$req",_),Qt(A,"SID","null"),pe.T=!0,qi(pe,A,null)):qi(pe,A,_),this.G=2}}else this.G==3&&(u?mo(this,u):this.i.length==0||Za(this.h)||mo(this))};function mo(u,_){var A;_?A=_.l:A=u.U++;const B=xr(u.I);Qt(B,"SID",u.K),Qt(B,"RID",A),Qt(B,"AID",u.T),Ki(u,B),u.m&&u.o&&ya(B,u.m,u.o),A=new En(u,u.j,A,u.B+1),u.m===null&&(A.H=u.o),_&&(u.i=_.D.concat(u.i)),_=Ps(u,A,1e3),A.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),pn(u.h,A),qi(A,B,_)}function Ki(u,_){u.H&&Ie(u.H,function(A,B){Qt(_,B,A)}),u.l&&tl({},function(A,B){Qt(_,B,A)})}function Ps(u,_,A){A=Math.min(u.i.length,A);var B=u.l?v(u.l.Na,u.l,u):null;e:{var pe=u.i;let Ee=-1;for(;;){const ze=["count="+A];Ee==-1?0<A?(Ee=pe[0].g,ze.push("ofs="+Ee)):Ee=0:ze.push("ofs="+Ee);let bt=!0;for(let Nt=0;Nt<A;Nt++){let wt=pe[Nt].g;const $t=pe[Nt].map;if(wt-=Ee,0>wt)Ee=Math.max(0,pe[Nt].g-100),bt=!1;else try{ma($t,ze,"req"+wt+"_")}catch{B&&B($t)}}if(bt){B=ze.join("&");break e}}}return u=u.i.splice(0,A),_.D=u,B}function yo(u){if(!u.g&&!u.u){u.Y=1;var _=u.Fa;ge||Pe(),ce||(ge(),ce=!0),xe.add(_,u),u.v=0}}function Rs(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=ar(v(u.Fa,u),_o(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,al(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=ar(v(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,rt(10),po(this),al(this))};function vo(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function al(u){u.g=new En(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var _=xr(u.qa);Qt(_,"RID","rpc"),Qt(_,"SID",u.K),Qt(_,"AID",u.T),Qt(_,"CI",u.F?"0":"1"),!u.F&&u.ja&&Qt(_,"TO",u.ja),Qt(_,"TYPE","xmlhttp"),Ki(u,_),u.m&&u.o&&ya(_,u.m,u.o),u.L&&(u.g.I=u.L);var A=u.g;u=u.ia,A.L=1,A.v=Es(xr(_)),A.m=null,A.P=!0,_s(A,u)}t.Za=function(){this.C!=null&&(this.C=null,po(this),Rs(this),rt(19))};function Ti(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function Ji(u,_){var A=null;if(u.g==_){Ti(u),vo(u),u.g=null;var B=2}else if(ua(u.h,_))A=_.D,ha(u.h,_),B=1;else return;if(u.G!=0){if(_.o)if(B==1){A=_.m?_.m.length:0,_=Date.now()-_.F;var pe=u.B;B=si(),et(B,new Dr(B,A)),go(u)}else yo(u);else if(pe=_.s,pe==3||pe==0&&0<_.X||!(B==1&&Aa(u,_)||B==2&&Rs(u)))switch(A&&0<A.length&&(_=u.h,_.i=_.i.concat(A)),pe){case 1:cr(u,5);break;case 4:cr(u,10);break;case 3:cr(u,6);break;default:cr(u,2)}}}function _o(u,_){let A=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(A*=2),A*_}function cr(u,_){if(u.j.info("Error code "+_),_==2){var A=v(u.fb,u),B=u.Xa;const pe=!B;B=new _n(B||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Is(B,"https"),Es(B),pe?oi(B.toString(),A):il(B.toString(),A)}else rt(2);u.G=0,u.l&&u.l.sa(_),bo(u),xs(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),rt(2)):(this.j.info("Failed to ping google.com"),rt(1))};function bo(u){if(u.G=0,u.ka=[],u.l){const _=fa(u.h);(_.length!=0||u.i.length!=0)&&(j(u.ka,_),j(u.ka,u.i),u.h.i.length=0,P(u.i),u.i.length=0),u.l.ra()}}function m(u,_,A){var B=A instanceof _n?xr(A):new _n(A);if(B.g!="")_&&(B.g=_+"."+B.g),so(B,B.s);else{var pe=a.location;B=pe.protocol,_=_?_+"."+pe.hostname:pe.hostname,pe=+pe.port;var Ee=new _n(null);B&&Is(Ee,B),_&&(Ee.g=_),pe&&so(Ee,pe),A&&(Ee.l=A),B=Ee}return A=u.D,_=u.ya,A&&_&&Qt(B,A,_),Qt(B,"VER",u.la),Ki(u,B),B}function R(u,_,A){if(_&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=u.Ca&&!u.pa?new Gt(new co({eb:A})):new Gt(u.pa),_.Ha(u.J),_}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function X(){}t=X.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function oe(){}oe.prototype.g=function(u,_){return new me(u,_)};function me(u,_){Ke.call(this),this.g=new fo(_),this.l=u,this.h=_&&_.messageUrlParams||null,u=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(u?u["X-WebChannel-Content-Type"]=_.messageContentType:u={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(u?u["X-WebChannel-Client-Profile"]=_.va:u={"X-WebChannel-Client-Profile":_.va}),this.g.S=u,(u=_&&_.Sb)&&!U(u)&&(this.g.m=u),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!U(_)&&(this.g.D=_,u=this.h,u!==null&&_ in u&&(u=this.h,_ in u&&delete u[_])),this.j=new Ze(this)}L(me,Ke),me.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},me.prototype.close=function(){Ei(this.g)},me.prototype.o=function(u){var _=this.g;if(typeof u=="string"){var A={};A.__data__=u,u=A}else this.u&&(A={},A.__data__=_t(u),u=A);_.i.push(new mc(_.Ya++,u)),_.G==3&&go(_)},me.prototype.N=function(){this.g.l=null,delete this.j,Ei(this.g),delete this.g,me.aa.N.call(this)};function Ce(u){Hr.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var _=u.__sm__;if(_){e:{for(const A in _){u=A;break e}u=void 0}(this.i=u)&&(u=this.i,_=_!==null&&u in _?_[u]:void 0),this.data=_}else this.data=u}L(Ce,Hr);function Be(){ln.call(this),this.status=1}L(Be,ln);function Ze(u){this.g=u}L(Ze,X),Ze.prototype.ua=function(){et(this.g,"a")},Ze.prototype.ta=function(u){et(this.g,new Ce(u))},Ze.prototype.sa=function(u){et(this.g,new Be)},Ze.prototype.ra=function(){et(this.g,"b")},oe.prototype.createWebChannel=oe.prototype.g,me.prototype.send=me.prototype.o,me.prototype.open=me.prototype.m,me.prototype.close=me.prototype.close,iy=function(){return new oe},ry=function(){return si()},ny=ht,pp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},lr.NO_ERROR=0,lr.TIMEOUT=8,lr.HTTP_ERROR=6,Ph=lr,Or.COMPLETE="complete",ty=Or,dn.EventType=Yn,Yn.OPEN="a",Yn.CLOSE="b",Yn.ERROR="c",Yn.MESSAGE="d",Ke.prototype.listen=Ke.prototype.K,qc=dn,Gt.prototype.listenOnce=Gt.prototype.L,Gt.prototype.getLastError=Gt.prototype.Ka,Gt.prototype.getLastErrorCode=Gt.prototype.Ba,Gt.prototype.getStatus=Gt.prototype.Z,Gt.prototype.getResponseJson=Gt.prototype.Oa,Gt.prototype.getResponseText=Gt.prototype.oa,Gt.prototype.send=Gt.prototype.ea,Gt.prototype.setWithCredentials=Gt.prototype.Ha,ey=Gt}).apply(typeof dh<"u"?dh:typeof self<"u"?self:typeof window<"u"?window:{});const H1="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}gr.UNAUTHENTICATED=new gr(null),gr.GOOGLE_CREDENTIALS=new gr("google-credentials-uid"),gr.FIRST_PARTY=new gr("first-party-uid"),gr.MOCK_USER=new gr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hc="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ha=new dg("@firebase/firestore");function Mc(){return Ha.logLevel}function lt(t,...e){if(Ha.logLevel<=Ct.DEBUG){const n=e.map(mg);Ha.debug(`Firestore (${hc}): ${t}`,...n)}}function Xs(t,...e){if(Ha.logLevel<=Ct.ERROR){const n=e.map(mg);Ha.error(`Firestore (${hc}): ${t}`,...n)}}function ec(t,...e){if(Ha.logLevel<=Ct.WARN){const n=e.map(mg);Ha.warn(`Firestore (${hc}): ${t}`,...n)}}function mg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(t="Unexpected state"){const e=`FIRESTORE (${hc}) INTERNAL ASSERTION FAILED: `+t;throw Xs(e),new Error(e)}function An(t,e){t||xt()}function Ot(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Je={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ot extends ms{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class c3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(gr.UNAUTHENTICATED))}shutdown(){}}class u3{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class h3{constructor(e){this.t=e,this.currentUser=gr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){An(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Zo;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Zo,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{lt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(lt("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Zo)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(lt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(An(typeof r.accessToken=="string"),new sy(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return An(e===null||typeof e=="string"),new gr(e)}}class f3{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=gr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class d3{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new f3(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(gr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class p3{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class g3{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){An(this.o===void 0);const r=s=>{s.error!=null&&lt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,lt("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{lt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):lt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(An(typeof n.token=="string"),this.R=n.token,new p3(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m3(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=m3(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Ht(t,e){return t<e?-1:t>e?1:0}function tc(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ot(Je.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ot(Je.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ot(Je.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ot(Je.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Jn.fromMillis(Date.now())}static fromDate(e){return Jn.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Jn(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ht(this.nanoseconds,e.nanoseconds):Ht(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Et(e)}static min(){return new Et(new Jn(0,0))}static max(){return new Et(new Jn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(e,n,r){n===void 0?n=0:n>e.length&&xt(),r===void 0?r=e.length-n:r>e.length-n&&xt(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return vu.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof vu?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class mn extends vu{construct(e,n,r){return new mn(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ot(Je.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new mn(n)}static emptyPath(){return new mn([])}}const y3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class _r extends vu{construct(e,n,r){return new _r(e,n,r)}static isValidIdentifier(e){return y3.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),_r.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new _r(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new ot(Je.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new ot(Je.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ot(Je.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ot(Je.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new _r(n)}static emptyPath(){return new _r([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e){this.path=e}static fromPath(e){return new ut(mn.fromString(e))}static fromName(e){return new ut(mn.fromString(e).popFirst(5))}static empty(){return new ut(mn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&mn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return mn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ut(new mn(e.slice()))}}function v3(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Et.fromTimestamp(r===1e9?new Jn(n+1,0):new Jn(n,r));return new ia(i,ut.empty(),e)}function _3(t){return new ia(t.readTime,t.key,-1)}class ia{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ia(Et.min(),ut.empty(),-1)}static max(){return new ia(Et.max(),ut.empty(),-1)}}function b3(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ut.comparator(t.documentKey,e.documentKey),n!==0?n:Ht(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class A3{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yg(t){if(t.code!==Je.FAILED_PRECONDITION||t.message!==w3)throw t;lt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&xt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Ge((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Ge?n:Ge.resolve(n)}catch(n){return Ge.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Ge.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Ge.reject(n)}static resolve(e){return new Ge((n,r)=>{n(e)})}static reject(e){return new Ge((n,r)=>{r(e)})}static waitFor(e){return new Ge((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=Ge.resolve(!1);for(const r of e)n=n.next(i=>i?Ge.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new Ge((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const h=l;n(e[h]).next(d=>{o[h]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,n){return new Ge((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function I3(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Lu(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}vg.oe=-1;function kf(t){return t==null}function Zh(t){return t===0&&1/t==-1/0}function E3(t){return typeof t=="number"&&Number.isInteger(t)&&!Zh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z1(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Cu(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ay(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e,n){this.comparator=e,this.root=n||nr.EMPTY}insert(e,n){return new Ln(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,nr.BLACK,null,null))}remove(e){return new Ln(this.comparator,this.root.remove(e,this.comparator).copy(null,null,nr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ph(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ph(this.root,e,this.comparator,!1)}getReverseIterator(){return new ph(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ph(this.root,e,this.comparator,!0)}}class ph{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class nr{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??nr.RED,this.left=i??nr.EMPTY,this.right=s??nr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new nr(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return nr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return nr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,nr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,nr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw xt();const e=this.left.check();if(e!==this.right.check())throw xt();return e+(this.isRed()?0:1)}}nr.EMPTY=null,nr.RED=!0,nr.BLACK=!1;nr.EMPTY=new class{constructor(){this.size=0}get key(){throw xt()}get value(){throw xt()}get color(){throw xt()}get left(){throw xt()}get right(){throw xt()}copy(e,n,r,i,s){return this}insert(e,n,r){return new nr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e){this.comparator=e,this.data=new Ln(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new G1(this.data.getIterator())}getIteratorFrom(e){return new G1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ir)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ir(this.comparator);return n.data=e,n}}class G1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(e){this.fields=e,e.sort(_r.comparator)}static empty(){return new Wo([])}unionWith(e){let n=new ir(_r.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Wo(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return tc(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ly extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new ly("Invalid base64 string: "+s):s}}(e);return new sr(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new sr(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ht(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}sr.EMPTY_BYTE_STRING=new sr("");const T3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function sa(t){if(An(!!t),typeof t=="string"){let e=0;const n=T3.exec(t);if(An(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:xn(t.seconds),nanos:xn(t.nanos)}}function xn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function za(t){return typeof t=="string"?sr.fromBase64String(t):sr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _g(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function bg(t){const e=t.mapValue.fields.__previous_value__;return _g(e)?bg(e):e}function _u(t){const e=sa(t.mapValue.fields.__local_write_time__.timestampValue);return new Jn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S3{constructor(e,n,r,i,s,o,a,l,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=h}}class bu{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new bu("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof bu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gh={mapValue:{}};function Ga(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?_g(t)?4:P3(t)?9007199254740991:x3(t)?10:11:xt()}function ps(t,e){if(t===e)return!0;const n=Ga(t);if(n!==Ga(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return _u(t).isEqual(_u(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=sa(i.timestampValue),a=sa(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return za(i.bytesValue).isEqual(za(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return xn(i.geoPointValue.latitude)===xn(s.geoPointValue.latitude)&&xn(i.geoPointValue.longitude)===xn(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return xn(i.integerValue)===xn(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=xn(i.doubleValue),a=xn(s.doubleValue);return o===a?Zh(o)===Zh(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return tc(t.arrayValue.values||[],e.arrayValue.values||[],ps);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(z1(o)!==z1(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!ps(o[l],a[l])))return!1;return!0}(t,e);default:return xt()}}function wu(t,e){return(t.values||[]).find(n=>ps(n,e))!==void 0}function nc(t,e){if(t===e)return 0;const n=Ga(t),r=Ga(e);if(n!==r)return Ht(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ht(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=xn(s.integerValue||s.doubleValue),l=xn(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return $1(t.timestampValue,e.timestampValue);case 4:return $1(_u(t),_u(e));case 5:return Ht(t.stringValue,e.stringValue);case 6:return function(s,o){const a=za(s),l=za(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let h=0;h<a.length&&h<l.length;h++){const d=Ht(a[h],l[h]);if(d!==0)return d}return Ht(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Ht(xn(s.latitude),xn(o.latitude));return a!==0?a:Ht(xn(s.longitude),xn(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return W1(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,h,d;const p=s.fields||{},v=o.fields||{},g=(a=p.value)===null||a===void 0?void 0:a.arrayValue,L=(l=v.value)===null||l===void 0?void 0:l.arrayValue,P=Ht(((h=g==null?void 0:g.values)===null||h===void 0?void 0:h.length)||0,((d=L==null?void 0:L.values)===null||d===void 0?void 0:d.length)||0);return P!==0?P:W1(g,L)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===gh.mapValue&&o===gh.mapValue)return 0;if(s===gh.mapValue)return 1;if(o===gh.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),h=o.fields||{},d=Object.keys(h);l.sort(),d.sort();for(let p=0;p<l.length&&p<d.length;++p){const v=Ht(l[p],d[p]);if(v!==0)return v;const g=nc(a[l[p]],h[d[p]]);if(g!==0)return g}return Ht(l.length,d.length)}(t.mapValue,e.mapValue);default:throw xt()}}function $1(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ht(t,e);const n=sa(t),r=sa(e),i=Ht(n.seconds,r.seconds);return i!==0?i:Ht(n.nanos,r.nanos)}function W1(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=nc(n[i],r[i]);if(s)return s}return Ht(n.length,r.length)}function rc(t){return gp(t)}function gp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=sa(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return za(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ut.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=gp(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${gp(n.fields[o])}`;return i+"}"}(t.mapValue):xt()}function K1(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function mp(t){return!!t&&"integerValue"in t}function wg(t){return!!t&&"arrayValue"in t}function J1(t){return!!t&&"nullValue"in t}function Q1(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Cd(t){return!!t&&"mapValue"in t}function x3(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function nu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Cu(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=nu(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=nu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function P3(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e){this.value=e}static empty(){return new is({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Cd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=nu(n)}setAll(e){let n=_r.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=nu(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Cd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ps(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Cd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Cu(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new is(nu(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new yr(e,0,Et.min(),Et.min(),Et.min(),is.empty(),0)}static newFoundDocument(e,n,r,i){return new yr(e,1,n,Et.min(),r,i,0)}static newNoDocument(e,n){return new yr(e,2,n,Et.min(),Et.min(),is.empty(),0)}static newUnknownDocument(e,n){return new yr(e,3,n,Et.min(),Et.min(),is.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Et.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=is.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=is.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Et.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof yr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new yr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(e,n){this.position=e,this.inclusive=n}}function Y1(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=ut.comparator(ut.fromName(o.referenceValue),n.key):r=nc(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function X1(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ps(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(e,n="asc"){this.field=e,this.dir=n}}function R3(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cy{}class Vn extends cy{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new L3(e,n,r):n==="array-contains"?new D3(e,r):n==="in"?new O3(e,r):n==="not-in"?new F3(e,r):n==="array-contains-any"?new M3(e,r):new Vn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new C3(e,r):new k3(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(nc(n,this.value)):n!==null&&Ga(this.value)===Ga(n)&&this.matchesComparison(nc(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return xt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Fi extends cy{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Fi(e,n)}matches(e){return uy(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function uy(t){return t.op==="and"}function hy(t){return N3(t)&&uy(t)}function N3(t){for(const e of t.filters)if(e instanceof Fi)return!1;return!0}function yp(t){if(t instanceof Vn)return t.field.canonicalString()+t.op.toString()+rc(t.value);if(hy(t))return t.filters.map(e=>yp(e)).join(",");{const e=t.filters.map(n=>yp(n)).join(",");return`${t.op}(${e})`}}function fy(t,e){return t instanceof Vn?function(r,i){return i instanceof Vn&&r.op===i.op&&r.field.isEqual(i.field)&&ps(r.value,i.value)}(t,e):t instanceof Fi?function(r,i){return i instanceof Fi&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&fy(o,i.filters[a]),!0):!1}(t,e):void xt()}function dy(t){return t instanceof Vn?function(n){return`${n.field.canonicalString()} ${n.op} ${rc(n.value)}`}(t):t instanceof Fi?function(n){return n.op.toString()+" {"+n.getFilters().map(dy).join(" ,")+"}"}(t):"Filter"}class L3 extends Vn{constructor(e,n,r){super(e,n,r),this.key=ut.fromName(r.referenceValue)}matches(e){const n=ut.comparator(e.key,this.key);return this.matchesComparison(n)}}class C3 extends Vn{constructor(e,n){super(e,"in",n),this.keys=py("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class k3 extends Vn{constructor(e,n){super(e,"not-in",n),this.keys=py("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function py(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ut.fromName(r.referenceValue))}class D3 extends Vn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return wg(n)&&wu(n.arrayValue,this.value)}}class O3 extends Vn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&wu(this.value.arrayValue,n)}}class F3 extends Vn{constructor(e,n){super(e,"not-in",n)}matches(e){if(wu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!wu(this.value.arrayValue,n)}}class M3 extends Vn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!wg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>wu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V3{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function Z1(t,e=null,n=[],r=[],i=null,s=null,o=null){return new V3(t,e,n,r,i,s,o)}function Ag(t){const e=Ot(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>yp(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),kf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>rc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>rc(r)).join(",")),e.ue=n}return e.ue}function Ig(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!R3(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!fy(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!X1(t.startAt,e.startAt)&&X1(t.endAt,e.endAt)}function vp(t){return ut.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function U3(t,e,n,r,i,s,o,a){return new ku(t,e,n,r,i,s,o,a)}function Eg(t){return new ku(t)}function e0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function gy(t){return t.collectionGroup!==null}function ru(t){const e=Ot(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new ir(_r.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(h=>{h.isInequality()&&(a=a.add(h.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new tf(s,r))}),n.has(_r.keyField().canonicalString())||e.ce.push(new tf(_r.keyField(),r))}return e.ce}function ls(t){const e=Ot(t);return e.le||(e.le=j3(e,ru(t))),e.le}function j3(t,e){if(t.limitType==="F")return Z1(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new tf(i.field,s)});const n=t.endAt?new ef(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ef(t.startAt.position,t.startAt.inclusive):null;return Z1(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function _p(t,e){const n=t.filters.concat([e]);return new ku(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function bp(t,e,n){return new ku(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Df(t,e){return Ig(ls(t),ls(e))&&t.limitType===e.limitType}function my(t){return`${Ag(ls(t))}|lt:${t.limitType}`}function Pl(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>dy(i)).join(", ")}]`),kf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>rc(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>rc(i)).join(",")),`Target(${r})`}(ls(t))}; limitType=${t.limitType})`}function Of(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ut.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of ru(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const h=Y1(o,a,l);return o.inclusive?h<=0:h<0}(r.startAt,ru(r),i)||r.endAt&&!function(o,a,l){const h=Y1(o,a,l);return o.inclusive?h>=0:h>0}(r.endAt,ru(r),i))}(t,e)}function B3(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function yy(t){return(e,n)=>{let r=!1;for(const i of ru(t)){const s=q3(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function q3(t,e,n){const r=t.field.isKeyField()?ut.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),h=a.data.field(s);return l!==null&&h!==null?nc(l,h):xt()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return xt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Cu(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return ay(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H3=new Ln(ut.comparator);function oa(){return H3}const vy=new Ln(ut.comparator);function Hc(...t){let e=vy;for(const n of t)e=e.insert(n.key,n);return e}function z3(t){let e=vy;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Oa(){return iu()}function _y(){return iu()}function iu(){return new fc(t=>t.toString(),(t,e)=>t.isEqual(e))}const G3=new ir(ut.comparator);function Ut(...t){let e=G3;for(const n of t)e=e.add(n);return e}const $3=new ir(Ht);function W3(){return $3}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Zh(e)?"-0":e}}function by(t){return{integerValue:""+t}}function K3(t,e){return E3(e)?by(e):Tg(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(){this._=void 0}}function J3(t,e,n){return t instanceof wp?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&_g(s)&&(s=bg(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof nf?wy(t,e):t instanceof rf?Ay(t,e):function(i,s){const o=Y3(i,s),a=t0(o)+t0(i.Pe);return mp(o)&&mp(i.Pe)?by(a):Tg(i.serializer,a)}(t,e)}function Q3(t,e,n){return t instanceof nf?wy(t,e):t instanceof rf?Ay(t,e):n}function Y3(t,e){return t instanceof Ap?function(r){return mp(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class wp extends Ff{}class nf extends Ff{constructor(e){super(),this.elements=e}}function wy(t,e){const n=Iy(e);for(const r of t.elements)n.some(i=>ps(i,r))||n.push(r);return{arrayValue:{values:n}}}class rf extends Ff{constructor(e){super(),this.elements=e}}function Ay(t,e){let n=Iy(e);for(const r of t.elements)n=n.filter(i=>!ps(i,r));return{arrayValue:{values:n}}}class Ap extends Ff{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function t0(t){return xn(t.integerValue||t.doubleValue)}function Iy(t){return wg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function X3(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof nf&&i instanceof nf||r instanceof rf&&i instanceof rf?tc(r.elements,i.elements,ps):r instanceof Ap&&i instanceof Ap?ps(r.Pe,i.Pe):r instanceof wp&&i instanceof wp}(t.transform,e.transform)}class Ua{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ua}static exists(e){return new Ua(void 0,e)}static updateTime(e){return new Ua(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Rh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Sg{}function Ey(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new eE(t.key,Ua.none()):new xg(t.key,t.data,Ua.none());{const n=t.data,r=is.empty();let i=new ir(_r.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Mf(t.key,r,new Wo(i.toArray()),Ua.none())}}function Z3(t,e,n){t instanceof xg?function(i,s,o){const a=i.value.clone(),l=r0(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Mf?function(i,s,o){if(!Rh(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=r0(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(Ty(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function su(t,e,n,r){return t instanceof xg?function(s,o,a,l){if(!Rh(s.precondition,o))return a;const h=s.value.clone(),d=i0(s.fieldTransforms,l,o);return h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof Mf?function(s,o,a,l){if(!Rh(s.precondition,o))return a;const h=i0(s.fieldTransforms,l,o),d=o.data;return d.setAll(Ty(s)),d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(s,o,a){return Rh(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function n0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&tc(r,i,(s,o)=>X3(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class xg extends Sg{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Mf extends Sg{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Ty(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function r0(t,e,n){const r=new Map;An(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,Q3(o,a,n[i]))}return r}function i0(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,J3(s,o,e))}return r}class eE extends Sg{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tE{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&Z3(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=su(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=su(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=_y();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=Ey(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(Et.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ut())}isEqual(e){return this.batchId===e.batchId&&tc(this.mutations,e.mutations,(n,r)=>n0(n,r))&&tc(this.baseMutations,e.baseMutations,(n,r)=>n0(n,r))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mn,Dt;function Sy(t){if(t===void 0)return Xs("GRPC error has no .code"),Je.UNKNOWN;switch(t){case Mn.OK:return Je.OK;case Mn.CANCELLED:return Je.CANCELLED;case Mn.UNKNOWN:return Je.UNKNOWN;case Mn.DEADLINE_EXCEEDED:return Je.DEADLINE_EXCEEDED;case Mn.RESOURCE_EXHAUSTED:return Je.RESOURCE_EXHAUSTED;case Mn.INTERNAL:return Je.INTERNAL;case Mn.UNAVAILABLE:return Je.UNAVAILABLE;case Mn.UNAUTHENTICATED:return Je.UNAUTHENTICATED;case Mn.INVALID_ARGUMENT:return Je.INVALID_ARGUMENT;case Mn.NOT_FOUND:return Je.NOT_FOUND;case Mn.ALREADY_EXISTS:return Je.ALREADY_EXISTS;case Mn.PERMISSION_DENIED:return Je.PERMISSION_DENIED;case Mn.FAILED_PRECONDITION:return Je.FAILED_PRECONDITION;case Mn.ABORTED:return Je.ABORTED;case Mn.OUT_OF_RANGE:return Je.OUT_OF_RANGE;case Mn.UNIMPLEMENTED:return Je.UNIMPLEMENTED;case Mn.DATA_LOSS:return Je.DATA_LOSS;default:return xt()}}(Dt=Mn||(Mn={}))[Dt.OK=0]="OK",Dt[Dt.CANCELLED=1]="CANCELLED",Dt[Dt.UNKNOWN=2]="UNKNOWN",Dt[Dt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Dt[Dt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Dt[Dt.NOT_FOUND=5]="NOT_FOUND",Dt[Dt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Dt[Dt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Dt[Dt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Dt[Dt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Dt[Dt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Dt[Dt.ABORTED=10]="ABORTED",Dt[Dt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Dt[Dt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Dt[Dt.INTERNAL=13]="INTERNAL",Dt[Dt.UNAVAILABLE=14]="UNAVAILABLE",Dt[Dt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iE(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sE=new Va([4294967295,4294967295],0);function s0(t){const e=iE().encode(t),n=new Z5;return n.update(e),new Uint8Array(n.digest())}function o0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Va([n,r],0),new Va([i,s],0)]}class Pg{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new zc(`Invalid padding: ${n}`);if(r<0)throw new zc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new zc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new zc(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Va.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Va.fromNumber(r)));return i.compare(sE)===1&&(i=new Va([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=s0(e),[r,i]=o0(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Pg(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=s0(e),[r,i]=o0(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class zc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Du.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Vf(Et.min(),i,new Ln(Ht),oa(),Ut())}}class Du{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Du(r,n,Ut(),Ut(),Ut())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class xy{constructor(e,n){this.targetId=e,this.me=n}}class Py{constructor(e,n,r=sr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class a0{constructor(){this.fe=0,this.ge=c0(),this.pe=sr.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ut(),n=Ut(),r=Ut();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:xt()}}),new Du(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=c0()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,An(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class oE{constructor(e){this.Le=e,this.Be=new Map,this.ke=oa(),this.qe=l0(),this.Qe=new Ln(Ht)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:xt()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(vp(s))if(r===0){const o=new ut(s.path);this.Ue(n,o,yr.newNoDocument(o,Et.min()))}else An(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const h=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,h)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=za(r).toUint8Array()}catch(l){if(l instanceof ly)return ec("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Pg(o,i,s)}catch(l){return ec(l instanceof zc?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&vp(a.target)){const l=new ut(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,yr.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=Ut();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const h=this.Je(l);return!h||h.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Vf(e,n,this.Qe,this.ke,r);return this.ke=oa(),this.qe=l0(),this.Qe=new Ln(Ht),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new a0,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new ir(Ht),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||lt("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new a0),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function l0(){return new Ln(ut.comparator)}function c0(){return new Ln(ut.comparator)}const aE={asc:"ASCENDING",desc:"DESCENDING"},lE={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},cE={and:"AND",or:"OR"};class uE{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Ip(t,e){return t.useProto3Json||kf(e)?e:{value:e}}function Ep(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ry(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Bl(t){return An(!!t),Et.fromTimestamp(function(n){const r=sa(n);return new Jn(r.seconds,r.nanos)}(t))}function Ny(t,e){return Tp(t,e).canonicalString()}function Tp(t,e){const n=function(i){return new mn(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Ly(t){const e=mn.fromString(t);return An(Fy(e)),e}function kd(t,e){const n=Ly(e);if(n.get(1)!==t.databaseId.projectId)throw new ot(Je.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ot(Je.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ut(ky(n))}function Cy(t,e){return Ny(t.databaseId,e)}function hE(t){const e=Ly(t);return e.length===4?mn.emptyPath():ky(e)}function u0(t){return new mn(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function ky(t){return An(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function fE(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:xt()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(h,d){return h.useProto3Json?(An(d===void 0||typeof d=="string"),sr.fromBase64String(d||"")):(An(d===void 0||d instanceof Buffer||d instanceof Uint8Array),sr.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(h){const d=h.code===void 0?Je.UNKNOWN:Sy(h.code);return new ot(d,h.message||"")}(o);n=new Py(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=kd(t,r.document.name),s=Bl(r.document.updateTime),o=r.document.createTime?Bl(r.document.createTime):Et.min(),a=new is({mapValue:{fields:r.document.fields}}),l=yr.newFoundDocument(i,s,o,a),h=r.targetIds||[],d=r.removedTargetIds||[];n=new Nh(h,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=kd(t,r.document),s=r.readTime?Bl(r.readTime):Et.min(),o=yr.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Nh([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=kd(t,r.document),s=r.removedTargetIds||[];n=new Nh([],s,i,null)}else{if(!("filter"in e))return xt();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new rE(i,s),a=r.targetId;n=new xy(a,o)}}return n}function dE(t,e){return{documents:[Cy(t,e.path)]}}function pE(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Cy(t,i);const s=function(h){if(h.length!==0)return Oy(Fi.create(h,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(h){if(h.length!==0)return h.map(d=>function(v){return{field:Rl(v.field),direction:yE(v.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Ip(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{_t:n,parent:i}}function gE(t){let e=hE(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){An(r===1);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(p){const v=Dy(p);return v instanceof Fi&&hy(v)?v.getFilters():[v]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(v=>function(L){return new tf(Nl(L.field),function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(L.direction))}(v))}(n.orderBy));let a=null;n.limit&&(a=function(p){let v;return v=typeof p=="object"?p.value:p,kf(v)?null:v}(n.limit));let l=null;n.startAt&&(l=function(p){const v=!!p.before,g=p.values||[];return new ef(g,v)}(n.startAt));let h=null;return n.endAt&&(h=function(p){const v=!p.before,g=p.values||[];return new ef(g,v)}(n.endAt)),U3(e,i,o,s,a,"F",l,h)}function mE(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xt()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Dy(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Nl(n.unaryFilter.field);return Vn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Nl(n.unaryFilter.field);return Vn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Nl(n.unaryFilter.field);return Vn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Nl(n.unaryFilter.field);return Vn.create(o,"!=",{nullValue:"NULL_VALUE"});default:return xt()}}(t):t.fieldFilter!==void 0?function(n){return Vn.create(Nl(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return xt()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Fi.create(n.compositeFilter.filters.map(r=>Dy(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return xt()}}(n.compositeFilter.op))}(t):xt()}function yE(t){return aE[t]}function vE(t){return lE[t]}function _E(t){return cE[t]}function Rl(t){return{fieldPath:t.canonicalString()}}function Nl(t){return _r.fromServerFormat(t.fieldPath)}function Oy(t){return t instanceof Vn?function(n){if(n.op==="=="){if(Q1(n.value))return{unaryFilter:{field:Rl(n.field),op:"IS_NAN"}};if(J1(n.value))return{unaryFilter:{field:Rl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Q1(n.value))return{unaryFilter:{field:Rl(n.field),op:"IS_NOT_NAN"}};if(J1(n.value))return{unaryFilter:{field:Rl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Rl(n.field),op:vE(n.op),value:n.value}}}(t):t instanceof Fi?function(n){const r=n.getFilters().map(i=>Oy(i));return r.length===1?r[0]:{compositeFilter:{op:_E(n.op),filters:r}}}(t):xt()}function Fy(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e,n,r,i,s=Et.min(),o=Et.min(),a=sr.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Ko(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ko(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ko(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ko(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(e){this.ct=e}}function wE(t){const e=gE({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?bp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(){this.un=new IE}addToCollectionParentIndex(e,n){return this.un.add(n),Ge.resolve()}getCollectionParents(e,n){return Ge.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return Ge.resolve()}deleteFieldIndex(e,n){return Ge.resolve()}deleteAllFieldIndexes(e){return Ge.resolve()}createTargetIndexes(e,n){return Ge.resolve()}getDocumentsMatchingTarget(e,n){return Ge.resolve(null)}getIndexType(e,n){return Ge.resolve(0)}getFieldIndexes(e,n){return Ge.resolve([])}getNextCollectionGroupToUpdate(e){return Ge.resolve(null)}getMinOffset(e,n){return Ge.resolve(ia.min())}getMinOffsetFromCollectionGroup(e,n){return Ge.resolve(ia.min())}updateCollectionGroup(e,n,r){return Ge.resolve()}updateIndexEntries(e,n){return Ge.resolve()}}class IE{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new ir(mn.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ir(mn.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ic(0)}static kn(){return new ic(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(){this.changes=new fc(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,yr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Ge.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&su(r.mutation,i,Wo.empty(),Jn.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ut()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ut()){const i=Oa();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Hc();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Oa();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ut()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=oa();const o=iu(),a=function(){return iu()}();return n.forEach((l,h)=>{const d=r.get(h.key);i.has(h.key)&&(d===void 0||d.mutation instanceof Mf)?s=s.insert(h.key,h):d!==void 0?(o.set(h.key,d.mutation.getFieldMask()),su(d.mutation,h,d.mutation.getFieldMask(),Jn.now())):o.set(h.key,Wo.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((h,d)=>o.set(h,d)),n.forEach((h,d)=>{var p;return a.set(h,new TE(d,(p=o.get(h))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){const r=iu();let i=new Ln((o,a)=>o-a),s=Ut();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const h=n.get(l);if(h===null)return;let d=r.get(l)||Wo.empty();d=a.applyToLocalView(h,d),r.set(l,d);const p=(i.get(a.batchId)||Ut()).add(l);i=i.insert(a.batchId,p)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),h=l.key,d=l.value,p=_y();d.forEach(v=>{if(!s.has(v)){const g=Ey(n.get(v),r.get(v));g!==null&&p.set(v,g),s=s.add(v)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,p))}return Ge.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return ut.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):gy(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):Ge.resolve(Oa());let a=-1,l=s;return o.next(h=>Ge.forEach(h,(d,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(d)?Ge.resolve():this.remoteDocumentCache.getEntry(e,d).next(v=>{l=l.insert(d,v)}))).next(()=>this.populateOverlays(e,h,s)).next(()=>this.computeViews(e,l,h,Ut())).next(d=>({batchId:a,changes:z3(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ut(n)).next(r=>{let i=Hc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Hc();return this.indexManager.getCollectionParents(e,s).next(a=>Ge.forEach(a,l=>{const h=function(p,v){return new ku(v,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next(d=>{d.forEach((p,v)=>{o=o.insert(p,v)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,h)=>{const d=h.getKey();o.get(d)===null&&(o=o.insert(d,yr.newInvalidDocument(d)))});let a=Hc();return o.forEach((l,h)=>{const d=s.get(l);d!==void 0&&su(d.mutation,h,Wo.empty(),Jn.now()),Of(n,h)&&(a=a.insert(l,h))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xE{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return Ge.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Bl(i.createTime)}}(n)),Ge.resolve()}getNamedQuery(e,n){return Ge.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:wE(i.bundledQuery),readTime:Bl(i.readTime)}}(n)),Ge.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{constructor(){this.overlays=new Ln(ut.comparator),this.Ir=new Map}getOverlay(e,n){return Ge.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Oa();return Ge.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),Ge.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),Ge.resolve()}getOverlaysForCollection(e,n,r){const i=Oa(),s=n.length+1,o=new ut(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,h=l.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return Ge.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ln((h,d)=>h-d);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let d=s.get(h.largestBatchId);d===null&&(d=Oa(),s=s.insert(h.largestBatchId,d)),d.set(h.getKey(),h)}}const a=Oa(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((h,d)=>a.set(h,d)),!(a.size()>=i)););return Ge.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new nE(n,r));let s=this.Ir.get(n);s===void 0&&(s=Ut(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE{constructor(){this.sessionToken=sr.EMPTY_BYTE_STRING}getSessionToken(e){return Ge.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Ge.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{constructor(){this.Tr=new ir(Gn.Er),this.dr=new ir(Gn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Gn(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Gn(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ut(new mn([])),r=new Gn(n,e),i=new Gn(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ut(new mn([])),r=new Gn(n,e),i=new Gn(n,e+1);let s=Ut();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Gn(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Gn{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ut.comparator(e.key,n.key)||Ht(e.wr,n.wr)}static Ar(e,n){return Ht(e.wr,n.wr)||ut.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new ir(Gn.Er)}checkEmpty(e){return Ge.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new tE(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new Gn(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Ge.resolve(o)}lookupMutationBatch(e,n){return Ge.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return Ge.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Ge.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Ge.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Gn(n,0),i=new Gn(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),Ge.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ir(Ht);return n.forEach(i=>{const s=new Gn(i,0),o=new Gn(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),Ge.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ut.isDocumentKey(s)||(s=s.child(""));const o=new Gn(new ut(s),0);let a=new ir(Ht);return this.br.forEachWhile(l=>{const h=l.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(a=a.add(l.wr)),!0)},o),Ge.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){An(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return Ge.forEach(n.mutations,i=>{const s=new Gn(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Gn(n,0),i=this.br.firstAfterOrEqual(r);return Ge.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ge.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{constructor(e){this.Mr=e,this.docs=function(){return new Ln(ut.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Ge.resolve(r?r.document.mutableCopy():yr.newInvalidDocument(n))}getEntries(e,n){let r=oa();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():yr.newInvalidDocument(i))}),Ge.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=oa();const o=n.path,a=new ut(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:h,value:{document:d}}=l.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||b3(_3(d),r)<=0||(i.has(d.key)||Of(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return Ge.resolve(s)}getAllFromCollectionGroup(e,n,r,i){xt()}Or(e,n){return Ge.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new CE(this)}getSize(e){return Ge.resolve(this.size)}}class CE extends EE{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),Ge.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(e){this.persistence=e,this.Nr=new fc(n=>Ag(n),Ig),this.lastRemoteSnapshotVersion=Et.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Rg,this.targetCount=0,this.kr=ic.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),Ge.resolve()}getLastRemoteSnapshotVersion(e){return Ge.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ge.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Ge.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),Ge.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new ic(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,Ge.resolve()}updateTargetData(e,n){return this.Kn(n),Ge.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,Ge.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),Ge.waitFor(s).next(()=>i)}getTargetCount(e){return Ge.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return Ge.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),Ge.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),Ge.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),Ge.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return Ge.resolve(r)}containsKey(e,n){return Ge.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(e,n){this.qr={},this.overlays={},this.Qr=new vg(0),this.Kr=!1,this.Kr=!0,this.$r=new RE,this.referenceDelegate=e(this),this.Ur=new kE(this),this.indexManager=new AE,this.remoteDocumentCache=function(i){return new LE(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new bE(n),this.Gr=new xE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new PE,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new NE(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){lt("MemoryPersistence","Starting transaction:",e);const i=new OE(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return Ge.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class OE extends A3{constructor(e){super(),this.currentSequenceNumber=e}}class Ng{constructor(e){this.persistence=e,this.Jr=new Rg,this.Yr=null}static Zr(e){return new Ng(e)}get Xr(){if(this.Yr)return this.Yr;throw xt()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),Ge.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),Ge.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),Ge.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ge.forEach(this.Xr,r=>{const i=ut.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,Et.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return Ge.or([()=>Ge.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=Ut(),i=Ut();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Lg(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return $4()?8:I3(Ir())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new FE;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Mc()<=Ct.DEBUG&&lt("QueryEngine","SDK will not create cache indexes for query:",Pl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Ge.resolve()):(Mc()<=Ct.DEBUG&&lt("QueryEngine","Query:",Pl(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Mc()<=Ct.DEBUG&&lt("QueryEngine","The SDK decides to create cache indexes for query:",Pl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ls(n))):Ge.resolve())}Yi(e,n){if(e0(n))return Ge.resolve(null);let r=ls(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=bp(n,null,"F"),r=ls(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Ut(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const h=this.ts(n,a);return this.ns(n,h,o,l.readTime)?this.Yi(e,bp(n,null,"F")):this.rs(e,h,n,l)}))})))}Zi(e,n,r,i){return e0(n)||i.isEqual(Et.min())?Ge.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?Ge.resolve(null):(Mc()<=Ct.DEBUG&&lt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Pl(n)),this.rs(e,o,n,v3(i,-1)).next(a=>a))})}ts(e,n){let r=new ir(yy(e));return n.forEach((i,s)=>{Of(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Mc()<=Ct.DEBUG&&lt("QueryEngine","Using full collection scan to execute query:",Pl(n)),this.Ji.getDocumentsMatchingQuery(e,n,ia.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Ln(Ht),this._s=new fc(s=>Ag(s),Ig),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new SE(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function UE(t,e,n,r){return new VE(t,e,n,r)}async function My(t,e){const n=Ot(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=Ut();for(const h of i){o.push(h.batchId);for(const d of h.mutations)l=l.add(d.key)}for(const h of s){a.push(h.batchId);for(const d of h.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(h=>({hs:h,removedBatchIds:o,addedBatchIds:a}))})})}function Vy(t){const e=Ot(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function jE(t,e){const n=Ot(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((d,p)=>{const v=i.get(p);if(!v)return;a.push(n.Ur.removeMatchingKeys(s,d.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(s,d.addedDocuments,p)));let g=v.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?g=g.withResumeToken(sr.EMPTY_BYTE_STRING,Et.min()).withLastLimboFreeSnapshotVersion(Et.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,r)),i=i.insert(p,g),function(P,j,x){return P.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(v,g,d)&&a.push(n.Ur.updateTargetData(s,g))});let l=oa(),h=Ut();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(BE(s,o,e.documentUpdates).next(d=>{l=d.Ps,h=d.Is})),!r.isEqual(Et.min())){const d=n.Ur.getLastRemoteSnapshotVersion(s).next(p=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return Ge.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,h)).next(()=>l)}).then(s=>(n.os=i,s))}function BE(t,e,n){let r=Ut(),i=Ut();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=oa();return n.forEach((a,l)=>{const h=s.get(a);l.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(Et.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!h.isValidDocument()||l.version.compareTo(h.version)>0||l.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):lt("LocalStore","Ignoring outdated watch update for ",a,". Current version:",h.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function qE(t,e){const n=Ot(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,Ge.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new Ko(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Sp(t,e,n){const r=Ot(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Lu(o))throw o;lt("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function h0(t,e,n){const r=Ot(t);let i=Et.min(),s=Ut();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,h,d){const p=Ot(l),v=p._s.get(d);return v!==void 0?Ge.resolve(p.os.get(v)):p.Ur.getTargetData(h,d)}(r,o,ls(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:Et.min(),n?s:Ut())).next(a=>(HE(r,B3(e),a),{documents:a,Ts:s})))}function HE(t,e,n){let r=t.us.get(e)||Et.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class f0{constructor(){this.activeTargetIds=W3()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class zE{constructor(){this.so=new f0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new f0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){lt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){lt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mh=null;function Dd(){return mh===null?mh=function(){return 268435456+Math.round(2147483648*Math.random())}():mh++,"0x"+mh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $E={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ur="WebChannelConnection";class KE extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=Dd(),l=this.xo(n,r.toUriEncodedString());lt("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const h={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(h,s,o),this.No(n,l,h,i).then(d=>(lt("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw ec("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",l,"request:",i),d})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+hc}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=$E[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=Dd();return new Promise((o,a)=>{const l=new ey;l.setWithCredentials(!0),l.listenOnce(ty.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Ph.NO_ERROR:const d=l.getResponseJson();lt(ur,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case Ph.TIMEOUT:lt(ur,`RPC '${e}' ${s} timed out`),a(new ot(Je.DEADLINE_EXCEEDED,"Request time out"));break;case Ph.HTTP_ERROR:const p=l.getStatus();if(lt(ur,`RPC '${e}' ${s} failed with status:`,p,"response text:",l.getResponseText()),p>0){let v=l.getResponseJson();Array.isArray(v)&&(v=v[0]);const g=v==null?void 0:v.error;if(g&&g.status&&g.message){const L=function(j){const x=j.toLowerCase().replace(/_/g,"-");return Object.values(Je).indexOf(x)>=0?x:Je.UNKNOWN}(g.status);a(new ot(L,g.message))}else a(new ot(Je.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new ot(Je.UNAVAILABLE,"Connection failed."));break;default:xt()}}finally{lt(ur,`RPC '${e}' ${s} completed.`)}});const h=JSON.stringify(i);lt(ur,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",h,r,15)})}Bo(e,n,r){const i=Dd(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=iy(),a=ry(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(l.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=s.join("");lt(ur,`Creating RPC '${e}' stream ${i}: ${d}`,l);const p=o.createWebChannel(d,l);let v=!1,g=!1;const L=new WE({Io:j=>{g?lt(ur,`Not sending because RPC '${e}' stream ${i} is closed:`,j):(v||(lt(ur,`Opening RPC '${e}' stream ${i} transport.`),p.open(),v=!0),lt(ur,`RPC '${e}' stream ${i} sending:`,j),p.send(j))},To:()=>p.close()}),P=(j,x,U)=>{j.listen(x,J=>{try{U(J)}catch(Z){setTimeout(()=>{throw Z},0)}})};return P(p,qc.EventType.OPEN,()=>{g||(lt(ur,`RPC '${e}' stream ${i} transport opened.`),L.yo())}),P(p,qc.EventType.CLOSE,()=>{g||(g=!0,lt(ur,`RPC '${e}' stream ${i} transport closed`),L.So())}),P(p,qc.EventType.ERROR,j=>{g||(g=!0,ec(ur,`RPC '${e}' stream ${i} transport errored:`,j),L.So(new ot(Je.UNAVAILABLE,"The operation could not be completed")))}),P(p,qc.EventType.MESSAGE,j=>{var x;if(!g){const U=j.data[0];An(!!U);const J=U,Z=J.error||((x=J[0])===null||x===void 0?void 0:x.error);if(Z){lt(ur,`RPC '${e}' stream ${i} received error:`,Z);const fe=Z.status;let Ie=function(O){const F=Mn[O];if(F!==void 0)return Sy(F)}(fe),T=Z.message;Ie===void 0&&(Ie=Je.INTERNAL,T="Unknown error status: "+fe+" with message "+Z.message),g=!0,L.So(new ot(Ie,T)),p.close()}else lt(ur,`RPC '${e}' stream ${i} received:`,U),L.bo(U)}}),P(a,ny.STAT_EVENT,j=>{j.stat===pp.PROXY?lt(ur,`RPC '${e}' stream ${i} detected buffering proxy`):j.stat===pp.NOPROXY&&lt(ur,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{L.wo()},0),L}}function Od(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uf(t){return new uE(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uy{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&lt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{constructor(e,n,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Uy(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===Je.RESOURCE_EXHAUSTED?(Xs(n.toString()),Xs("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===Je.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new ot(Je.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return lt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(lt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class QE extends JE{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=fE(this.serializer,e),r=function(s){if(!("targetChange"in s))return Et.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Et.min():o.readTime?Bl(o.readTime):Et.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=u0(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=vp(l)?{documents:dE(s,l)}:{query:pE(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Ry(s,o.resumeToken);const h=Ip(s,o.expectedCount);h!==null&&(a.expectedCount=h)}else if(o.snapshotVersion.compareTo(Et.min())>0){a.readTime=Ep(s,o.snapshotVersion.toTimestamp());const h=Ip(s,o.expectedCount);h!==null&&(a.expectedCount=h)}return a}(this.serializer,e);const r=mE(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=u0(this.serializer),n.removeTarget=e,this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new ot(Je.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Tp(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Je.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ot(Je.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Tp(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Je.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ot(Je.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class XE{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Xs(n),this.D_=!1):lt("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{Fu(this)&&(lt("RemoteStore","Restarting streams for network reachability change."),await async function(l){const h=Ot(l);h.L_.add(4),await Ou(h),h.q_.set("Unknown"),h.L_.delete(4),await jf(h)}(this))})}),this.q_=new XE(r,i)}}async function jf(t){if(Fu(t))for(const e of t.B_)await e(!0)}async function Ou(t){for(const e of t.B_)await e(!1)}function jy(t,e){const n=Ot(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Og(n)?Dg(n):dc(n).r_()&&kg(n,e))}function Cg(t,e){const n=Ot(t),r=dc(n);n.N_.delete(e),r.r_()&&By(n,e),n.N_.size===0&&(r.r_()?r.o_():Fu(n)&&n.q_.set("Unknown"))}function kg(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Et.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}dc(t).A_(e)}function By(t,e){t.Q_.xe(e),dc(t).R_(e)}function Dg(t){t.Q_=new oE({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),dc(t).start(),t.q_.v_()}function Og(t){return Fu(t)&&!dc(t).n_()&&t.N_.size>0}function Fu(t){return Ot(t).L_.size===0}function qy(t){t.Q_=void 0}async function eT(t){t.q_.set("Online")}async function tT(t){t.N_.forEach((e,n)=>{kg(t,e)})}async function nT(t,e){qy(t),Og(t)?(t.q_.M_(e),Dg(t)):t.q_.set("Unknown")}async function rT(t,e,n){if(t.q_.set("Online"),e instanceof Py&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){lt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await p0(t,r)}else if(e instanceof Nh?t.Q_.Ke(e):e instanceof xy?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Et.min()))try{const r=await Vy(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,h)=>{if(l.resumeToken.approximateByteSize()>0){const d=s.N_.get(h);d&&s.N_.set(h,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,h)=>{const d=s.N_.get(l);if(!d)return;s.N_.set(l,d.withResumeToken(sr.EMPTY_BYTE_STRING,d.snapshotVersion)),By(s,l);const p=new Ko(d.target,l,h,d.sequenceNumber);kg(s,p)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){lt("RemoteStore","Failed to raise snapshot:",r),await p0(t,r)}}async function p0(t,e,n){if(!Lu(e))throw e;t.L_.add(1),await Ou(t),t.q_.set("Offline"),n||(n=()=>Vy(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{lt("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await jf(t)})}async function g0(t,e){const n=Ot(t);n.asyncQueue.verifyOperationInProgress(),lt("RemoteStore","RemoteStore received new credentials");const r=Fu(n);n.L_.add(3),await Ou(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await jf(n)}async function iT(t,e){const n=Ot(t);e?(n.L_.delete(2),await jf(n)):e||(n.L_.add(2),await Ou(n),n.q_.set("Unknown"))}function dc(t){return t.K_||(t.K_=function(n,r,i){const s=Ot(n);return s.w_(),new QE(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:eT.bind(null,t),Ro:tT.bind(null,t),mo:nT.bind(null,t),d_:rT.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Og(t)?Dg(t):t.q_.set("Unknown")):(await t.K_.stop(),qy(t))})),t.K_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Zo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new Fg(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ot(Je.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Hy(t,e){if(Xs("AsyncQueue",`${e}: ${t}`),Lu(t))return new ot(Je.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ut.comparator(n.key,r.key):(n,r)=>ut.comparator(n.key,r.key),this.keyedMap=Hc(),this.sortedSet=new Ln(this.comparator)}static emptySet(e){return new ql(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ql)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ql;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m0{constructor(){this.W_=new Ln(ut.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):xt():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class sc{constructor(e,n,r,i,s,o,a,l,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new sc(e,n,ql.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Df(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class oT{constructor(){this.queries=y0(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=Ot(n),s=i.queries;i.queries=y0(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new ot(Je.ABORTED,"Firestore shutting down"))}}function y0(){return new fc(t=>my(t),Df)}async function zy(t,e){const n=Ot(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new sT,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Hy(o,`Initialization of query '${Pl(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&Mg(n)}async function Gy(t,e){const n=Ot(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function aT(t,e){const n=Ot(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&Mg(n)}function lT(t,e,n){const r=Ot(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function Mg(t){t.Y_.forEach(e=>{e.next()})}var xp,v0;(v0=xp||(xp={})).ea="default",v0.Cache="cache";class $y{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new sc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=sc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==xp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy{constructor(e){this.key=e}}class Ky{constructor(e){this.key=e}}class cT{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ut(),this.mutatedKeys=Ut(),this.Aa=yy(e),this.Ra=new ql(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new m0,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,p)=>{const v=i.get(d),g=Of(this.query,p)?p:null,L=!!v&&this.mutatedKeys.has(v.key),P=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let j=!1;v&&g?v.data.isEqual(g.data)?L!==P&&(r.track({type:3,doc:g}),j=!0):this.ga(v,g)||(r.track({type:2,doc:g}),j=!0,(l&&this.Aa(g,l)>0||h&&this.Aa(g,h)<0)&&(a=!0)):!v&&g?(r.track({type:0,doc:g}),j=!0):v&&!g&&(r.track({type:1,doc:v}),j=!0,(l||h)&&(a=!0)),j&&(g?(o=o.add(g),s=P?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((d,p)=>function(g,L){const P=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xt()}};return P(g)-P(L)}(d.type,p.type)||this.Aa(d.doc,p.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,h=l!==this.Ea;return this.Ea=l,o.length!==0||h?{snapshot:new sc(this.query,e.Ra,s,o,e.mutatedKeys,l===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new m0,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Ut(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new Ky(r))}),this.da.forEach(r=>{e.has(r)||n.push(new Wy(r))}),n}ba(e){this.Ta=e.Ts,this.da=Ut();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return sc.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class uT{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class hT{constructor(e){this.key=e,this.va=!1}}class fT{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new fc(a=>my(a),Df),this.Ma=new Map,this.xa=new Set,this.Oa=new Ln(ut.comparator),this.Na=new Map,this.La=new Rg,this.Ba={},this.ka=new Map,this.qa=ic.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function dT(t,e,n=!0){const r=Zy(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await Jy(r,e,n,!0),i}async function pT(t,e){const n=Zy(t);await Jy(n,e,!0,!1)}async function Jy(t,e,n,r){const i=await qE(t.localStore,ls(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await gT(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&jy(t.remoteStore,i),a}async function gT(t,e,n,r,i){t.Ka=(p,v,g)=>async function(P,j,x,U){let J=j.view.ma(x);J.ns&&(J=await h0(P.localStore,j.query,!1).then(({documents:T})=>j.view.ma(T,J)));const Z=U&&U.targetChanges.get(j.targetId),fe=U&&U.targetMismatches.get(j.targetId)!=null,Ie=j.view.applyChanges(J,P.isPrimaryClient,Z,fe);return b0(P,j.targetId,Ie.wa),Ie.snapshot}(t,p,v,g);const s=await h0(t.localStore,e,!0),o=new cT(e,s.Ts),a=o.ma(s.documents),l=Du.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),h=o.applyChanges(a,t.isPrimaryClient,l);b0(t,n,h.wa);const d=new uT(e,n,o);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),h.snapshot}async function mT(t,e,n){const r=Ot(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Df(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Sp(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Cg(r.remoteStore,i.targetId),Pp(r,i.targetId)}).catch(yg)):(Pp(r,i.targetId),await Sp(r.localStore,i.targetId,!0))}async function yT(t,e){const n=Ot(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Cg(n.remoteStore,r.targetId))}async function Qy(t,e){const n=Ot(t);try{const r=await jE(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(An(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?An(o.va):i.removedDocuments.size>0&&(An(o.va),o.va=!1))}),await Xy(n,r,e)}catch(r){await yg(r)}}function _0(t,e,n){const r=Ot(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=Ot(o);l.onlineState=a;let h=!1;l.queries.forEach((d,p)=>{for(const v of p.j_)v.Z_(a)&&(h=!0)}),h&&Mg(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function vT(t,e,n){const r=Ot(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new Ln(ut.comparator);o=o.insert(s,yr.newNoDocument(s,Et.min()));const a=Ut().add(s),l=new Vf(Et.min(),new Map,new Ln(Ht),o,a);await Qy(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),Vg(r)}else await Sp(r.localStore,e,!1).then(()=>Pp(r,e,n)).catch(yg)}function Pp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||Yy(t,r)})}function Yy(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Cg(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Vg(t))}function b0(t,e,n){for(const r of n)r instanceof Wy?(t.La.addReference(r.key,e),_T(t,r)):r instanceof Ky?(lt("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||Yy(t,r.key)):xt()}function _T(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(lt("SyncEngine","New document in limbo: "+n),t.xa.add(r),Vg(t))}function Vg(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ut(mn.fromString(e)),r=t.qa.next();t.Na.set(r,new hT(n)),t.Oa=t.Oa.insert(n,r),jy(t.remoteStore,new Ko(ls(Eg(n.path)),r,"TargetPurposeLimboResolution",vg.oe))}}async function Xy(t,e,n){const r=Ot(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(h=>{var d;if((h||n)&&r.isPrimaryClient){const p=h?!h.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,p?"current":"not-current")}if(h){i.push(h);const p=Lg.Wi(l.targetId,h);s.push(p)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(l,h){const d=Ot(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>Ge.forEach(h,v=>Ge.forEach(v.$i,g=>d.persistence.referenceDelegate.addReference(p,v.targetId,g)).next(()=>Ge.forEach(v.Ui,g=>d.persistence.referenceDelegate.removeReference(p,v.targetId,g)))))}catch(p){if(!Lu(p))throw p;lt("LocalStore","Failed to update sequence numbers: "+p)}for(const p of h){const v=p.targetId;if(!p.fromCache){const g=d.os.get(v),L=g.snapshotVersion,P=g.withLastLimboFreeSnapshotVersion(L);d.os=d.os.insert(v,P)}}}(r.localStore,s))}async function bT(t,e){const n=Ot(t);if(!n.currentUser.isEqual(e)){lt("SyncEngine","User change. New user:",e.toKey());const r=await My(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new ot(Je.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Xy(n,r.hs)}}function wT(t,e){const n=Ot(t),r=n.Na.get(e);if(r&&r.va)return Ut().add(r.key);{let i=Ut();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function Zy(t){const e=Ot(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Qy.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=wT.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=vT.bind(null,e),e.Ca.d_=aT.bind(null,e.eventManager),e.Ca.$a=lT.bind(null,e.eventManager),e}class sf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Uf(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return UE(this.persistence,new ME,e.initialUser,this.serializer)}Ga(e){return new DE(Ng.Zr,this.serializer)}Wa(e){return new zE}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}sf.provider={build:()=>new sf};class Rp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>_0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=bT.bind(null,this.syncEngine),await iT(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new oT}()}createDatastore(e){const n=Uf(e.databaseInfo.databaseId),r=function(s){return new KE(s)}(e.databaseInfo);return function(s,o,a,l){return new YE(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new ZE(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>_0(this.syncEngine,n,0),function(){return d0.D()?new d0:new GE}())}createSyncEngine(e,n){return function(i,s,o,a,l,h,d){const p=new fT(i,s,o,a,l,h);return d&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=Ot(i);lt("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Ou(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Rp.provider={build:()=>new Rp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Xs("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=gr.UNAUTHENTICATED,this.clientId=oy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{lt("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(lt("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Zo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Hy(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Fd(t,e){t.asyncQueue.verifyOperationInProgress(),lt("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await My(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function w0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await IT(t);lt("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>g0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>g0(e.remoteStore,i)),t._onlineComponents=e}async function IT(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){lt("FirestoreClient","Using user provided OfflineComponentProvider");try{await Fd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===Je.FAILED_PRECONDITION||i.code===Je.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;ec("Error using user provided cache. Falling back to memory cache: "+n),await Fd(t,new sf)}}else lt("FirestoreClient","Using default OfflineComponentProvider"),await Fd(t,new sf);return t._offlineComponents}async function ET(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(lt("FirestoreClient","Using user provided OnlineComponentProvider"),await w0(t,t._uninitializedComponentsProvider._online)):(lt("FirestoreClient","Using default OnlineComponentProvider"),await w0(t,new Rp))),t._onlineComponents}async function tv(t){const e=await ET(t),n=e.eventManager;return n.onListen=dT.bind(null,e.syncEngine),n.onUnlisten=mT.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=pT.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=yT.bind(null,e.syncEngine),n}function TT(t,e,n={}){const r=new Zo;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,h){const d=new ev({next:v=>{d.Za(),o.enqueueAndForget(()=>Gy(s,p));const g=v.docs.has(a);!g&&v.fromCache?h.reject(new ot(Je.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&v.fromCache&&l&&l.source==="server"?h.reject(new ot(Je.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(v)},error:v=>h.reject(v)}),p=new $y(Eg(a.path),d,{includeMetadataChanges:!0,_a:!0});return zy(s,p)}(await tv(t),t.asyncQueue,e,n,r)),r.promise}function ST(t,e,n={}){const r=new Zo;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,h){const d=new ev({next:v=>{d.Za(),o.enqueueAndForget(()=>Gy(s,p)),v.fromCache&&l.source==="server"?h.reject(new ot(Je.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(v)},error:v=>h.reject(v)}),p=new $y(a,d,{includeMetadataChanges:!0,_a:!0});return zy(s,p)}(await tv(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nv(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rv(t,e,n){if(!n)throw new ot(Je.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function xT(t,e,n,r){if(e===!0&&r===!0)throw new ot(Je.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function I0(t){if(!ut.isDocumentKey(t))throw new ot(Je.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function E0(t){if(ut.isDocumentKey(t))throw new ot(Je.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Bf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":xt()}function Au(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ot(Je.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Bf(t);throw new ot(Je.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ot(Je.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ot(Je.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}xT("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=nv((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ot(Je.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ot(Je.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ot(Je.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class qf{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new T0({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ot(Je.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ot(Je.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new T0(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new c3;switch(r.type){case"firstParty":return new d3(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ot(Je.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=A0.get(n);r&&(lt("ComponentProvider","Removing Datastore"),A0.delete(n),r.terminate())}(this),Promise.resolve()}}function PT(t,e,n,r={}){var i;const s=(t=Au(t,qf))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&ec("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=gr.MOCK_USER;else{a=W5(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new ot(Je.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new gr(h)}t._authCredentials=new u3(new sy(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new pc(this.firestore,e,this._query)}}class ii{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ea(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ii(this.firestore,e,this._key)}}class ea extends pc{constructor(e,n,r){super(e,n,Eg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ii(this.firestore,null,new ut(e))}withConverter(e){return new ea(this.firestore,e,this._path)}}function Lh(t,e,...n){if(t=yi(t),rv("collection","path",e),t instanceof qf){const r=mn.fromString(e,...n);return E0(r),new ea(t,null,r)}{if(!(t instanceof ii||t instanceof ea))throw new ot(Je.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(mn.fromString(e,...n));return E0(r),new ea(t.firestore,null,r)}}function Al(t,e,...n){if(t=yi(t),arguments.length===1&&(e=oy.newId()),rv("doc","path",e),t instanceof qf){const r=mn.fromString(e,...n);return I0(r),new ii(t,null,new ut(r))}{if(!(t instanceof ii||t instanceof ea))throw new ot(Je.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(mn.fromString(e,...n));return I0(r),new ii(t.firestore,t instanceof ea?t.converter:null,new ut(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Uy(this,"async_queue_retry"),this.Vu=()=>{const r=Od();r&&lt("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Od();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Od();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Zo;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Lu(e))throw e;lt("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Xs("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=Fg.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&xt()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class Ug extends qf{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new S0,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new S0(e),this._firestoreClient=void 0,await e}}}function iv(t,e){const n=typeof t=="object"?t:gg(),r=typeof t=="string"?t:"(default)",i=Cf(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=z5("firestore");s&&PT(i,...s)}return i}function sv(t){if(t._terminated)throw new ot(Je.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||RT(t),t._firestoreClient}function RT(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,h,d){return new S3(a,l,h,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,nv(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new AT(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new oc(sr.fromBase64String(e))}catch(n){throw new ot(Je.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new oc(sr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ot(Je.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _r(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ot(Je.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ot(Je.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ht(this._lat,e._lat)||Ht(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NT=/^__.*__$/;function lv(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xt()}}class qg{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new qg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Np(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(lv(this.Cu)&&NT.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class LT{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Uf(e)}Qu(e,n,r,i=!1){return new qg({Cu:e,methodName:n,qu:r,path:_r.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function CT(t){const e=t._freezeSettings(),n=Uf(t._databaseId);return new LT(t._databaseId,!!e.ignoreUndefinedProperties,n)}function kT(t,e,n,r=!1){return Hg(n,t.Qu(r?4:3,e))}function Hg(t,e){if(cv(t=yi(t)))return OT("Unsupported field value:",e,t),DT(t,e);if(t instanceof av)return function(r,i){if(!lv(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Hg(a,i.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=yi(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return K3(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Jn.fromDate(r);return{timestampValue:Ep(i.serializer,s)}}if(r instanceof Jn){const s=new Jn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ep(i.serializer,s)}}if(r instanceof jg)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof oc)return{bytesValue:Ry(i.serializer,r._byteString)};if(r instanceof ii){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Ny(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Bg)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return Tg(a.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Bf(r)}`)}(t,e)}function DT(t,e){const n={};return ay(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Cu(t,(r,i)=>{const s=Hg(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function cv(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Jn||t instanceof jg||t instanceof oc||t instanceof ii||t instanceof av||t instanceof Bg)}function OT(t,e,n){if(!cv(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Bf(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}const FT=new RegExp("[~\\*/\\[\\]]");function MT(t,e,n){if(e.search(FT)>=0)throw Np(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ov(...e.split("."))._internalPath}catch{throw Np(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Np(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new ot(Je.INVALID_ARGUMENT,a+t+l)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ii(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new VT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(zg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class VT extends uv{data(){return super.data()}}function zg(t,e){return typeof e=="string"?MT(t,e):e instanceof ov?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UT(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ot(Je.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Gg{}class jT extends Gg{}function Ll(t,e,...n){let r=[];e instanceof Gg&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof $g).length,a=s.filter(l=>l instanceof Hf).length;if(o>1||o>0&&a>0)throw new ot(Je.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Hf extends jT{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Hf(e,n,r)}_apply(e){const n=this._parse(e);return hv(e._query,n),new pc(e.firestore,e.converter,_p(e._query,n))}_parse(e){const n=CT(e.firestore);return function(s,o,a,l,h,d,p){let v;if(h.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new ot(Je.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){R0(p,d);const g=[];for(const L of p)g.push(P0(l,s,L));v={arrayValue:{values:g}}}else v=P0(l,s,p)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||R0(p,d),v=kT(a,o,p,d==="in"||d==="not-in");return Vn.create(h,d,v)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function x0(t,e,n){const r=e,i=zg("where",t);return Hf._create(i,r,n)}class $g extends Gg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new $g(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Fi.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)hv(o,l),o=_p(o,l)}(e._query,n),new pc(e.firestore,e.converter,_p(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function P0(t,e,n){if(typeof(n=yi(n))=="string"){if(n==="")throw new ot(Je.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!gy(e)&&n.indexOf("/")!==-1)throw new ot(Je.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(mn.fromString(n));if(!ut.isDocumentKey(r))throw new ot(Je.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return K1(t,new ut(r))}if(n instanceof ii)return K1(t,n._key);throw new ot(Je.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Bf(n)}.`)}function R0(t,e){if(!Array.isArray(t)||t.length===0)throw new ot(Je.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function hv(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ot(Je.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ot(Je.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class BT{convertValue(e,n="none"){switch(Ga(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(za(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw xt()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Cu(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>xn(o.doubleValue));return new Bg(s)}convertGeoPoint(e){return new jg(xn(e.latitude),xn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=bg(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(_u(e));default:return null}}convertTimestamp(e){const n=sa(e);return new Jn(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=mn.fromString(e);An(Fy(r));const i=new bu(r.get(1),r.get(3)),s=new ut(r.popFirst(5));return i.isEqual(n)||Xs(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class fv extends uv{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ch(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(zg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Ch extends fv{data(e={}){return super.data(e)}}class qT{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Gc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ch(this._firestore,this._userDataWriter,r.key,r,new Gc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ot(Je.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new Ch(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Gc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Ch(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Gc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,d=-1;return a.type!==0&&(h=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:HT(a.type),doc:l,oldIndex:h,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function HT(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Il(t){t=Au(t,ii);const e=Au(t.firestore,Ug);return TT(sv(e),t._key).then(n=>zT(e,t,n))}class dv extends BT{constructor(e){super(),this.firestore=e}convertBytes(e){return new oc(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ii(this.firestore,null,n)}}function kh(t){t=Au(t,pc);const e=Au(t.firestore,Ug),n=sv(e),r=new dv(e);return UT(t._query),ST(n,t._query).then(i=>new qT(e,r,t,i))}function zT(t,e,n){const r=n.docs.get(e._key),i=new dv(t);return new fv(t,i,e._key,r,new Gc(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){hc=i})(Ja),qa(new ra("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Ug(new h3(r.getProvider("auth-internal")),new g3(r.getProvider("app-check-internal")),function(h,d){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new ot(Je.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new bu(h.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),as(H1,"4.7.3",e),as(H1,"4.7.3","esm2017")})();var GT="firebase",$T="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */as(GT,$T,"app");function Wg(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function pv(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const WT=pv,gv=new Ru("auth","Firebase",pv());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const of=new dg("@firebase/auth");function KT(t,...e){of.logLevel<=Ct.WARN&&of.warn(`Auth (${Ja}): ${t}`,...e)}function Dh(t,...e){of.logLevel<=Ct.ERROR&&of.error(`Auth (${Ja}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zs(t,...e){throw Kg(t,...e)}function cs(t,...e){return Kg(t,...e)}function mv(t,e,n){const r=Object.assign(Object.assign({},WT()),{[e]:n});return new Ru("auth","Firebase",r).create(e,{appName:t.name})}function ja(t){return mv(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Kg(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return gv.create(t,...e)}function vt(t,e,...n){if(!t)throw Kg(e,...n)}function Gs(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Dh(e),new Error(e)}function eo(t,e){t||Gs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function JT(){return N0()==="http:"||N0()==="https:"}function N0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QT(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(JT()||H4()||"connection"in navigator)?navigator.onLine:!0}function YT(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(e,n){this.shortDelay=e,this.longDelay=n,eo(n>e,"Short delay should be less than long delay!"),this.isMobile=j4()||z4()}get(){return QT()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jg(t,e){eo(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yv{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Gs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Gs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Gs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XT={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZT=new Mu(3e4,6e4);function Qg(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function gc(t,e,n,r,i={}){return vv(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Nu(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const h=Object.assign({method:e,headers:l},s);return q4()||(h.referrerPolicy="no-referrer"),yv.fetch()(_v(t,t.config.apiHost,n,a),h)})}async function vv(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},XT),e);try{const i=new tS(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw yh(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,h]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw yh(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw yh(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw yh(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw mv(t,d,h);Zs(t,d)}}catch(i){if(i instanceof ms)throw i;Zs(t,"network-request-failed",{message:String(i)})}}async function eS(t,e,n,r,i={}){const s=await gc(t,e,n,r,i);return"mfaPendingCredential"in s&&Zs(t,"multi-factor-auth-required",{_serverResponse:s}),s}function _v(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Jg(t.config,i):`${t.config.apiScheme}://${i}`}class tS{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(cs(this.auth,"network-request-failed")),ZT.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function yh(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=cs(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nS(t,e){return gc(t,"POST","/v1/accounts:delete",e)}async function bv(t,e){return gc(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ou(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function rS(t,e=!1){const n=yi(t),r=await n.getIdToken(e),i=Yg(r);vt(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:ou(Md(i.auth_time)),issuedAtTime:ou(Md(i.iat)),expirationTime:ou(Md(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Md(t){return Number(t)*1e3}function Yg(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Dh("JWT malformed, contained fewer than 3 sections"),null;try{const i=q5(n);return i?JSON.parse(i):(Dh("Failed to decode base64 JWT payload"),null)}catch(i){return Dh("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function L0(t){const e=Yg(t);return vt(e,"internal-error"),vt(typeof e.exp<"u","internal-error"),vt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Iu(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ms&&iS(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function iS({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ou(this.lastLoginAt),this.creationTime=ou(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function af(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Iu(t,bv(n,{idToken:r}));vt(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?wv(s.providerUserInfo):[],a=aS(t.providerData,o),l=t.isAnonymous,h=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),d=l?h:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Cp(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,p)}async function oS(t){const e=yi(t);await af(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function aS(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function wv(t){return t.map(e=>{var{providerId:n}=e,r=Wg(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lS(t,e){const n=await vv(t,{},async()=>{const r=Nu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=_v(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",yv.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function cS(t,e){return gc(t,"POST","/v2/accounts:revokeToken",Qg(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){vt(e.idToken,"internal-error"),vt(typeof e.idToken<"u","internal-error"),vt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):L0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){vt(e.length!==0,"internal-error");const n=L0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(vt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await lS(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Hl;return r&&(vt(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(vt(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(vt(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Hl,this.toJSON())}_performRefresh(){return Gs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ko(t,e){vt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class $s{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Wg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new sS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Cp(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Iu(this,this.stsTokenManager.getToken(this.auth,e));return vt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return rS(this,e)}reload(){return oS(this)}_assign(e){this!==e&&(vt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new $s(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){vt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await af(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if($o(this.auth.app))return Promise.reject(ja(this.auth));const e=await this.getIdToken();return await Iu(this,nS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,h,d;const p=(r=n.displayName)!==null&&r!==void 0?r:void 0,v=(i=n.email)!==null&&i!==void 0?i:void 0,g=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,L=(o=n.photoURL)!==null&&o!==void 0?o:void 0,P=(a=n.tenantId)!==null&&a!==void 0?a:void 0,j=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,x=(h=n.createdAt)!==null&&h!==void 0?h:void 0,U=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:J,emailVerified:Z,isAnonymous:fe,providerData:Ie,stsTokenManager:T}=n;vt(J&&T,e,"internal-error");const S=Hl.fromJSON(this.name,T);vt(typeof J=="string",e,"internal-error"),ko(p,e.name),ko(v,e.name),vt(typeof Z=="boolean",e,"internal-error"),vt(typeof fe=="boolean",e,"internal-error"),ko(g,e.name),ko(L,e.name),ko(P,e.name),ko(j,e.name),ko(x,e.name),ko(U,e.name);const O=new $s({uid:J,auth:e,email:v,emailVerified:Z,displayName:p,isAnonymous:fe,photoURL:L,phoneNumber:g,tenantId:P,stsTokenManager:S,createdAt:x,lastLoginAt:U});return Ie&&Array.isArray(Ie)&&(O.providerData=Ie.map(F=>Object.assign({},F))),j&&(O._redirectEventId=j),O}static async _fromIdTokenResponse(e,n,r=!1){const i=new Hl;i.updateFromServerResponse(n);const s=new $s({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await af(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];vt(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?wv(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Hl;a.updateFromIdToken(r);const l=new $s({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Cp(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,h),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C0=new Map;function Ws(t){eo(t instanceof Function,"Expected a class definition");let e=C0.get(t);return e?(eo(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,C0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Av{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Av.type="NONE";const k0=Av;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oh(t,e,n){return`firebase:${t}:${e}:${n}`}class zl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Oh(this.userKey,i.apiKey,s),this.fullPersistenceKey=Oh("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?$s._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new zl(Ws(k0),e,r);const i=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let s=i[0]||Ws(k0);const o=Oh(r,e.config.apiKey,e.name);let a=null;for(const h of n)try{const d=await h._get(o);if(d){const p=$s._fromJSON(e,d);h!==s&&(a=p),s=h;break}}catch{}const l=i.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new zl(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async h=>{if(h!==s)try{await h._remove(o)}catch{}})),new zl(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Sv(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Iv(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Pv(e))return"Blackberry";if(Rv(e))return"Webos";if(Ev(e))return"Safari";if((e.includes("chrome/")||Tv(e))&&!e.includes("edge/"))return"Chrome";if(xv(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Iv(t=Ir()){return/firefox\//i.test(t)}function Ev(t=Ir()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Tv(t=Ir()){return/crios\//i.test(t)}function Sv(t=Ir()){return/iemobile/i.test(t)}function xv(t=Ir()){return/android/i.test(t)}function Pv(t=Ir()){return/blackberry/i.test(t)}function Rv(t=Ir()){return/webos/i.test(t)}function Xg(t=Ir()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function uS(t=Ir()){var e;return Xg(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function hS(){return G4()&&document.documentMode===10}function Nv(t=Ir()){return Xg(t)||xv(t)||Rv(t)||Pv(t)||/windows phone/i.test(t)||Sv(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lv(t,e=[]){let n;switch(t){case"Browser":n=D0(Ir());break;case"Worker":n=`${D0(Ir())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ja}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dS(t,e={}){return gc(t,"GET","/v2/passwordPolicy",Qg(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pS=6;class gS{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:pS,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new O0(this),this.idTokenSubscription=new O0(this),this.beforeStateQueue=new fS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=gv,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ws(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await zl.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await bv(this,{idToken:e}),r=await $s._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if($o(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return vt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await af(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=YT()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if($o(this.app))return Promise.reject(ja(this));const n=e?yi(e):null;return n&&vt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&vt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return $o(this.app)?Promise.reject(ja(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return $o(this.app)?Promise.reject(ja(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ws(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await dS(this),n=new gS(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ru("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await cS(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ws(e)||this._popupRedirectResolver;vt(n,this,"argument-error"),this.redirectPersistenceManager=await zl.create(this,[Ws(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(vt(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return vt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Lv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&KT(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Zg(t){return yi(t)}class O0{constructor(e){this.auth=e,this.observer=null,this.addObserver=Z4(n=>this.observer=n)}get next(){return vt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let em={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function yS(t){em=t}function vS(t){return em.loadJS(t)}function _S(){return em.gapiScript}function bS(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wS(t,e){const n=Cf(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Yh(s,e??{}))return i;Zs(i,"already-initialized")}return n.initialize({options:e})}function AS(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ws);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function IS(t,e,n){const r=Zg(t);vt(r._canInitEmulator,r,"emulator-config-failed"),vt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=Cv(e),{host:o,port:a}=ES(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),TS()}function Cv(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function ES(t){const e=Cv(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:F0(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:F0(o)}}}function F0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function TS(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Gs("not implemented")}_getIdTokenResponse(e){return Gs("not implemented")}_linkToIdToken(e,n){return Gs("not implemented")}_getReauthenticationResolver(e){return Gs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gl(t,e){return eS(t,"POST","/v1/accounts:signInWithIdp",Qg(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SS="http://localhost";class $a extends kv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new $a(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Zs("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Wg(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new $a(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Gl(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Gl(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Gl(e,n)}buildRequest(){const e={requestUri:SS,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Nu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu extends Dv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo extends Vu{constructor(){super("facebook.com")}static credential(e){return $a._fromParams({providerId:jo.PROVIDER_ID,signInMethod:jo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return jo.credentialFromTaggedObject(e)}static credentialFromError(e){return jo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return jo.credential(e.oauthAccessToken)}catch{return null}}}jo.FACEBOOK_SIGN_IN_METHOD="facebook.com";jo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo extends Vu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return $a._fromParams({providerId:Bo.PROVIDER_ID,signInMethod:Bo.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Bo.credentialFromTaggedObject(e)}static credentialFromError(e){return Bo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Bo.credential(n,r)}catch{return null}}}Bo.GOOGLE_SIGN_IN_METHOD="google.com";Bo.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo extends Vu{constructor(){super("github.com")}static credential(e){return $a._fromParams({providerId:qo.PROVIDER_ID,signInMethod:qo.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qo.credentialFromTaggedObject(e)}static credentialFromError(e){return qo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qo.credential(e.oauthAccessToken)}catch{return null}}}qo.GITHUB_SIGN_IN_METHOD="github.com";qo.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho extends Vu{constructor(){super("twitter.com")}static credential(e,n){return $a._fromParams({providerId:Ho.PROVIDER_ID,signInMethod:Ho.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ho.credentialFromTaggedObject(e)}static credentialFromError(e){return Ho.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ho.credential(n,r)}catch{return null}}}Ho.TWITTER_SIGN_IN_METHOD="twitter.com";Ho.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await $s._fromIdTokenResponse(e,r,i),o=M0(r);return new ac({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=M0(r);return new ac({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function M0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf extends ms{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,lf.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new lf(e,n,r,i)}}function Ov(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?lf._fromErrorAndOperation(t,s,e,r):s})}async function xS(t,e,n=!1){const r=await Iu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ac._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PS(t,e,n=!1){const{auth:r}=t;if($o(r.app))return Promise.reject(ja(r));const i="reauthenticate";try{const s=await Iu(t,Ov(r,i,e,t),n);vt(s.idToken,r,"internal-error");const o=Yg(s.idToken);vt(o,r,"internal-error");const{sub:a}=o;return vt(t.uid===a,r,"user-mismatch"),ac._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Zs(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RS(t,e,n=!1){if($o(t.app))return Promise.reject(ja(t));const r="signIn",i=await Ov(t,r,e),s=await ac._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function NS(t,e,n,r){return yi(t).onIdTokenChanged(e,n,r)}function LS(t,e,n){return yi(t).beforeAuthStateChanged(e,n)}const cf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(cf,"1"),this.storage.removeItem(cf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CS=1e3,kS=10;class Mv extends Fv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Nv(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);hS()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,kS):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},CS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Mv.type="LOCAL";const DS=Mv;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv extends Fv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Vv.type="SESSION";const Uv=Vv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OS(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new zf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async h=>h(n.origin,s)),l=await OS(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}zf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const h=tm("",20);i.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){const v=p;if(v.data.eventId===h)switch(v.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(v.data.response);break;default:clearTimeout(d),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function us(){return window}function MS(t){us().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jv(){return typeof us().WorkerGlobalScope<"u"&&typeof us().importScripts=="function"}async function VS(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function US(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function jS(){return jv()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bv="firebaseLocalStorageDb",BS=1,uf="firebaseLocalStorage",qv="fbase_key";class Uu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Gf(t,e){return t.transaction([uf],e?"readwrite":"readonly").objectStore(uf)}function qS(){const t=indexedDB.deleteDatabase(Bv);return new Uu(t).toPromise()}function kp(){const t=indexedDB.open(Bv,BS);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(uf,{keyPath:qv})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(uf)?e(r):(r.close(),await qS(),e(await kp()))})})}async function V0(t,e,n){const r=Gf(t,!0).put({[qv]:e,value:n});return new Uu(r).toPromise()}async function HS(t,e){const n=Gf(t,!1).get(e),r=await new Uu(n).toPromise();return r===void 0?null:r.value}function U0(t,e){const n=Gf(t,!0).delete(e);return new Uu(n).toPromise()}const zS=800,GS=3;class Hv{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await kp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>GS)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return jv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=zf._getInstance(jS()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await VS(),!this.activeServiceWorker)return;this.sender=new FS(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||US()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await kp();return await V0(e,cf,"1"),await U0(e,cf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>V0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>HS(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>U0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Gf(i,!1).getAll();return new Uu(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),zS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Hv.type="LOCAL";const $S=Hv;new Mu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WS(t,e){return e?Ws(e):(vt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm extends kv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Gl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Gl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Gl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function KS(t){return RS(t.auth,new nm(t),t.bypassAuthState)}function JS(t){const{auth:e,user:n}=t;return vt(n,e,"internal-error"),PS(n,new nm(t),t.bypassAuthState)}async function QS(t){const{auth:e,user:n}=t;return vt(n,e,"internal-error"),xS(n,new nm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return KS;case"linkViaPopup":case"linkViaRedirect":return QS;case"reauthViaPopup":case"reauthViaRedirect":return JS;default:Zs(this.auth,"internal-error")}}resolve(e){eo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){eo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YS=new Mu(2e3,1e4);class Dl extends zv{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Dl.currentPopupAction&&Dl.currentPopupAction.cancel(),Dl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return vt(e,this.auth,"internal-error"),e}async onExecution(){eo(this.filter.length===1,"Popup operations only handle one event");const e=tm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(cs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(cs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Dl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(cs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,YS.get())};e()}}Dl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XS="pendingRedirect",Fh=new Map;class ZS extends zv{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Fh.get(this.auth._key());if(!e){try{const r=await ex(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Fh.set(this.auth._key(),e)}return this.bypassAuthState||Fh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function ex(t,e){const n=rx(e),r=nx(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function tx(t,e){Fh.set(t._key(),e)}function nx(t){return Ws(t._redirectPersistence)}function rx(t){return Oh(XS,t.config.apiKey,t.name)}async function ix(t,e,n=!1){if($o(t.app))return Promise.reject(ja(t));const r=Zg(t),i=WS(r,e),o=await new ZS(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sx=10*60*1e3;class ox{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ax(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Gv(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(cs(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=sx&&this.cachedEventUids.clear(),this.cachedEventUids.has(j0(e))}saveEventToCache(e){this.cachedEventUids.add(j0(e)),this.lastProcessedEventTime=Date.now()}}function j0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Gv({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function ax(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Gv(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lx(t,e={}){return gc(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cx=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ux=/^https?/;async function hx(t){if(t.config.emulator)return;const{authorizedDomains:e}=await lx(t);for(const n of e)try{if(fx(n))return}catch{}Zs(t,"unauthorized-domain")}function fx(t){const e=Lp(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!ux.test(n))return!1;if(cx.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dx=new Mu(3e4,6e4);function B0(){const t=us().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function px(t){return new Promise((e,n)=>{var r,i,s;function o(){B0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{B0(),n(cs(t,"network-request-failed"))},timeout:dx.get()})}if(!((i=(r=us().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=us().gapi)===null||s===void 0)&&s.load)o();else{const a=bS("iframefcb");return us()[a]=()=>{gapi.load?o():n(cs(t,"network-request-failed"))},vS(`${_S()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Mh=null,e})}let Mh=null;function gx(t){return Mh=Mh||px(t),Mh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mx=new Mu(5e3,15e3),yx="__/auth/iframe",vx="emulator/auth/iframe",_x={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},bx=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function wx(t){const e=t.config;vt(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Jg(e,vx):`https://${t.config.authDomain}/${yx}`,r={apiKey:e.apiKey,appName:t.name,v:Ja},i=bx.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Nu(r).slice(1)}`}async function Ax(t){const e=await gx(t),n=us().gapi;return vt(n,t,"internal-error"),e.open({where:document.body,url:wx(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:_x,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=cs(t,"network-request-failed"),a=us().setTimeout(()=>{s(o)},mx.get());function l(){us().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ix={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Ex=500,Tx=600,Sx="_blank",xx="http://localhost";class q0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Px(t,e,n,r=Ex,i=Tx){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},Ix),{width:r.toString(),height:i.toString(),top:s,left:o}),h=Ir().toLowerCase();n&&(a=Tv(h)?Sx:n),Iv(h)&&(e=e||xx,l.scrollbars="yes");const d=Object.entries(l).reduce((v,[g,L])=>`${v}${g}=${L},`,"");if(uS(h)&&a!=="_self")return Rx(e||"",a),new q0(null);const p=window.open(e||"",a,d);vt(p,t,"popup-blocked");try{p.focus()}catch{}return new q0(p)}function Rx(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nx="__/auth/handler",Lx="emulator/auth/handler",Cx=encodeURIComponent("fac");async function H0(t,e,n,r,i,s){vt(t.config.authDomain,t,"auth-domain-config-required"),vt(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ja,eventId:i};if(e instanceof Dv){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",X4(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,p]of Object.entries({}))o[d]=p}if(e instanceof Vu){const d=e.getScopes().filter(p=>p!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),h=l?`#${Cx}=${encodeURIComponent(l)}`:"";return`${kx(t)}?${Nu(a).slice(1)}${h}`}function kx({config:t}){return t.emulator?Jg(t,Lx):`https://${t.authDomain}/${Nx}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vd="webStorageSupport";class Dx{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Uv,this._completeRedirectFn=ix,this._overrideRedirectResult=tx}async _openPopup(e,n,r,i){var s;eo((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await H0(e,n,r,Lp(),i);return Px(e,o,tm())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await H0(e,n,r,Lp(),i);return MS(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(eo(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Ax(e),r=new ox(e);return n.register("authEvent",i=>(vt(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Vd,{type:Vd},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Vd];o!==void 0&&n(!!o),Zs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=hx(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Nv()||Ev()||Xg()}}const Ox=Dx;var z0="@firebase/auth",G0="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){vt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mx(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Vx(t){qa(new ra("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;vt(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Lv(t)},h=new mS(r,i,s,l);return AS(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),qa(new ra("auth-internal",e=>{const n=Zg(e.getProvider("auth").getImmediate());return(r=>new Fx(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),as(z0,G0,Mx(t)),as(z0,G0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ux=5*60,jx=$5("authIdTokenMaxAge")||Ux;let $0=null;const Bx=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>jx)return;const i=n==null?void 0:n.token;$0!==i&&($0=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function qx(t=gg()){const e=Cf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=wS(t,{popupRedirectResolver:Ox,persistence:[$S,DS,Uv]}),r=$5("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=Bx(s.toString());LS(n,o,()=>o(n.currentUser)),NS(n,a=>o(a))}}const i=H5("auth");return i&&IS(n,`http://${i}`),n}function Hx(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}yS({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=cs("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",Hx().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Vx("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $v="firebasestorage.googleapis.com",zx="storageBucket",Gx=2*60*1e3,$x=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys extends ms{constructor(e,n,r=0){super(Ud(e),`Firebase Storage: ${n} (${Ud(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ys.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Ud(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var gs;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(gs||(gs={}));function Ud(t){return"storage/"+t}function Wx(){const t="An unknown error occurred, please check the error payload for server response.";return new ys(gs.UNKNOWN,t)}function Kx(){return new ys(gs.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Jx(){return new ys(gs.CANCELED,"User canceled the upload/download.")}function Qx(t){return new ys(gs.INVALID_URL,"Invalid URL '"+t+"'.")}function Yx(t){return new ys(gs.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function W0(t){return new ys(gs.INVALID_ARGUMENT,t)}function Wv(){return new ys(gs.APP_DELETED,"The Firebase app was deleted.")}function Xx(t){return new ys(gs.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Ci.makeFromUrl(e,n)}catch{return new Ci(e,"")}if(r.path==="")return r;throw Yx(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(Z){Z.path.charAt(Z.path.length-1)==="/"&&(Z.path_=Z.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function h(Z){Z.path_=decodeURIComponent(Z.path)}const d="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),v="(/([^?#]*).*)?$",g=new RegExp(`^https?://${p}/${d}/b/${i}/o${v}`,"i"),L={bucket:1,path:3},P=n===$v?"(?:storage.googleapis.com|storage.cloud.google.com)":n,j="([^?#]*)",x=new RegExp(`^https?://${P}/${i}/${j}`,"i"),J=[{regex:a,indices:l,postModify:s},{regex:g,indices:L,postModify:h},{regex:x,indices:{bucket:1,path:2},postModify:h}];for(let Z=0;Z<J.length;Z++){const fe=J[Z],Ie=fe.regex.exec(e);if(Ie){const T=Ie[fe.indices.bucket];let S=Ie[fe.indices.path];S||(S=""),r=new Ci(T,S),fe.postModify(r);break}}if(r==null)throw Qx(e);return r}}class Zx{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eP(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let h=!1;function d(...j){h||(h=!0,e.apply(null,j))}function p(j){i=setTimeout(()=>{i=null,t(g,l())},j)}function v(){s&&clearTimeout(s)}function g(j,...x){if(h){v();return}if(j){v(),d.call(null,j,...x);return}if(l()||o){v(),d.call(null,j,...x);return}r<64&&(r*=2);let J;a===1?(a=2,J=0):J=(r+Math.random())*1e3,p(J)}let L=!1;function P(j){L||(L=!0,v(),!h&&(i!==null?(j||(a=2),clearTimeout(i),p(0)):j||(a=1)))}return p(0),s=setTimeout(()=>{o=!0,P(!0)},n),P}function tP(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nP(t){return t!==void 0}function K0(t,e,n,r){if(r<e)throw W0(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw W0(`Invalid value for '${t}'. Expected ${n} or less.`)}function rP(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var hf;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(hf||(hf={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iP(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{constructor(e,n,r,i,s,o,a,l,h,d,p,v=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=h,this.progressCallback_=d,this.connectionFactory_=p,this.retry=v,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((g,L)=>{this.resolve_=g,this.reject_=L,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new vh(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,h=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,h)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===hf.NO_ERROR,l=s.getStatus();if(!a||iP(l,this.additionalRetryCodes_)&&this.retry){const d=s.getErrorCode()===hf.ABORT;r(!1,new vh(!1,null,d));return}const h=this.successCodes_.indexOf(l)!==-1;r(!0,new vh(h,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());nP(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=Wx();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?Wv():Jx();o(l)}else{const l=Kx();o(l)}};this.canceled_?n(!1,new vh(!1,null,!0)):this.backoffId_=eP(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&tP(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class vh{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function oP(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function aP(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function lP(t,e){e&&(t["X-Firebase-GMPID"]=e)}function cP(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function uP(t,e,n,r,i,s,o=!0){const a=rP(t.urlParams),l=t.url+a,h=Object.assign({},t.headers);return lP(h,e),oP(h,n),aP(h,s),cP(h,r),new sP(l,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hP(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function fP(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff{constructor(e,n){this._service=e,n instanceof Ci?this._location=n:this._location=Ci.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new ff(e,n)}get root(){const e=new Ci(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return fP(this._location.path)}get storage(){return this._service}get parent(){const e=hP(this._location.path);if(e===null)return null;const n=new Ci(this._location.bucket,e);return new ff(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw Xx(e)}}function J0(t,e){const n=e==null?void 0:e[zx];return n==null?null:Ci.makeFromBucketSpec(n,t)}function dP(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:W5(i,t.app.options.projectId))}class pP{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=$v,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Gx,this._maxUploadRetryTime=$x,this._requests=new Set,i!=null?this._bucket=Ci.makeFromBucketSpec(i,this._host):this._bucket=J0(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ci.makeFromBucketSpec(this._url,e):this._bucket=J0(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){K0("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){K0("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ff(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new Zx(Wv());{const o=uP(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const Q0="@firebase/storage",Y0="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kv="storage";function gP(t=gg(),e){t=yi(t);const r=Cf(t,Kv).getImmediate({identifier:e}),i=z5("storage");return i&&mP(r,...i),r}function mP(t,e,n,r={}){dP(t,e,n,r)}function yP(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new pP(n,r,i,e,Ja)}function vP(){qa(new ra(Kv,yP,"PUBLIC").setMultipleInstances(!0)),as(Q0,Y0,""),as(Q0,Y0,"esm2017")}vP();const _P={apiKey:"AIzaSyBVUVyDTnOwMmYR1ybOLYv9i_B19aox1Lg",authDomain:"weresldatabase.firebaseapp.com",projectId:"weresldatabase",storageBucket:"weresldatabase.firebasestorage.app",messagingSenderId:"148662033996",appId:"1:148662033996:web:f9b5ea903b9cc5a24d9ee9"},rm=Q5(_P);qx(rm);const Us=iv(rm);gP(rm);const es={PROFILES:"profiles",BANK_ACCOUNTS:"bank_accounts",SEARCH_ELEMENTS:"SearchElements",RF_RETURN_RECORD:"RF_return_record",GIF_RETURN_RECORD:"GIF_return_record",TOPVIEW_LINKS:"topview-links",CONFIG:"config",UPLOADED_IMAGES:"uploadedImages",LOANS:"loans"},$e={REG_ID:"Reg_ID",FULL_NAME:"fullName",DISTRICT:"district",YEAR_OF_BIRTH:"yearOfBirth",ADDRESS:"address",NIC:"nic",PHONE_NUMBER:"phoneNumber",TOTAL_CHILDREN:"totalChildren",SCHOOL_GOING_CHILDREN:"schoolGoingChildren",OTHER_DEPENDENTS:"otherDependents",DESCRIPTION:"description",OCCUPATION:"occupation",PROFILE_IMAGE_DRIVE_ID:"profileImageDriveId",RF_BILL_DRIVE_FOLDER:"rfBillDriveFolder",CREATED_AT:"createdAt",LAST_UPDATED:"lastUpdated",GIF:"GIF",RF_RETURN_HISTORY:"RF_return_history",RF_LOANS:"RF_Loans",GRANT:"Grant"},tn={AMOUNT:"amount",APPROVED_AT:"approvedAt",CREATED_AT:"createdAt",CURRENT_BALANCE:"currentBalance",INITIATION_DATE:"initiationDate",LAST_UPDATED:"lastUpdated",PROJECT_DESCRIPTION:"projectDescription",PURPOSE:"purpose",REG_ID:"Reg_ID",SOURCE:"source",STATUS:"status",TYPE:"type",ARMS:"arms",PAYMENT_INTEGRITY:"paymentIntegrity"},Kn={AMOUNT:"approvedAmount",APPROVED_AMOUNT:"approvedAmount",APPROVED_AT:"approvedAt",CREATED_AT:"createdAt",REQUESTED_DATE:"requestedDate",INITIATION_DATE:"requestedDate",LAST_UPDATED:"lastUpdated",PROJECT_DESCRIPTION:"projectDescription",PURPOSE:"purpose",REG_ID:"Reg_ID",SOURCE:"source",STATUS:"status",TYPE:"type",ARMS:"arms",PAYMENT_INTEGRITY:"paymentIntegrity"},Vc={RECEIVER:"receiver",TIMESTAMP:"timestamp",PAID_AMOUNT:"paidAmount"},_h={APPROVED_DATE:"approvedDate",AMOUNT:"amount",RECEIVER:"receiver"},pt={MANNAR:"MAN",COLOMBO:"COL",BATTICALOA:"BAT",GAMPAHA:"GAM",KALUTARA:"KAL",KANDY:"KAN",KURUNEGALA:"KUR",JAFFNA:"JAF",VAVUNIYA:"VAV",TRINCOMALEE:"TRI",MATARA:"MTR",HAMBANTOTA:"HAM",MONARAGALA:"MON",ANURADHAPURA:"ANU",POLONNARUWA:"POL",PUTTALAM:"PUT",RATNAPURA:"RAT",NUWARA_ELIYA:"NUW",BADULLA:"BAD",KEGALLE:"KEG",MULLAITIVU:"MUL",MATALE:"MTL",AMPARA:"AMP",KILINOCHCHI:"KIL",GALLE:"GAE"},bP={[pt.MANNAR]:"Mannar",[pt.COLOMBO]:"Colombo",[pt.BATTICALOA]:"Batticaloa",[pt.GAMPAHA]:"Gampaha",[pt.KALUTARA]:"Kalutara",[pt.KANDY]:"Kandy",[pt.KURUNEGALA]:"Kurunegala",[pt.JAFFNA]:"Jaffna",[pt.VAVUNIYA]:"Vavuniya",[pt.TRINCOMALEE]:"Trincomalee",[pt.MATARA]:"Matara",[pt.HAMBANTOTA]:"Hambantota",[pt.MONARAGALA]:"Monaragala",[pt.ANURADHAPURA]:"Anuradhapura",[pt.POLONNARUWA]:"Polonnaruwa",[pt.PUTTALAM]:"Puttalam",[pt.RATNAPURA]:"Ratnapura",[pt.NUWARA_ELIYA]:"Nuwara Eliya",[pt.BADULLA]:"Badulla",[pt.KEGALLE]:"Kegalle",[pt.MULLAITIVU]:"Mullaitivu",[pt.MATALE]:"Matale",[pt.AMPARA]:"Ampara",[pt.KILINOCHCHI]:"Kilinochchi",[pt.GALLE]:"Galle"},Jv={Mannar:pt.MANNAR,Colombo:pt.COLOMBO,Batticaloa:pt.BATTICALOA,Gampaha:pt.GAMPAHA,Kalutara:pt.KALUTARA,Kandy:pt.KANDY,Kurunegala:pt.KURUNEGALA,Jaffna:pt.JAFFNA,Vavuniya:pt.VAVUNIYA,Trincomalee:pt.TRINCOMALEE,Matara:pt.MATARA,Hambantota:pt.HAMBANTOTA,Monaragala:pt.MONARAGALA,Anuradhapura:pt.ANURADHAPURA,Polonnaruwa:pt.POLONNARUWA,Puttalam:pt.PUTTALAM,Ratnapura:pt.RATNAPURA,"Nuwara Eliya":pt.NUWARA_ELIYA,Badulla:pt.BADULLA,Kegalle:pt.KEGALLE,Mullaitivu:pt.MULLAITIVU,Matale:pt.MATALE,Ampara:pt.AMPARA,Kilinochchi:pt.KILINOCHCHI,Galle:pt.GALLE},wP=t=>Jv[t]||null,AP=iv(),IP=async t=>{try{console.log(" Generating next RegID for district code:",t);const e=await TP(t);if(!e){const o=`${t}001`;return console.log(" First RegID for district:",o),o}const i=(parseInt(e.slice(t.length))+1).toString().padStart(3,"0"),s=`${t}${i}`;return console.log(" Generated next RegID:",s,"(previous was:",e,")"),s}catch(e){throw console.error(" Error generating next RegID:",e),new Error("Failed to generate RegID")}},EP=async t=>{try{const e=wP(t);if(!e)throw new Error(`Invalid district name: ${t}`);return await IP(e)}catch(e){throw console.error("Error generating RegID from district:",e),e}},TP=async t=>{try{console.log(" Searching for existing RegIDs with district code:",t);const e=Lh(AP,es.PROFILES),n=Ll(e),r=await kh(n);if(r.empty)return console.log(" No profiles found in database"),null;const i=[];if(r.docs.forEach(l=>{const h=l.data(),d=h.Reg_ID||h.regId||h.reg_id||l.id;d&&d.startsWith(t)&&i.push(d)}),console.log(" Found existing RegIDs for district",t,":",i),i.length===0)return console.log(" No existing RegIDs found for district:",t),null;const s=i.map(l=>{const h=l.replace(t,"");return parseInt(h)||0}),o=Math.max(...s),a=`${t}${o.toString().padStart(3,"0")}`;return console.log(" Last RegID for district",t,":",a),a}catch(e){throw console.error(" Error getting last RegID for district:",e),new Error("Failed to get last RegID")}},ni={async getAllProfiles(t={}){try{let e=Lh(Us,es.PROFILES);t.District&&(e=Ll(e,x0($e.DISTRICT,"==",t.District))),t.type&&(e=Ll(e)),t.year&&(e=Ll(e,x0($e.CREATED_AT,">=",new Date(t.year,0,1))));const n=await kh(e),r=[];return n.forEach(i=>{var a,l,h,d,p,v,g,L,P,j;const s=i.data(),o={id:i.id,basicInfo:{name:s[$e.FULL_NAME]||s.Name||((a=s.basicInfo)==null?void 0:a.name)||"N/A",age:s[$e.YEAR_OF_BIRTH]||s.Age||((l=s.basicInfo)==null?void 0:l.age)||"N/A",District:s[$e.DISTRICT]||s.District||((h=s.basicInfo)==null?void 0:h.District)||"N/A",phone:s[$e.PHONE_NUMBER]||s.contact||((d=s.basicInfo)==null?void 0:d.phone)||"N/A",address:s[$e.ADDRESS]||s.Address||((p=s.basicInfo)==null?void 0:p.address)||"N/A",nic:s[$e.NIC]||s.NIC||((v=s.basicInfo)==null?void 0:v.nic)||"N/A",totalChildren:s[$e.TOTAL_CHILDREN]||s.total_children||((g=s.basicInfo)==null?void 0:g.totalChildren)||0,schoolKids:s[$e.SCHOOL_GOING_CHILDREN]||s.school_kids||((L=s.basicInfo)==null?void 0:L.schoolKids)||0,others:s[$e.OTHER_DEPENDENTS]||s.others||((P=s.basicInfo)==null?void 0:P.others)||0,occupation:s[$e.OCCUPATION]||s.Occupation||((j=s.basicInfo)==null?void 0:j.occupation)||"N/A"},loans:s[$e.RF_LOANS]||s.loans||[],grants:s[$e.GRANT]||s.grants||[],paymentHistory:s.paymentHistory||[],arms:s.ArmsArray||s.arms||[],Image:s[$e.PROFILE_IMAGE_DRIVE_ID]||s.Image,imageUrl:s.imageUrl,RF_Loan:s.RF_Loan,RF_Paid_History:s.RF_Paid_History,RF_Cur_Prj:s.RF_Cur_Prj,Com_prjs:s.Com_prjs,GRANT:s.GRANT,GIFor:s.GIFor,GRANT_Cur_Prj:s.GRANT_Cur_Prj,Description:s[$e.DESCRIPTION]||s.Description,Reg_ID:s[$e.REG_ID]||s.Reg_ID,contact:s.contact,total_children:s.total_children,school_kids:s.school_kids,others:s.others,createdAt:s.createdAt,updatedAt:s.updatedAt,[$e.DESCRIPTION]:s[$e.DESCRIPTION]||s.Description||s.description};r.push(o)}),t.type?r.filter(i=>t.type==="RF"?i.RF_Loan||i.RF_Paid_History:t.type==="GRANT"?i.GRANT:t.type==="GIF"?i.GIFor:!0):r}catch(e){throw console.error("Error getting profiles:",e),e}},async getProfileByRegId(t){var e,n,r,i,s,o,a,l,h,d,p,v,g,L,P,j,x,U,J,Z;try{const fe=Al(Us,es.PROFILES,t),Ie=await Il(fe);if(Ie.exists()){const T=Ie.data();return{id:Ie.id,[$e.REG_ID]:T[$e.REG_ID]||T.Reg_ID||t,[$e.FULL_NAME]:T[$e.FULL_NAME]||T.Name||((e=T.basicInfo)==null?void 0:e.name)||"N/A",[$e.DISTRICT]:T[$e.DISTRICT]||T.District||((n=T.basicInfo)==null?void 0:n.district)||"N/A",[$e.YEAR_OF_BIRTH]:T[$e.YEAR_OF_BIRTH]||T.Age||((r=T.basicInfo)==null?void 0:r.age)||"N/A",[$e.ADDRESS]:T[$e.ADDRESS]||T.Address||((i=T.basicInfo)==null?void 0:i.address)||"N/A",[$e.NIC]:T[$e.NIC]||T.NIC||((s=T.basicInfo)==null?void 0:s.nic)||"N/A",[$e.PHONE_NUMBER]:T[$e.PHONE_NUMBER]||T.contact||((o=T.basicInfo)==null?void 0:o.phone)||"N/A",[$e.TOTAL_CHILDREN]:T[$e.TOTAL_CHILDREN]||T.total_children||((a=T.basicInfo)==null?void 0:a.totalChildren)||0,[$e.SCHOOL_GOING_CHILDREN]:T[$e.SCHOOL_GOING_CHILDREN]||T.school_kids||((l=T.basicInfo)==null?void 0:l.schoolKids)||0,[$e.OTHER_DEPENDENTS]:T[$e.OTHER_DEPENDENTS]||T.others||((h=T.basicInfo)==null?void 0:h.others)||0,[$e.OCCUPATION]:T[$e.OCCUPATION]||T.Occupation||((d=T.basicInfo)==null?void 0:d.occupation)||"N/A",[$e.DESCRIPTION]:T[$e.DESCRIPTION]||T.Description||T.description||"N/A",[$e.PROFILE_IMAGE_DRIVE_ID]:T[$e.PROFILE_IMAGE_DRIVE_ID]||T.Image,[$e.RF_BILL_DRIVE_FOLDER]:T[$e.RF_BILL_DRIVE_FOLDER]||T.rfBillDriveFolder,[$e.CREATED_AT]:T[$e.CREATED_AT]||T.createdAt,[$e.LAST_UPDATED]:T[$e.LAST_UPDATED]||T.updatedAt,[$e.RF_LOANS]:T[$e.RF_LOANS]||T.loans||[],[$e.GRANT]:T[$e.GRANT]||T.grants||[],[$e.RF_RETURN_HISTORY]:T[$e.RF_RETURN_HISTORY]||T.RF_return_history||{},[$e.GIF]:T[$e.GIF]||T.GIF||{},basicInfo:{name:T[$e.FULL_NAME]||T.Name||((p=T.basicInfo)==null?void 0:p.name)||"N/A",age:T[$e.YEAR_OF_BIRTH]||T.Age||((v=T.basicInfo)==null?void 0:v.age)||"N/A",District:T[$e.DISTRICT]||T.District||((g=T.basicInfo)==null?void 0:g.District)||"N/A",phone:T[$e.PHONE_NUMBER]||T.contact||((L=T.basicInfo)==null?void 0:L.phone)||"N/A",address:T[$e.ADDRESS]||T.Address||((P=T.basicInfo)==null?void 0:P.address)||"N/A",nic:T[$e.NIC]||T.NIC||((j=T.basicInfo)==null?void 0:j.nic)||"N/A",totalChildren:T[$e.TOTAL_CHILDREN]||T.total_children||((x=T.basicInfo)==null?void 0:x.totalChildren)||0,schoolKids:T[$e.SCHOOL_GOING_CHILDREN]||T.school_kids||((U=T.basicInfo)==null?void 0:U.schoolKids)||0,others:T[$e.OTHER_DEPENDENTS]||T.others||((J=T.basicInfo)==null?void 0:J.others)||0,occupation:T[$e.OCCUPATION]||T.Occupation||((Z=T.basicInfo)==null?void 0:Z.occupation)||"N/A"},loans:T[$e.RF_LOANS]||T.loans||[],grants:T[$e.GRANT]||T.grants||[],paymentHistory:T.paymentHistory||[],arms:T.ArmsArray||T.arms||[],Image:T[$e.PROFILE_IMAGE_DRIVE_ID]||T.Image,imageUrl:T.imageUrl,RF_Loan:T.RF_Loan,RF_Paid_History:T.RF_Paid_History,RF_Cur_Prj:T.RF_Cur_Prj,Com_prjs:T.Com_prjs,GRANT:T.GRANT,GIFor:T.GIFor,GRANT_Cur_Prj:T.GRANT_Cur_Prj,Description:T[$e.DESCRIPTION]||T.Description,Reg_ID:T[$e.REG_ID]||T.Reg_ID,contact:T.contact,total_children:T.total_children,school_kids:T.school_kids,others:T.others,createdAt:T[$e.CREATED_AT]||T.createdAt,updatedAt:T[$e.LAST_UPDATED]||T.updatedAt}}else return null}catch(fe){throw console.error("Error getting profile:",fe),fe}},async getProfileLoans(t){try{const e=[];try{const n=Ll(Lh(Us,es.PROFILES,t,$e.RF_LOANS));(await kh(n)).forEach(i=>{const s=i.data();e.push({id:i.id,...s,type:"RF",[tn.LOAN_HISTORY]:s[tn.LOAN_HISTORY]||[],[tn.PAYMENT_INTEGRITY]:s[tn.PAYMENT_INTEGRITY]||s.paymentIntegrity||!1})})}catch{}try{const n=Ll(Lh(Us,es.PROFILES,t,$e.GRANT));(await kh(n)).forEach(i=>{const s=i.data();e.push({id:i.id,...s,type:"GRANT",[Kn.LOAN_HISTORY]:s[Kn.LOAN_HISTORY]||[],[Kn.PAYMENT_INTEGRITY]:s[Kn.PAYMENT_INTEGRITY]||s.paymentIntegrity||!1})})}catch{}return e}catch(e){return console.error("[dbOperations] Error loading loans:",e),[]}},async getRFReturnHistory(t){try{const e=Al(Us,es.PROFILES,t),n=await Il(e);return n.exists()?n.data()[$e.RF_RETURN_HISTORY]||{}:{}}catch(e){return console.error("[dbOperations] Error loading RF return history:",e),{}}},parseDateFromKey(t){try{const e=t.split("_");if(e.length>=4){const r=e[0],i=e[1],s=e[2],o=e[3];if(i&&s&&o)return`${i.padStart(2,"0")}-${s.padStart(2,"0")}-${o}`}else if(e.length>=3){const r=e[0],i=e[1],s=e[2];if(r&&i&&s)return`${r.padStart(2,"0")}-${i.padStart(2,"0")}-${s}`}const n=t.match(/(\d{2})(\d{2})(\d{2})(\d{2})(\d{4})/);if(n){const r=n[3],i=n[4],s=n[5];return`${r}-${i}-${s}`}return t}catch(e){return console.error("[dbOperations] Error parsing date key:",e,t),t}},parseFullTimestamp(t){try{const e=t.split("_");if(e.length>=4){const n=e[0],r=e[1],i=e[2],s=e[3],o=e[4];if(i&&s&&o&&r&&n){const a=`${i.padStart(2,"0")}-${s.padStart(2,"0")}-${o}`,l=`${r.padStart(2,"0")}:${n.padStart(2,"0")}`;return`${a} ${l}`}}return this.parseDateFromKey(t)}catch(e){return console.error("[dbOperations] Error parsing full timestamp:",e,t),t}},async getProfileDetails(t){try{const[e,n]=await Promise.all([this.getProfileLoans(t),this.getRFReturnHistory(t)]),r=Al(Us,es.PROFILES,t),i=await Il(r),s=i.exists()?i.data():{};return{loans:e,returnHistory:n,grantReturn:s.Grant_return||!1,gifData:s[$e.GIF]||{},totalRFLoans:e.filter(a=>a.type==="RF").length,totalGrants:e.filter(a=>a.type==="GRANT").length,totalReturnAmount:Array.isArray(n)?n.reduce((a,l)=>a+(l.amount||0),0):Object.values(n).reduce((a,l)=>{const h=typeof l=="object"?l.amount:l;return a+(h||0)},0),activeRFLoans:e.filter(a=>a.type==="RF"&&(a[tn.STATUS]==="active"||a.status==="active")),completedRFLoans:e.filter(a=>a.type==="RF"&&(a[tn.STATUS]==="completed"||a.status==="completed")),activeGrants:e.filter(a=>a.type==="GRANT")}}catch(e){return console.error("[dbOperations] Error loading comprehensive details:",e),{loans:[],returnHistory:[],grantReturn:!1,gifData:{},totalRFLoans:0,totalGrants:0,totalReturnAmount:0,activeRFLoans:[],completedRFLoans:[],activeGrants:[]}}},async getLoanHistory(t,e,n){try{console.log(`[dbOperations] Fetching loan history for ${e} loan ${n} from profile ${t}`);let r;if(e==="RF")r=$e.RF_LOANS;else if(e==="GRANT")r=$e.GRANT;else return console.error("[dbOperations] Invalid loan type:",e),[];const i=Al(Us,es.PROFILES,t,r,n),s=await Il(i);if(!s.exists())return console.log(`[dbOperations] Loan document not found: ${n}`),[];const o=s.data();let a=[];return e==="RF"?a=o[tn.LOAN_HISTORY]||[]:e==="GRANT"&&(a=o[Kn.LOAN_HISTORY]||[]),console.log(`[dbOperations] Found ${a.length} history entries for loan ${n}`),Array.isArray(a)?a:[]}catch(r){return console.error("[dbOperations] Error fetching loan history:",r),[]}},async getLoanById(t,e,n){try{console.log(`[dbOperations] Fetching ${n} loan ${e} from profile ${t}`);let r;if(n==="RF")r=$e.RF_LOANS;else if(n==="GRANT")r=$e.GRANT;else return console.error("[dbOperations] Invalid loan type:",n),null;const i=Al(Us,es.PROFILES,t,r,e),s=await Il(i);if(!s.exists())return console.log(`[dbOperations] Loan document not found: ${e}`),null;const o=s.data();return o.id=e,console.log(`[dbOperations] Found loan ${e}:`,o),o}catch(r){return console.error("[dbOperations] Error fetching loan by ID:",r),null}},async getRFBillDriveFolderLink(t){try{console.log(`[dbOperations] Fetching RF bill drive folder link for profile: ${t}`);const e=Al(Us,es.PROFILES,t),n=await Il(e);if(n.exists()){const r=n.data(),i=r[$e.RF_BILL_DRIVE_FOLDER]||r.rfBillDriveFolder;return i?(console.log(`[dbOperations] Found RF bill drive folder link: ${i}`),i):(console.log(`[dbOperations] No RF bill drive folder link found for profile: ${t}`),null)}else return console.log(`[dbOperations] Profile not found: ${t}`),null}catch(e){return console.error("[dbOperations] Error fetching RF bill drive folder link:",e),null}}},SP={getDistrictFromRegID(t){const e=t.substring(0,3).toUpperCase();return bP[e]||"Unknown"},getDistrictCodeFromName(t){return Jv[t]||"UNK"},generateRegId(t,e=[]){return EP(t)}},Qv=t=>{if(!t)return null;if(!t.includes("http")&&!t.includes("drive.google.com")){const r=t.trim();if(r&&r.length>10&&/^[-\w]{25,44}$/.test(r))return r}const e=t.match(/\/file\/d\/([-\w]{25,})\/view/);if(e)return e[1];const n=t.match(/[-\w]{25,}/);return n?n[0]:null},au=(t,e="w300")=>{const n=Qv(t);if(!n)return null;let r=e;return typeof e=="string"&&!e.includes("w")&&!e.includes("h")&&(r=`w${e}-h${e}`),`https://drive.google.com/thumbnail?id=${n}&sz=${r}`},xP=t=>au(t,"w800"),PP=t=>t&&t.includes("drive.google.com"),im={async getProfiles(t={}){try{return(await ni.getAllProfiles(t)).map(n=>({...n,computed:this.computeProfileStats(n)}))}catch(e){throw console.error("Error getting profiles:",e),e}},async getProfile(t){try{const e=await ni.getProfileByRegId(t);return e?{...e,computed:this.computeProfileStats(e)}:null}catch(e){throw console.error("Error getting profile:",e),e}},computeProfileStats(t){var l,h;const e=((l=t.loans)==null?void 0:l.filter(d=>d.status==="active"))||[],n=((h=t.loans)==null?void 0:h.filter(d=>d.status==="completed"))||[],r=t.grants||[],i=t.paymentHistory||[];let s=e.reduce((d,p)=>d+(p.amount||0),0);t.RF_Loan&&!s&&(s=parseFloat(t.RF_Loan)||0);let o=r.reduce((d,p)=>d+(p.amount||0),0);t.GRANT&&!o&&(o=parseFloat(t.GRANT)||0);let a=i.reduce((d,p)=>d+(p.amount||0),0);return t.RF_Paid_History&&!a&&(a=parseFloat(t.RF_Paid_History)||0),{activeLoansCount:e.length||(t.RF_Loan?1:0),completedLoansCount:n.length,grantsCount:r.length||(t.GRANT?1:0),totalLoanAmount:s,totalGrantAmount:o,totalPaidAmount:a,remainingLoanAmount:s-a,district:SP.getDistrictFromRegID(t.id)}},getProfileTypes(t){var n,r,i;const e=[];return((n=t.loans)!=null&&n.some(s=>s.type==="RF")||t.RF_Loan)&&e.push("RF"),(((r=t.grants)==null?void 0:r.length)>0||t.GRANT)&&e.push("GRANT"),((i=t.loans)!=null&&i.some(s=>s.type==="GIF")||t.GIFor)&&e.push("GIF"),e},validateProfileData(t){var n,r,i;const e=[];return(n=t.basicInfo)!=null&&n.name||e.push("Name is required"),(r=t.basicInfo)!=null&&r.District||e.push("District is required"),(!((i=t.basicInfo)!=null&&i.age)||t.basicInfo.age<0)&&e.push("Valid age is required"),e},validateLoanData(t){const e=[];return(!t.type||!["RF","GRANT","GIF"].includes(t.type))&&e.push("Valid loan type is required"),(!t.amount||t.amount<=0)&&e.push("Valid amount is required"),t.purpose||e.push("Purpose is required"),e},validatePaymentData(t){const e=[];return t.regId||e.push("RegID is required"),(!t.type||!["RF","GRANT"].includes(t.type))&&e.push("Valid payment type is required"),t.type==="RF"&&(!t.amount||t.amount<=0)&&e.push("Valid amount is required for RF payments"),t.type==="GRANT"&&!t.details&&e.push("Details are required for GRANT payments"),e}},Yv={isGoogleDriveUrl(t){return PP(t)},async getLogoImage(){try{return"https://drive.google.com/thumbnail?id=1AEEWccjf_sMoXJgAaYIPZZm5rM-OCFe2"}catch(t){return console.error("[ImageService] Error loading logo:",t),"/placeholder-logo.png"}},async getProfileImage(t){try{if(!t)return"/placeholder-profile.jpg";if(t&&!t.includes("http")&&!t.includes("drive.google.com")){const e=t.trim();if(e&&e.length>10)return`https://drive.google.com/thumbnail?id=${e}&sz=w400-h400`}if(this.isGoogleDriveUrl(t)){if(t.includes("thumbnail")&&t.includes("sz="))return t;const e=this.extractDriveFileId(t);return e?`https://drive.google.com/thumbnail?id=${e}&sz=w400-h400`:t}return t}catch(e){return console.error("[ImageService] Error processing image URL:",e),"/placeholder-profile.jpg"}},async getProfileImageThumbnail(t){try{return t?this.isGoogleDriveUrl(t)?this.convertDriveToThumbnailUrl(t):t:"/placeholder-profile.jpg"}catch(e){return console.error("[ImageService] Error processing thumbnail:",e),"/placeholder-profile.jpg"}},convertDriveToDirectUrl(t){return xP(t)||t},convertDriveToThumbnailUrl(t){return au(t,"w200")||t},extractDriveFileId(t){return Qv(t)},async debugImageUrl(t){if(!t)return null;if(t&&!t.includes("http")&&!t.includes("drive.google.com")){const e=t.trim();if(e&&e.length>10)return`https://drive.google.com/thumbnail?id=${e}&sz=w400-h400`}if(this.isGoogleDriveUrl(t)){if(t.includes("thumbnail")&&t.includes("sz="))return t;const e=this.extractDriveFileId(t);return e?`https://drive.google.com/thumbnail?id=${e}&sz=w400-h400`:(console.error("[ImageService] Failed to extract file ID from Drive URL"),t)}else return t}},RP="modulepreload",NP=function(t){return"/"+t},X0={},Dp=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=NP(l),l in X0)return;X0[l]=!0;const h=l.endsWith(".css"),d=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const p=document.createElement("link");if(p.rel=h?"stylesheet":RP,h||(p.as="script"),p.crossOrigin="",p.href=l,a&&p.setAttribute("nonce",a),document.head.appendChild(p),h)return new Promise((v,g)=>{p.addEventListener("load",v),p.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};function Zt(t){"@babel/helpers - typeof";return Zt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zt(t)}var br=Uint8Array,ri=Uint16Array,sm=Int32Array,$f=new br([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Wf=new br([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Op=new br([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Xv=function(t,e){for(var n=new ri(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var i=new sm(n[30]),r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return{b:n,r:i}},Zv=Xv($f,2),e_=Zv.b,Fp=Zv.r;e_[28]=258,Fp[258]=28;var t_=Xv(Wf,0),LP=t_.b,Z0=t_.r,Mp=new ri(32768);for(var yn=0;yn<32768;++yn){var Do=(yn&43690)>>1|(yn&21845)<<1;Do=(Do&52428)>>2|(Do&13107)<<2,Do=(Do&61680)>>4|(Do&3855)<<4,Mp[yn]=((Do&65280)>>8|(Do&255)<<8)>>1}var hs=function(t,e,n){for(var r=t.length,i=0,s=new ri(e);i<r;++i)t[i]&&++s[t[i]-1];var o=new ri(e);for(i=1;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(n){a=new ri(1<<e);var l=15-e;for(i=0;i<r;++i)if(t[i])for(var h=i<<4|t[i],d=e-t[i],p=o[t[i]-1]++<<d,v=p|(1<<d)-1;p<=v;++p)a[Mp[p]>>l]=h}else for(a=new ri(r),i=0;i<r;++i)t[i]&&(a[i]=Mp[o[t[i]-1]++]>>15-t[i]);return a},aa=new br(288);for(var yn=0;yn<144;++yn)aa[yn]=8;for(var yn=144;yn<256;++yn)aa[yn]=9;for(var yn=256;yn<280;++yn)aa[yn]=7;for(var yn=280;yn<288;++yn)aa[yn]=8;var Eu=new br(32);for(var yn=0;yn<32;++yn)Eu[yn]=5;var CP=hs(aa,9,0),kP=hs(aa,9,1),DP=hs(Eu,5,0),OP=hs(Eu,5,1),jd=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},Ri=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},Bd=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},om=function(t){return(t+7)/8|0},n_=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new br(t.subarray(e,n))},FP=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Li=function(t,e,n){var r=new Error(e||FP[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,Li),!n)throw r;return r},MP=function(t,e,n,r){var i=t.length,s=0;if(!i||e.f&&!e.l)return n||new br(0);var o=!n,a=o||e.i!=2,l=e.i;o&&(n=new br(i*3));var h=function(De){var $=n.length;if(De>$){var W=new br(Math.max($*2,De));W.set(n),n=W}},d=e.f||0,p=e.p||0,v=e.b||0,g=e.l,L=e.d,P=e.m,j=e.n,x=i*8;do{if(!g){d=Ri(t,p,1);var U=Ri(t,p+1,3);if(p+=3,U)if(U==1)g=kP,L=OP,P=9,j=5;else if(U==2){var Ie=Ri(t,p,31)+257,T=Ri(t,p+10,15)+4,S=Ie+Ri(t,p+5,31)+1;p+=14;for(var O=new br(S),F=new br(19),w=0;w<T;++w)F[Op[w]]=Ri(t,p+w*3,7);p+=T*3;for(var E=jd(F),I=(1<<E)-1,z=hs(F,E,1),w=0;w<S;){var re=z[Ri(t,p,I)];p+=re&15;var J=re>>4;if(J<16)O[w++]=J;else{var ae=0,ge=0;for(J==16?(ge=3+Ri(t,p,3),p+=2,ae=O[w-1]):J==17?(ge=3+Ri(t,p,7),p+=3):J==18&&(ge=11+Ri(t,p,127),p+=7);ge--;)O[w++]=ae}}var ce=O.subarray(0,Ie),xe=O.subarray(Ie);P=jd(ce),j=jd(xe),g=hs(ce,P,1),L=hs(xe,j,1)}else Li(1);else{var J=om(p)+4,Z=t[J-4]|t[J-3]<<8,fe=J+Z;if(fe>i){l&&Li(0);break}a&&h(v+Z),n.set(t.subarray(J,fe),v),e.b=v+=Z,e.p=p=fe*8,e.f=d;continue}if(p>x){l&&Li(0);break}}a&&h(v+131072);for(var Pe=(1<<P)-1,Qe=(1<<j)-1,C=p;;C=p){var ae=g[Bd(t,p)&Pe],M=ae>>4;if(p+=ae&15,p>x){l&&Li(0);break}if(ae||Li(2),M<256)n[v++]=M;else if(M==256){C=p,g=null;break}else{var K=M-254;if(M>264){var w=M-257,ee=$f[w];K=Ri(t,p,(1<<ee)-1)+e_[w],p+=ee}var he=L[Bd(t,p)&Qe],Y=he>>4;he||Li(3),p+=he&15;var xe=LP[Y];if(Y>3){var ee=Wf[Y];xe+=Bd(t,p)&(1<<ee)-1,p+=ee}if(p>x){l&&Li(0);break}a&&h(v+131072);var se=v+K;if(v<xe){var ne=s-xe,Se=Math.min(xe,se);for(ne+v<0&&Li(3);v<Se;++v)n[v]=r[ne+v]}for(;v<se;++v)n[v]=n[v-xe]}}e.l=g,e.p=C,e.b=v,e.f=d,g&&(d=1,e.m=P,e.d=L,e.n=j)}while(!d);return v!=n.length&&o?n_(n,0,v):n.subarray(0,v)},js=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},Uc=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},qd=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,s=n.slice();if(!i)return{t:i_,l:0};if(i==1){var o=new br(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort(function(fe,Ie){return fe.f-Ie.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],h=0,d=1,p=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};d!=i-1;)a=n[n[h].f<n[p].f?h++:p++],l=n[h!=d&&n[h].f<n[p].f?h++:p++],n[d++]={s:-1,f:a.f+l.f,l:a,r:l};for(var v=s[0].s,r=1;r<i;++r)s[r].s>v&&(v=s[r].s);var g=new ri(v+1),L=Vp(n[d-1],g,0);if(L>e){var r=0,P=0,j=L-e,x=1<<j;for(s.sort(function(Ie,T){return g[T.s]-g[Ie.s]||Ie.f-T.f});r<i;++r){var U=s[r].s;if(g[U]>e)P+=x-(1<<L-g[U]),g[U]=e;else break}for(P>>=j;P>0;){var J=s[r].s;g[J]<e?P-=1<<e-g[J]++-1:++r}for(;r>=0&&P;--r){var Z=s[r].s;g[Z]==e&&(--g[Z],++P)}L=e}return{t:new br(g),l:L}},Vp=function(t,e,n){return t.s==-1?Math.max(Vp(t.l,e,n+1),Vp(t.r,e,n+1)):e[t.s]=n},e2=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new ri(++e),r=0,i=t[0],s=1,o=function(l){n[r++]=l},a=1;a<=e;++a)if(t[a]==i&&a!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=t[a]}return{c:n.subarray(0,r),n:e}},jc=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},r_=function(t,e,n){var r=n.length,i=om(e+2);t[i]=r&255,t[i+1]=r>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var s=0;s<r;++s)t[i+s+4]=n[s];return(i+4+r)*8},t2=function(t,e,n,r,i,s,o,a,l,h,d){js(e,d++,n),++i[256];for(var p=qd(i,15),v=p.t,g=p.l,L=qd(s,15),P=L.t,j=L.l,x=e2(v),U=x.c,J=x.n,Z=e2(P),fe=Z.c,Ie=Z.n,T=new ri(19),S=0;S<U.length;++S)++T[U[S]&31];for(var S=0;S<fe.length;++S)++T[fe[S]&31];for(var O=qd(T,7),F=O.t,w=O.l,E=19;E>4&&!F[Op[E-1]];--E);var I=h+5<<3,z=jc(i,aa)+jc(s,Eu)+o,re=jc(i,v)+jc(s,P)+o+14+3*E+jc(T,F)+2*T[16]+3*T[17]+7*T[18];if(l>=0&&I<=z&&I<=re)return r_(e,d,t.subarray(l,l+h));var ae,ge,ce,xe;if(js(e,d,1+(re<z)),d+=2,re<z){ae=hs(v,g,0),ge=v,ce=hs(P,j,0),xe=P;var Pe=hs(F,w,0);js(e,d,J-257),js(e,d+5,Ie-1),js(e,d+10,E-4),d+=14;for(var S=0;S<E;++S)js(e,d+3*S,F[Op[S]]);d+=3*E;for(var Qe=[U,fe],C=0;C<2;++C)for(var M=Qe[C],S=0;S<M.length;++S){var K=M[S]&31;js(e,d,Pe[K]),d+=F[K],K>15&&(js(e,d,M[S]>>5&127),d+=M[S]>>12)}}else ae=CP,ge=aa,ce=DP,xe=Eu;for(var S=0;S<a;++S){var ee=r[S];if(ee>255){var K=ee>>18&31;Uc(e,d,ae[K+257]),d+=ge[K+257],K>7&&(js(e,d,ee>>23&31),d+=$f[K]);var he=ee&31;Uc(e,d,ce[he]),d+=xe[he],he>3&&(Uc(e,d,ee>>5&8191),d+=Wf[he])}else Uc(e,d,ae[ee]),d+=ge[ee]}return Uc(e,d,ae[256]),d+ge[256]},VP=new sm([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),i_=new br(0),UP=function(t,e,n,r,i,s){var o=s.z||t.length,a=new br(r+o+5*(1+Math.ceil(o/7e3))+i),l=a.subarray(r,a.length-i),h=s.l,d=(s.r||0)&7;if(e){d&&(l[0]=s.r>>3);for(var p=VP[e-1],v=p>>13,g=p&8191,L=(1<<n)-1,P=s.p||new ri(32768),j=s.h||new ri(L+1),x=Math.ceil(n/3),U=2*x,J=function(ie){return(t[ie]^t[ie+1]<<x^t[ie+2]<<U)&L},Z=new sm(25e3),fe=new ri(288),Ie=new ri(32),T=0,S=0,O=s.i||0,F=0,w=s.w||0,E=0;O+2<o;++O){var I=J(O),z=O&32767,re=j[I];if(P[z]=re,j[I]=z,w<=O){var ae=o-O;if((T>7e3||F>24576)&&(ae>423||!h)){d=t2(t,l,0,Z,fe,Ie,S,F,E,O-E,d),F=T=S=0,E=O;for(var ge=0;ge<286;++ge)fe[ge]=0;for(var ge=0;ge<30;++ge)Ie[ge]=0}var ce=2,xe=0,Pe=g,Qe=z-re&32767;if(ae>2&&I==J(O-Qe))for(var C=Math.min(v,ae)-1,M=Math.min(32767,O),K=Math.min(258,ae);Qe<=M&&--Pe&&z!=re;){if(t[O+ce]==t[O+ce-Qe]){for(var ee=0;ee<K&&t[O+ee]==t[O+ee-Qe];++ee);if(ee>ce){if(ce=ee,xe=Qe,ee>C)break;for(var he=Math.min(Qe,ee-2),Y=0,ge=0;ge<he;++ge){var se=O-Qe+ge&32767,ne=P[se],Se=se-ne&32767;Se>Y&&(Y=Se,re=se)}}}z=re,re=P[z],Qe+=z-re&32767}if(xe){Z[F++]=268435456|Fp[ce]<<18|Z0[xe];var De=Fp[ce]&31,$=Z0[xe]&31;S+=$f[De]+Wf[$],++fe[257+De],++Ie[$],w=O+ce,++T}else Z[F++]=t[O],++fe[t[O]]}}for(O=Math.max(O,w);O<o;++O)Z[F++]=t[O],++fe[t[O]];d=t2(t,l,h,Z,fe,Ie,S,F,E,O-E,d),h||(s.r=d&7|l[d/8|0]<<3,d-=7,s.h=j,s.p=P,s.i=O,s.w=w)}else{for(var O=s.w||0;O<o+h;O+=65535){var W=O+65535;W>=o&&(l[d/8|0]=h,W=o),d=r_(l,d+1,t.subarray(O,W))}s.i=o}return n_(a,0,r+om(d)+i)},s_=function(){var t=1,e=0;return{p:function(n){for(var r=t,i=e,s=n.length|0,o=0;o!=s;){for(var a=Math.min(o+2655,s);o<a;++o)i+=r+=n[o];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}t=r,e=i},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},jP=function(t,e,n,r,i){if(!i&&(i={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),o=new br(s.length+t.length);o.set(s),o.set(t,s.length),t=o,i.w=s.length}return UP(t,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,r,i)},o_=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},BP=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var i=s_();i.p(e.dictionary),o_(t,2,i.d())}},qP=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&Li(6,"invalid zlib data"),(t[1]>>5&1)==1&&Li(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function Up(t,e){e||(e={});var n=s_();n.p(t);var r=jP(t,e,e.dictionary?6:2,4);return BP(r,e),o_(r,r.length-4,n.d()),r}function HP(t,e){return MP(t.subarray(qP(t),-4),{i:2},e,e)}var zP=typeof TextDecoder<"u"&&new TextDecoder,GP=0;try{zP.decode(i_,{stream:!0}),GP=1}catch{}var mt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Hd(){mt.console&&typeof mt.console.log=="function"&&mt.console.log.apply(mt.console,arguments)}var on={log:Hd,warn:function(t){mt.console&&(typeof mt.console.warn=="function"?mt.console.warn.apply(mt.console,arguments):Hd.call(null,arguments))},error:function(t){mt.console&&(typeof mt.console.error=="function"?mt.console.error.apply(mt.console,arguments):Hd(t))}};function zd(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){ka(r.response,e,n)},r.onerror=function(){on.error("could not download file")},r.send()}function n2(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function bh(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var lu,jp,ka=mt.saveAs||((typeof window>"u"?"undefined":Zt(window))!=="object"||window!==mt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=mt.URL||mt.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?n2(i.href)?zd(t,e,n):bh(i,i.target="_blank"):bh(i)):(i.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){bh(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(n2(t))zd(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){bh(r)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:Zt(s)!=="object"&&(on.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return zd(t,e,n);var i=t.type==="application/octet-stream",s=/constructor/i.test(mt.HTMLElement)||mt.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&s)&&(typeof FileReader>"u"?"undefined":Zt(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var d=a.result;d=o?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=d:location=d,r=null},a.readAsDataURL(t)}else{var l=mt.URL||mt.webkitURL,h=l.createObjectURL(t);r?r.location=h:location.href=h,r=null,setTimeout(function(){l.revokeObjectURL(h)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function a_(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,s=n[r].process,o=i.exec(t);o&&(e=s(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),l=this.g.toString(16),h=this.b.toString(16);return a.length==1&&(a="0"+a),l.length==1&&(l="0"+l),h.length==1&&(h="0"+h),"#"+a+l+h}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Gd(t,e){var n=t[0],r=t[1],i=t[2],s=t[3];n=hr(n,r,i,s,e[0],7,-680876936),s=hr(s,n,r,i,e[1],12,-389564586),i=hr(i,s,n,r,e[2],17,606105819),r=hr(r,i,s,n,e[3],22,-1044525330),n=hr(n,r,i,s,e[4],7,-176418897),s=hr(s,n,r,i,e[5],12,1200080426),i=hr(i,s,n,r,e[6],17,-1473231341),r=hr(r,i,s,n,e[7],22,-45705983),n=hr(n,r,i,s,e[8],7,1770035416),s=hr(s,n,r,i,e[9],12,-1958414417),i=hr(i,s,n,r,e[10],17,-42063),r=hr(r,i,s,n,e[11],22,-1990404162),n=hr(n,r,i,s,e[12],7,1804603682),s=hr(s,n,r,i,e[13],12,-40341101),i=hr(i,s,n,r,e[14],17,-1502002290),n=fr(n,r=hr(r,i,s,n,e[15],22,1236535329),i,s,e[1],5,-165796510),s=fr(s,n,r,i,e[6],9,-1069501632),i=fr(i,s,n,r,e[11],14,643717713),r=fr(r,i,s,n,e[0],20,-373897302),n=fr(n,r,i,s,e[5],5,-701558691),s=fr(s,n,r,i,e[10],9,38016083),i=fr(i,s,n,r,e[15],14,-660478335),r=fr(r,i,s,n,e[4],20,-405537848),n=fr(n,r,i,s,e[9],5,568446438),s=fr(s,n,r,i,e[14],9,-1019803690),i=fr(i,s,n,r,e[3],14,-187363961),r=fr(r,i,s,n,e[8],20,1163531501),n=fr(n,r,i,s,e[13],5,-1444681467),s=fr(s,n,r,i,e[2],9,-51403784),i=fr(i,s,n,r,e[7],14,1735328473),n=dr(n,r=fr(r,i,s,n,e[12],20,-1926607734),i,s,e[5],4,-378558),s=dr(s,n,r,i,e[8],11,-2022574463),i=dr(i,s,n,r,e[11],16,1839030562),r=dr(r,i,s,n,e[14],23,-35309556),n=dr(n,r,i,s,e[1],4,-1530992060),s=dr(s,n,r,i,e[4],11,1272893353),i=dr(i,s,n,r,e[7],16,-155497632),r=dr(r,i,s,n,e[10],23,-1094730640),n=dr(n,r,i,s,e[13],4,681279174),s=dr(s,n,r,i,e[0],11,-358537222),i=dr(i,s,n,r,e[3],16,-722521979),r=dr(r,i,s,n,e[6],23,76029189),n=dr(n,r,i,s,e[9],4,-640364487),s=dr(s,n,r,i,e[12],11,-421815835),i=dr(i,s,n,r,e[15],16,530742520),n=pr(n,r=dr(r,i,s,n,e[2],23,-995338651),i,s,e[0],6,-198630844),s=pr(s,n,r,i,e[7],10,1126891415),i=pr(i,s,n,r,e[14],15,-1416354905),r=pr(r,i,s,n,e[5],21,-57434055),n=pr(n,r,i,s,e[12],6,1700485571),s=pr(s,n,r,i,e[3],10,-1894986606),i=pr(i,s,n,r,e[10],15,-1051523),r=pr(r,i,s,n,e[1],21,-2054922799),n=pr(n,r,i,s,e[8],6,1873313359),s=pr(s,n,r,i,e[15],10,-30611744),i=pr(i,s,n,r,e[6],15,-1560198380),r=pr(r,i,s,n,e[13],21,1309151649),n=pr(n,r,i,s,e[4],6,-145523070),s=pr(s,n,r,i,e[11],10,-1120210379),i=pr(i,s,n,r,e[2],15,718787259),r=pr(r,i,s,n,e[9],21,-343485551),t[0]=Jo(n,t[0]),t[1]=Jo(r,t[1]),t[2]=Jo(i,t[2]),t[3]=Jo(s,t[3])}function Kf(t,e,n,r,i,s){return e=Jo(Jo(e,t),Jo(r,s)),Jo(e<<i|e>>>32-i,n)}function hr(t,e,n,r,i,s,o){return Kf(e&n|~e&r,t,e,i,s,o)}function fr(t,e,n,r,i,s,o){return Kf(e&r|n&~r,t,e,i,s,o)}function dr(t,e,n,r,i,s,o){return Kf(e^n^r,t,e,i,s,o)}function pr(t,e,n,r,i,s,o){return Kf(n^(e|~r),t,e,i,s,o)}function l_(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)Gd(r,$P(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(Gd(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*n,Gd(r,i),r}function $P(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}lu=mt.atob.bind(mt),jp=mt.btoa.bind(mt);var r2="0123456789abcdef".split("");function WP(t){for(var e="",n=0;n<4;n++)e+=r2[t>>8*n+4&15]+r2[t>>8*n&15];return e}function KP(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function Bp(t){return l_(t).map(KP).join("")}var JP=function(t){for(var e=0;e<t.length;e++)t[e]=WP(t[e]);return t.join("")}(l_("hello"))!="5d41402abc4b2a76b9719d911017c592";function Jo(t,e){if(JP){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function qp(t,e){var n,r,i,s;if(t!==n){for(var o=(i=t,s=1+(256/t.length>>0),new Array(s+1).join(i)),a=[],l=0;l<256;l++)a[l]=l;var h=0;for(l=0;l<256;l++){var d=a[l];h=(h+d+o.charCodeAt(l))%256,a[l]=a[h],a[h]=d}n=t,r=a}else a=r;var p=e.length,v=0,g=0,L="";for(l=0;l<p;l++)g=(g+(d=a[v=(v+1)%256]))%256,a[v]=a[g],a[g]=d,o=a[(a[v]+a[g])%256],L+=String.fromCharCode(e.charCodeAt(l)^o);return L}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var i2={print:4,modify:8,copy:16,"annot-forms":32};function Cl(t,e,n,r){this.v=1,this.r=2;var i=192;t.forEach(function(a){if(i2.perm!==void 0)throw new Error("Invalid permission: "+a);i+=i2[a]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),o=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^i)),this.encryptionKey=Bp(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=qp(this.encryptionKey,this.padding)}function kl(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var i=t.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=t[r]}return e}function s2(t){if(Zt(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var s=Math.random().toString(35);return e[n][s]=[r,!!i],s},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[n]){var o=e[n][s];try{o[0].apply(t,r)}catch(a){mt.console&&on.error("jsPDF PubSub Error",a.message,a)}o[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function df(t){if(!(this instanceof df))return new df(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function c_(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function Da(t,e,n,r,i){if(!(this instanceof Da))return new Da(t,e,n,r,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,c_.call(this,r,i)}function Ol(t,e,n,r,i){if(!(this instanceof Ol))return new Ol(t,e,n,r,i);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,c_.call(this,r,i)}function gt(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],o=[],a=1,l=16,h="S",d=null;Zt(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,i=t.format||i,s=t.compress||t.compressPdf||s,(d=t.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),a=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),h=t.defaultPathOperation||"S"),o=t.filters||(s===!0?["FlateEncode"]:o),r=r||"mm",n=(""+(n||"P")).toLowerCase();var p=t.putOnlyUsedFonts||!1,v={},g={internal:{},__private__:{}};g.__private__.PubSub=s2;var L="1.3",P=g.__private__.getPdfVersion=function(){return L};g.__private__.setPdfVersion=function(m){L=m};var j={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};g.__private__.getPageFormats=function(){return j};var x=g.__private__.getPageFormat=function(m){return j[m]};i=i||"a4";var U={COMPAT:"compat",ADVANCED:"advanced"},J=U.COMPAT;function Z(){this.saveGraphicsState(),H(new rt(Ye,0,0,-Ye,0,cr()*Ye).toString()+" cm"),this.setFontSize(this.getFontSize()/Ye),h="n",J=U.ADVANCED}function fe(){this.restoreGraphicsState(),h="S",J=U.COMPAT}var Ie=g.__private__.combineFontStyleAndFontWeight=function(m,R){if(m=="bold"&&R=="normal"||m=="bold"&&R==400||m=="normal"&&R=="italic"||m=="bold"&&R=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return R&&(m=R==400||R==="normal"?m==="italic"?"italic":"normal":R!=700&&R!=="bold"||m!=="normal"?(R==700?"bold":R)+""+m:"bold"),m};g.advancedAPI=function(m){var R=J===U.COMPAT;return R&&Z.call(this),typeof m!="function"||(m(this),R&&fe.call(this)),this},g.compatAPI=function(m){var R=J===U.ADVANCED;return R&&fe.call(this),typeof m!="function"||(m(this),R&&Z.call(this)),this},g.isAdvancedAPI=function(){return J===U.ADVANCED};var T,S=function(m){if(J!==U.ADVANCED)throw new Error(m+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},O=g.roundToPrecision=g.__private__.roundToPrecision=function(m,R){var X=e||R;if(isNaN(m)||isNaN(X))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return m.toFixed(X).replace(/0+$/,"")};T=g.hpf=g.__private__.hpf=typeof l=="number"?function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.hpf");return O(m,l)}:l==="smart"?function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.hpf");return O(m,m>-1&&m<1?16:5)}:function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.hpf");return O(m,16)};var F=g.f2=g.__private__.f2=function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.f2");return O(m,2)},w=g.__private__.f3=function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.f3");return O(m,3)},E=g.scale=g.__private__.scale=function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.scale");return J===U.COMPAT?m*Ye:J===U.ADVANCED?m:void 0},I=function(m){return J===U.COMPAT?cr()-m:J===U.ADVANCED?m:void 0},z=function(m){return E(I(m))};g.__private__.setPrecision=g.setPrecision=function(m){typeof parseInt(m,10)=="number"&&(e=parseInt(m,10))};var re,ae="00000000000000000000000000000000",ge=g.__private__.getFileId=function(){return ae},ce=g.__private__.setFileId=function(m){return ae=m!==void 0&&/^[a-fA-F0-9]{32}$/.test(m)?m.toUpperCase():ae.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(gn=new Cl(d.userPermissions,d.userPassword,d.ownerPassword,ae)),ae};g.setFileId=function(m){return ce(m),this},g.getFileId=function(){return ge()};var xe=g.__private__.convertDateToPDFDate=function(m){var R=m.getTimezoneOffset(),X=R<0?"+":"-",oe=Math.floor(Math.abs(R/60)),me=Math.abs(R%60),Ce=[X,K(oe),"'",K(me),"'"].join("");return["D:",m.getFullYear(),K(m.getMonth()+1),K(m.getDate()),K(m.getHours()),K(m.getMinutes()),K(m.getSeconds()),Ce].join("")},Pe=g.__private__.convertPDFDateToDate=function(m){var R=parseInt(m.substr(2,4),10),X=parseInt(m.substr(6,2),10)-1,oe=parseInt(m.substr(8,2),10),me=parseInt(m.substr(10,2),10),Ce=parseInt(m.substr(12,2),10),Be=parseInt(m.substr(14,2),10);return new Date(R,X,oe,me,Ce,Be,0)},Qe=g.__private__.setCreationDate=function(m){var R;if(m===void 0&&(m=new Date),m instanceof Date)R=xe(m);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(m))throw new Error("Invalid argument passed to jsPDF.setCreationDate");R=m}return re=R},C=g.__private__.getCreationDate=function(m){var R=re;return m==="jsDate"&&(R=Pe(re)),R};g.setCreationDate=function(m){return Qe(m),this},g.getCreationDate=function(m){return C(m)};var M,K=g.__private__.padd2=function(m){return("0"+parseInt(m)).slice(-2)},ee=g.__private__.padd2Hex=function(m){return("00"+(m=m.toString())).substr(m.length)},he=0,Y=[],se=[],ne=0,Se=[],De=[],$=!1,W=se,ie=function(){he=0,ne=0,se=[],Y=[],Se=[],vi=vn(),lr=vn()};g.__private__.setCustomOutputDestination=function(m){$=!0,W=m};var te=function(m){$||(W=m)};g.__private__.resetCustomOutputDestination=function(){$=!1,W=se};var H=g.__private__.out=function(m){return m=m.toString(),ne+=m.length+1,W.push(m),W},Te=g.__private__.write=function(m){return H(arguments.length===1?m.toString():Array.prototype.join.call(arguments," "))},Re=g.__private__.getArrayBuffer=function(m){for(var R=m.length,X=new ArrayBuffer(R),oe=new Uint8Array(X);R--;)oe[R]=m.charCodeAt(R);return X},ve=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];g.__private__.getStandardFonts=function(){return ve};var be=t.fontSize||16;g.__private__.setFontSize=g.setFontSize=function(m){return be=J===U.ADVANCED?m/Ye:m,this};var _e,ke=g.__private__.getFontSize=g.getFontSize=function(){return J===U.COMPAT?be:be*Ye},Le=t.R2L||!1;g.__private__.setR2L=g.setR2L=function(m){return Le=m,this},g.__private__.getR2L=g.getR2L=function(){return Le};var He,We=g.__private__.setZoomMode=function(m){var R=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(m))_e=m;else if(isNaN(m)){if(R.indexOf(m)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+m+'" is not recognized.');_e=m}else _e=parseInt(m,10)};g.__private__.getZoomMode=function(){return _e};var Ke,et=g.__private__.setPageMode=function(m){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(m)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+m+'" is not recognized.');He=m};g.__private__.getPageMode=function(){return He};var at=g.__private__.setLayoutMode=function(m){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(m)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+m+'" is not recognized.');Ke=m};g.__private__.getLayoutMode=function(){return Ke},g.__private__.setDisplayMode=g.setDisplayMode=function(m,R,X){return We(m),at(R),et(X),this};var it={title:"",subject:"",author:"",keywords:"",creator:""};g.__private__.getDocumentProperty=function(m){if(Object.keys(it).indexOf(m)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return it[m]},g.__private__.getDocumentProperties=function(){return it},g.__private__.setDocumentProperties=g.setProperties=g.setDocumentProperties=function(m){for(var R in it)it.hasOwnProperty(R)&&m[R]&&(it[R]=m[R]);return this},g.__private__.setDocumentProperty=function(m,R){if(Object.keys(it).indexOf(m)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return it[m]=R};var ct,Ye,Ft,Pt,Qn,_t={},Rt={},Er=[],kt={},Ui={},dn={},Yn={},Hr=null,ln=0,ht=[],Mt=new s2(g),si=t.hotfixes||[],Cn={},or={},zr=[],rt=function m(R,X,oe,me,Ce,Be){if(!(this instanceof m))return new m(R,X,oe,me,Ce,Be);isNaN(R)&&(R=1),isNaN(X)&&(X=0),isNaN(oe)&&(oe=0),isNaN(me)&&(me=1),isNaN(Ce)&&(Ce=0),isNaN(Be)&&(Be=0),this._matrix=[R,X,oe,me,Ce,Be]};Object.defineProperty(rt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(m){this._matrix[0]=m}}),Object.defineProperty(rt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(m){this._matrix[1]=m}}),Object.defineProperty(rt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(m){this._matrix[2]=m}}),Object.defineProperty(rt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(m){this._matrix[3]=m}}),Object.defineProperty(rt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(m){this._matrix[4]=m}}),Object.defineProperty(rt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(m){this._matrix[5]=m}}),Object.defineProperty(rt.prototype,"a",{get:function(){return this._matrix[0]},set:function(m){this._matrix[0]=m}}),Object.defineProperty(rt.prototype,"b",{get:function(){return this._matrix[1]},set:function(m){this._matrix[1]=m}}),Object.defineProperty(rt.prototype,"c",{get:function(){return this._matrix[2]},set:function(m){this._matrix[2]=m}}),Object.defineProperty(rt.prototype,"d",{get:function(){return this._matrix[3]},set:function(m){this._matrix[3]=m}}),Object.defineProperty(rt.prototype,"e",{get:function(){return this._matrix[4]},set:function(m){this._matrix[4]=m}}),Object.defineProperty(rt.prototype,"f",{get:function(){return this._matrix[5]},set:function(m){this._matrix[5]=m}}),Object.defineProperty(rt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(rt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(rt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(rt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),rt.prototype.join=function(m){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(T).join(m)},rt.prototype.multiply=function(m){var R=m.sx*this.sx+m.shy*this.shx,X=m.sx*this.shy+m.shy*this.sy,oe=m.shx*this.sx+m.sy*this.shx,me=m.shx*this.shy+m.sy*this.sy,Ce=m.tx*this.sx+m.ty*this.shx+this.tx,Be=m.tx*this.shy+m.ty*this.sy+this.ty;return new rt(R,X,oe,me,Ce,Be)},rt.prototype.decompose=function(){var m=this.sx,R=this.shy,X=this.shx,oe=this.sy,me=this.tx,Ce=this.ty,Be=Math.sqrt(m*m+R*R),Ze=(m/=Be)*X+(R/=Be)*oe;X-=m*Ze,oe-=R*Ze;var u=Math.sqrt(X*X+oe*oe);return Ze/=u,m*(oe/=u)<R*(X/=u)&&(m=-m,R=-R,Ze=-Ze,Be=-Be),{scale:new rt(Be,0,0,u,0,0),translate:new rt(1,0,0,1,me,Ce),rotate:new rt(m,R,-R,m,0,0),skew:new rt(1,0,Ze,1,0,0)}},rt.prototype.toString=function(m){return this.join(" ")},rt.prototype.inversed=function(){var m=this.sx,R=this.shy,X=this.shx,oe=this.sy,me=this.tx,Ce=this.ty,Be=1/(m*oe-R*X),Ze=oe*Be,u=-R*Be,_=-X*Be,A=m*Be;return new rt(Ze,u,_,A,-Ze*me-_*Ce,-u*me-A*Ce)},rt.prototype.applyToPoint=function(m){var R=m.x*this.sx+m.y*this.shx+this.tx,X=m.x*this.shy+m.y*this.sy+this.ty;return new Ps(R,X)},rt.prototype.applyToRectangle=function(m){var R=this.applyToPoint(m),X=this.applyToPoint(new Ps(m.x+m.w,m.y+m.h));return new yo(R.x,R.y,X.x-R.x,X.y-R.y)},rt.prototype.clone=function(){var m=this.sx,R=this.shy,X=this.shx,oe=this.sy,me=this.tx,Ce=this.ty;return new rt(m,R,X,oe,me,Ce)},g.Matrix=rt;var Dr=g.matrixMult=function(m,R){return R.multiply(m)},ar=new rt(1,0,0,1,0,0);g.unitMatrix=g.identityMatrix=ar;var kn=function(m,R){if(!Ui[m]){var X=(R instanceof Da?"Sh":"P")+(Object.keys(kt).length+1).toString(10);R.id=X,Ui[m]=X,kt[X]=R,Mt.publish("addPattern",R)}};g.ShadingPattern=Da,g.TilingPattern=Ol,g.addShadingPattern=function(m,R){return S("addShadingPattern()"),kn(m,R),this},g.beginTilingPattern=function(m){S("beginTilingPattern()"),vo(m.boundingBox[0],m.boundingBox[1],m.boundingBox[2]-m.boundingBox[0],m.boundingBox[3]-m.boundingBox[1],m.matrix)},g.endTilingPattern=function(m,R){S("endTilingPattern()"),R.stream=De[M].join(`
`),kn(m,R),Mt.publish("endTilingPattern",R),zr.pop().restore()};var In=g.__private__.newObject=function(){var m=vn();return Dn(m,!0),m},vn=g.__private__.newObjectDeferred=function(){return he++,Y[he]=function(){return ne},he},Dn=function(m,R){return R=typeof R=="boolean"&&R,Y[m]=ne,R&&H(m+" 0 obj"),m},no=g.__private__.newAdditionalObject=function(){var m={objId:vn(),content:""};return Se.push(m),m},vi=vn(),lr=vn(),Or=g.__private__.decodeColorString=function(m){var R=m.split(" ");if(R.length!==2||R[1]!=="g"&&R[1]!=="G")R.length===5&&(R[4]==="k"||R[4]==="K")&&(R=[(1-R[0])*(1-R[3]),(1-R[1])*(1-R[3]),(1-R[2])*(1-R[3]),"r"]);else{var X=parseFloat(R[0]);R=[X,X,X,"r"]}for(var oe="#",me=0;me<3;me++)oe+=("0"+Math.floor(255*parseFloat(R[me])).toString(16)).slice(-2);return oe},Tr=g.__private__.encodeColorString=function(m){var R;typeof m=="string"&&(m={ch1:m});var X=m.ch1,oe=m.ch2,me=m.ch3,Ce=m.ch4,Be=m.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof X=="string"&&X.charAt(0)!=="#"){var Ze=new a_(X);if(Ze.ok)X=Ze.toHex();else if(!/^\d*\.?\d*$/.test(X))throw new Error('Invalid color "'+X+'" passed to jsPDF.encodeColorString.')}if(typeof X=="string"&&/^#[0-9A-Fa-f]{3}$/.test(X)&&(X="#"+X[1]+X[1]+X[2]+X[2]+X[3]+X[3]),typeof X=="string"&&/^#[0-9A-Fa-f]{6}$/.test(X)){var u=parseInt(X.substr(1),16);X=u>>16&255,oe=u>>8&255,me=255&u}if(oe===void 0||Ce===void 0&&X===oe&&oe===me)if(typeof X=="string")R=X+" "+Be[0];else switch(m.precision){case 2:R=F(X/255)+" "+Be[0];break;case 3:default:R=w(X/255)+" "+Be[0]}else if(Ce===void 0||Zt(Ce)==="object"){if(Ce&&!isNaN(Ce.a)&&Ce.a===0)return R=["1.","1.","1.",Be[1]].join(" ");if(typeof X=="string")R=[X,oe,me,Be[1]].join(" ");else switch(m.precision){case 2:R=[F(X/255),F(oe/255),F(me/255),Be[1]].join(" ");break;default:case 3:R=[w(X/255),w(oe/255),w(me/255),Be[1]].join(" ")}}else if(typeof X=="string")R=[X,oe,me,Ce,Be[2]].join(" ");else switch(m.precision){case 2:R=[F(X),F(oe),F(me),F(Ce),Be[2]].join(" ");break;case 3:default:R=[w(X),w(oe),w(me),w(Ce),Be[2]].join(" ")}return R},Sr=g.__private__.getFilters=function(){return o},En=g.__private__.putStream=function(m){var R=(m=m||{}).data||"",X=m.filters||Sr(),oe=m.alreadyAppliedFilters||[],me=m.addLength1||!1,Ce=R.length,Be=m.objectId,Ze=function(bt){return bt};if(d!==null&&Be===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(Ze=gn.encryptor(Be,0));var u={};X===!0&&(X=["FlateEncode"]);var _=m.additionalKeyValues||[],A=(u=gt.API.processDataByFilters!==void 0?gt.API.processDataByFilters(R,X):{data:R,reverseChain:[]}).reverseChain+(Array.isArray(oe)?oe.join(" "):oe.toString());if(u.data.length!==0&&(_.push({key:"Length",value:u.data.length}),me===!0&&_.push({key:"Length1",value:Ce})),A.length!=0)if(A.split("/").length-1==1)_.push({key:"Filter",value:A});else{_.push({key:"Filter",value:"["+A+"]"});for(var B=0;B<_.length;B+=1)if(_[B].key==="DecodeParms"){for(var pe=[],Ee=0;Ee<u.reverseChain.split("/").length-1;Ee+=1)pe.push("null");pe.push(_[B].value),_[B].value="["+pe.join(" ")+"]"}}H("<<");for(var ze=0;ze<_.length;ze++)H("/"+_[ze].key+" "+_[ze].value);H(">>"),u.data.length!==0&&(H("stream"),H(Ze(u.data)),H("endstream"))},Gr=g.__private__.putPage=function(m){var R=m.number,X=m.data,oe=m.objId,me=m.contentsObjId;Dn(oe,!0),H("<</Type /Page"),H("/Parent "+m.rootDictionaryObjId+" 0 R"),H("/Resources "+m.resourceDictionaryObjId+" 0 R"),H("/MediaBox ["+parseFloat(T(m.mediaBox.bottomLeftX))+" "+parseFloat(T(m.mediaBox.bottomLeftY))+" "+T(m.mediaBox.topRightX)+" "+T(m.mediaBox.topRightY)+"]"),m.cropBox!==null&&H("/CropBox ["+T(m.cropBox.bottomLeftX)+" "+T(m.cropBox.bottomLeftY)+" "+T(m.cropBox.topRightX)+" "+T(m.cropBox.topRightY)+"]"),m.bleedBox!==null&&H("/BleedBox ["+T(m.bleedBox.bottomLeftX)+" "+T(m.bleedBox.bottomLeftY)+" "+T(m.bleedBox.topRightX)+" "+T(m.bleedBox.topRightY)+"]"),m.trimBox!==null&&H("/TrimBox ["+T(m.trimBox.bottomLeftX)+" "+T(m.trimBox.bottomLeftY)+" "+T(m.trimBox.topRightX)+" "+T(m.trimBox.topRightY)+"]"),m.artBox!==null&&H("/ArtBox ["+T(m.artBox.bottomLeftX)+" "+T(m.artBox.bottomLeftY)+" "+T(m.artBox.topRightX)+" "+T(m.artBox.topRightY)+"]"),typeof m.userUnit=="number"&&m.userUnit!==1&&H("/UserUnit "+m.userUnit),Mt.publish("putPage",{objId:oe,pageContext:ht[R],pageNumber:R,page:X}),H("/Contents "+me+" 0 R"),H(">>"),H("endobj");var Ce=X.join(`
`);return J===U.ADVANCED&&(Ce+=`
Q`),Dn(me,!0),En({data:Ce,filters:Sr(),objectId:me}),H("endobj"),oe},ji=g.__private__.putPages=function(){var m,R,X=[];for(m=1;m<=ln;m++)ht[m].objId=vn(),ht[m].contentsObjId=vn();for(m=1;m<=ln;m++)X.push(Gr({number:m,data:De[m],objId:ht[m].objId,contentsObjId:ht[m].contentsObjId,mediaBox:ht[m].mediaBox,cropBox:ht[m].cropBox,bleedBox:ht[m].bleedBox,trimBox:ht[m].trimBox,artBox:ht[m].artBox,userUnit:ht[m].userUnit,rootDictionaryObjId:vi,resourceDictionaryObjId:lr}));Dn(vi,!0),H("<</Type /Pages");var oe="/Kids [";for(R=0;R<ln;R++)oe+=X[R]+" 0 R ";H(oe+"]"),H("/Count "+ln),H(">>"),H("endobj"),Mt.publish("postPutPages")},Bi=function(m){Mt.publish("putFont",{font:m,out:H,newObject:In,putStream:En}),m.isAlreadyPutted!==!0&&(m.objectNumber=In(),H("<<"),H("/Type /Font"),H("/BaseFont /"+kl(m.postScriptName)),H("/Subtype /Type1"),typeof m.encoding=="string"&&H("/Encoding /"+m.encoding),H("/FirstChar 32"),H("/LastChar 255"),H(">>"),H("endobj"))},qi=function(){for(var m in _t)_t.hasOwnProperty(m)&&(p===!1||p===!0&&v.hasOwnProperty(m))&&Bi(_t[m])},_s=function(m){m.objectNumber=In();var R=[];R.push({key:"Type",value:"/XObject"}),R.push({key:"Subtype",value:"/Form"}),R.push({key:"BBox",value:"["+[T(m.x),T(m.y),T(m.x+m.width),T(m.y+m.height)].join(" ")+"]"}),R.push({key:"Matrix",value:"["+m.matrix.toString()+"]"});var X=m.pages[1].join(`
`);En({data:X,additionalKeyValues:R,objectId:m.objectNumber}),H("endobj")},bs=function(){for(var m in Cn)Cn.hasOwnProperty(m)&&_s(Cn[m])},Ya=function(m,R){var X,oe=[],me=1/(R-1);for(X=0;X<1;X+=me)oe.push(X);if(oe.push(1),m[0].offset!=0){var Ce={offset:0,color:m[0].color};m.unshift(Ce)}if(m[m.length-1].offset!=1){var Be={offset:1,color:m[m.length-1].color};m.push(Be)}for(var Ze="",u=0,_=0;_<oe.length;_++){for(X=oe[_];X>m[u+1].offset;)u++;var A=m[u].offset,B=(X-A)/(m[u+1].offset-A),pe=m[u].color,Ee=m[u+1].color;Ze+=ee(Math.round((1-B)*pe[0]+B*Ee[0]).toString(16))+ee(Math.round((1-B)*pe[1]+B*Ee[1]).toString(16))+ee(Math.round((1-B)*pe[2]+B*Ee[2]).toString(16))}return Ze.trim()},ro=function(m,R){R||(R=21);var X=In(),oe=Ya(m.colors,R),me=[];me.push({key:"FunctionType",value:"0"}),me.push({key:"Domain",value:"[0.0 1.0]"}),me.push({key:"Size",value:"["+R+"]"}),me.push({key:"BitsPerSample",value:"8"}),me.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),me.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),En({data:oe,additionalKeyValues:me,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:X}),H("endobj"),m.objectNumber=In(),H("<< /ShadingType "+m.type),H("/ColorSpace /DeviceRGB");var Ce="/Coords ["+T(parseFloat(m.coords[0]))+" "+T(parseFloat(m.coords[1]))+" ";m.type===2?Ce+=T(parseFloat(m.coords[2]))+" "+T(parseFloat(m.coords[3])):Ce+=T(parseFloat(m.coords[2]))+" "+T(parseFloat(m.coords[3]))+" "+T(parseFloat(m.coords[4]))+" "+T(parseFloat(m.coords[5])),H(Ce+="]"),m.matrix&&H("/Matrix ["+m.matrix.toString()+"]"),H("/Function "+X+" 0 R"),H("/Extend [true true]"),H(">>"),H("endobj")},Xa=function(m,R){var X=vn(),oe=In();R.push({resourcesOid:X,objectOid:oe}),m.objectNumber=oe;var me=[];me.push({key:"Type",value:"/Pattern"}),me.push({key:"PatternType",value:"1"}),me.push({key:"PaintType",value:"1"}),me.push({key:"TilingType",value:"1"}),me.push({key:"BBox",value:"["+m.boundingBox.map(T).join(" ")+"]"}),me.push({key:"XStep",value:T(m.xStep)}),me.push({key:"YStep",value:T(m.yStep)}),me.push({key:"Resources",value:X+" 0 R"}),m.matrix&&me.push({key:"Matrix",value:"["+m.matrix.toString()+"]"}),En({data:m.stream,additionalKeyValues:me,objectId:m.objectNumber}),H("endobj")},Hi=function(m){var R;for(R in kt)kt.hasOwnProperty(R)&&(kt[R]instanceof Da?ro(kt[R]):kt[R]instanceof Ol&&Xa(kt[R],m))},zi=function(m){for(var R in m.objectNumber=In(),H("<<"),m)switch(R){case"opacity":H("/ca "+F(m[R]));break;case"stroke-opacity":H("/CA "+F(m[R]))}H(">>"),H("endobj")},_i=function(){var m;for(m in dn)dn.hasOwnProperty(m)&&zi(dn[m])},ws=function(){for(var m in H("/XObject <<"),Cn)Cn.hasOwnProperty(m)&&Cn[m].objectNumber>=0&&H("/"+m+" "+Cn[m].objectNumber+" 0 R");Mt.publish("putXobjectDict"),H(">>")},mc=function(){gn.oid=In(),H("<<"),H("/Filter /Standard"),H("/V "+gn.v),H("/R "+gn.r),H("/U <"+gn.toHexString(gn.U)+">"),H("/O <"+gn.toHexString(gn.O)+">"),H("/P "+gn.P),H(">>"),H("endobj")},ca=function(){for(var m in H("/Font <<"),_t)_t.hasOwnProperty(m)&&(p===!1||p===!0&&v.hasOwnProperty(m))&&H("/"+m+" "+_t[m].objectNumber+" 0 R");H(">>")},Za=function(){if(Object.keys(kt).length>0){for(var m in H("/Shading <<"),kt)kt.hasOwnProperty(m)&&kt[m]instanceof Da&&kt[m].objectNumber>=0&&H("/"+m+" "+kt[m].objectNumber+" 0 R");Mt.publish("putShadingPatternDict"),H(">>")}},As=function(m){if(Object.keys(kt).length>0){for(var R in H("/Pattern <<"),kt)kt.hasOwnProperty(R)&&kt[R]instanceof g.TilingPattern&&kt[R].objectNumber>=0&&kt[R].objectNumber<m&&H("/"+R+" "+kt[R].objectNumber+" 0 R");Mt.publish("putTilingPatternDict"),H(">>")}},ua=function(){if(Object.keys(dn).length>0){var m;for(m in H("/ExtGState <<"),dn)dn.hasOwnProperty(m)&&dn[m].objectNumber>=0&&H("/"+m+" "+dn[m].objectNumber+" 0 R");Mt.publish("putGStateDict"),H(">>")}},pn=function(m){Dn(m.resourcesOid,!0),H("<<"),H("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),ca(),Za(),As(m.objectOid),ua(),ws(),H(">>"),H("endobj")},ha=function(){var m=[];qi(),_i(),bs(),Hi(m),Mt.publish("putResources"),m.forEach(pn),pn({resourcesOid:lr,objectOid:Number.MAX_SAFE_INTEGER}),Mt.publish("postPutResources")},fa=function(){Mt.publish("putAdditionalObjects");for(var m=0;m<Se.length;m++){var R=Se[m];Dn(R.objId,!0),H(R.content),H("endobj")}Mt.publish("postPutAdditionalObjects")},el=function(m){Rt[m.fontName]=Rt[m.fontName]||{},Rt[m.fontName][m.fontStyle]=m.id},da=function(m,R,X,oe,me){var Ce={id:"F"+(Object.keys(_t).length+1).toString(10),postScriptName:m,fontName:R,fontStyle:X,encoding:oe,isStandardFont:me||!1,metadata:{}};return Mt.publish("addFont",{font:Ce,instance:this}),_t[Ce.id]=Ce,el(Ce),Ce.id},tl=function(m){for(var R=0,X=ve.length;R<X;R++){var oe=da.call(this,m[R][0],m[R][1],m[R][2],ve[R][3],!0);p===!1&&(v[oe]=!0);var me=m[R][0].split("-");el({id:oe,fontName:me[0],fontStyle:me[1]||""})}Mt.publish("addFonts",{fonts:_t,dictionary:Rt})},Fr=function(m){return m.foo=function(){try{return m.apply(this,arguments)}catch(oe){var R=oe.stack||"";~R.indexOf(" at ")&&(R=R.split(" at ")[1]);var X="Error in function "+R.split(`
`)[0].split("<")[0]+": "+oe.message;if(!mt.console)throw new Error(X);mt.console.error(X,oe),mt.alert&&alert(X)}},m.foo.bar=m,m.foo},io=function(m,R){var X,oe,me,Ce,Be,Ze,u,_,A;if(me=(R=R||{}).sourceEncoding||"Unicode",Be=R.outputEncoding,(R.autoencode||Be)&&_t[ct].metadata&&_t[ct].metadata[me]&&_t[ct].metadata[me].encoding&&(Ce=_t[ct].metadata[me].encoding,!Be&&_t[ct].encoding&&(Be=_t[ct].encoding),!Be&&Ce.codePages&&(Be=Ce.codePages[0]),typeof Be=="string"&&(Be=Ce[Be]),Be)){for(u=!1,Ze=[],X=0,oe=m.length;X<oe;X++)(_=Be[m.charCodeAt(X)])?Ze.push(String.fromCharCode(_)):Ze.push(m[X]),Ze[X].charCodeAt(0)>>8&&(u=!0);m=Ze.join("")}for(X=m.length;u===void 0&&X!==0;)m.charCodeAt(X-1)>>8&&(u=!0),X--;if(!u)return m;for(Ze=R.noBOM?[]:[254,255],X=0,oe=m.length;X<oe;X++){if((A=(_=m.charCodeAt(X))>>8)>>8)throw new Error("Character at position "+X+" of string '"+m+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Ze.push(A),Ze.push(_-(A<<8))}return String.fromCharCode.apply(void 0,Ze)},_n=g.__private__.pdfEscape=g.pdfEscape=function(m,R){return io(m,R).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},xr=g.__private__.beginPage=function(m){De[++ln]=[],ht[ln]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(m[0]),topRightY:Number(m[1])}},pa(ln),te(De[M])},Is=function(m,R){var X,oe,me;switch(n=R||n,typeof m=="string"&&(X=x(m.toLowerCase()),Array.isArray(X)&&(oe=X[0],me=X[1])),Array.isArray(m)&&(oe=m[0]*Ye,me=m[1]*Ye),isNaN(oe)&&(oe=i[0],me=i[1]),(oe>14400||me>14400)&&(on.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),oe=Math.min(14400,oe),me=Math.min(14400,me)),i=[oe,me],n.substr(0,1)){case"l":me>oe&&(i=[me,oe]);break;case"p":oe>me&&(i=[me,oe])}xr(i),_a(va),H(Xn),Aa!==0&&H(Aa+" J"),mo!==0&&H(mo+" j"),Mt.publish("addPage",{pageNumber:ln})},so=function(m){m>0&&m<=ln&&(De.splice(m,1),ht.splice(m,1),ln--,M>ln&&(M=ln),this.setPage(M))},pa=function(m){m>0&&m<=ln&&(M=m)},Qt=g.__private__.getNumberOfPages=g.getNumberOfPages=function(){return De.length-1},Es=function(m,R,X){var oe,me=void 0;return X=X||{},m=m!==void 0?m:_t[ct].fontName,R=R!==void 0?R:_t[ct].fontStyle,oe=m.toLowerCase(),Rt[oe]!==void 0&&Rt[oe][R]!==void 0?me=Rt[oe][R]:Rt[m]!==void 0&&Rt[m][R]!==void 0?me=Rt[m][R]:X.disableWarning===!1&&on.warn("Unable to look up font label for font '"+m+"', '"+R+"'. Refer to getFontList() for available fonts."),me||X.noFallback||(me=Rt.times[R])==null&&(me=Rt.times.normal),me},Ts=g.__private__.putInfo=function(){var m=In(),R=function(oe){return oe};for(var X in d!==null&&(R=gn.encryptor(m,0)),H("<<"),H("/Producer ("+_n(R("jsPDF "+gt.version))+")"),it)it.hasOwnProperty(X)&&it[X]&&H("/"+X.substr(0,1).toUpperCase()+X.substr(1)+" ("+_n(R(it[X]))+")");H("/CreationDate ("+_n(R(re))+")"),H(">>"),H("endobj")},bi=g.__private__.putCatalog=function(m){var R=(m=m||{}).rootDictionaryObjId||vi;switch(In(),H("<<"),H("/Type /Catalog"),H("/Pages "+R+" 0 R"),_e||(_e="fullwidth"),_e){case"fullwidth":H("/OpenAction [3 0 R /FitH null]");break;case"fullheight":H("/OpenAction [3 0 R /FitV null]");break;case"fullpage":H("/OpenAction [3 0 R /Fit]");break;case"original":H("/OpenAction [3 0 R /XYZ null null 1]");break;default:var X=""+_e;X.substr(X.length-1)==="%"&&(_e=parseInt(_e)/100),typeof _e=="number"&&H("/OpenAction [3 0 R /XYZ null null "+F(_e)+"]")}switch(Ke||(Ke="continuous"),Ke){case"continuous":H("/PageLayout /OneColumn");break;case"single":H("/PageLayout /SinglePage");break;case"two":case"twoleft":H("/PageLayout /TwoColumnLeft");break;case"tworight":H("/PageLayout /TwoColumnRight")}He&&H("/PageMode /"+He),Mt.publish("putCatalog"),H(">>"),H("endobj")},yc=g.__private__.putTrailer=function(){H("trailer"),H("<<"),H("/Size "+(he+1)),H("/Root "+he+" 0 R"),H("/Info "+(he-1)+" 0 R"),d!==null&&H("/Encrypt "+gn.oid+" 0 R"),H("/ID [ <"+ae+"> <"+ae+"> ]"),H(">>")},nl=g.__private__.putHeader=function(){H("%PDF-"+L),H("%")},vc=g.__private__.putXRef=function(){var m="0000000000";H("xref"),H("0 "+(he+1)),H("0000000000 65535 f ");for(var R=1;R<=he;R++)typeof Y[R]=="function"?H((m+Y[R]()).slice(-10)+" 00000 n "):Y[R]!==void 0?H((m+Y[R]).slice(-10)+" 00000 n "):H("0000000000 00000 n ")},wi=g.__private__.buildDocument=function(){ie(),te(se),Mt.publish("buildDocument"),nl(),ji(),fa(),ha(),d!==null&&mc(),Ts(),bi();var m=ne;return vc(),yc(),H("startxref"),H(""+m),H("%%EOF"),te(De[M]),se.join(`
`)},oo=g.__private__.getBlob=function(m){return new Blob([Re(m)],{type:"application/pdf"})},ao=g.output=g.__private__.output=Fr(function(m,R){switch(typeof(R=R||{})=="string"?R={filename:R}:R.filename=R.filename||"generated.pdf",m){case void 0:return wi();case"save":g.save(R.filename);break;case"arraybuffer":return Re(wi());case"blob":return oo(wi());case"bloburi":case"bloburl":if(mt.URL!==void 0&&typeof mt.URL.createObjectURL=="function")return mt.URL&&mt.URL.createObjectURL(oo(wi()))||void 0;on.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var X="",oe=wi();try{X=jp(oe)}catch{X=jp(unescape(encodeURIComponent(oe)))}return"data:application/pdf;filename="+R.filename+";base64,"+X;case"pdfobjectnewwindow":if(Object.prototype.toString.call(mt)==="[object Window]"){var me="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ce=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';R.pdfObjectUrl&&(me=R.pdfObjectUrl,Ce="");var Be='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+me+'"'+Ce+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(R)+");<\/script></body></html>",Ze=mt.open();return Ze!==null&&Ze.document.write(Be),Ze}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(mt)==="[object Window]"){var u='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(R.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+R.filename+'" width="500px" height="400px" /></body></html>',_=mt.open();if(_!==null){_.document.write(u);var A=this;_.document.documentElement.querySelector("#pdfViewer").onload=function(){_.document.title=R.filename,_.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(A.output("bloburl"))}}return _}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(mt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var B='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",R)+'"></iframe></body></html>',pe=mt.open();if(pe!==null&&(pe.document.write(B),pe.document.title=R.filename),pe||typeof safari>"u")return pe;break;case"datauri":case"dataurl":return mt.document.location.href=this.output("datauristring",R);default:return null}}),Gi=function(m){return Array.isArray(si)===!0&&si.indexOf(m)>-1};switch(r){case"pt":Ye=1;break;case"mm":Ye=72/25.4;break;case"cm":Ye=72/2.54;break;case"in":Ye=72;break;case"px":Ye=Gi("px_scaling")==1?.75:96/72;break;case"pc":case"em":Ye=12;break;case"ex":Ye=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);Ye=r}var gn=null;Qe(),ce();var rl=function(m){return d!==null?gn.encryptor(m,0):function(R){return R}},ga=g.__private__.getPageInfo=g.getPageInfo=function(m){if(isNaN(m)||m%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:ht[m].objId,pageNumber:m,pageContext:ht[m]}},yt=g.__private__.getPageInfoByObjId=function(m){if(isNaN(m)||m%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var R in ht)if(ht[R].objId===m)break;return ga(R)},$i=g.__private__.getCurrentPageInfo=g.getCurrentPageInfo=function(){return{objId:ht[M].objId,pageNumber:M,pageContext:ht[M]}};g.addPage=function(){return Is.apply(this,arguments),this},g.setPage=function(){return pa.apply(this,arguments),te.call(this,De[M]),this},g.insertPage=function(m){return this.addPage(),this.movePage(M,m),this},g.movePage=function(m,R){var X,oe;if(m>R){X=De[m],oe=ht[m];for(var me=m;me>R;me--)De[me]=De[me-1],ht[me]=ht[me-1];De[R]=X,ht[R]=oe,this.setPage(R)}else if(m<R){X=De[m],oe=ht[m];for(var Ce=m;Ce<R;Ce++)De[Ce]=De[Ce+1],ht[Ce]=ht[Ce+1];De[R]=X,ht[R]=oe,this.setPage(R)}return this},g.deletePage=function(){return so.apply(this,arguments),this},g.__private__.text=g.text=function(m,R,X,oe,me){var Ce,Be,Ze,u,_,A,B,pe,Ee,ze=(oe=oe||{}).scope||this;if(typeof m=="number"&&typeof R=="number"&&(typeof X=="string"||Array.isArray(X))){var bt=X;X=R,R=m,m=bt}if(arguments[3]instanceof rt?(S("The transform parameter of text() with a Matrix value"),Ee=me):(Ze=arguments[4],u=arguments[5],Zt(B=arguments[3])==="object"&&B!==null||(typeof Ze=="string"&&(u=Ze,Ze=null),typeof B=="string"&&(u=B,B=null),typeof B=="number"&&(Ze=B,B=null),oe={flags:B,angle:Ze,align:u})),isNaN(R)||isNaN(X)||m==null)throw new Error("Invalid arguments passed to jsPDF.text");if(m.length===0)return ze;var Nt="",wt=!1,$t=typeof oe.lineHeightFactor=="number"?oe.lineHeightFactor:Gt,rn=ze.internal.scaleFactor;function Si(cn){return cn=cn.split("	").join(Array(oe.TabLen||9).join(" ")),_n(cn,B)}function Zn(cn){for(var un,Sn=cn.concat(),Bn=[],ks=Sn.length;ks--;)typeof(un=Sn.shift())=="string"?Bn.push(un):Array.isArray(cn)&&(un.length===1||un[1]===void 0&&un[2]===void 0)?Bn.push(un[0]):Bn.push([un[0],un[1],un[2]]);return Bn}function Qi(cn,un){var Sn;if(typeof cn=="string")Sn=un(cn)[0];else if(Array.isArray(cn)){for(var Bn,ks,xc=cn.concat(),ml=[],zu=xc.length;zu--;)typeof(Bn=xc.shift())=="string"?ml.push(un(Bn)[0]):Array.isArray(Bn)&&typeof Bn[0]=="string"&&(ks=un(Bn[0],Bn[1],Bn[2]),ml.push([ks[0],ks[1],ks[2]]));Sn=ml}return Sn}var Yi=!1,bc=!0;if(typeof m=="string")Yi=!0;else if(Array.isArray(m)){var wc=m.concat();Be=[];for(var ll,er=wc.length;er--;)(typeof(ll=wc.shift())!="string"||Array.isArray(ll)&&typeof ll[0]!="string")&&(bc=!1);Yi=bc}if(Yi===!1)throw new Error('Type of text must be string or Array. "'+m+'" is not recognized.');typeof m=="string"&&(m=m.match(/[\r?\n]/)?m.split(/\r\n|\r|\n/g):[m]);var cl=be/ze.internal.scaleFactor,ul=cl*($t-1);switch(oe.baseline){case"bottom":X-=ul;break;case"top":X+=cl-ul;break;case"hanging":X+=cl-2*ul;break;case"middle":X+=cl/2-ul}if((A=oe.maxWidth||0)>0&&(typeof m=="string"?m=ze.splitTextToSize(m,A):Object.prototype.toString.call(m)==="[object Array]"&&(m=m.reduce(function(cn,un){return cn.concat(ze.splitTextToSize(un,A))},[]))),Ce={text:m,x:R,y:X,options:oe,mutex:{pdfEscape:_n,activeFontKey:ct,fonts:_t,activeFontSize:be}},Mt.publish("preProcessText",Ce),m=Ce.text,Ze=(oe=Ce.options).angle,!(Ee instanceof rt)&&Ze&&typeof Ze=="number"){Ze*=Math.PI/180,oe.rotationDirection===0&&(Ze=-Ze),J===U.ADVANCED&&(Ze=-Ze);var hl=Math.cos(Ze),Ac=Math.sin(Ze);Ee=new rt(hl,Ac,-Ac,hl,0,0)}else Ze&&Ze instanceof rt&&(Ee=Ze);J!==U.ADVANCED||Ee||(Ee=ar),(_=oe.charSpace||xs)!==void 0&&(Nt+=T(E(_))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(pe=oe.horizontalScale)!==void 0&&(Nt+=T(100*pe)+` Tz
`),oe.lang;var Mr=-1,Jf=oe.renderingMode!==void 0?oe.renderingMode:oe.stroke,Ic=ze.internal.getCurrentPageInfo().pageContext;switch(Jf){case 0:case!1:case"fill":Mr=0;break;case 1:case!0:case"stroke":Mr=1;break;case 2:case"fillThenStroke":Mr=2;break;case 3:case"invisible":Mr=3;break;case 4:case"fillAndAddForClipping":Mr=4;break;case 5:case"strokeAndAddPathForClipping":Mr=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Mr=6;break;case 7:case"addToPathForClipping":Mr=7}var ju=Ic.usedRenderingMode!==void 0?Ic.usedRenderingMode:-1;Mr!==-1?Nt+=Mr+` Tr
`:ju!==-1&&(Nt+=`0 Tr
`),Mr!==-1&&(Ic.usedRenderingMode=Mr),u=oe.align||"left";var ai,fl=be*$t,Bu=ze.internal.pageSize.getWidth(),qu=_t[ct];_=oe.charSpace||xs,A=oe.maxWidth||0,B=Object.assign({autoencode:!0,noBOM:!0},oe.flags);var wo=[],Ia=function(cn){return ze.getStringUnitWidth(cn,{font:qu,charSpace:_,fontSize:be,doKerning:!1})*be/rn};if(Object.prototype.toString.call(m)==="[object Array]"){var Vr;Be=Zn(m),u!=="left"&&(ai=Be.map(Ia));var Pr,Ao=0;if(u==="right"){R-=ai[0],m=[],er=Be.length;for(var Ns=0;Ns<er;Ns++)Ns===0?(Pr=Kr(R),Vr=jn(X)):(Pr=E(Ao-ai[Ns]),Vr=-fl),m.push([Be[Ns],Pr,Vr]),Ao=ai[Ns]}else if(u==="center"){R-=ai[0]/2,m=[],er=Be.length;for(var Ls=0;Ls<er;Ls++)Ls===0?(Pr=Kr(R),Vr=jn(X)):(Pr=E((Ao-ai[Ls])/2),Vr=-fl),m.push([Be[Ls],Pr,Vr]),Ao=ai[Ls]}else if(u==="left"){m=[],er=Be.length;for(var dl=0;dl<er;dl++)m.push(Be[dl])}else if(u==="justify"&&qu.encoding==="Identity-H"){m=[],er=Be.length,A=A!==0?A:Bu;for(var Cs=0,Tn=0;Tn<er;Tn++)if(Vr=Tn===0?jn(X):-fl,Pr=Tn===0?Kr(R):Cs,Tn<er-1){var Ec=E((A-ai[Tn])/(Be[Tn].split(" ").length-1)),Rr=Be[Tn].split(" ");m.push([Rr[0]+" ",Pr,Vr]),Cs=0;for(var li=1;li<Rr.length;li++){var pl=(Ia(Rr[li-1]+" "+Rr[li])-Ia(Rr[li]))*rn+Ec;li==Rr.length-1?m.push([Rr[li],pl,0]):m.push([Rr[li]+" ",pl,0]),Cs-=pl}}else m.push([Be[Tn],Pr,Vr]);m.push(["",Cs,0])}else{if(u!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(m=[],er=Be.length,A=A!==0?A:Bu,Tn=0;Tn<er;Tn++)Vr=Tn===0?jn(X):-fl,Pr=Tn===0?Kr(R):0,Tn<er-1?wo.push(T(E((A-ai[Tn])/(Be[Tn].split(" ").length-1)))):wo.push(0),m.push([Be[Tn],Pr,Vr])}}var Hu=typeof oe.R2L=="boolean"?oe.R2L:Le;Hu===!0&&(m=Qi(m,function(cn,un,Sn){return[cn.split("").reverse().join(""),un,Sn]})),Ce={text:m,x:R,y:X,options:oe,mutex:{pdfEscape:_n,activeFontKey:ct,fonts:_t,activeFontSize:be}},Mt.publish("postProcessText",Ce),m=Ce.text,wt=Ce.mutex.isHex||!1;var Tc=_t[ct].encoding;Tc!=="WinAnsiEncoding"&&Tc!=="StandardEncoding"||(m=Qi(m,function(cn,un,Sn){return[Si(cn),un,Sn]})),Be=Zn(m),m=[];for(var Ea,Ta,Io,Sa=0,gl=1,xa=Array.isArray(Be[0])?gl:Sa,Eo="",Sc=function(cn,un,Sn){var Bn="";return Sn instanceof rt?(Sn=typeof oe.angle=="number"?Dr(Sn,new rt(1,0,0,1,cn,un)):Dr(new rt(1,0,0,1,cn,un),Sn),J===U.ADVANCED&&(Sn=Dr(new rt(1,0,0,-1,0,0),Sn)),Bn=Sn.join(" ")+` Tm
`):Bn=T(cn)+" "+T(un)+` Td
`,Bn},ci=0;ci<Be.length;ci++){switch(Eo="",xa){case gl:Io=(wt?"<":"(")+Be[ci][0]+(wt?">":")"),Ea=parseFloat(Be[ci][1]),Ta=parseFloat(Be[ci][2]);break;case Sa:Io=(wt?"<":"(")+Be[ci]+(wt?">":")"),Ea=Kr(R),Ta=jn(X)}wo!==void 0&&wo[ci]!==void 0&&(Eo=wo[ci]+` Tw
`),ci===0?m.push(Eo+Sc(Ea,Ta,Ee)+Io):xa===Sa?m.push(Eo+Io):xa===gl&&m.push(Eo+Sc(Ea,Ta,Ee)+Io)}m=xa===Sa?m.join(` Tj
T* `):m.join(` Tj
`),m+=` Tj
`;var ui=`BT
/`;return ui+=ct+" "+be+` Tf
`,ui+=T(be*$t)+` TL
`,ui+=Ei+`
`,ui+=Nt,ui+=m,H(ui+="ET"),v[ct]=!0,ze};var _c=g.__private__.clip=g.clip=function(m){return H(m==="evenodd"?"W*":"W"),this};g.clipEvenOdd=function(){return _c("evenodd")},g.__private__.discardPath=g.discardPath=function(){return H("n"),this};var oi=g.__private__.isValidStyle=function(m){var R=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(m)!==-1&&(R=!0),R};g.__private__.setDefaultPathOperation=g.setDefaultPathOperation=function(m){return oi(m)&&(h=m),this};var il=g.__private__.getStyle=g.getStyle=function(m){var R=h;switch(m){case"D":case"S":R="S";break;case"F":R="f";break;case"FD":case"DF":R="B";break;case"f":case"f*":case"B":case"B*":R=m}return R},$r=g.close=function(){return H("h"),this};g.stroke=function(){return H("S"),this},g.fill=function(m){return lo("f",m),this},g.fillEvenOdd=function(m){return lo("f*",m),this},g.fillStroke=function(m){return lo("B",m),this},g.fillStrokeEvenOdd=function(m){return lo("B*",m),this};var lo=function(m,R){Zt(R)==="object"?uo(R,m):H(m)},ma=function(m){m===null||J===U.ADVANCED&&m===void 0||(m=il(m),H(m))};function co(m,R,X,oe,me){var Ce=new Ol(R||this.boundingBox,X||this.xStep,oe||this.yStep,this.gState,me||this.matrix);Ce.stream=this.stream;var Be=m+"$$"+this.cloneIndex+++"$$";return kn(Be,Ce),Ce}var uo=function(m,R){var X=Ui[m.key],oe=kt[X];if(oe instanceof Da)H("q"),H(sl(R)),oe.gState&&g.setGState(oe.gState),H(m.matrix.toString()+" cm"),H("/"+X+" sh"),H("Q");else if(oe instanceof Ol){var me=new rt(1,0,0,-1,0,cr());m.matrix&&(me=me.multiply(m.matrix||ar),X=co.call(oe,m.key,m.boundingBox,m.xStep,m.yStep,me).id),H("q"),H("/Pattern cs"),H("/"+X+" scn"),oe.gState&&g.setGState(oe.gState),H(R),H("Q")}},sl=function(m){switch(m){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Ai=g.moveTo=function(m,R){return H(T(E(m))+" "+T(z(R))+" m"),this},Wr=g.lineTo=function(m,R){return H(T(E(m))+" "+T(z(R))+" l"),this},Ii=g.curveTo=function(m,R,X,oe,me,Ce){return H([T(E(m)),T(z(R)),T(E(X)),T(z(oe)),T(E(me)),T(z(Ce)),"c"].join(" ")),this};g.__private__.line=g.line=function(m,R,X,oe,me){if(isNaN(m)||isNaN(R)||isNaN(X)||isNaN(oe)||!oi(me))throw new Error("Invalid arguments passed to jsPDF.line");return J===U.COMPAT?this.lines([[X-m,oe-R]],m,R,[1,1],me||"S"):this.lines([[X-m,oe-R]],m,R,[1,1]).stroke()},g.__private__.lines=g.lines=function(m,R,X,oe,me,Ce){var Be,Ze,u,_,A,B,pe,Ee,ze,bt,Nt,wt;if(typeof m=="number"&&(wt=X,X=R,R=m,m=wt),oe=oe||[1,1],Ce=Ce||!1,isNaN(R)||isNaN(X)||!Array.isArray(m)||!Array.isArray(oe)||!oi(me)||typeof Ce!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Ai(R,X),Be=oe[0],Ze=oe[1],_=m.length,bt=R,Nt=X,u=0;u<_;u++)(A=m[u]).length===2?(bt=A[0]*Be+bt,Nt=A[1]*Ze+Nt,Wr(bt,Nt)):(B=A[0]*Be+bt,pe=A[1]*Ze+Nt,Ee=A[2]*Be+bt,ze=A[3]*Ze+Nt,bt=A[4]*Be+bt,Nt=A[5]*Ze+Nt,Ii(B,pe,Ee,ze,bt,Nt));return Ce&&$r(),ma(me),this},g.path=function(m){for(var R=0;R<m.length;R++){var X=m[R],oe=X.c;switch(X.op){case"m":Ai(oe[0],oe[1]);break;case"l":Wr(oe[0],oe[1]);break;case"c":Ii.apply(this,oe);break;case"h":$r()}}return this},g.__private__.rect=g.rect=function(m,R,X,oe,me){if(isNaN(m)||isNaN(R)||isNaN(X)||isNaN(oe)||!oi(me))throw new Error("Invalid arguments passed to jsPDF.rect");return J===U.COMPAT&&(oe=-oe),H([T(E(m)),T(z(R)),T(E(X)),T(E(oe)),"re"].join(" ")),ma(me),this},g.__private__.triangle=g.triangle=function(m,R,X,oe,me,Ce,Be){if(isNaN(m)||isNaN(R)||isNaN(X)||isNaN(oe)||isNaN(me)||isNaN(Ce)||!oi(Be))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[X-m,oe-R],[me-X,Ce-oe],[m-me,R-Ce]],m,R,[1,1],Be,!0),this},g.__private__.roundedRect=g.roundedRect=function(m,R,X,oe,me,Ce,Be){if(isNaN(m)||isNaN(R)||isNaN(X)||isNaN(oe)||isNaN(me)||isNaN(Ce)||!oi(Be))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Ze=4/3*(Math.SQRT2-1);return me=Math.min(me,.5*X),Ce=Math.min(Ce,.5*oe),this.lines([[X-2*me,0],[me*Ze,0,me,Ce-Ce*Ze,me,Ce],[0,oe-2*Ce],[0,Ce*Ze,-me*Ze,Ce,-me,Ce],[2*me-X,0],[-me*Ze,0,-me,-Ce*Ze,-me,-Ce],[0,2*Ce-oe],[0,-Ce*Ze,me*Ze,-Ce,me,-Ce]],m+me,R,[1,1],Be,!0),this},g.__private__.ellipse=g.ellipse=function(m,R,X,oe,me){if(isNaN(m)||isNaN(R)||isNaN(X)||isNaN(oe)||!oi(me))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ce=4/3*(Math.SQRT2-1)*X,Be=4/3*(Math.SQRT2-1)*oe;return Ai(m+X,R),Ii(m+X,R-Be,m+Ce,R-oe,m,R-oe),Ii(m-Ce,R-oe,m-X,R-Be,m-X,R),Ii(m-X,R+Be,m-Ce,R+oe,m,R+oe),Ii(m+Ce,R+oe,m+X,R+Be,m+X,R),ma(me),this},g.__private__.circle=g.circle=function(m,R,X,oe){if(isNaN(m)||isNaN(R)||isNaN(X)||!oi(oe))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(m,R,X,X,oe)},g.setFont=function(m,R,X){return X&&(R=Ie(R,X)),ct=Es(m,R,{disableWarning:!1}),this};var ya=g.__private__.getFont=g.getFont=function(){return _t[Es.apply(g,arguments)]};g.__private__.getFontList=g.getFontList=function(){var m,R,X={};for(m in Rt)if(Rt.hasOwnProperty(m))for(R in X[m]=[],Rt[m])Rt[m].hasOwnProperty(R)&&X[m].push(R);return X},g.addFont=function(m,R,X,oe,me){var Ce=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ce.indexOf(arguments[3])!==-1?me=arguments[3]:arguments[3]&&Ce.indexOf(arguments[3])==-1&&(X=Ie(X,oe)),me=me||"Identity-H",da.call(this,m,R,X,me)};var Gt,va=t.lineWidth||.200025,ho=g.__private__.getLineWidth=g.getLineWidth=function(){return va},_a=g.__private__.setLineWidth=g.setLineWidth=function(m){return va=m,H(T(E(m))+" w"),this};g.__private__.setLineDash=gt.API.setLineDash=gt.API.setLineDashPattern=function(m,R){if(m=m||[],R=R||0,isNaN(R)||!Array.isArray(m))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return m=m.map(function(X){return T(E(X))}).join(" "),R=T(E(R)),H("["+m+"] "+R+" d"),this};var ba=g.__private__.getLineHeight=g.getLineHeight=function(){return be*Gt};g.__private__.getLineHeight=g.getLineHeight=function(){return be*Gt};var wa=g.__private__.setLineHeightFactor=g.setLineHeightFactor=function(m){return typeof(m=m||1.15)=="number"&&(Gt=m),this},Ss=g.__private__.getLineHeightFactor=g.getLineHeightFactor=function(){return Gt};wa(t.lineHeight);var Kr=g.__private__.getHorizontalCoordinate=function(m){return E(m)},jn=g.__private__.getVerticalCoordinate=function(m){return J===U.ADVANCED?m:ht[M].mediaBox.topRightY-ht[M].mediaBox.bottomLeftY-E(m)},ol=g.__private__.getHorizontalCoordinateString=g.getHorizontalCoordinateString=function(m){return T(Kr(m))},Wi=g.__private__.getVerticalCoordinateString=g.getVerticalCoordinateString=function(m){return T(jn(m))},Xn=t.strokeColor||"0 G";g.__private__.getStrokeColor=g.getDrawColor=function(){return Or(Xn)},g.__private__.setStrokeColor=g.setDrawColor=function(m,R,X,oe){return Xn=Tr({ch1:m,ch2:R,ch3:X,ch4:oe,pdfColorType:"draw",precision:2}),H(Xn),this};var fo=t.fillColor||"0 g";g.__private__.getFillColor=g.getFillColor=function(){return Or(fo)},g.__private__.setFillColor=g.setFillColor=function(m,R,X,oe){return fo=Tr({ch1:m,ch2:R,ch3:X,ch4:oe,pdfColorType:"fill",precision:2}),H(fo),this};var Ei=t.textColor||"0 g",po=g.__private__.getTextColor=g.getTextColor=function(){return Or(Ei)};g.__private__.setTextColor=g.setTextColor=function(m,R,X,oe){return Ei=Tr({ch1:m,ch2:R,ch3:X,ch4:oe,pdfColorType:"text",precision:3}),this};var xs=t.charSpace,go=g.__private__.getCharSpace=g.getCharSpace=function(){return parseFloat(xs||0)};g.__private__.setCharSpace=g.setCharSpace=function(m){if(isNaN(m))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return xs=m,this};var Aa=0;g.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},g.__private__.setLineCap=g.setLineCap=function(m){var R=g.CapJoinStyles[m];if(R===void 0)throw new Error("Line cap style of '"+m+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Aa=R,H(R+" J"),this};var mo=0;g.__private__.setLineJoin=g.setLineJoin=function(m){var R=g.CapJoinStyles[m];if(R===void 0)throw new Error("Line join style of '"+m+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return mo=R,H(R+" j"),this},g.__private__.setLineMiterLimit=g.__private__.setMiterLimit=g.setLineMiterLimit=g.setMiterLimit=function(m){if(m=m||0,isNaN(m))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return H(T(E(m))+" M"),this},g.GState=df,g.setGState=function(m){(m=typeof m=="string"?dn[Yn[m]]:Ki(null,m)).equals(Hr)||(H("/"+m.id+" gs"),Hr=m)};var Ki=function(m,R){if(!m||!Yn[m]){var X=!1;for(var oe in dn)if(dn.hasOwnProperty(oe)&&dn[oe].equals(R)){X=!0;break}if(X)R=dn[oe];else{var me="GS"+(Object.keys(dn).length+1).toString(10);dn[me]=R,R.id=me}return m&&(Yn[m]=R.id),Mt.publish("addGState",R),R}};g.addGState=function(m,R){return Ki(m,R),this},g.saveGraphicsState=function(){return H("q"),Er.push({key:ct,size:be,color:Ei}),this},g.restoreGraphicsState=function(){H("Q");var m=Er.pop();return ct=m.key,be=m.size,Ei=m.color,Hr=null,this},g.setCurrentTransformationMatrix=function(m){return H(m.toString()+" cm"),this},g.comment=function(m){return H("#"+m),this};var Ps=function(m,R){var X=m||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return X},set:function(Ce){isNaN(Ce)||(X=parseFloat(Ce))}});var oe=R||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return oe},set:function(Ce){isNaN(Ce)||(oe=parseFloat(Ce))}});var me="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return me},set:function(Ce){me=Ce.toString()}}),this},yo=function(m,R,X,oe){Ps.call(this,m,R),this.type="rect";var me=X||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return me},set:function(Be){isNaN(Be)||(me=parseFloat(Be))}});var Ce=oe||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ce},set:function(Be){isNaN(Be)||(Ce=parseFloat(Be))}}),this},Rs=function(){this.page=ln,this.currentPage=M,this.pages=De.slice(0),this.pagesContext=ht.slice(0),this.x=Ft,this.y=Pt,this.matrix=Qn,this.width=Ji(M),this.height=cr(M),this.outputDestination=W,this.id="",this.objectNumber=-1};Rs.prototype.restore=function(){ln=this.page,M=this.currentPage,ht=this.pagesContext,De=this.pages,Ft=this.x,Pt=this.y,Qn=this.matrix,_o(M,this.width),bo(M,this.height),W=this.outputDestination};var vo=function(m,R,X,oe,me){zr.push(new Rs),ln=M=0,De=[],Ft=m,Pt=R,Qn=me,xr([X,oe])},al=function(m){if(or[m])zr.pop().restore();else{var R=new Rs,X="Xo"+(Object.keys(Cn).length+1).toString(10);R.id=X,or[m]=X,Cn[X]=R,Mt.publish("addFormObject",R),zr.pop().restore()}};for(var Ti in g.beginFormObject=function(m,R,X,oe,me){return vo(m,R,X,oe,me),this},g.endFormObject=function(m){return al(m),this},g.doFormObject=function(m,R){var X=Cn[or[m]];return H("q"),H(R.toString()+" cm"),H("/"+X.id+" Do"),H("Q"),this},g.getFormObject=function(m){var R=Cn[or[m]];return{x:R.x,y:R.y,width:R.width,height:R.height,matrix:R.matrix}},g.save=function(m,R){return m=m||"generated.pdf",(R=R||{}).returnPromise=R.returnPromise||!1,R.returnPromise===!1?(ka(oo(wi()),m),typeof ka.unload=="function"&&mt.setTimeout&&setTimeout(ka.unload,911),this):new Promise(function(X,oe){try{var me=ka(oo(wi()),m);typeof ka.unload=="function"&&mt.setTimeout&&setTimeout(ka.unload,911),X(me)}catch(Ce){oe(Ce.message)}})},gt.API)gt.API.hasOwnProperty(Ti)&&(Ti==="events"&&gt.API.events.length?function(m,R){var X,oe,me;for(me=R.length-1;me!==-1;me--)X=R[me][0],oe=R[me][1],m.subscribe.apply(m,[X].concat(typeof oe=="function"?[oe]:oe))}(Mt,gt.API.events):g[Ti]=gt.API[Ti]);var Ji=g.getPageWidth=function(m){return(ht[m=m||M].mediaBox.topRightX-ht[m].mediaBox.bottomLeftX)/Ye},_o=g.setPageWidth=function(m,R){ht[m].mediaBox.topRightX=R*Ye+ht[m].mediaBox.bottomLeftX},cr=g.getPageHeight=function(m){return(ht[m=m||M].mediaBox.topRightY-ht[m].mediaBox.bottomLeftY)/Ye},bo=g.setPageHeight=function(m,R){ht[m].mediaBox.topRightY=R*Ye+ht[m].mediaBox.bottomLeftY};return g.internal={pdfEscape:_n,getStyle:il,getFont:ya,getFontSize:ke,getCharSpace:go,getTextColor:po,getLineHeight:ba,getLineHeightFactor:Ss,getLineWidth:ho,write:Te,getHorizontalCoordinate:Kr,getVerticalCoordinate:jn,getCoordinateString:ol,getVerticalCoordinateString:Wi,collections:{},newObject:In,newAdditionalObject:no,newObjectDeferred:vn,newObjectDeferredBegin:Dn,getFilters:Sr,putStream:En,events:Mt,scaleFactor:Ye,pageSize:{getWidth:function(){return Ji(M)},setWidth:function(m){_o(M,m)},getHeight:function(){return cr(M)},setHeight:function(m){bo(M,m)}},encryptionOptions:d,encryption:gn,getEncryptor:rl,output:ao,getNumberOfPages:Qt,pages:De,out:H,f2:F,f3:w,getPageInfo:ga,getPageInfoByObjId:yt,getCurrentPageInfo:$i,getPDFVersion:P,Point:Ps,Rectangle:yo,Matrix:rt,hasHotfix:Gi},Object.defineProperty(g.internal.pageSize,"width",{get:function(){return Ji(M)},set:function(m){_o(M,m)},enumerable:!0,configurable:!0}),Object.defineProperty(g.internal.pageSize,"height",{get:function(){return cr(M)},set:function(m){bo(M,m)},enumerable:!0,configurable:!0}),tl.call(g,ve),ct="F1",Is(i,n),Mt.publish("initialized"),g}Cl.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},Cl.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Cl.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},Cl.prototype.processOwnerPassword=function(t,e){return qp(Bp(e).substr(0,5),t)},Cl.prototype.encryptor=function(t,e){var n=Bp(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return qp(n,r)}},df.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||Zt(t)!==Zt(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},gt.API={events:[]},gt.version="2.5.2";var wn=gt.API,am=1,Qa=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},El=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},At=function(t){return t.toFixed(2)},Oo=function(t){return t.toFixed(5)};wn.__acroform__={};var qr=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},o2=function(t){return t*am},ts=function(t){var e=new h_,n=st.internal.getHeight(t)||0,r=st.internal.getWidth(t)||0;return e.BBox=[0,0,Number(At(r)),Number(At(n))],e},QP=wn.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},YP=wn.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},XP=wn.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},Pn=wn.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return XP(t,e-1)},Rn=wn.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return QP(t,e-1)},Nn=wn.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return YP(t,e-1)},ZP=wn.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=t[0],s=t[1],o=t[2],a=t[3],l={};return l.lowerLeft_X=n(i)||0,l.lowerLeft_Y=r(s+a)||0,l.upperRight_X=n(i+o)||0,l.upperRight_Y=r(s)||0,[Number(At(l.lowerLeft_X)),Number(At(l.lowerLeft_Y)),Number(At(l.upperRight_X)),Number(At(l.upperRight_Y))]},eR=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=Hp(t,n),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+At(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=ts(t);return s.scope=t.scope,s.stream=e.join(`
`),s}},Hp=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map(function(w){return w.split(`
`)}):i.map(function(w){return[w]});var s=n,o=st.internal.getHeight(t)||0;o=o<0?-o:o;var a=st.internal.getWidth(t)||0;a=a<0?-a:a;var l=function(w,E,I){if(w+1<i.length){var z=E+" "+i[w+1][0];return wh(z,t,I).width<=a-4}return!1};s++;e:for(;s>0;){e="",s--;var h,d,p=wh("3",t,s).height,v=t.multiline?o-s:(o-p)/2,g=v+=2,L=0,P=0,j=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+wh(e,t,s=12).width+", FieldWidth:"+a+`
`;break}for(var x="",U=0,J=0;J<i.length;J++)if(i.hasOwnProperty(J)){var Z=!1;if(i[J].length!==1&&j!==i[J].length-1){if((p+2)*(U+2)+2>o)continue e;x+=i[J][j],Z=!0,P=J,J--}else{x=(x+=i[J][j]+" ").substr(x.length-1)==" "?x.substr(0,x.length-1):x;var fe=parseInt(J),Ie=l(fe,x,s),T=J>=i.length-1;if(Ie&&!T){x+=" ",j=0;continue}if(Ie||T){if(T)P=fe;else if(t.multiline&&(p+2)*(U+2)+2>o)continue e}else{if(!t.multiline||(p+2)*(U+2)+2>o)continue e;P=fe}}for(var S="",O=L;O<=P;O++){var F=i[O];if(t.multiline){if(O===P){S+=F[j]+" ",j=(j+1)%F.length;continue}if(O===L){S+=F[F.length-1]+" ";continue}}S+=F[0]+" "}switch(S=S.substr(S.length-1)==" "?S.substr(0,S.length-1):S,d=wh(S,t,s).width,t.textAlign){case"right":h=a-d-2;break;case"center":h=(a-d)/2;break;case"left":default:h=2}e+=At(h)+" "+At(g)+` Td
`,e+="("+Qa(S)+`) Tj
`,e+=-At(h)+` 0 Td
`,g=-(s+2),d=0,L=Z?P:P+1,U++,x=""}break}return r.text=e,r.fontSize=s,r},wh=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},tR={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},nR=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},rR=function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var r=n,i=t[n];e.internal.newObjectDeferredBegin(i.objId,!0),Zt(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete t[r]}},iR=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Mi.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(tR)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");am=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new f_,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&nR(s,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,i){var s=!r;for(var o in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var a=r[o],l=[],h=a.Rect;if(a.Rect&&(a.Rect=ZP(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=st.createDefaultAppearanceStream(a),Zt(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(l=a.getKeyValueListForStream()),a.Rect=h,a.hasAppearanceStream&&!a.appearanceStreamContent){var d=eR(a);l.push({key:"AP",value:"<</N "+d+">>"}),i.internal.acroformPlugin.xForms.push(d)}if(a.appearanceStreamContent){var p="";for(var v in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(v)){var g=a.appearanceStreamContent[v];if(p+="/"+v+" ",p+="<<",Object.keys(g).length>=1||Array.isArray(g)){for(var o in g)if(g.hasOwnProperty(o)){var L=g[o];typeof L=="function"&&(L=L.call(i,a)),p+="/"+o+" "+L+" ",i.internal.acroformPlugin.xForms.indexOf(L)>=0||i.internal.acroformPlugin.xForms.push(L)}}else typeof(L=g)=="function"&&(L=L.call(i,a)),p+="/"+o+" "+L,i.internal.acroformPlugin.xForms.indexOf(L)>=0||i.internal.acroformPlugin.xForms.push(L);p+=">>"}l.push({key:"AP",value:`<<
`+p+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:a.objId}),i.internal.out("endobj")}s&&rR(i.internal.acroformPlugin.xForms,i)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},u_=wn.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(o){return o};if(Array.isArray(t)){for(var i="[",s=0;s<t.length;s++)switch(s!==0&&(i+=" "),Zt(t[s])){case"boolean":case"number":case"object":i+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),i+="("+Qa(r(t[s].toString()))+")"):i+=t[s].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},$d=function(t,e,n){var r=function(i){return i};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),t="("+Qa(r(t))+")"},ss=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ss.prototype.toString=function(){return this.objId+" 0 R"},ss.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},ss.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],i=this[r];i&&(Array.isArray(i)?t.push({key:r,value:u_(i,this.objId,this.scope)}):i instanceof ss?(i.scope=this.scope,t.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:r,value:i}))}return t};var h_=function(){ss.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};qr(h_,ss);var f_=function(){ss.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+Qa(n(t))+")"}},set:function(n){t=n}})};qr(f_,ss);var Mi=function t(){ss.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute F supplied.');e=x}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Pn(e,3)},set:function(x){x?this.F=Rn(e,3):this.F=Nn(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute Ff supplied.');n=x}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(x){r=x!==void 0?x:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(x){r[0]=x}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(x){r[1]=x}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(x){r[2]=x}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(x){r[3]=x}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(x){switch(x){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=x;break;default:throw new Error('Invalid value "'+x+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof pf)return;s="FieldObject"+t.FieldNum++}var x=function(U){return U};return this.scope&&(x=this.scope.internal.getEncryptor(this.objId)),"("+Qa(x(s))+")"},set:function(x){s=x.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(x){s=x}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(x){o=x}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(x){a=x}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(x){l=x}});var h=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return h===void 0?50/am:h},set:function(x){h=x}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(x){d=x}});var p="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!p||this instanceof pf||this instanceof Ba))return $d(p,this.objId,this.scope)},set:function(x){x=x.toString(),p=x}});var v=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(v)return this instanceof Wn?v:$d(v,this.objId,this.scope)},set:function(x){x=x.toString(),v=this instanceof Wn?x:x.substr(0,1)==="("?El(x.substr(1,x.length-2)):El(x)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Wn?El(v.substr(1,v.length-1)):v},set:function(x){x=x.toString(),v=this instanceof Wn?"/"+x:x}});var g=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(g)return g},set:function(x){this.V=x}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof Wn?g:$d(g,this.objId,this.scope)},set:function(x){x=x.toString(),g=this instanceof Wn?x:x.substr(0,1)==="("?El(x.substr(1,x.length-2)):El(x)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Wn?El(g.substr(1,g.length-1)):g},set:function(x){x=x.toString(),g=this instanceof Wn?"/"+x:x}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var L,P=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return P},set:function(x){x=!!x,P=x}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(L)return L},set:function(x){L=x}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,1)},set:function(x){x?this.Ff=Rn(this.Ff,1):this.Ff=Nn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,2)},set:function(x){x?this.Ff=Rn(this.Ff,2):this.Ff=Nn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,3)},set:function(x){x?this.Ff=Rn(this.Ff,3):this.Ff=Nn(this.Ff,3)}});var j=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(j!==null)return j},set:function(x){if([0,1,2].indexOf(x)===-1)throw new Error('Invalid value "'+x+'" for attribute Q supplied.');j=x}}),Object.defineProperty(this,"textAlign",{get:function(){var x;switch(j){case 0:default:x="left";break;case 1:x="center";break;case 2:x="right"}return x},configurable:!0,enumerable:!0,set:function(x){switch(x){case"right":case 2:j=2;break;case"center":case 1:j=1;break;case"left":case 0:default:j=0}}})};qr(Mi,ss);var $l=function(){Mi.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return u_(e,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=function(s,o,a){a||(a=1);for(var l,h=[];l=o.exec(s);)h.push(l[a]);return h}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,18)},set:function(n){n?this.Ff=Rn(this.Ff,18):this.Ff=Nn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=Rn(this.Ff,19):this.Ff=Nn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,20)},set:function(n){n?(this.Ff=Rn(this.Ff,20),e.sort()):this.Ff=Nn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,22)},set:function(n){n?this.Ff=Rn(this.Ff,22):this.Ff=Nn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,23)},set:function(n){n?this.Ff=Rn(this.Ff,23):this.Ff=Nn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,27)},set:function(n){n?this.Ff=Rn(this.Ff,27):this.Ff=Nn(this.Ff,27)}}),this.hasAppearanceStream=!1};qr($l,Mi);var Wl=function(){$l.call(this),this.fontName="helvetica",this.combo=!1};qr(Wl,$l);var Kl=function(){Wl.call(this),this.combo=!0};qr(Kl,Wl);var Vh=function(){Kl.call(this),this.edit=!0};qr(Vh,Kl);var Wn=function(){Mi.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,15)},set:function(n){n?this.Ff=Rn(this.Ff,15):this.Ff=Nn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,16)},set:function(n){n?this.Ff=Rn(this.Ff,16):this.Ff=Nn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,17)},set:function(n){n?this.Ff=Rn(this.Ff,17):this.Ff=Nn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,26)},set:function(n){n?this.Ff=Rn(this.Ff,26):this.Ff=Nn(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(s){return s};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+Qa(n(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){Zt(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};qr(Wn,Mi);var Uh=function(){Wn.call(this),this.pushButton=!0};qr(Uh,Wn);var Jl=function(){Wn.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};qr(Jl,Wn);var pf=function(){var t,e;Mi.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),r)o.push("/"+s+" ("+Qa(i(r[s]))+")");return o.push(">>"),o.join(`
`)},set:function(i){Zt(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=st.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};qr(pf,Mi),Jl.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},Jl.prototype.createOption=function(t){var e=new pf;return e.Parent=this,e.optionName=t,this.Kids.push(e),sR.call(this.scope,e),e};var jh=function(){Wn.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=st.CheckBox.createAppearanceStream()};qr(jh,Wn);var Ba=function(){Mi.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,13)},set:function(e){e?this.Ff=Rn(this.Ff,13):this.Ff=Nn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,21)},set:function(e){e?this.Ff=Rn(this.Ff,21):this.Ff=Nn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,23)},set:function(e){e?this.Ff=Rn(this.Ff,23):this.Ff=Nn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,24)},set:function(e){e?this.Ff=Rn(this.Ff,24):this.Ff=Nn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,25)},set:function(e){e?this.Ff=Rn(this.Ff,25):this.Ff=Nn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,26)},set:function(e){e?this.Ff=Rn(this.Ff,26):this.Ff=Nn(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};qr(Ba,Mi);var Bh=function(){Ba.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Pn(this.Ff,14)},set:function(t){t?this.Ff=Rn(this.Ff,14):this.Ff=Nn(this.Ff,14)}}),this.password=!0};qr(Bh,Ba);var st={CheckBox:{createAppearanceStream:function(){return{N:{On:st.CheckBox.YesNormal},D:{On:st.CheckBox.YesPushDown,Off:st.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=ts(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),s=Hp(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+At(st.internal.getWidth(t))+" "+At(st.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+At(s.fontSize)+" Tf "+i),n.push("BT"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=ts(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),i=[],s=st.internal.getHeight(t),o=st.internal.getWidth(t),a=Hp(t,t.caption);return i.push("1 g"),i.push("0 0 "+At(o)+" "+At(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+At(o-1)+" "+At(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+At(a.fontSize)+" Tf "+r),i.push(a.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=ts(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+At(st.internal.getWidth(t))+" "+At(st.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:st.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=st.RadioButton.Circle.YesNormal,e.D[t]=st.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=ts(t);e.scope=t.scope;var n=[],r=st.internal.getWidth(t)<=st.internal.getHeight(t)?st.internal.getWidth(t)/4:st.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=st.internal.Bezier_C,s=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+Oo(st.internal.getWidth(t)/2)+" "+Oo(st.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=ts(t);e.scope=t.scope;var n=[],r=st.internal.getWidth(t)<=st.internal.getHeight(t)?st.internal.getWidth(t)/4:st.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*st.internal.Bezier_C).toFixed(5)),o=Number((r*st.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Oo(st.internal.getWidth(t)/2)+" "+Oo(st.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+Oo(st.internal.getWidth(t)/2)+" "+Oo(st.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=ts(t);e.scope=t.scope;var n=[],r=st.internal.getWidth(t)<=st.internal.getHeight(t)?st.internal.getWidth(t)/4:st.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*st.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Oo(st.internal.getWidth(t)/2)+" "+Oo(st.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:st.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=st.RadioButton.Cross.YesNormal,e.D[t]=st.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=ts(t);e.scope=t.scope;var n=[],r=st.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+At(st.internal.getWidth(t)-2)+" "+At(st.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(At(r.x1.x)+" "+At(r.x1.y)+" m"),n.push(At(r.x2.x)+" "+At(r.x2.y)+" l"),n.push(At(r.x4.x)+" "+At(r.x4.y)+" m"),n.push(At(r.x3.x)+" "+At(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=ts(t);e.scope=t.scope;var n=st.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+At(st.internal.getWidth(t))+" "+At(st.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+At(st.internal.getWidth(t)-2)+" "+At(st.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(At(n.x1.x)+" "+At(n.x1.y)+" m"),r.push(At(n.x2.x)+" "+At(n.x2.y)+" l"),r.push(At(n.x4.x)+" "+At(n.x4.y)+" m"),r.push(At(n.x3.x)+" "+At(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=ts(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+At(st.internal.getWidth(t))+" "+At(st.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};st.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=st.internal.getWidth(t),n=st.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},st.internal.getWidth=function(t){var e=0;return Zt(t)==="object"&&(e=o2(t.Rect[2])),e},st.internal.getHeight=function(t){var e=0;return Zt(t)==="object"&&(e=o2(t.Rect[3])),e};var sR=wn.addField=function(t){if(iR(this,t),!(t instanceof Mi))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};wn.AcroFormChoiceField=$l,wn.AcroFormListBox=Wl,wn.AcroFormComboBox=Kl,wn.AcroFormEditBox=Vh,wn.AcroFormButton=Wn,wn.AcroFormPushButton=Uh,wn.AcroFormRadioButton=Jl,wn.AcroFormCheckBox=jh,wn.AcroFormTextField=Ba,wn.AcroFormPasswordField=Bh,wn.AcroFormAppearance=st,wn.AcroForm={ChoiceField:$l,ListBox:Wl,ComboBox:Kl,EditBox:Vh,Button:Wn,PushButton:Uh,RadioButton:Jl,CheckBox:jh,TextField:Ba,PasswordField:Bh,Appearance:st},gt.AcroForm={ChoiceField:$l,ListBox:Wl,ComboBox:Kl,EditBox:Vh,Button:Wn,PushButton:Uh,RadioButton:Jl,CheckBox:jh,TextField:Ba,PasswordField:Bh,Appearance:st};gt.AcroForm;function d_(t){return t.reduce(function(e,n,r){return e[n]=r,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=t.__addimage__.getImageFileTypeByImageData=function(w,E){var I,z,re,ae,ge,ce=e;if((E=E||e)==="RGBA"||w.data!==void 0&&w.data instanceof Uint8ClampedArray&&"height"in w&&"width"in w)return"RGBA";if(Ie(w))for(ge in n)for(re=n[ge],I=0;I<re.length;I+=1){for(ae=!0,z=0;z<re[I].length;z+=1)if(re[I][z]!==void 0&&re[I][z]!==w[z]){ae=!1;break}if(ae===!0){ce=ge;break}}else for(ge in n)for(re=n[ge],I=0;I<re.length;I+=1){for(ae=!0,z=0;z<re[I].length;z+=1)if(re[I][z]!==void 0&&re[I][z]!==w.charCodeAt(z)){ae=!1;break}if(ae===!0){ce=ge;break}}return ce===e&&E!==e&&(ce=E),ce},i=function w(E){for(var I=this.internal.write,z=this.internal.putStream,re=(0,this.internal.getFilters)();re.indexOf("FlateEncode")!==-1;)re.splice(re.indexOf("FlateEncode"),1);E.objectId=this.internal.newObject();var ae=[];if(ae.push({key:"Type",value:"/XObject"}),ae.push({key:"Subtype",value:"/Image"}),ae.push({key:"Width",value:E.width}),ae.push({key:"Height",value:E.height}),E.colorSpace===j.INDEXED?ae.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(E.palette.length/3-1)+" "+("sMask"in E&&E.sMask!==void 0?E.objectId+2:E.objectId+1)+" 0 R]"}):(ae.push({key:"ColorSpace",value:"/"+E.colorSpace}),E.colorSpace===j.DEVICE_CMYK&&ae.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ae.push({key:"BitsPerComponent",value:E.bitsPerComponent}),"decodeParameters"in E&&E.decodeParameters!==void 0&&ae.push({key:"DecodeParms",value:"<<"+E.decodeParameters+">>"}),"transparency"in E&&Array.isArray(E.transparency)){for(var ge="",ce=0,xe=E.transparency.length;ce<xe;ce++)ge+=E.transparency[ce]+" "+E.transparency[ce]+" ";ae.push({key:"Mask",value:"["+ge+"]"})}E.sMask!==void 0&&ae.push({key:"SMask",value:E.objectId+1+" 0 R"});var Pe=E.filter!==void 0?["/"+E.filter]:void 0;if(z({data:E.data,additionalKeyValues:ae,alreadyAppliedFilters:Pe,objectId:E.objectId}),I("endobj"),"sMask"in E&&E.sMask!==void 0){var Qe="/Predictor "+E.predictor+" /Colors 1 /BitsPerComponent "+E.bitsPerComponent+" /Columns "+E.width,C={width:E.width,height:E.height,colorSpace:"DeviceGray",bitsPerComponent:E.bitsPerComponent,decodeParameters:Qe,data:E.sMask};"filter"in E&&(C.filter=E.filter),w.call(this,C)}if(E.colorSpace===j.INDEXED){var M=this.internal.newObject();z({data:S(new Uint8Array(E.palette)),objectId:M}),I("endobj")}},s=function(){var w=this.internal.collections.addImage_images;for(var E in w)i.call(this,w[E])},o=function(){var w,E=this.internal.collections.addImage_images,I=this.internal.write;for(var z in E)I("/I"+(w=E[z]).index,w.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},l=function(){var w=this.internal.collections.addImage_images;return a.call(this),w},h=function(){return Object.keys(this.internal.collections.addImage_images).length},d=function(w){return typeof t["process"+w.toUpperCase()]=="function"},p=function(w){return Zt(w)==="object"&&w.nodeType===1},v=function(w,E){if(w.nodeName==="IMG"&&w.hasAttribute("src")){var I=""+w.getAttribute("src");if(I.indexOf("data:image/")===0)return lu(unescape(I).split("base64,").pop());var z=t.loadFile(I,!0);if(z!==void 0)return z}if(w.nodeName==="CANVAS"){if(w.width===0||w.height===0)throw new Error("Given canvas must have data. Canvas width: "+w.width+", height: "+w.height);var re;switch(E){case"PNG":re="image/png";break;case"WEBP":re="image/webp";break;case"JPEG":case"JPG":default:re="image/jpeg"}return lu(w.toDataURL(re,1).split("base64,").pop())}},g=function(w){var E=this.internal.collections.addImage_images;if(E){for(var I in E)if(w===E[I].alias)return E[I]}},L=function(w,E,I){return w||E||(w=-96,E=-96),w<0&&(w=-1*I.width*72/w/this.internal.scaleFactor),E<0&&(E=-1*I.height*72/E/this.internal.scaleFactor),w===0&&(w=E*I.width/I.height),E===0&&(E=w*I.height/I.width),[w,E]},P=function(w,E,I,z,re,ae){var ge=L.call(this,I,z,re),ce=this.internal.getCoordinateString,xe=this.internal.getVerticalCoordinateString,Pe=l.call(this);if(I=ge[0],z=ge[1],Pe[re.index]=re,ae){ae*=Math.PI/180;var Qe=Math.cos(ae),C=Math.sin(ae),M=function(ee){return ee.toFixed(4)},K=[M(Qe),M(C),M(-1*C),M(Qe),0,0,"cm"]}this.internal.write("q"),ae?(this.internal.write([1,"0","0",1,ce(w),xe(E+z),"cm"].join(" ")),this.internal.write(K.join(" ")),this.internal.write([ce(I),"0","0",ce(z),"0","0","cm"].join(" "))):this.internal.write([ce(I),"0","0",ce(z),ce(w),xe(E+z),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+re.index+" Do"),this.internal.write("Q")},j=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var x=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},U=t.__addimage__.sHashCode=function(w){var E,I,z=0;if(typeof w=="string")for(I=w.length,E=0;E<I;E++)z=(z<<5)-z+w.charCodeAt(E),z|=0;else if(Ie(w))for(I=w.byteLength/2,E=0;E<I;E++)z=(z<<5)-z+w[E],z|=0;return z},J=t.__addimage__.validateStringAsBase64=function(w){(w=w||"").toString().trim();var E=!0;return w.length===0&&(E=!1),w.length%4!=0&&(E=!1),/^[A-Za-z0-9+/]+$/.test(w.substr(0,w.length-2))===!1&&(E=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(w.substr(-2))===!1&&(E=!1),E},Z=t.__addimage__.extractImageFromDataUrl=function(w){var E=(w=w||"").split("base64,"),I=null;if(E.length===2){var z=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(E[0]);Array.isArray(z)&&(I={mimeType:z[1],charset:z[2],data:E[1]})}return I},fe=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(w){return fe()&&w instanceof ArrayBuffer};var Ie=t.__addimage__.isArrayBufferView=function(w){return fe()&&typeof Uint32Array<"u"&&(w instanceof Int8Array||w instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&w instanceof Uint8ClampedArray||w instanceof Int16Array||w instanceof Uint16Array||w instanceof Int32Array||w instanceof Uint32Array||w instanceof Float32Array||w instanceof Float64Array)},T=t.__addimage__.binaryStringToUint8Array=function(w){for(var E=w.length,I=new Uint8Array(E),z=0;z<E;z++)I[z]=w.charCodeAt(z);return I},S=t.__addimage__.arrayBufferToBinaryString=function(w){for(var E="",I=Ie(w)?w:new Uint8Array(w),z=0;z<I.length;z+=8192)E+=String.fromCharCode.apply(null,I.subarray(z,z+8192));return E};t.addImage=function(){var w,E,I,z,re,ae,ge,ce,xe;if(typeof arguments[1]=="number"?(E=e,I=arguments[1],z=arguments[2],re=arguments[3],ae=arguments[4],ge=arguments[5],ce=arguments[6],xe=arguments[7]):(E=arguments[1],I=arguments[2],z=arguments[3],re=arguments[4],ae=arguments[5],ge=arguments[6],ce=arguments[7],xe=arguments[8]),Zt(w=arguments[0])==="object"&&!p(w)&&"imageData"in w){var Pe=w;w=Pe.imageData,E=Pe.format||E||e,I=Pe.x||I||0,z=Pe.y||z||0,re=Pe.w||Pe.width||re,ae=Pe.h||Pe.height||ae,ge=Pe.alias||ge,ce=Pe.compression||ce,xe=Pe.rotation||Pe.angle||xe}var Qe=this.internal.getFilters();if(ce===void 0&&Qe.indexOf("FlateEncode")!==-1&&(ce="SLOW"),isNaN(I)||isNaN(z))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var C=O.call(this,w,E,ge,ce);return P.call(this,I,z,re,ae,C,xe),this};var O=function(w,E,I,z){var re,ae,ge;if(typeof w=="string"&&r(w)===e){w=unescape(w);var ce=F(w,!1);(ce!==""||(ce=t.loadFile(w,!0))!==void 0)&&(w=ce)}if(p(w)&&(w=v(w,E)),E=r(w,E),!d(E))throw new Error("addImage does not support files of type '"+E+"', please ensure that a plugin for '"+E+"' support is added.");if(((ge=I)==null||ge.length===0)&&(I=function(xe){return typeof xe=="string"||Ie(xe)?U(xe):Ie(xe.data)?U(xe.data):null}(w)),(re=g.call(this,I))||(fe()&&(w instanceof Uint8Array||E==="RGBA"||(ae=w,w=T(w))),re=this["process"+E.toUpperCase()](w,h.call(this),I,function(xe){return xe&&typeof xe=="string"&&(xe=xe.toUpperCase()),xe in t.image_compression?xe:x.NONE}(z),ae)),!re)throw new Error("An unknown error occurred whilst processing the image.");return re},F=t.__addimage__.convertBase64ToBinaryString=function(w,E){var I;E=typeof E!="boolean"||E;var z,re="";if(typeof w=="string"){z=(I=Z(w))!==null?I.data:w;try{re=lu(z)}catch(ae){if(E)throw J(z)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ae.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return re};t.getImageProperties=function(w){var E,I,z="";if(p(w)&&(w=v(w)),typeof w=="string"&&r(w)===e&&((z=F(w,!1))===""&&(z=t.loadFile(w)||""),w=z),I=r(w),!d(I))throw new Error("addImage does not support files of type '"+I+"', please ensure that a plugin for '"+I+"' support is added.");if(!fe()||w instanceof Uint8Array||(w=T(w)),!(E=this["process"+I.toUpperCase()](w)))throw new Error("An unknown error occurred whilst processing the image");return E.fileType=I,E}})(gt.API),function(t){var e=function(n){if(n!==void 0&&n!="")return!0};gt.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,i,s,o=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(n.objId),h=n.pageContext.annotations,d=!1,p=0;p<h.length&&!d;p++)switch((r=h[p]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var v=0;v<h.length;v++){r=h[v];var g=this.internal.pdfEscape,L=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var P=this.internal.newAdditionalObject(),j=this.internal.newAdditionalObject(),x=this.internal.getEncryptor(P.objId),U=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y)+"] ")+"/Contents ("+g(x(r.contents))+")",s+=" /Popup "+j.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+g(x(U))+") >>",P.content=s;var J=P.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(r.bounds.x+30)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+a(r.bounds.y)+"] ")+" /Parent "+J,r.open&&(s+=" /Open true"),s+=" >>",j.content=s,this.internal.write(P.objId,"0 R",j.objId,"0 R");break;case"freetext":i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y+r.bounds.h)+"] ";var Z=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+g(L(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+Z+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var fe=this.annotations._nameMap[r.options.name];r.options.pageNumber=fe.page,r.options.top=fe.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+g(L(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var Ie=a(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+Ie+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,i,s,o){var a=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,h=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:l(n),y:h(r),w:l(n+i),h:h(r+s)},options:o,type:"link"})},t.textWithLink=function(n,r,i,s){var o,a,l=this.getTextWidth(n),h=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){a=s.maxWidth;var d=this.splitTextToSize(n,a).length;o=Math.ceil(h*d)}else a=l,o=h;return this.text(n,r,i,s),i+=.2*h,s.align==="center"&&(r-=l/2),s.align==="right"&&(r-=l),this.link(r,i-h,a,o,s),l},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(gt.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(P){return e[P.charCodeAt(0)]!==void 0},o=t.__arabicParser__.isArabicLetter=function(P){return typeof P=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(P)},a=t.__arabicParser__.isArabicEndLetter=function(P){return o(P)&&s(P)&&e[P.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(P){return o(P)&&i.indexOf(P.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(P){return o(P)&&s(P)&&e[P.charCodeAt(0)].length>=1};var h=t.__arabicParser__.arabicLetterHasFinalForm=function(P){return o(P)&&s(P)&&e[P.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(P){return o(P)&&s(P)&&e[P.charCodeAt(0)].length>=3};var d=t.__arabicParser__.arabicLetterHasMedialForm=function(P){return o(P)&&s(P)&&e[P.charCodeAt(0)].length==4},p=t.__arabicParser__.resolveLigatures=function(P){var j=0,x=n,U="",J=0;for(j=0;j<P.length;j+=1)x[P.charCodeAt(j)]!==void 0?(J++,typeof(x=x[P.charCodeAt(j)])=="number"&&(U+=String.fromCharCode(x),x=n,J=0),j===P.length-1&&(x=n,U+=P.charAt(j-(J-1)),j-=J-1,J=0)):(x=n,U+=P.charAt(j-J),j-=J,J=0);return U};t.__arabicParser__.isArabicDiacritic=function(P){return P!==void 0&&r[P.charCodeAt(0)]!==void 0};var v=t.__arabicParser__.getCorrectForm=function(P,j,x){return o(P)?s(P)===!1?-1:!h(P)||!o(j)&&!o(x)||!o(x)&&a(j)||a(P)&&!o(j)||a(P)&&l(j)||a(P)&&a(j)?0:d(P)&&o(j)&&!a(j)&&o(x)&&h(x)?3:a(P)||!o(x)?1:2:-1},g=function(P){var j=0,x=0,U=0,J="",Z="",fe="",Ie=(P=P||"").split("\\s+"),T=[];for(j=0;j<Ie.length;j+=1){for(T.push(""),x=0;x<Ie[j].length;x+=1)J=Ie[j][x],Z=Ie[j][x-1],fe=Ie[j][x+1],o(J)?(U=v(J,Z,fe),T[j]+=U!==-1?String.fromCharCode(e[J.charCodeAt(0)][U]):J):T[j]+=J;T[j]=p(T[j])}return T.join(" ")},L=t.__arabicParser__.processArabic=t.processArabic=function(){var P,j=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,x=[];if(Array.isArray(j)){var U=0;for(x=[],U=0;U<j.length;U+=1)Array.isArray(j[U])?x.push([g(j[U][0]),j[U][1],j[U][2]]):x.push([g(j[U])]);P=x}else P=g(j);return typeof arguments[0]=="string"?P:(arguments[0].text=P,arguments[0])};t.events.push(["preProcessText",L])}(gt.API),gt.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(a){n=a}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(a){s=a}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(a){o=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(gt.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(P){l=P}});var h=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return h},set:function(P){h=P}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(P){d=P}});var p=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return p},set:function(P){p=P}});var v=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return v},set:function(P){v=P}});var g=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return g},set:function(P){g=P}});var L=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return L},set:function(P){L=P}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,h){r.call(this);var d=(h=h||{}).fontSize||this.getFontSize(),p=h.font||this.getFont(),v=h.scaleFactor||this.internal.scaleFactor,g=0,L=0,P=0,j=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var x=h.maxWidth;x>0?typeof l=="string"?l=this.splitTextToSize(l,x):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(J,Z){return J.concat(j.splitTextToSize(Z,x))},[])):l=Array.isArray(l)?l:[l];for(var U=0;U<l.length;U++)g<(P=this.getStringUnitWidth(l[U],{font:p})*d)&&(g=P);return g!==0&&(L=l.length),{w:g/=v,h:Math.max((L*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/v,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=t.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var h=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,p=this.internal.__cell__.margins||e,v=this.internal.__cell__.tableHeaderRow,g=this.internal.__cell__.printHeaders;return h.lineNumber!==void 0&&(h.lineNumber===l.lineNumber?(l.x=(h.x||0)+(h.width||0),l.y=h.y||0):h.y+h.height+l.height+p.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=p.top,g&&v&&(this.printHeaderRow(l.lineNumber,!0),l.y+=v[0].height)):l.y=h.y+h.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,n===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-d,l.y+d,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+d,{align:"center",baseline:"top",maxWidth:l.width-d-d}):this.text(l.text,l.x+d,l.y+d,{align:"left",baseline:"top",maxWidth:l.width-d-d})),this.internal.__cell__.lastCell=l,this};t.table=function(l,h,d,p,v){if(r.call(this),!d)throw new Error("No data for PDF table.");var g,L,P,j,x=[],U=[],J=[],Z={},fe={},Ie=[],T=[],S=(v=v||{}).autoSize||!1,O=v.printHeaders!==!1,F=v.css&&v.css["font-size"]!==void 0?16*v.css["font-size"]:v.fontSize||12,w=v.margins||Object.assign({width:this.getPageWidth()},e),E=typeof v.padding=="number"?v.padding:3,I=v.headerBackgroundColor||"#c8c8c8",z=v.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=O,this.internal.__cell__.margins=w,this.internal.__cell__.table_font_size=F,this.internal.__cell__.padding=E,this.internal.__cell__.headerBackgroundColor=I,this.internal.__cell__.headerTextColor=z,this.setFontSize(F),p==null)U=x=Object.keys(d[0]),J=x.map(function(){return"left"});else if(Array.isArray(p)&&Zt(p[0])==="object")for(x=p.map(function(Pe){return Pe.name}),U=p.map(function(Pe){return Pe.prompt||Pe.name||""}),J=p.map(function(Pe){return Pe.align||"left"}),g=0;g<p.length;g+=1)fe[p[g].name]=p[g].width*(19.049976/25.4);else Array.isArray(p)&&typeof p[0]=="string"&&(U=x=p,J=x.map(function(){return"left"}));if(S||Array.isArray(p)&&typeof p[0]=="string")for(g=0;g<x.length;g+=1){for(Z[j=x[g]]=d.map(function(Pe){return Pe[j]}),this.setFont(void 0,"bold"),Ie.push(this.getTextDimensions(U[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),L=Z[j],this.setFont(void 0,"normal"),P=0;P<L.length;P+=1)Ie.push(this.getTextDimensions(L[P],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);fe[j]=Math.max.apply(null,Ie)+E+E,Ie=[]}if(O){var re={};for(g=0;g<x.length;g+=1)re[x[g]]={},re[x[g]].text=U[g],re[x[g]].align=J[g];var ae=a.call(this,re,fe);T=x.map(function(Pe){return new s(l,h,fe[Pe],ae,re[Pe].text,void 0,re[Pe].align)}),this.setTableHeaderRow(T),this.printHeaderRow(1,!1)}var ge=p.reduce(function(Pe,Qe){return Pe[Qe.name]=Qe.align,Pe},{});for(g=0;g<d.length;g+=1){"rowStart"in v&&v.rowStart instanceof Function&&v.rowStart({row:g,data:d[g]},this);var ce=a.call(this,d[g],fe);for(P=0;P<x.length;P+=1){var xe=d[g][x[P]];"cellStart"in v&&v.cellStart instanceof Function&&v.cellStart({row:g,col:P,data:xe},this),o.call(this,new s(l,h,fe[x[P]],ce,xe,g+2,ge[x[P]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=h,this};var a=function(l,h){var d=this.internal.__cell__.padding,p=this.internal.__cell__.table_font_size,v=this.internal.scaleFactor;return Object.keys(l).map(function(g){var L=l[g];return this.splitTextToSize(L.hasOwnProperty("text")?L.text:L,h[g]-d-d)},this).map(function(g){return this.getLineHeightFactor()*g.length*p/v+d+d},this).reduce(function(g,L){return Math.max(g,L)},0)};t.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,h){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var p=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(p[0],p[1],p[2],p[3],void 0,-1)}this.setFont(void 0,"bold");for(var v=[],g=0;g<this.internal.__cell__.tableHeaderRow.length;g+=1){d=this.internal.__cell__.tableHeaderRow[g].clone(),h&&(d.y=this.internal.__cell__.margins.top||0,v.push(d)),d.lineNumber=l;var L=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,d),this.setTextColor(L)}v.length>0&&this.setTableHeaderRow(v),this.setFont(void 0,"normal"),n=!1}}(gt.API);var p_={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},g_=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],zp=d_(g_),m_=[100,200,300,400,500,600,700,800,900],oR=d_(m_);function Gp(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(s){return p_[s=s||"normal"]?s:"normal"}(t.style),r=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(t.weight),i=function(s){return typeof zp[s=s||"normal"]=="number"?s:"normal"}(t.stretch);return{family:e,style:n,weight:r,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,n,r].join(" ")}}}function a2(t,e,n,r){var i;for(i=n;i>=0&&i<e.length;i+=r)if(t[e[i]])return t[e[i]];for(i=n;i>=0&&i<e.length;i-=r)if(t[e[i]])return t[e[i]]}var aR={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},l2={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function c2(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function lR(t,e,n){for(var r=(n=n||{}).defaultFontFamily||"times",i=Object.assign({},aR,n.genericFontFamilies||{}),s=null,o=null,a=0;a<e.length;++a)if(i[(s=Gp(e[a])).family]&&(s.family=i[s.family]),t.hasOwnProperty(s.family)){o=t[s.family];break}if(!(o=o||t[r]))throw new Error("Could not find a font-family for the rule '"+c2(s)+"' and default family '"+r+"'.");if(o=function(l,h){if(h[l])return h[l];var d=zp[l],p=d<=zp.normal?-1:1,v=a2(h,g_,d,p);if(!v)throw new Error("Could not find a matching font-stretch value for "+l);return v}(s.stretch,o),o=function(l,h){if(h[l])return h[l];for(var d=p_[l],p=0;p<d.length;++p)if(h[d[p]])return h[d[p]];throw new Error("Could not find a matching font-style for "+l)}(s.style,o),!(o=function(l,h){if(h[l])return h[l];if(l===400&&h[500])return h[500];if(l===500&&h[400])return h[400];var d=oR[l],p=a2(h,m_,d,l<400?-1:1);if(!p)throw new Error("Could not find a matching font-weight for value "+l);return p}(s.weight,o)))throw new Error("Failed to resolve a font for the rule '"+c2(s)+"'.");return o}function u2(t){return t.trimLeft()}function cR(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function uR(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var Ah,h2,f2,Wd=["times"];(function(t){var e,n,r,i,s,o,a,l,h,d=function(C){return C=C||{},this.isStrokeTransparent=C.isStrokeTransparent||!1,this.strokeOpacity=C.strokeOpacity||1,this.strokeStyle=C.strokeStyle||"#000000",this.fillStyle=C.fillStyle||"#000000",this.isFillTransparent=C.isFillTransparent||!1,this.fillOpacity=C.fillOpacity||1,this.font=C.font||"10px sans-serif",this.textBaseline=C.textBaseline||"alphabetic",this.textAlign=C.textAlign||"left",this.lineWidth=C.lineWidth||1,this.lineJoin=C.lineJoin||"miter",this.lineCap=C.lineCap||"butt",this.path=C.path||[],this.transform=C.transform!==void 0?C.transform.clone():new l,this.globalCompositeOperation=C.globalCompositeOperation||"normal",this.globalAlpha=C.globalAlpha||1,this.clip_path=C.clip_path||[],this.currentPoint=C.currentPoint||new o,this.miterLimit=C.miterLimit||10,this.lastPoint=C.lastPoint||new o,this.lineDashOffset=C.lineDashOffset||0,this.lineDash=C.lineDash||[],this.margin=C.margin||[0,0,0,0],this.prevPageLastElemOffset=C.prevPageLastElemOffset||0,this.ignoreClearRect=typeof C.ignoreClearRect!="boolean"||C.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new p(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,a=this.internal.Rectangle,l=this.internal.Matrix,h=new d}]);var p=function(C){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var M=C;Object.defineProperty(this,"pdf",{get:function(){return M}});var K=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return K},set:function(te){K=!!te}});var ee=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ee},set:function(te){ee=!!te}});var he=0;Object.defineProperty(this,"posX",{get:function(){return he},set:function(te){isNaN(te)||(he=te)}});var Y=0;Object.defineProperty(this,"posY",{get:function(){return Y},set:function(te){isNaN(te)||(Y=te)}}),Object.defineProperty(this,"margin",{get:function(){return h.margin},set:function(te){var H;typeof te=="number"?H=[te,te,te,te]:((H=new Array(4))[0]=te[0],H[1]=te.length>=2?te[1]:H[0],H[2]=te.length>=3?te[2]:H[0],H[3]=te.length>=4?te[3]:H[1]),h.margin=H}});var se=!1;Object.defineProperty(this,"autoPaging",{get:function(){return se},set:function(te){se=te}});var ne=0;Object.defineProperty(this,"lastBreak",{get:function(){return ne},set:function(te){ne=te}});var Se=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Se},set:function(te){Se=te}}),Object.defineProperty(this,"ctx",{get:function(){return h},set:function(te){te instanceof d&&(h=te)}}),Object.defineProperty(this,"path",{get:function(){return h.path},set:function(te){h.path=te}});var De=[];Object.defineProperty(this,"ctxStack",{get:function(){return De},set:function(te){De=te}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(te){var H;H=v(te),this.ctx.fillStyle=H.style,this.ctx.isFillTransparent=H.a===0,this.ctx.fillOpacity=H.a,this.pdf.setFillColor(H.r,H.g,H.b,{a:H.a}),this.pdf.setTextColor(H.r,H.g,H.b,{a:H.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(te){var H=v(te);this.ctx.strokeStyle=H.style,this.ctx.isStrokeTransparent=H.a===0,this.ctx.strokeOpacity=H.a,H.a===0?this.pdf.setDrawColor(255,255,255):(H.a,this.pdf.setDrawColor(H.r,H.g,H.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(te){["butt","round","square"].indexOf(te)!==-1&&(this.ctx.lineCap=te,this.pdf.setLineCap(te))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(te){isNaN(te)||(this.ctx.lineWidth=te,this.pdf.setLineWidth(te))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(te){["bevel","round","miter"].indexOf(te)!==-1&&(this.ctx.lineJoin=te,this.pdf.setLineJoin(te))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(te){isNaN(te)||(this.ctx.miterLimit=te,this.pdf.setMiterLimit(te))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(te){this.ctx.textBaseline=te}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(te){["right","end","center","left","start"].indexOf(te)!==-1&&(this.ctx.textAlign=te)}});var $=null;function W(te,H){if($===null){var Te=function(Re){var ve=[];return Object.keys(Re).forEach(function(be){Re[be].forEach(function(_e){var ke=null;switch(_e){case"bold":ke={family:be,weight:"bold"};break;case"italic":ke={family:be,style:"italic"};break;case"bolditalic":ke={family:be,weight:"bold",style:"italic"};break;case"":case"normal":ke={family:be}}ke!==null&&(ke.ref={name:be,style:_e},ve.push(ke))})}),ve}(te.getFontList());$=function(Re){for(var ve={},be=0;be<Re.length;++be){var _e=Gp(Re[be]),ke=_e.family,Le=_e.stretch,He=_e.style,We=_e.weight;ve[ke]=ve[ke]||{},ve[ke][Le]=ve[ke][Le]||{},ve[ke][Le][He]=ve[ke][Le][He]||{},ve[ke][Le][He][We]=_e}return ve}(Te.concat(H))}return $}var ie=null;Object.defineProperty(this,"fontFaces",{get:function(){return ie},set:function(te){$=null,ie=te}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(te){var H;if(this.ctx.font=te,(H=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(te))!==null){var Te=H[1],Re=(H[2],H[3]),ve=H[4],be=(H[5],H[6]),_e=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(ve)[2];ve=Math.floor(_e==="px"?parseFloat(ve)*this.pdf.internal.scaleFactor:_e==="em"?parseFloat(ve)*this.pdf.getFontSize():parseFloat(ve)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(ve);var ke=function(it){var ct,Ye,Ft=[],Pt=it.trim();if(Pt==="")return Wd;if(Pt in l2)return[l2[Pt]];for(;Pt!=="";){switch(Ye=null,ct=(Pt=u2(Pt)).charAt(0)){case'"':case"'":Ye=cR(Pt.substring(1),ct);break;default:Ye=uR(Pt)}if(Ye===null||(Ft.push(Ye[0]),(Pt=u2(Ye[1]))!==""&&Pt.charAt(0)!==","))return Wd;Pt=Pt.replace(/^,/,"")}return Ft}(be);if(this.fontFaces){var Le=lR(W(this.pdf,this.fontFaces),ke.map(function(it){return{family:it,stretch:"normal",weight:Re,style:Te}}));this.pdf.setFont(Le.ref.name,Le.ref.style)}else{var He="";(Re==="bold"||parseInt(Re,10)>=700||Te==="bold")&&(He="bold"),Te==="italic"&&(He+="italic"),He.length===0&&(He="normal");for(var We="",Ke={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},et=0;et<ke.length;et++){if(this.pdf.internal.getFont(ke[et],He,{noFallback:!0,disableWarning:!0})!==void 0){We=ke[et];break}if(He==="bolditalic"&&this.pdf.internal.getFont(ke[et],"bold",{noFallback:!0,disableWarning:!0})!==void 0)We=ke[et],He="bold";else if(this.pdf.internal.getFont(ke[et],"normal",{noFallback:!0,disableWarning:!0})!==void 0){We=ke[et],He="normal";break}}if(We===""){for(var at=0;at<ke.length;at++)if(Ke[ke[at]]){We=Ke[ke[at]];break}}We=We===""?"Times":We,this.pdf.setFont(We,He)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(te){this.ctx.globalCompositeOperation=te}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(te){this.ctx.globalAlpha=te}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(te){this.ctx.lineDashOffset=te,Qe.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(te){this.ctx.lineDash=te,Qe.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(te){this.ctx.ignoreClearRect=!!te}})};p.prototype.setLineDash=function(C){this.lineDash=C},p.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},p.prototype.fill=function(){Z.call(this,"fill",!1)},p.prototype.stroke=function(){Z.call(this,"stroke",!1)},p.prototype.beginPath=function(){this.path=[{type:"begin"}]},p.prototype.moveTo=function(C,M){if(isNaN(C)||isNaN(M))throw on.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var K=this.ctx.transform.applyToPoint(new o(C,M));this.path.push({type:"mt",x:K.x,y:K.y}),this.ctx.lastPoint=new o(C,M)},p.prototype.closePath=function(){var C=new o(0,0),M=0;for(M=this.path.length-1;M!==-1;M--)if(this.path[M].type==="begin"&&Zt(this.path[M+1])==="object"&&typeof this.path[M+1].x=="number"){C=new o(this.path[M+1].x,this.path[M+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(C.x,C.y)},p.prototype.lineTo=function(C,M){if(isNaN(C)||isNaN(M))throw on.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var K=this.ctx.transform.applyToPoint(new o(C,M));this.path.push({type:"lt",x:K.x,y:K.y}),this.ctx.lastPoint=new o(K.x,K.y)},p.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),Z.call(this,null,!0)},p.prototype.quadraticCurveTo=function(C,M,K,ee){if(isNaN(K)||isNaN(ee)||isNaN(C)||isNaN(M))throw on.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var he=this.ctx.transform.applyToPoint(new o(K,ee)),Y=this.ctx.transform.applyToPoint(new o(C,M));this.path.push({type:"qct",x1:Y.x,y1:Y.y,x:he.x,y:he.y}),this.ctx.lastPoint=new o(he.x,he.y)},p.prototype.bezierCurveTo=function(C,M,K,ee,he,Y){if(isNaN(he)||isNaN(Y)||isNaN(C)||isNaN(M)||isNaN(K)||isNaN(ee))throw on.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var se=this.ctx.transform.applyToPoint(new o(he,Y)),ne=this.ctx.transform.applyToPoint(new o(C,M)),Se=this.ctx.transform.applyToPoint(new o(K,ee));this.path.push({type:"bct",x1:ne.x,y1:ne.y,x2:Se.x,y2:Se.y,x:se.x,y:se.y}),this.ctx.lastPoint=new o(se.x,se.y)},p.prototype.arc=function(C,M,K,ee,he,Y){if(isNaN(C)||isNaN(M)||isNaN(K)||isNaN(ee)||isNaN(he))throw on.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Y=!!Y,!this.ctx.transform.isIdentity){var se=this.ctx.transform.applyToPoint(new o(C,M));C=se.x,M=se.y;var ne=this.ctx.transform.applyToPoint(new o(0,K)),Se=this.ctx.transform.applyToPoint(new o(0,0));K=Math.sqrt(Math.pow(ne.x-Se.x,2)+Math.pow(ne.y-Se.y,2))}Math.abs(he-ee)>=2*Math.PI&&(ee=0,he=2*Math.PI),this.path.push({type:"arc",x:C,y:M,radius:K,startAngle:ee,endAngle:he,counterclockwise:Y})},p.prototype.arcTo=function(C,M,K,ee,he){throw new Error("arcTo not implemented.")},p.prototype.rect=function(C,M,K,ee){if(isNaN(C)||isNaN(M)||isNaN(K)||isNaN(ee))throw on.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(C,M),this.lineTo(C+K,M),this.lineTo(C+K,M+ee),this.lineTo(C,M+ee),this.lineTo(C,M),this.lineTo(C+K,M),this.lineTo(C,M)},p.prototype.fillRect=function(C,M,K,ee){if(isNaN(C)||isNaN(M)||isNaN(K)||isNaN(ee))throw on.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!g.call(this)){var he={};this.lineCap!=="butt"&&(he.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(he.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(C,M,K,ee),this.fill(),he.hasOwnProperty("lineCap")&&(this.lineCap=he.lineCap),he.hasOwnProperty("lineJoin")&&(this.lineJoin=he.lineJoin)}},p.prototype.strokeRect=function(C,M,K,ee){if(isNaN(C)||isNaN(M)||isNaN(K)||isNaN(ee))throw on.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");L.call(this)||(this.beginPath(),this.rect(C,M,K,ee),this.stroke())},p.prototype.clearRect=function(C,M,K,ee){if(isNaN(C)||isNaN(M)||isNaN(K)||isNaN(ee))throw on.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(C,M,K,ee))},p.prototype.save=function(C){C=typeof C!="boolean"||C;for(var M=this.pdf.internal.getCurrentPageInfo().pageNumber,K=0;K<this.pdf.internal.getNumberOfPages();K++)this.pdf.setPage(K+1),this.pdf.internal.out("q");if(this.pdf.setPage(M),C){this.ctx.fontSize=this.pdf.internal.getFontSize();var ee=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ee}},p.prototype.restore=function(C){C=typeof C!="boolean"||C;for(var M=this.pdf.internal.getCurrentPageInfo().pageNumber,K=0;K<this.pdf.internal.getNumberOfPages();K++)this.pdf.setPage(K+1),this.pdf.internal.out("Q");this.pdf.setPage(M),C&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},p.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var v=function(C){var M,K,ee,he;if(C.isCanvasGradient===!0&&(C=C.getColor()),!C)return{r:0,g:0,b:0,a:0,style:C};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(C))M=0,K=0,ee=0,he=0;else{var Y=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(C);if(Y!==null)M=parseInt(Y[1]),K=parseInt(Y[2]),ee=parseInt(Y[3]),he=1;else if((Y=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(C))!==null)M=parseInt(Y[1]),K=parseInt(Y[2]),ee=parseInt(Y[3]),he=parseFloat(Y[4]);else{if(he=1,typeof C=="string"&&C.charAt(0)!=="#"){var se=new a_(C);C=se.ok?se.toHex():"#000000"}C.length===4?(M=C.substring(1,2),M+=M,K=C.substring(2,3),K+=K,ee=C.substring(3,4),ee+=ee):(M=C.substring(1,3),K=C.substring(3,5),ee=C.substring(5,7)),M=parseInt(M,16),K=parseInt(K,16),ee=parseInt(ee,16)}}return{r:M,g:K,b:ee,a:he,style:C}},g=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},L=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};p.prototype.fillText=function(C,M,K,ee){if(isNaN(M)||isNaN(K)||typeof C!="string")throw on.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ee=isNaN(ee)?void 0:ee,!g.call(this)){var he=ce(this.ctx.transform.rotation),Y=this.ctx.transform.scaleX;E.call(this,{text:C,x:M,y:K,scale:Y,angle:he,align:this.textAlign,maxWidth:ee})}},p.prototype.strokeText=function(C,M,K,ee){if(isNaN(M)||isNaN(K)||typeof C!="string")throw on.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!L.call(this)){ee=isNaN(ee)?void 0:ee;var he=ce(this.ctx.transform.rotation),Y=this.ctx.transform.scaleX;E.call(this,{text:C,x:M,y:K,scale:Y,renderingMode:"stroke",angle:he,align:this.textAlign,maxWidth:ee})}},p.prototype.measureText=function(C){if(typeof C!="string")throw on.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var M=this.pdf,K=this.pdf.internal.scaleFactor,ee=M.internal.getFontSize(),he=M.getStringUnitWidth(C)*ee/M.internal.scaleFactor,Y=function(se){var ne=(se=se||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ne}}),this};return new Y({width:he*=Math.round(96*K/72*1e4)/1e4})},p.prototype.scale=function(C,M){if(isNaN(C)||isNaN(M))throw on.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var K=new l(C,0,0,M,0,0);this.ctx.transform=this.ctx.transform.multiply(K)},p.prototype.rotate=function(C){if(isNaN(C))throw on.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var M=new l(Math.cos(C),Math.sin(C),-Math.sin(C),Math.cos(C),0,0);this.ctx.transform=this.ctx.transform.multiply(M)},p.prototype.translate=function(C,M){if(isNaN(C)||isNaN(M))throw on.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var K=new l(1,0,0,1,C,M);this.ctx.transform=this.ctx.transform.multiply(K)},p.prototype.transform=function(C,M,K,ee,he,Y){if(isNaN(C)||isNaN(M)||isNaN(K)||isNaN(ee)||isNaN(he)||isNaN(Y))throw on.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var se=new l(C,M,K,ee,he,Y);this.ctx.transform=this.ctx.transform.multiply(se)},p.prototype.setTransform=function(C,M,K,ee,he,Y){C=isNaN(C)?1:C,M=isNaN(M)?0:M,K=isNaN(K)?0:K,ee=isNaN(ee)?1:ee,he=isNaN(he)?0:he,Y=isNaN(Y)?0:Y,this.ctx.transform=new l(C,M,K,ee,he,Y)};var P=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};p.prototype.drawImage=function(C,M,K,ee,he,Y,se,ne,Se){var De=this.pdf.getImageProperties(C),$=1,W=1,ie=1,te=1;ee!==void 0&&ne!==void 0&&(ie=ne/ee,te=Se/he,$=De.width/ee*ne/ee,W=De.height/he*Se/he),Y===void 0&&(Y=M,se=K,M=0,K=0),ee!==void 0&&ne===void 0&&(ne=ee,Se=he),ee===void 0&&ne===void 0&&(ne=De.width,Se=De.height);for(var H,Te=this.ctx.transform.decompose(),Re=ce(Te.rotate.shx),ve=new l,be=(ve=(ve=(ve=ve.multiply(Te.translate)).multiply(Te.skew)).multiply(Te.scale)).applyToRectangle(new a(Y-M*ie,se-K*te,ee*$,he*W)),_e=j.call(this,be),ke=[],Le=0;Le<_e.length;Le+=1)ke.indexOf(_e[Le])===-1&&ke.push(_e[Le]);if(J(ke),this.autoPaging)for(var He=ke[0],We=ke[ke.length-1],Ke=He;Ke<We+1;Ke++){this.pdf.setPage(Ke);var et=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],at=Ke===1?this.posY+this.margin[0]:this.margin[0],it=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ct=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ye=Ke===1?0:it+(Ke-2)*ct;if(this.ctx.clip_path.length!==0){var Ft=this.path;H=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=U(H,this.posX+this.margin[3],-Ye+at+this.ctx.prevPageLastElemOffset),fe.call(this,"fill",!0),this.path=Ft}var Pt=JSON.parse(JSON.stringify(be));Pt=U([Pt],this.posX+this.margin[3],-Ye+at+this.ctx.prevPageLastElemOffset)[0];var Qn=(Ke>He||Ke<We)&&P.call(this);Qn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],et,ct,null).clip().discardPath()),this.pdf.addImage(C,"JPEG",Pt.x,Pt.y,Pt.w,Pt.h,null,null,Re),Qn&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(C,"JPEG",be.x,be.y,be.w,be.h,null,null,Re)};var j=function(C,M,K){var ee=[];M=M||this.pdf.internal.pageSize.width,K=K||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var he=this.posY+this.ctx.prevPageLastElemOffset;switch(C.type){default:case"mt":case"lt":ee.push(Math.floor((C.y+he)/K)+1);break;case"arc":ee.push(Math.floor((C.y+he-C.radius)/K)+1),ee.push(Math.floor((C.y+he+C.radius)/K)+1);break;case"qct":var Y=xe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,C.x1,C.y1,C.x,C.y);ee.push(Math.floor((Y.y+he)/K)+1),ee.push(Math.floor((Y.y+Y.h+he)/K)+1);break;case"bct":var se=Pe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,C.x1,C.y1,C.x2,C.y2,C.x,C.y);ee.push(Math.floor((se.y+he)/K)+1),ee.push(Math.floor((se.y+se.h+he)/K)+1);break;case"rect":ee.push(Math.floor((C.y+he)/K)+1),ee.push(Math.floor((C.y+C.h+he)/K)+1)}for(var ne=0;ne<ee.length;ne+=1)for(;this.pdf.internal.getNumberOfPages()<ee[ne];)x.call(this);return ee},x=function(){var C=this.fillStyle,M=this.strokeStyle,K=this.font,ee=this.lineCap,he=this.lineWidth,Y=this.lineJoin;this.pdf.addPage(),this.fillStyle=C,this.strokeStyle=M,this.font=K,this.lineCap=ee,this.lineWidth=he,this.lineJoin=Y},U=function(C,M,K){for(var ee=0;ee<C.length;ee++)switch(C[ee].type){case"bct":C[ee].x2+=M,C[ee].y2+=K;case"qct":C[ee].x1+=M,C[ee].y1+=K;case"mt":case"lt":case"arc":default:C[ee].x+=M,C[ee].y+=K}return C},J=function(C){return C.sort(function(M,K){return M-K})},Z=function(C,M){for(var K,ee,he=this.fillStyle,Y=this.strokeStyle,se=this.lineCap,ne=this.lineWidth,Se=Math.abs(ne*this.ctx.transform.scaleX),De=this.lineJoin,$=JSON.parse(JSON.stringify(this.path)),W=JSON.parse(JSON.stringify(this.path)),ie=[],te=0;te<W.length;te++)if(W[te].x!==void 0)for(var H=j.call(this,W[te]),Te=0;Te<H.length;Te+=1)ie.indexOf(H[Te])===-1&&ie.push(H[Te]);for(var Re=0;Re<ie.length;Re++)for(;this.pdf.internal.getNumberOfPages()<ie[Re];)x.call(this);if(J(ie),this.autoPaging)for(var ve=ie[0],be=ie[ie.length-1],_e=ve;_e<be+1;_e++){this.pdf.setPage(_e),this.fillStyle=he,this.strokeStyle=Y,this.lineCap=se,this.lineWidth=Se,this.lineJoin=De;var ke=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Le=_e===1?this.posY+this.margin[0]:this.margin[0],He=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],We=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ke=_e===1?0:He+(_e-2)*We;if(this.ctx.clip_path.length!==0){var et=this.path;K=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=U(K,this.posX+this.margin[3],-Ke+Le+this.ctx.prevPageLastElemOffset),fe.call(this,C,!0),this.path=et}if(ee=JSON.parse(JSON.stringify($)),this.path=U(ee,this.posX+this.margin[3],-Ke+Le+this.ctx.prevPageLastElemOffset),M===!1||_e===0){var at=(_e>ve||_e<be)&&P.call(this);at&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ke,We,null).clip().discardPath()),fe.call(this,C,M),at&&this.pdf.restoreGraphicsState()}this.lineWidth=ne}else this.lineWidth=Se,fe.call(this,C,M),this.lineWidth=ne;this.path=$},fe=function(C,M){if((C!=="stroke"||M||!L.call(this))&&(C==="stroke"||M||!g.call(this))){for(var K,ee,he=[],Y=this.path,se=0;se<Y.length;se++){var ne=Y[se];switch(ne.type){case"begin":he.push({begin:!0});break;case"close":he.push({close:!0});break;case"mt":he.push({start:ne,deltas:[],abs:[]});break;case"lt":var Se=he.length;if(Y[se-1]&&!isNaN(Y[se-1].x)&&(K=[ne.x-Y[se-1].x,ne.y-Y[se-1].y],Se>0)){for(;Se>=0;Se--)if(he[Se-1].close!==!0&&he[Se-1].begin!==!0){he[Se-1].deltas.push(K),he[Se-1].abs.push(ne);break}}break;case"bct":K=[ne.x1-Y[se-1].x,ne.y1-Y[se-1].y,ne.x2-Y[se-1].x,ne.y2-Y[se-1].y,ne.x-Y[se-1].x,ne.y-Y[se-1].y],he[he.length-1].deltas.push(K);break;case"qct":var De=Y[se-1].x+2/3*(ne.x1-Y[se-1].x),$=Y[se-1].y+2/3*(ne.y1-Y[se-1].y),W=ne.x+2/3*(ne.x1-ne.x),ie=ne.y+2/3*(ne.y1-ne.y),te=ne.x,H=ne.y;K=[De-Y[se-1].x,$-Y[se-1].y,W-Y[se-1].x,ie-Y[se-1].y,te-Y[se-1].x,H-Y[se-1].y],he[he.length-1].deltas.push(K);break;case"arc":he.push({deltas:[],abs:[],arc:!0}),Array.isArray(he[he.length-1].abs)&&he[he.length-1].abs.push(ne)}}ee=M?null:C==="stroke"?"stroke":"fill";for(var Te=!1,Re=0;Re<he.length;Re++)if(he[Re].arc)for(var ve=he[Re].abs,be=0;be<ve.length;be++){var _e=ve[be];_e.type==="arc"?S.call(this,_e.x,_e.y,_e.radius,_e.startAngle,_e.endAngle,_e.counterclockwise,void 0,M,!Te):I.call(this,_e.x,_e.y),Te=!0}else if(he[Re].close===!0)this.pdf.internal.out("h"),Te=!1;else if(he[Re].begin!==!0){var ke=he[Re].start.x,Le=he[Re].start.y;z.call(this,he[Re].deltas,ke,Le),Te=!0}ee&&O.call(this,ee),M&&F.call(this)}},Ie=function(C){var M=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,K=M*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return C-K;case"top":return C+M-K;case"hanging":return C+M-2*K;case"middle":return C+M/2-K;case"ideographic":return C;case"alphabetic":default:return C}},T=function(C){return C+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};p.prototype.createLinearGradient=function(){var C=function(){};return C.colorStops=[],C.addColorStop=function(M,K){this.colorStops.push([M,K])},C.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},C.isCanvasGradient=!0,C},p.prototype.createPattern=function(){return this.createLinearGradient()},p.prototype.createRadialGradient=function(){return this.createLinearGradient()};var S=function(C,M,K,ee,he,Y,se,ne,Se){for(var De=ae.call(this,K,ee,he,Y),$=0;$<De.length;$++){var W=De[$];$===0&&(Se?w.call(this,W.x1+C,W.y1+M):I.call(this,W.x1+C,W.y1+M)),re.call(this,C,M,W.x2,W.y2,W.x3,W.y3,W.x4,W.y4)}ne?F.call(this):O.call(this,se)},O=function(C){switch(C){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},F=function(){this.pdf.clip(),this.pdf.discardPath()},w=function(C,M){this.pdf.internal.out(n(C)+" "+r(M)+" m")},E=function(C){var M;switch(C.align){case"right":case"end":M="right";break;case"center":M="center";break;case"left":case"start":default:M="left"}var K=this.pdf.getTextDimensions(C.text),ee=Ie.call(this,C.y),he=T.call(this,ee)-K.h,Y=this.ctx.transform.applyToPoint(new o(C.x,ee)),se=this.ctx.transform.decompose(),ne=new l;ne=(ne=(ne=ne.multiply(se.translate)).multiply(se.skew)).multiply(se.scale);for(var Se,De,$,W=this.ctx.transform.applyToRectangle(new a(C.x,ee,K.w,K.h)),ie=ne.applyToRectangle(new a(C.x,he,K.w,K.h)),te=j.call(this,ie),H=[],Te=0;Te<te.length;Te+=1)H.indexOf(te[Te])===-1&&H.push(te[Te]);if(J(H),this.autoPaging)for(var Re=H[0],ve=H[H.length-1],be=Re;be<ve+1;be++){this.pdf.setPage(be);var _e=be===1?this.posY+this.margin[0]:this.margin[0],ke=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Le=this.pdf.internal.pageSize.height-this.margin[2],He=Le-this.margin[0],We=this.pdf.internal.pageSize.width-this.margin[1],Ke=We-this.margin[3],et=be===1?0:ke+(be-2)*He;if(this.ctx.clip_path.length!==0){var at=this.path;Se=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=U(Se,this.posX+this.margin[3],-1*et+_e),fe.call(this,"fill",!0),this.path=at}var it=U([JSON.parse(JSON.stringify(ie))],this.posX+this.margin[3],-et+_e+this.ctx.prevPageLastElemOffset)[0];C.scale>=.01&&(De=this.pdf.internal.getFontSize(),this.pdf.setFontSize(De*C.scale),$=this.lineWidth,this.lineWidth=$*C.scale);var ct=this.autoPaging!=="text";if(ct||it.y+it.h<=Le){if(ct||it.y>=_e&&it.x<=We){var Ye=ct?C.text:this.pdf.splitTextToSize(C.text,C.maxWidth||We-it.x)[0],Ft=U([JSON.parse(JSON.stringify(W))],this.posX+this.margin[3],-et+_e+this.ctx.prevPageLastElemOffset)[0],Pt=ct&&(be>Re||be<ve)&&P.call(this);Pt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ke,He,null).clip().discardPath()),this.pdf.text(Ye,Ft.x,Ft.y,{angle:C.angle,align:M,renderingMode:C.renderingMode}),Pt&&this.pdf.restoreGraphicsState()}}else it.y<Le&&(this.ctx.prevPageLastElemOffset+=Le-it.y);C.scale>=.01&&(this.pdf.setFontSize(De),this.lineWidth=$)}else C.scale>=.01&&(De=this.pdf.internal.getFontSize(),this.pdf.setFontSize(De*C.scale),$=this.lineWidth,this.lineWidth=$*C.scale),this.pdf.text(C.text,Y.x+this.posX,Y.y+this.posY,{angle:C.angle,align:M,renderingMode:C.renderingMode,maxWidth:C.maxWidth}),C.scale>=.01&&(this.pdf.setFontSize(De),this.lineWidth=$)},I=function(C,M,K,ee){K=K||0,ee=ee||0,this.pdf.internal.out(n(C+K)+" "+r(M+ee)+" l")},z=function(C,M,K){return this.pdf.lines(C,M,K,null,null)},re=function(C,M,K,ee,he,Y,se,ne){this.pdf.internal.out([e(i(K+C)),e(s(ee+M)),e(i(he+C)),e(s(Y+M)),e(i(se+C)),e(s(ne+M)),"c"].join(" "))},ae=function(C,M,K,ee){for(var he=2*Math.PI,Y=Math.PI/2;M>K;)M-=he;var se=Math.abs(K-M);se<he&&ee&&(se=he-se);for(var ne=[],Se=ee?-1:1,De=M;se>1e-5;){var $=De+Se*Math.min(se,Y);ne.push(ge.call(this,C,De,$)),se-=Math.abs($-De),De=$}return ne},ge=function(C,M,K){var ee=(K-M)/2,he=C*Math.cos(ee),Y=C*Math.sin(ee),se=he,ne=-Y,Se=se*se+ne*ne,De=Se+se*he+ne*Y,$=4/3*(Math.sqrt(2*Se*De)-De)/(se*Y-ne*he),W=se-$*ne,ie=ne+$*se,te=W,H=-ie,Te=ee+M,Re=Math.cos(Te),ve=Math.sin(Te);return{x1:C*Math.cos(M),y1:C*Math.sin(M),x2:W*Re-ie*ve,y2:W*ve+ie*Re,x3:te*Re-H*ve,y3:te*ve+H*Re,x4:C*Math.cos(K),y4:C*Math.sin(K)}},ce=function(C){return 180*C/Math.PI},xe=function(C,M,K,ee,he,Y){var se=C+.5*(K-C),ne=M+.5*(ee-M),Se=he+.5*(K-he),De=Y+.5*(ee-Y),$=Math.min(C,he,se,Se),W=Math.max(C,he,se,Se),ie=Math.min(M,Y,ne,De),te=Math.max(M,Y,ne,De);return new a($,ie,W-$,te-ie)},Pe=function(C,M,K,ee,he,Y,se,ne){var Se,De,$,W,ie,te,H,Te,Re,ve,be,_e,ke,Le,He=K-C,We=ee-M,Ke=he-K,et=Y-ee,at=se-he,it=ne-Y;for(De=0;De<41;De++)Re=(H=($=C+(Se=De/40)*He)+Se*((ie=K+Se*Ke)-$))+Se*(ie+Se*(he+Se*at-ie)-H),ve=(Te=(W=M+Se*We)+Se*((te=ee+Se*et)-W))+Se*(te+Se*(Y+Se*it-te)-Te),De==0?(be=Re,_e=ve,ke=Re,Le=ve):(be=Math.min(be,Re),_e=Math.min(_e,ve),ke=Math.max(ke,Re),Le=Math.max(Le,ve));return new a(Math.round(be),Math.round(_e),Math.round(ke-be),Math.round(Le-_e))},Qe=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var C,M,K=(C=this.ctx.lineDash,M=this.ctx.lineDashOffset,JSON.stringify({lineDash:C,lineDashOffset:M}));this.prevLineDash!==K&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=K)}}})(gt.API),function(t){var e=function(s){var o,a,l,h,d,p,v,g,L,P;for(a=[],l=0,h=(s+=o="\0\0\0\0".slice(s.length%4||4)).length;h>l;l+=4)(d=(s.charCodeAt(l)<<24)+(s.charCodeAt(l+1)<<16)+(s.charCodeAt(l+2)<<8)+s.charCodeAt(l+3))!==0?(p=(d=((d=((d=((d=(d-(P=d%85))/85)-(L=d%85))/85)-(g=d%85))/85)-(v=d%85))/85)%85,a.push(p+33,v+33,g+33,L+33,P+33)):a.push(122);return function(j,x){for(var U=x;U>0;U--)j.pop()}(a,o.length),String.fromCharCode.apply(String,a)+"~>"},n=function(s){var o,a,l,h,d,p=String,v="length",g=255,L="charCodeAt",P="slice",j="replace";for(s[P](-2),s=s[P](0,-2)[j](/\s/g,"")[j]("z","!!!!!"),l=[],h=0,d=(s+=o="uuuuu"[P](s[v]%5||5))[v];d>h;h+=5)a=52200625*(s[L](h)-33)+614125*(s[L](h+1)-33)+7225*(s[L](h+2)-33)+85*(s[L](h+3)-33)+(s[L](h+4)-33),l.push(g&a>>24,g&a>>16,g&a>>8,g&a);return function(x,U){for(var J=U;J>0;J--)x.pop()}(l,o[v]),p.fromCharCode.apply(p,l)},r=function(s){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),o.test(s)===!1)return"";for(var a="",l=0;l<s.length;l+=2)a+=String.fromCharCode("0x"+(s[l]+s[l+1]));return a},i=function(s){for(var o=new Uint8Array(s.length),a=s.length;a--;)o[a]=s.charCodeAt(a);return s=(o=Up(o)).reduce(function(l,h){return l+String.fromCharCode(h)},"")};t.processDataByFilters=function(s,o){var a=0,l=s||"",h=[];for(typeof(o=o||[])=="string"&&(o=[o]),a=0;a<o.length;a+=1)switch(o[a]){case"ASCII85Decode":case"/ASCII85Decode":l=n(l),h.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),h.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=r(l),h.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">",h.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=i(l),h.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[a]+'" is not implemented')}return{data:l,reverseChain:h.reverse().join(" ")}}}(gt.API),function(t){t.loadFile=function(e,n,r){return function(i,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var a=void 0;try{a=function(l,h,d){var p=new XMLHttpRequest,v=0,g=function(L){var P=L.length,j=[],x=String.fromCharCode;for(v=0;v<P;v+=1)j.push(x(255&L.charCodeAt(v)));return j.join("")};if(p.open("GET",l,!h),p.overrideMimeType("text/plain; charset=x-user-defined"),h===!1&&(p.onload=function(){p.status===200?d(g(this.responseText)):d(void 0)}),p.send(null),h&&p.status===200)return g(p.responseText)}(i,s,o)}catch{}return a}(e,n,r)},t.loadImageFile=t.loadFile}(gt.API),function(t){function e(){return(mt.html2canvas?Promise.resolve(mt.html2canvas):Dp(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function n(){return(mt.DOMPurify?Promise.resolve(mt.DOMPurify):Dp(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var r=function(o){var a=Zt(o);return a==="undefined"?"undefined":a==="string"||o instanceof String?"string":a==="number"||o instanceof Number?"number":a==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":a==="object"?"object":"unknown"},i=function(o,a){var l=document.createElement(o);for(var h in a.className&&(l.className=a.className),a.innerHTML&&a.dompurify&&(l.innerHTML=a.dompurify.sanitize(a.innerHTML)),a.style)l.style[h]=a.style[h];return l},s=function o(a){var l=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),h=o.convert(Promise.resolve(),l);return h=(h=h.setProgress(1,o,1,[o])).set(a)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(o,a){return o.__proto__=a||s.prototype,o},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(o,a){return this.then(function(){switch(a=a||function(l){switch(r(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(n).then(function(l){return this.set({src:i("div",{innerHTML:o,dompurify:l})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},s.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},a=function l(h,d){for(var p=h.nodeType===3?document.createTextNode(h.nodeValue):h.cloneNode(!1),v=h.firstChild;v;v=v.nextSibling)d!==!0&&v.nodeType===1&&v.nodeName==="SCRIPT"||p.appendChild(l(v,d));return h.nodeType===1&&(h.nodeName==="CANVAS"?(p.width=h.width,p.height=h.height,p.getContext("2d").drawImage(h,0,0)):h.nodeName!=="TEXTAREA"&&h.nodeName!=="SELECT"||(p.value=h.value),p.addEventListener("load",function(){p.scrollTop=h.scrollTop,p.scrollLeft=h.scrollLeft},!0)),p}(this.prop.src,this.opt.html2canvas.javascriptEnabled);a.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(a),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,a(this.prop.container,l)}).then(function(a){(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=this.opt.jsPDF,h=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,p=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete p.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=h,h)for(var v=0;v<h.length;++v){var g=h[v],L=g.src.find(function(P){return P.format==="truetype"});L&&l.addFont(L.url,g.ref.name,g.ref.style)}return p.windowHeight=p.windowHeight||0,p.windowHeight=p.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):p.windowHeight,l.context2d.save(!0),a(this.prop.container,p)}).then(function(a){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(o,a,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(o,a):this.outputPdf(o,a)},s.prototype.outputPdf=function(o,a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,a)})},s.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},s.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(o){if(r(o)!=="object")return this;var a=Object.keys(o||{}).map(function(l){if(l in s.template.prop)return function(){this.prop[l]=o[l]};switch(l){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[l]=o[l]}}},this);return this.then(function(){return this.thenList(a)})},s.prototype.get=function(o,a){return this.then(function(){var l=o in s.template.prop?this.prop[o]:this.opt[o];return a?a(l):l})},s.prototype.setMargin=function(o){return this.then(function(){switch(r(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},s.prototype.setPageSize=function(o){function a(l,h){return Math.floor(l*h/72*96)}return this.then(function(){(o=o||gt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:a(o.inner.width,o.k),height:a(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},s.prototype.setProgress=function(o,a,l,h){return o!=null&&(this.progress.val=o),a!=null&&(this.progress.state=a),l!=null&&(this.progress.n=l),h!=null&&(this.progress.stack=h),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(o,a,l,h){return this.setProgress(o?this.progress.val+o:null,a||null,l?this.progress.n+l:null,h?this.progress.stack.concat(h):null)},s.prototype.then=function(o,a){var l=this;return this.thenCore(o,a,function(h,d){return l.updateProgress(null,null,1,[h]),Promise.prototype.then.call(this,function(p){return l.updateProgress(null,h),p}).then(h,d).then(function(p){return l.updateProgress(1),p})})},s.prototype.thenCore=function(o,a,l){l=l||Promise.prototype.then,o&&(o=o.bind(this)),a&&(a=a.bind(this));var h=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),d=l.call(h,o,a);return s.convert(d,this.__proto__)},s.prototype.thenExternal=function(o,a){return Promise.prototype.then.call(this,o,a)},s.prototype.thenList=function(o){var a=this;return o.forEach(function(l){a=a.thenCore(l)}),a},s.prototype.catch=function(o){o&&(o=o.bind(this));var a=Promise.prototype.catch.call(this,o);return s.convert(a,this)},s.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},s.prototype.error=function(o){return this.then(function(){throw new Error(o)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,gt.getPageSize=function(o,a,l){if(Zt(o)==="object"){var h=o;o=h.orientation,a=h.unit||a,l=h.format||l}a=a||"mm",l=l||"a4",o=(""+(o||"P")).toLowerCase();var d,p=(""+l).toLowerCase(),v={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(a){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+a}var g,L=0,P=0;if(v.hasOwnProperty(p))L=v[p][1]/d,P=v[p][0]/d;else try{L=l[1],P=l[0]}catch{throw new Error("Invalid format: "+l)}if(o==="p"||o==="portrait")o="p",P>L&&(g=P,P=L,L=g);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",L>P&&(g=P,P=L,L=g)}return{width:P,height:L,unit:a,k:d,orientation:o}},t.html=function(o,a){(a=a||{}).callback=a.callback||function(){},a.html2canvas=a.html2canvas||{},a.html2canvas.canvas=a.html2canvas.canvas||this.canvas,a.jsPDF=a.jsPDF||this,a.fontFaces=a.fontFaces?a.fontFaces.map(Gp):null;var l=new s(a);return a.worker?l:l.from(o).doCallback()}}(gt.API),gt.API.addJS=function(t){return f2=t,this.internal.events.subscribe("postPutResources",function(){Ah=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Ah+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),h2=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+f2+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Ah!==void 0&&h2!==void 0&&this.internal.out("/Names <</JavaScript "+Ah+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),s=0;s<i.length;s++){var o=i[s],a=r.exec(o);if(a!=null){var l=a[1];n.internal.newObjectDeferredBegin(l,!1)}n.internal.write(o)}if(this.outline.createNamedDestinations){var h=this.internal.pages.length,d=[];for(s=0;s<h;s++){var p=n.internal.newObject();d.push(p);var v=n.internal.getPageInfo(s+1);n.internal.write("<< /D["+v.objId+" 0 R /XYZ null null null]>> endobj")}var g=n.internal.newObject();for(n.internal.write("<< /Names [ "),s=0;s<d.length;s++)n.internal.write("(page_"+(s+1)+")"+d[s]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+g+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,s){var o={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(o),o},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var o=r.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var a=this.count=this.count_r({count:0},o);if(a>0&&this.line("/Count "+a),o.options&&o.options.pageNumber){var l=n.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var h=0;h<r.children.length;h++)this.renderItems(r.children[h])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(gt.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,i,s,o,a){var l,h=this.decode.DCT_DECODE,d=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=o||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(l=function(p){for(var v,g=256*p.charCodeAt(4)+p.charCodeAt(5),L=p.length,P={width:0,height:0,numcomponents:1},j=4;j<L;j+=2){if(j+=g,e.indexOf(p.charCodeAt(j+1))!==-1){v=256*p.charCodeAt(j+5)+p.charCodeAt(j+6),P={width:256*p.charCodeAt(j+7)+p.charCodeAt(j+8),height:v,numcomponents:p.charCodeAt(j+9)};break}g=256*p.charCodeAt(j+2)+p.charCodeAt(j+3)}return P}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}d={data:n,width:l.width,height:l.height,colorSpace:a,bitsPerComponent:8,filter:h,index:r,alias:i}}return d}}(gt.API);var Tl,Ih,d2,p2,g2,hR=function(){var t,e,n;function r(s){var o,a,l,h,d,p,v,g,L,P,j,x,U,J;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},p=null;;){switch(o=this.readUInt32(),L=(function(){var Z,fe;for(fe=[],Z=0;Z<4;++Z)fe.push(String.fromCharCode(this.data[this.pos++]));return fe}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":p&&this.animation.frames.push(p),this.pos+=4,p={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},d=this.readUInt16(),h=this.readUInt16()||100,p.delay=1e3*d/h,p.disposeOp=this.data[this.pos++],p.blendOp=this.data[this.pos++],p.data=[];break;case"IDAT":case"fdAT":for(L==="fdAT"&&(this.pos+=4,o-=4),s=(p!=null?p.data:void 0)||this.imgData,x=0;0<=o?x<o:x>o;0<=o?++x:--x)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((P=l-this.transparency.indexed.length)>0)for(U=0;0<=P?U<P:U>P;0<=P?++U:--U)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":v=(j=this.read(o)).indexOf(0),g=String.fromCharCode.apply(String,j.slice(0,v)),this.text[g]=String.fromCharCode.apply(String,j.slice(v+1));break;case"IEND":return p&&this.animation.frames.push(p),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(J=this.colorType)===4||J===6,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(s){var o,a;for(a=[],o=0;0<=s?o<s:o>s;0<=s?++o:--o)a.push(this.data[this.pos++]);return a},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(s){var o=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*o),l=0,h=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function d(p,v,g,L){var P,j,x,U,J,Z,fe,Ie,T,S,O,F,w,E,I,z,re,ae,ge,ce,xe,Pe=Math.ceil((h.width-p)/g),Qe=Math.ceil((h.height-v)/L),C=h.width==Pe&&h.height==Qe;for(E=o*Pe,F=C?a:new Uint8Array(E*Qe),Z=s.length,w=0,j=0;w<Qe&&l<Z;){switch(s[l++]){case 0:for(U=re=0;re<E;U=re+=1)F[j++]=s[l++];break;case 1:for(U=ae=0;ae<E;U=ae+=1)P=s[l++],J=U<o?0:F[j-o],F[j++]=(P+J)%256;break;case 2:for(U=ge=0;ge<E;U=ge+=1)P=s[l++],x=(U-U%o)/o,I=w&&F[(w-1)*E+x*o+U%o],F[j++]=(I+P)%256;break;case 3:for(U=ce=0;ce<E;U=ce+=1)P=s[l++],x=(U-U%o)/o,J=U<o?0:F[j-o],I=w&&F[(w-1)*E+x*o+U%o],F[j++]=(P+Math.floor((J+I)/2))%256;break;case 4:for(U=xe=0;xe<E;U=xe+=1)P=s[l++],x=(U-U%o)/o,J=U<o?0:F[j-o],w===0?I=z=0:(I=F[(w-1)*E+x*o+U%o],z=x&&F[(w-1)*E+(x-1)*o+U%o]),fe=J+I-z,Ie=Math.abs(fe-J),S=Math.abs(fe-I),O=Math.abs(fe-z),T=Ie<=S&&Ie<=O?J:S<=O?I:z,F[j++]=(P+T)%256;break;default:throw new Error("Invalid filter algorithm: "+s[l-1])}if(!C){var M=((v+w*L)*h.width+p)*o,K=w*E;for(U=0;U<Pe;U+=1){for(var ee=0;ee<o;ee+=1)a[M++]=F[K++];M+=(g-1)*o}}w++}}return s=HP(s),h.interlaceMethod==1?(d(0,0,8,8),d(4,0,8,8),d(0,4,4,8),d(2,0,4,4),d(0,2,2,4),d(1,0,2,2),d(0,1,1,2)):d(0,0,1,1),a},r.prototype.decodePalette=function(){var s,o,a,l,h,d,p,v,g;for(a=this.palette,d=this.transparency.indexed||[],h=new Uint8Array((d.length||0)+a.length),l=0,s=0,o=p=0,v=a.length;p<v;o=p+=3)h[l++]=a[o],h[l++]=a[o+1],h[l++]=a[o+2],h[l++]=(g=d[s++])!=null?g:255;return h},r.prototype.copyToImageData=function(s,o){var a,l,h,d,p,v,g,L,P,j,x;if(l=this.colors,P=null,a=this.hasAlphaChannel,this.palette.length&&(P=(x=this._decodedPalette)!=null?x:this._decodedPalette=this.decodePalette(),l=4,a=!0),L=(h=s.data||s).length,p=P||o,d=v=0,l===1)for(;d<L;)g=P?4*o[d/4]:v,j=p[g++],h[d++]=j,h[d++]=j,h[d++]=j,h[d++]=a?p[g++]:255,v=g;else for(;d<L;)g=P?4*o[d/4]:v,h[d++]=p[g++],h[d++]=p[g++],h[d++]=p[g++],h[d++]=a?p[g++]:255,v=g},r.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var i=function(){if(Object.prototype.toString.call(mt)==="[object Window]"){try{e=mt.document.createElement("canvas"),n=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),t=function(s){var o;if(i()===!0)return n.width=s.width,n.height=s.height,n.clearRect(0,0,s.width,s.height),n.putImageData(s,0,0),(o=new Image).src=e.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(s){var o,a,l,h,d,p,v,g;if(this.animation){for(g=[],a=d=0,p=(v=this.animation.frames).length;d<p;a=++d)o=v[a],l=s.createImageData(o.width,o.height),h=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(l,h),o.imageData=l,g.push(o.image=t(l));return g}},r.prototype.renderFrame=function(s,o){var a,l,h;return a=(l=this.animation.frames)[o],h=l[o-1],o===0&&s.clearRect(0,0,this.width,this.height),(h!=null?h.disposeOp:void 0)===1?s.clearRect(h.xOffset,h.yOffset,h.width,h.height):(h!=null?h.disposeOp:void 0)===2&&s.putImageData(h.imageData,h.xOffset,h.yOffset),a.blendOp===0&&s.clearRect(a.xOffset,a.yOffset,a.width,a.height),s.drawImage(a.image,a.xOffset,a.yOffset)},r.prototype.animate=function(s){var o,a,l,h,d,p,v=this;return a=0,p=this.animation,h=p.numFrames,l=p.frames,d=p.numPlays,(o=function(){var g,L;if(g=a++%h,L=l[g],v.renderFrame(s,g),h>1&&a/h<d)return v.animation._timeout=setTimeout(o,L.delay)})()},r.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},r.prototype.render=function(s){var o,a;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,o=s.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(a=o.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),o.putImageData(a,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function fR(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,i=t[e++],s=i>>7,o=1<<(7&i)+1;t[e++],t[e++];var a=null,l=null;s&&(a=e,l=o,e+=3*o);var h=!0,d=[],p=0,v=null,g=0,L=null;for(this.width=n,this.height=r;h&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,L=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((w=t[e++])>=0))throw Error("Invalid block size");if(w===0)break;e+=w}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var P=t[e++];p=t[e++]|t[e++]<<8,v=t[e++],!(1&P)&&(v=null),g=P>>2&7,e++;break;case 254:for(;;){if(!((w=t[e++])>=0))throw Error("Invalid block size");if(w===0)break;e+=w}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var j=t[e++]|t[e++]<<8,x=t[e++]|t[e++]<<8,U=t[e++]|t[e++]<<8,J=t[e++]|t[e++]<<8,Z=t[e++],fe=Z>>6&1,Ie=1<<(7&Z)+1,T=a,S=l,O=!1;Z>>7&&(O=!0,T=e,S=Ie,e+=3*Ie);var F=e;for(e++;;){var w;if(!((w=t[e++])>=0))throw Error("Invalid block size");if(w===0)break;e+=w}d.push({x:j,y:x,width:U,height:J,has_local_palette:O,palette_offset:T,palette_size:S,data_offset:F,data_length:e-F,transparent_index:v,interlaced:!!fe,delay:p,disposal:g});break;case 59:h=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return L},this.frameInfo=function(E){if(E<0||E>=d.length)throw new Error("Frame index out of range.");return d[E]},this.decodeAndBlitFrameBGRA=function(E,I){var z=this.frameInfo(E),re=z.width*z.height,ae=new Uint8Array(re);m2(t,z.data_offset,ae,re);var ge=z.palette_offset,ce=z.transparent_index;ce===null&&(ce=256);var xe=z.width,Pe=n-xe,Qe=xe,C=4*(z.y*n+z.x),M=4*((z.y+z.height)*n+z.x),K=C,ee=4*Pe;z.interlaced===!0&&(ee+=4*n*7);for(var he=8,Y=0,se=ae.length;Y<se;++Y){var ne=ae[Y];if(Qe===0&&(Qe=xe,(K+=ee)>=M&&(ee=4*Pe+4*n*(he-1),K=C+(xe+Pe)*(he<<1),he>>=1)),ne===ce)K+=4;else{var Se=t[ge+3*ne],De=t[ge+3*ne+1],$=t[ge+3*ne+2];I[K++]=$,I[K++]=De,I[K++]=Se,I[K++]=255}--Qe}},this.decodeAndBlitFrameRGBA=function(E,I){var z=this.frameInfo(E),re=z.width*z.height,ae=new Uint8Array(re);m2(t,z.data_offset,ae,re);var ge=z.palette_offset,ce=z.transparent_index;ce===null&&(ce=256);var xe=z.width,Pe=n-xe,Qe=xe,C=4*(z.y*n+z.x),M=4*((z.y+z.height)*n+z.x),K=C,ee=4*Pe;z.interlaced===!0&&(ee+=4*n*7);for(var he=8,Y=0,se=ae.length;Y<se;++Y){var ne=ae[Y];if(Qe===0&&(Qe=xe,(K+=ee)>=M&&(ee=4*Pe+4*n*(he-1),K=C+(xe+Pe)*(he<<1),he>>=1)),ne===ce)K+=4;else{var Se=t[ge+3*ne],De=t[ge+3*ne+1],$=t[ge+3*ne+2];I[K++]=Se,I[K++]=De,I[K++]=$,I[K++]=255}--Qe}}}function m2(t,e,n,r){for(var i=t[e++],s=1<<i,o=s+1,a=o+1,l=i+1,h=(1<<l)-1,d=0,p=0,v=0,g=t[e++],L=new Int32Array(4096),P=null;;){for(;d<16&&g!==0;)p|=t[e++]<<d,d+=8,g===1?g=t[e++]:--g;if(d<l)break;var j=p&h;if(p>>=l,d-=l,j!==s){if(j===o)break;for(var x=j<a?j:P,U=0,J=x;J>s;)J=L[J]>>8,++U;var Z=J;if(v+U+(x!==j?1:0)>r)return void on.log("Warning, gif stream longer than expected.");n[v++]=Z;var fe=v+=U;for(x!==j&&(n[v++]=Z),J=x;U--;)J=L[J],n[--fe]=255&J,J>>=8;P!==null&&a<4096&&(L[a++]=P<<8|Z,a>=h+1&&l<12&&(++l,h=h<<1|1)),P=j}else a=o+1,h=(1<<(l=i+1))-1,P=null}return v!==r&&on.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Kd(t){var e,n,r,i,s,o=Math.floor,a=new Array(64),l=new Array(64),h=new Array(64),d=new Array(64),p=new Array(65535),v=new Array(65535),g=new Array(64),L=new Array(64),P=[],j=0,x=7,U=new Array(64),J=new Array(64),Z=new Array(64),fe=new Array(256),Ie=new Array(2048),T=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],S=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],O=[0,1,2,3,4,5,6,7,8,9,10,11],F=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],w=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],E=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],I=[0,1,2,3,4,5,6,7,8,9,10,11],z=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],re=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ae(C,M){for(var K=0,ee=0,he=new Array,Y=1;Y<=16;Y++){for(var se=1;se<=C[Y];se++)he[M[ee]]=[],he[M[ee]][0]=K,he[M[ee]][1]=Y,ee++,K++;K*=2}return he}function ge(C){for(var M=C[0],K=C[1]-1;K>=0;)M&1<<K&&(j|=1<<x),K--,--x<0&&(j==255?(ce(255),ce(0)):ce(j),x=7,j=0)}function ce(C){P.push(C)}function xe(C){ce(C>>8&255),ce(255&C)}function Pe(C,M,K,ee,he){for(var Y,se=he[0],ne=he[240],Se=function(ve,be){var _e,ke,Le,He,We,Ke,et,at,it,ct,Ye=0;for(it=0;it<8;++it){_e=ve[Ye],ke=ve[Ye+1],Le=ve[Ye+2],He=ve[Ye+3],We=ve[Ye+4],Ke=ve[Ye+5],et=ve[Ye+6];var Ft=_e+(at=ve[Ye+7]),Pt=_e-at,Qn=ke+et,_t=ke-et,Rt=Le+Ke,Er=Le-Ke,kt=He+We,Ui=He-We,dn=Ft+kt,Yn=Ft-kt,Hr=Qn+Rt,ln=Qn-Rt;ve[Ye]=dn+Hr,ve[Ye+4]=dn-Hr;var ht=.707106781*(ln+Yn);ve[Ye+2]=Yn+ht,ve[Ye+6]=Yn-ht;var Mt=.382683433*((dn=Ui+Er)-(ln=_t+Pt)),si=.5411961*dn+Mt,Cn=1.306562965*ln+Mt,or=.707106781*(Hr=Er+_t),zr=Pt+or,rt=Pt-or;ve[Ye+5]=rt+si,ve[Ye+3]=rt-si,ve[Ye+1]=zr+Cn,ve[Ye+7]=zr-Cn,Ye+=8}for(Ye=0,it=0;it<8;++it){_e=ve[Ye],ke=ve[Ye+8],Le=ve[Ye+16],He=ve[Ye+24],We=ve[Ye+32],Ke=ve[Ye+40],et=ve[Ye+48];var Dr=_e+(at=ve[Ye+56]),ar=_e-at,kn=ke+et,In=ke-et,vn=Le+Ke,Dn=Le-Ke,no=He+We,vi=He-We,lr=Dr+no,Or=Dr-no,Tr=kn+vn,Sr=kn-vn;ve[Ye]=lr+Tr,ve[Ye+32]=lr-Tr;var En=.707106781*(Sr+Or);ve[Ye+16]=Or+En,ve[Ye+48]=Or-En;var Gr=.382683433*((lr=vi+Dn)-(Sr=In+ar)),ji=.5411961*lr+Gr,Bi=1.306562965*Sr+Gr,qi=.707106781*(Tr=Dn+In),_s=ar+qi,bs=ar-qi;ve[Ye+40]=bs+ji,ve[Ye+24]=bs-ji,ve[Ye+8]=_s+Bi,ve[Ye+56]=_s-Bi,Ye++}for(it=0;it<64;++it)ct=ve[it]*be[it],g[it]=ct>0?ct+.5|0:ct-.5|0;return g}(C,M),De=0;De<64;++De)L[T[De]]=Se[De];var $=L[0]-K;K=L[0],$==0?ge(ee[0]):(ge(ee[v[Y=32767+$]]),ge(p[Y]));for(var W=63;W>0&&L[W]==0;)W--;if(W==0)return ge(se),K;for(var ie,te=1;te<=W;){for(var H=te;L[te]==0&&te<=W;)++te;var Te=te-H;if(Te>=16){ie=Te>>4;for(var Re=1;Re<=ie;++Re)ge(ne);Te&=15}Y=32767+L[te],ge(he[(Te<<4)+v[Y]]),ge(p[Y]),te++}return W!=63&&ge(se),K}function Qe(C){C=Math.min(Math.max(C,1),100),s!=C&&(function(M){for(var K=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ee=0;ee<64;ee++){var he=o((K[ee]*M+50)/100);he=Math.min(Math.max(he,1),255),a[T[ee]]=he}for(var Y=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],se=0;se<64;se++){var ne=o((Y[se]*M+50)/100);ne=Math.min(Math.max(ne,1),255),l[T[se]]=ne}for(var Se=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],De=0,$=0;$<8;$++)for(var W=0;W<8;W++)h[De]=1/(a[T[De]]*Se[$]*Se[W]*8),d[De]=1/(l[T[De]]*Se[$]*Se[W]*8),De++}(C<50?Math.floor(5e3/C):Math.floor(200-2*C)),s=C)}this.encode=function(C,M){M&&Qe(M),P=new Array,j=0,x=7,xe(65496),xe(65504),xe(16),ce(74),ce(70),ce(73),ce(70),ce(0),ce(1),ce(1),ce(0),xe(1),xe(1),ce(0),ce(0),function(){xe(65499),xe(132),ce(0);for(var ke=0;ke<64;ke++)ce(a[ke]);ce(1);for(var Le=0;Le<64;Le++)ce(l[Le])}(),function(ke,Le){xe(65472),xe(17),ce(8),xe(Le),xe(ke),ce(3),ce(1),ce(17),ce(0),ce(2),ce(17),ce(1),ce(3),ce(17),ce(1)}(C.width,C.height),function(){xe(65476),xe(418),ce(0);for(var ke=0;ke<16;ke++)ce(S[ke+1]);for(var Le=0;Le<=11;Le++)ce(O[Le]);ce(16);for(var He=0;He<16;He++)ce(F[He+1]);for(var We=0;We<=161;We++)ce(w[We]);ce(1);for(var Ke=0;Ke<16;Ke++)ce(E[Ke+1]);for(var et=0;et<=11;et++)ce(I[et]);ce(17);for(var at=0;at<16;at++)ce(z[at+1]);for(var it=0;it<=161;it++)ce(re[it])}(),xe(65498),xe(12),ce(3),ce(1),ce(0),ce(2),ce(17),ce(3),ce(17),ce(0),ce(63),ce(0);var K=0,ee=0,he=0;j=0,x=7,this.encode.displayName="_encode_";for(var Y,se,ne,Se,De,$,W,ie,te,H=C.data,Te=C.width,Re=C.height,ve=4*Te,be=0;be<Re;){for(Y=0;Y<ve;){for(De=ve*be+Y,W=-1,ie=0,te=0;te<64;te++)$=De+(ie=te>>3)*ve+(W=4*(7&te)),be+ie>=Re&&($-=ve*(be+1+ie-Re)),Y+W>=ve&&($-=Y+W-ve+4),se=H[$++],ne=H[$++],Se=H[$++],U[te]=(Ie[se]+Ie[ne+256>>0]+Ie[Se+512>>0]>>16)-128,J[te]=(Ie[se+768>>0]+Ie[ne+1024>>0]+Ie[Se+1280>>0]>>16)-128,Z[te]=(Ie[se+1280>>0]+Ie[ne+1536>>0]+Ie[Se+1792>>0]>>16)-128;K=Pe(U,h,K,e,r),ee=Pe(J,d,ee,n,i),he=Pe(Z,d,he,n,i),Y+=32}be+=8}if(x>=0){var _e=[];_e[1]=x+1,_e[0]=(1<<x+1)-1,ge(_e)}return xe(65497),new Uint8Array(P)},t=t||50,function(){for(var C=String.fromCharCode,M=0;M<256;M++)fe[M]=C(M)}(),e=ae(S,O),n=ae(E,I),r=ae(F,w),i=ae(z,re),function(){for(var C=1,M=2,K=1;K<=15;K++){for(var ee=C;ee<M;ee++)v[32767+ee]=K,p[32767+ee]=[],p[32767+ee][1]=K,p[32767+ee][0]=ee;for(var he=-(M-1);he<=-C;he++)v[32767+he]=K,p[32767+he]=[],p[32767+he][1]=K,p[32767+he][0]=M-1+he;C<<=1,M<<=1}}(),function(){for(var C=0;C<256;C++)Ie[C]=19595*C,Ie[C+256>>0]=38470*C,Ie[C+512>>0]=7471*C+32768,Ie[C+768>>0]=-11059*C,Ie[C+1024>>0]=-21709*C,Ie[C+1280>>0]=32768*C+8421375,Ie[C+1536>>0]=-27439*C,Ie[C+1792>>0]=-5329*C}(),Qe(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Ni(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function y2(t){function e(S){if(!S)throw Error("assert :P")}function n(S,O,F){for(var w=0;4>w;w++)if(S[O+w]!=F.charCodeAt(w))return!0;return!1}function r(S,O,F,w,E){for(var I=0;I<E;I++)S[O+I]=F[w+I]}function i(S,O,F,w){for(var E=0;E<w;E++)S[O+E]=F}function s(S){return new Int32Array(S)}function o(S,O){for(var F=[],w=0;w<S;w++)F.push(new O);return F}function a(S,O){var F=[];return function w(E,I,z){for(var re=z[I],ae=0;ae<re&&(E.push(z.length>I+1?[]:new O),!(z.length<I+1));ae++)w(E[ae],I+1,z)}(F,0,S),F}var l=function(){var S=this;function O(c,f){for(var y=1<<f-1>>>0;c&y;)y>>>=1;return y?(c&y-1)+y:c}function F(c,f,y,b,N){e(!(b%y));do c[f+(b-=y)]=N;while(0<b)}function w(c,f,y,b,N){if(e(2328>=N),512>=N)var D=s(512);else if((D=s(N))==null)return 0;return function(V,q,G,Q,le,we){var Ae,ye,Me=q,Ne=1<<G,ue=s(16),de=s(16);for(e(le!=0),e(Q!=null),e(V!=null),e(0<G),ye=0;ye<le;++ye){if(15<Q[ye])return 0;++ue[Q[ye]]}if(ue[0]==le)return 0;for(de[1]=0,Ae=1;15>Ae;++Ae){if(ue[Ae]>1<<Ae)return 0;de[Ae+1]=de[Ae]+ue[Ae]}for(ye=0;ye<le;++ye)Ae=Q[ye],0<Q[ye]&&(we[de[Ae]++]=ye);if(de[15]==1)return(Q=new E).g=0,Q.value=we[0],F(V,Me,1,Ne,Q),Ne;var Oe,Ue=-1,Fe=Ne-1,nt=0,Xe=1,ft=1,tt=1<<G;for(ye=0,Ae=1,le=2;Ae<=G;++Ae,le<<=1){if(Xe+=ft<<=1,0>(ft-=ue[Ae]))return 0;for(;0<ue[Ae];--ue[Ae])(Q=new E).g=Ae,Q.value=we[ye++],F(V,Me+nt,le,tt,Q),nt=O(nt,Ae)}for(Ae=G+1,le=2;15>=Ae;++Ae,le<<=1){if(Xe+=ft<<=1,0>(ft-=ue[Ae]))return 0;for(;0<ue[Ae];--ue[Ae]){if(Q=new E,(nt&Fe)!=Ue){for(Me+=tt,Oe=1<<(Ue=Ae)-G;15>Ue&&!(0>=(Oe-=ue[Ue]));)++Ue,Oe<<=1;Ne+=tt=1<<(Oe=Ue-G),V[q+(Ue=nt&Fe)].g=Oe+G,V[q+Ue].value=Me-q-Ue}Q.g=Ae-G,Q.value=we[ye++],F(V,Me+(nt>>G),le,tt,Q),nt=O(nt,Ae)}}return Xe!=2*de[15]-1?0:Ne}(c,f,y,b,N,D)}function E(){this.value=this.g=0}function I(){this.value=this.g=0}function z(){this.G=o(5,E),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(er,I)}function re(c,f,y,b){e(c!=null),e(f!=null),e(2147483648>b),c.Ca=254,c.I=0,c.b=-8,c.Ka=0,c.oa=f,c.pa=y,c.Jd=f,c.Yc=y+b,c.Zc=4<=b?y+b-4+1:y,Y(c)}function ae(c,f){for(var y=0;0<f--;)y|=ne(c,128)<<f;return y}function ge(c,f){var y=ae(c,f);return se(c)?-y:y}function ce(c,f,y,b){var N,D=0;for(e(c!=null),e(f!=null),e(4294967288>b),c.Sb=b,c.Ra=0,c.u=0,c.h=0,4<b&&(b=4),N=0;N<b;++N)D+=f[y+N]<<8*N;c.Ra=D,c.bb=b,c.oa=f,c.pa=y}function xe(c){for(;8<=c.u&&c.bb<c.Sb;)c.Ra>>>=8,c.Ra+=c.oa[c.pa+c.bb]<<hl-8>>>0,++c.bb,c.u-=8;K(c)&&(c.h=1,c.u=0)}function Pe(c,f){if(e(0<=f),!c.h&&f<=ul){var y=M(c)&cl[f];return c.u+=f,xe(c),y}return c.h=1,c.u=0}function Qe(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function C(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function M(c){return c.Ra>>>(c.u&hl-1)>>>0}function K(c){return e(c.bb<=c.Sb),c.h||c.bb==c.Sb&&c.u>hl}function ee(c,f){c.u=f,c.h=K(c)}function he(c){c.u>=Ac&&(e(c.u>=Ac),xe(c))}function Y(c){e(c!=null&&c.oa!=null),c.pa<c.Zc?(c.I=(c.oa[c.pa++]|c.I<<8)>>>0,c.b+=8):(e(c!=null&&c.oa!=null),c.pa<c.Yc?(c.b+=8,c.I=c.oa[c.pa++]|c.I<<8):c.Ka?c.b=0:(c.I<<=8,c.b+=8,c.Ka=1))}function se(c){return ae(c,1)}function ne(c,f){var y=c.Ca;0>c.b&&Y(c);var b=c.b,N=y*f>>>8,D=(c.I>>>b>N)+0;for(D?(y-=N,c.I-=N+1<<b>>>0):y=N+1,b=y,N=0;256<=b;)N+=8,b>>=8;return b=7^N+Mr[b],c.b-=b,c.Ca=(y<<b)-1,D}function Se(c,f,y){c[f+0]=y>>24&255,c[f+1]=y>>16&255,c[f+2]=y>>8&255,c[f+3]=y>>0&255}function De(c,f){return c[f+0]<<0|c[f+1]<<8}function $(c,f){return De(c,f)|c[f+2]<<16}function W(c,f){return De(c,f)|De(c,f+2)<<16}function ie(c,f){var y=1<<f;return e(c!=null),e(0<f),c.X=s(y),c.X==null?0:(c.Mb=32-f,c.Xa=f,1)}function te(c,f){e(c!=null),e(f!=null),e(c.Xa==f.Xa),r(f.X,0,c.X,0,1<<f.Xa)}function H(){this.X=[],this.Xa=this.Mb=0}function Te(c,f,y,b){e(y!=null),e(b!=null);var N=y[0],D=b[0];return N==0&&(N=(c*D+f/2)/f),D==0&&(D=(f*N+c/2)/c),0>=N||0>=D?0:(y[0]=N,b[0]=D,1)}function Re(c,f){return c+(1<<f)-1>>>f}function ve(c,f){return((4278255360&c)+(4278255360&f)>>>0&4278255360)+((16711935&c)+(16711935&f)>>>0&16711935)>>>0}function be(c,f){S[f]=function(y,b,N,D,V,q,G){var Q;for(Q=0;Q<V;++Q){var le=S[c](q[G+Q-1],N,D+Q);q[G+Q]=ve(y[b+Q],le)}}}function _e(){this.ud=this.hd=this.jd=0}function ke(c,f){return((4278124286&(c^f))>>>1)+(c&f)>>>0}function Le(c){return 0<=c&&256>c?c:0>c?0:255<c?255:void 0}function He(c,f){return Le(c+(c-f+.5>>1))}function We(c,f,y){return Math.abs(f-y)-Math.abs(c-y)}function Ke(c,f,y,b,N,D,V){for(b=D[V-1],y=0;y<N;++y)D[V+y]=b=ve(c[f+y],b)}function et(c,f,y,b,N){var D;for(D=0;D<y;++D){var V=c[f+D],q=V>>8&255,G=16711935&(G=(G=16711935&V)+((q<<16)+q));b[N+D]=(4278255360&V)+G>>>0}}function at(c,f){f.jd=c>>0&255,f.hd=c>>8&255,f.ud=c>>16&255}function it(c,f,y,b,N,D){var V;for(V=0;V<b;++V){var q=f[y+V],G=q>>>8,Q=q,le=255&(le=(le=q>>>16)+((c.jd<<24>>24)*(G<<24>>24)>>>5));Q=255&(Q=(Q=Q+((c.hd<<24>>24)*(G<<24>>24)>>>5))+((c.ud<<24>>24)*(le<<24>>24)>>>5)),N[D+V]=(4278255360&q)+(le<<16)+Q}}function ct(c,f,y,b,N){S[f]=function(D,V,q,G,Q,le,we,Ae,ye){for(G=we;G<Ae;++G)for(we=0;we<ye;++we)Q[le++]=N(q[b(D[V++])])},S[c]=function(D,V,q,G,Q,le,we){var Ae=8>>D.b,ye=D.Ea,Me=D.K[0],Ne=D.w;if(8>Ae)for(D=(1<<D.b)-1,Ne=(1<<Ae)-1;V<q;++V){var ue,de=0;for(ue=0;ue<ye;++ue)ue&D||(de=b(G[Q++])),le[we++]=N(Me[de&Ne]),de>>=Ae}else S["VP8LMapColor"+y](G,Q,Me,Ne,le,we,V,q,ye)}}function Ye(c,f,y,b,N){for(y=f+y;f<y;){var D=c[f++];b[N++]=D>>16&255,b[N++]=D>>8&255,b[N++]=D>>0&255}}function Ft(c,f,y,b,N){for(y=f+y;f<y;){var D=c[f++];b[N++]=D>>16&255,b[N++]=D>>8&255,b[N++]=D>>0&255,b[N++]=D>>24&255}}function Pt(c,f,y,b,N){for(y=f+y;f<y;){var D=(V=c[f++])>>16&240|V>>12&15,V=V>>0&240|V>>28&15;b[N++]=D,b[N++]=V}}function Qn(c,f,y,b,N){for(y=f+y;f<y;){var D=(V=c[f++])>>16&248|V>>13&7,V=V>>5&224|V>>3&31;b[N++]=D,b[N++]=V}}function _t(c,f,y,b,N){for(y=f+y;f<y;){var D=c[f++];b[N++]=D>>0&255,b[N++]=D>>8&255,b[N++]=D>>16&255}}function Rt(c,f,y,b,N,D){if(D==0)for(y=f+y;f<y;)Se(b,((D=c[f++])[0]>>24|D[1]>>8&65280|D[2]<<8&16711680|D[3]<<24)>>>0),N+=32;else r(b,N,c,f,y)}function Er(c,f){S[f][0]=S[c+"0"],S[f][1]=S[c+"1"],S[f][2]=S[c+"2"],S[f][3]=S[c+"3"],S[f][4]=S[c+"4"],S[f][5]=S[c+"5"],S[f][6]=S[c+"6"],S[f][7]=S[c+"7"],S[f][8]=S[c+"8"],S[f][9]=S[c+"9"],S[f][10]=S[c+"10"],S[f][11]=S[c+"11"],S[f][12]=S[c+"12"],S[f][13]=S[c+"13"],S[f][14]=S[c+"0"],S[f][15]=S[c+"0"]}function kt(c){return c==Xf||c==Zf||c==Qu||c==ed}function Ui(){this.eb=[],this.size=this.A=this.fb=0}function dn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Yn(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Ui,this.f.kb=new dn,this.sd=null}function Hr(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function ln(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ht(c){return alert("todo:WebPSamplerProcessPlane"),c.T}function Mt(c,f){var y=c.T,b=f.ba.f.RGBA,N=b.eb,D=b.fb+c.ka*b.A,V=fi[f.ba.S],q=c.y,G=c.O,Q=c.f,le=c.N,we=c.ea,Ae=c.W,ye=f.cc,Me=f.dc,Ne=f.Mc,ue=f.Nc,de=c.ka,Oe=c.ka+c.T,Ue=c.U,Fe=Ue+1>>1;for(de==0?V(q,G,null,null,Q,le,we,Ae,Q,le,we,Ae,N,D,null,null,Ue):(V(f.ec,f.fc,q,G,ye,Me,Ne,ue,Q,le,we,Ae,N,D-b.A,N,D,Ue),++y);de+2<Oe;de+=2)ye=Q,Me=le,Ne=we,ue=Ae,le+=c.Rc,Ae+=c.Rc,D+=2*b.A,V(q,(G+=2*c.fa)-c.fa,q,G,ye,Me,Ne,ue,Q,le,we,Ae,N,D-b.A,N,D,Ue);return G+=c.fa,c.j+Oe<c.o?(r(f.ec,f.fc,q,G,Ue),r(f.cc,f.dc,Q,le,Fe),r(f.Mc,f.Nc,we,Ae,Fe),y--):1&Oe||V(q,G,null,null,Q,le,we,Ae,Q,le,we,Ae,N,D+b.A,null,null,Ue),y}function si(c,f,y){var b=c.F,N=[c.J];if(b!=null){var D=c.U,V=f.ba.S,q=V==Ju||V==Qu;f=f.ba.f.RGBA;var G=[0],Q=c.ka;G[0]=c.T,c.Kb&&(Q==0?--G[0]:(--Q,N[0]-=c.width),c.j+c.ka+c.T==c.o&&(G[0]=c.o-c.j-Q));var le=f.eb;Q=f.fb+Q*f.A,c=un(b,N[0],c.width,D,G,le,Q+(q?0:3),f.A),e(y==G),c&&kt(V)&&ui(le,Q,q,D,G,f.A)}return 0}function Cn(c){var f=c.ma,y=f.ba.S,b=11>y,N=y==Wu||y==Ku||y==Ju||y==Yf||y==12||kt(y);if(f.memory=null,f.Ib=null,f.Jb=null,f.Nd=null,!bc(f.Oa,c,N?11:12))return 0;if(N&&kt(y)&&Be(),c.da)alert("todo:use_scaling");else{if(b){if(f.Ib=ht,c.Kb){if(y=c.U+1>>1,f.memory=s(c.U+2*y),f.memory==null)return 0;f.ec=f.memory,f.fc=0,f.cc=f.ec,f.dc=f.fc+c.U,f.Mc=f.cc,f.Nc=f.dc+y,f.Ib=Mt,Be()}}else alert("todo:EmitYUV");N&&(f.Jb=si,b&&me())}if(b&&!vm){for(c=0;256>c;++c)V_[c]=89858*(c-128)+Xu>>Yu,B_[c]=-22014*(c-128)+Xu,j_[c]=-45773*(c-128),U_[c]=113618*(c-128)+Xu>>Yu;for(c=Rc;c<rd;++c)f=76283*(c-16)+Xu>>Yu,q_[c-Rc]=$t(f,255),H_[c-Rc]=$t(f+8>>4,15);vm=1}return 1}function or(c){var f=c.ma,y=c.U,b=c.T;return e(!(1&c.ka)),0>=y||0>=b?0:(y=f.Ib(c,f),f.Jb!=null&&f.Jb(c,f,y),f.Dc+=y,1)}function zr(c){c.ma.memory=null}function rt(c,f,y,b){return Pe(c,8)!=47?0:(f[0]=Pe(c,14)+1,y[0]=Pe(c,14)+1,b[0]=Pe(c,1),Pe(c,3)!=0?0:!c.h)}function Dr(c,f){if(4>c)return c+1;var y=c-2>>1;return(2+(1&c)<<y)+Pe(f,y)+1}function ar(c,f){return 120<f?f-120:1<=(y=((y=E_[f-1])>>4)*c+(8-(15&y)))?y:1;var y}function kn(c,f,y){var b=M(y),N=c[f+=255&b].g-8;return 0<N&&(ee(y,y.u+8),b=M(y),f+=c[f].value,f+=b&(1<<N)-1),ee(y,y.u+c[f].g),c[f].value}function In(c,f,y){return y.g+=c.g,y.value+=c.value<<f>>>0,e(8>=y.g),c.g}function vn(c,f,y){var b=c.xc;return e((f=b==0?0:c.vc[c.md*(y>>b)+(f>>b)])<c.Wb),c.Ya[f]}function Dn(c,f,y,b){var N=c.ab,D=c.c*f,V=c.C;f=V+f;var q=y,G=b;for(b=c.Ta,y=c.Ua;0<N--;){var Q=c.gc[N],le=V,we=f,Ae=q,ye=G,Me=(G=b,q=y,Q.Ea);switch(e(le<we),e(we<=Q.nc),Q.hc){case 2:ju(Ae,ye,(we-le)*Me,G,q);break;case 0:var Ne=le,ue=we,de=G,Oe=q,Ue=(tt=Q).Ea;Ne==0&&(Jf(Ae,ye,null,null,1,de,Oe),Ke(Ae,ye+1,0,0,Ue-1,de,Oe+1),ye+=Ue,Oe+=Ue,++Ne);for(var Fe=1<<tt.b,nt=Fe-1,Xe=Re(Ue,tt.b),ft=tt.K,tt=tt.w+(Ne>>tt.b)*Xe;Ne<ue;){var Bt=ft,Yt=tt,Vt=1;for(Ic(Ae,ye,de,Oe-Ue,1,de,Oe);Vt<Ue;){var Lt=(Vt&~nt)+Fe;Lt>Ue&&(Lt=Ue),(0,wo[Bt[Yt++]>>8&15])(Ae,ye+ +Vt,de,Oe+Vt-Ue,Lt-Vt,de,Oe+Vt),Vt=Lt}ye+=Ue,Oe+=Ue,++Ne&nt||(tt+=Xe)}we!=Q.nc&&r(G,q-Me,G,q+(we-le-1)*Me,Me);break;case 1:for(Me=Ae,ue=ye,Ue=(Ae=Q.Ea)-(Oe=Ae&~(de=(ye=1<<Q.b)-1)),Ne=Re(Ae,Q.b),Fe=Q.K,Q=Q.w+(le>>Q.b)*Ne;le<we;){for(nt=Fe,Xe=Q,ft=new _e,tt=ue+Oe,Bt=ue+Ae;ue<tt;)at(nt[Xe++],ft),Ia(ft,Me,ue,ye,G,q),ue+=ye,q+=ye;ue<Bt&&(at(nt[Xe++],ft),Ia(ft,Me,ue,Ue,G,q),ue+=Ue,q+=Ue),++le&de||(Q+=Ne)}break;case 3:if(Ae==G&&ye==q&&0<Q.b){for(ue=G,Ae=Me=q+(we-le)*Me-(Oe=(we-le)*Re(Q.Ea,Q.b)),ye=G,de=q,Ne=[],Oe=(Ue=Oe)-1;0<=Oe;--Oe)Ne[Oe]=ye[de+Oe];for(Oe=Ue-1;0<=Oe;--Oe)ue[Ae+Oe]=Ne[Oe];ai(Q,le,we,G,Me,G,q)}else ai(Q,le,we,Ae,ye,G,q)}q=b,G=y}G!=y&&r(b,y,q,G,D)}function no(c,f){var y=c.V,b=c.Ba+c.c*c.C,N=f-c.C;if(e(f<=c.l.o),e(16>=N),0<N){var D=c.l,V=c.Ta,q=c.Ua,G=D.width;if(Dn(c,N,y,b),N=q=[q],e((y=c.C)<(b=f)),e(D.v<D.va),b>D.o&&(b=D.o),y<D.j){var Q=D.j-y;y=D.j,N[0]+=Q*G}if(y>=b?y=0:(N[0]+=4*D.v,D.ka=y-D.j,D.U=D.va-D.v,D.T=b-y,y=1),y){if(q=q[0],11>(y=c.ca).S){var le=y.f.RGBA,we=(b=y.S,N=D.U,D=D.T,Q=le.eb,le.A),Ae=D;for(le=le.fb+c.Ma*le.A;0<Ae--;){var ye=V,Me=q,Ne=N,ue=Q,de=le;switch(b){case $u:Vr(ye,Me,Ne,ue,de);break;case Wu:Pr(ye,Me,Ne,ue,de);break;case Xf:Pr(ye,Me,Ne,ue,de),ui(ue,de,0,Ne,1,0);break;case cm:Ls(ye,Me,Ne,ue,de);break;case Ku:Rt(ye,Me,Ne,ue,de,1);break;case Zf:Rt(ye,Me,Ne,ue,de,1),ui(ue,de,0,Ne,1,0);break;case Ju:Rt(ye,Me,Ne,ue,de,0);break;case Qu:Rt(ye,Me,Ne,ue,de,0),ui(ue,de,1,Ne,1,0);break;case Yf:Ao(ye,Me,Ne,ue,de);break;case ed:Ao(ye,Me,Ne,ue,de),cn(ue,de,Ne,1,0);break;case um:Ns(ye,Me,Ne,ue,de);break;default:e(0)}q+=G,le+=we}c.Ma+=D}else alert("todo:EmitRescaledRowsYUVA");e(c.Ma<=y.height)}}c.C=f,e(c.C<=c.i)}function vi(c){var f;if(0<c.ua)return 0;for(f=0;f<c.Wb;++f){var y=c.Ya[f].G,b=c.Ya[f].H;if(0<y[1][b[1]+0].g||0<y[2][b[2]+0].g||0<y[3][b[3]+0].g)return 0}return 1}function lr(c,f,y,b,N,D){if(c.Z!=0){var V=c.qd,q=c.rd;for(e(So[c.Z]!=null);f<y;++f)So[c.Z](V,q,b,N,b,N,D),V=b,q=N,N+=D;c.qd=V,c.rd=q}}function Or(c,f){var y=c.l.ma,b=y.Z==0||y.Z==1?c.l.j:c.C;if(b=c.C<b?b:c.C,e(f<=c.l.o),f>b){var N=c.l.width,D=y.ca,V=y.tb+N*b,q=c.V,G=c.Ba+c.c*b,Q=c.gc;e(c.ab==1),e(Q[0].hc==3),Bu(Q[0],b,f,q,G,D,V),lr(y,b,f,D,V,N)}c.C=c.Ma=f}function Tr(c,f,y,b,N,D,V){var q=c.$/b,G=c.$%b,Q=c.m,le=c.s,we=y+c.$,Ae=we;N=y+b*N;var ye=y+b*D,Me=280+le.ua,Ne=c.Pb?q:16777216,ue=0<le.ua?le.Wa:null,de=le.wc,Oe=we<ye?vn(le,G,q):null;e(c.C<D),e(ye<=N);var Ue=!1;e:for(;;){for(;Ue||we<ye;){var Fe=0;if(q>=Ne){var nt=we-y;e((Ne=c).Pb),Ne.wd=Ne.m,Ne.xd=nt,0<Ne.s.ua&&te(Ne.s.Wa,Ne.s.vb),Ne=q+S_}if(G&de||(Oe=vn(le,G,q)),e(Oe!=null),Oe.Qb&&(f[we]=Oe.qb,Ue=!0),!Ue)if(he(Q),Oe.jc){Fe=Q,nt=f;var Xe=we,ft=Oe.pd[M(Fe)&er-1];e(Oe.jc),256>ft.g?(ee(Fe,Fe.u+ft.g),nt[Xe]=ft.value,Fe=0):(ee(Fe,Fe.u+ft.g-256),e(256<=ft.value),Fe=ft.value),Fe==0&&(Ue=!0)}else Fe=kn(Oe.G[0],Oe.H[0],Q);if(Q.h)break;if(Ue||256>Fe){if(!Ue)if(Oe.nd)f[we]=(Oe.qb|Fe<<8)>>>0;else{if(he(Q),Ue=kn(Oe.G[1],Oe.H[1],Q),he(Q),nt=kn(Oe.G[2],Oe.H[2],Q),Xe=kn(Oe.G[3],Oe.H[3],Q),Q.h)break;f[we]=(Xe<<24|Ue<<16|Fe<<8|nt)>>>0}if(Ue=!1,++we,++G>=b&&(G=0,++q,V!=null&&q<=D&&!(q%16)&&V(c,q),ue!=null))for(;Ae<we;)Fe=f[Ae++],ue.X[(506832829*Fe&4294967295)>>>ue.Mb]=Fe}else if(280>Fe){if(Fe=Dr(Fe-256,Q),nt=kn(Oe.G[4],Oe.H[4],Q),he(Q),nt=ar(b,nt=Dr(nt,Q)),Q.h)break;if(we-y<nt||N-we<Fe)break e;for(Xe=0;Xe<Fe;++Xe)f[we+Xe]=f[we+Xe-nt];for(we+=Fe,G+=Fe;G>=b;)G-=b,++q,V!=null&&q<=D&&!(q%16)&&V(c,q);if(e(we<=N),G&de&&(Oe=vn(le,G,q)),ue!=null)for(;Ae<we;)Fe=f[Ae++],ue.X[(506832829*Fe&4294967295)>>>ue.Mb]=Fe}else{if(!(Fe<Me))break e;for(Ue=Fe-280,e(ue!=null);Ae<we;)Fe=f[Ae++],ue.X[(506832829*Fe&4294967295)>>>ue.Mb]=Fe;Fe=we,e(!(Ue>>>(nt=ue).Xa)),f[Fe]=nt.X[Ue],Ue=!0}Ue||e(Q.h==K(Q))}if(c.Pb&&Q.h&&we<N)e(c.m.h),c.a=5,c.m=c.wd,c.$=c.xd,0<c.s.ua&&te(c.s.vb,c.s.Wa);else{if(Q.h)break e;V!=null&&V(c,q>D?D:q),c.a=0,c.$=we-y}return 1}return c.a=3,0}function Sr(c){e(c!=null),c.vc=null,c.yc=null,c.Ya=null;var f=c.Wa;f!=null&&(f.X=null),c.vb=null,e(c!=null)}function En(){var c=new al;return c==null?null:(c.a=0,c.xb=dm,Er("Predictor","VP8LPredictors"),Er("Predictor","VP8LPredictors_C"),Er("PredictorAdd","VP8LPredictorsAdd"),Er("PredictorAdd","VP8LPredictorsAdd_C"),ju=et,Ia=it,Vr=Ye,Pr=Ft,Ao=Pt,Ns=Qn,Ls=_t,S.VP8LMapColor32b=fl,S.VP8LMapColor8b=qu,c)}function Gr(c,f,y,b,N){var D=1,V=[c],q=[f],G=b.m,Q=b.s,le=null,we=0;e:for(;;){if(y)for(;D&&Pe(G,1);){var Ae=V,ye=q,Me=b,Ne=1,ue=Me.m,de=Me.gc[Me.ab],Oe=Pe(ue,2);if(Me.Oc&1<<Oe)D=0;else{switch(Me.Oc|=1<<Oe,de.hc=Oe,de.Ea=Ae[0],de.nc=ye[0],de.K=[null],++Me.ab,e(4>=Me.ab),Oe){case 0:case 1:de.b=Pe(ue,3)+2,Ne=Gr(Re(de.Ea,de.b),Re(de.nc,de.b),0,Me,de.K),de.K=de.K[0];break;case 3:var Ue,Fe=Pe(ue,8)+1,nt=16<Fe?0:4<Fe?1:2<Fe?2:3;if(Ae[0]=Re(de.Ea,nt),de.b=nt,Ue=Ne=Gr(Fe,1,0,Me,de.K)){var Xe,ft=Fe,tt=de,Bt=1<<(8>>tt.b),Yt=s(Bt);if(Yt==null)Ue=0;else{var Vt=tt.K[0],Lt=tt.w;for(Yt[0]=tt.K[0][0],Xe=1;Xe<1*ft;++Xe)Yt[Xe]=ve(Vt[Lt+Xe],Yt[Xe-1]);for(;Xe<4*Bt;++Xe)Yt[Xe]=0;tt.K[0]=null,tt.K[0]=Yt,Ue=1}}Ne=Ue;break;case 2:break;default:e(0)}D=Ne}}if(V=V[0],q=q[0],D&&Pe(G,1)&&!(D=1<=(we=Pe(G,4))&&11>=we)){b.a=3;break e}var sn;if(sn=D)t:{var en,St,On,Ur=b,Fn=V,jr=q,Xt=we,Qr=y,Yr=Ur.m,Hn=Ur.s,tr=[null],Nr=1,di=0,Xi=T_[Xt];n:for(;;){if(Qr&&Pe(Yr,1)){var zn=Pe(Yr,3)+2,Os=Re(Fn,zn),Pa=Re(jr,zn),yl=Os*Pa;if(!Gr(Os,Pa,0,Ur,tr))break n;for(tr=tr[0],Hn.xc=zn,en=0;en<yl;++en){var xo=tr[en]>>8&65535;tr[en]=xo,xo>=Nr&&(Nr=xo+1)}}if(Yr.h)break n;for(St=0;5>St;++St){var bn=hm[St];!St&&0<Xt&&(bn+=1<<Xt),di<bn&&(di=bn)}var id=o(Nr*Xi,E),wm=Nr,Am=o(wm,z);if(Am==null)var eh=null;else e(65536>=wm),eh=Am;var Nc=s(di);if(eh==null||Nc==null||id==null){Ur.a=1;break n}var th=id;for(en=On=0;en<Nr;++en){var Pi=eh[en],vl=Pi.G,_l=Pi.H,Im=0,nh=1,Em=0;for(St=0;5>St;++St){bn=hm[St],vl[St]=th,_l[St]=On,!St&&0<Xt&&(bn+=1<<Xt);i:{var rh,sd=bn,ih=Ur,Lc=Nc,$_=th,W_=On,od=0,Po=ih.m,K_=Pe(Po,1);if(i(Lc,0,0,sd),K_){var J_=Pe(Po,1)+1,Q_=Pe(Po,1),Tm=Pe(Po,Q_==0?1:8);Lc[Tm]=1,J_==2&&(Lc[Tm=Pe(Po,8)]=1);var sh=1}else{var Sm=s(19),xm=Pe(Po,4)+4;if(19<xm){ih.a=3;var oh=0;break i}for(rh=0;rh<xm;++rh)Sm[I_[rh]]=Pe(Po,3);var ad=void 0,Cc=void 0,Pm=ih,Y_=Sm,ah=sd,Rm=Lc,ld=0,Ro=Pm.m,Nm=8,Lm=o(128,E);r:for(;w(Lm,0,7,Y_,19);){if(Pe(Ro,1)){var X_=2+2*Pe(Ro,3);if((ad=2+Pe(Ro,X_))>ah)break r}else ad=ah;for(Cc=0;Cc<ah&&ad--;){he(Ro);var Cm=Lm[0+(127&M(Ro))];ee(Ro,Ro.u+Cm.g);var bl=Cm.value;if(16>bl)Rm[Cc++]=bl,bl!=0&&(Nm=bl);else{var Z_=bl==16,km=bl-16,eb=w_[km],Dm=Pe(Ro,b_[km])+eb;if(Cc+Dm>ah)break r;for(var tb=Z_?Nm:0;0<Dm--;)Rm[Cc++]=tb}}ld=1;break r}ld||(Pm.a=3),sh=ld}(sh=sh&&!Po.h)&&(od=w($_,W_,8,Lc,sd)),sh&&od!=0?oh=od:(ih.a=3,oh=0)}if(oh==0)break n;if(nh&&A_[St]==1&&(nh=th[On].g==0),Im+=th[On].g,On+=oh,3>=St){var kc,cd=Nc[0];for(kc=1;kc<bn;++kc)Nc[kc]>cd&&(cd=Nc[kc]);Em+=cd}}if(Pi.nd=nh,Pi.Qb=0,nh&&(Pi.qb=(vl[3][_l[3]+0].value<<24|vl[1][_l[1]+0].value<<16|vl[2][_l[2]+0].value)>>>0,Im==0&&256>vl[0][_l[0]+0].value&&(Pi.Qb=1,Pi.qb+=vl[0][_l[0]+0].value<<8)),Pi.jc=!Pi.Qb&&6>Em,Pi.jc){var lh,Fs=Pi;for(lh=0;lh<er;++lh){var No=lh,Lo=Fs.pd[No],ch=Fs.G[0][Fs.H[0]+No];256<=ch.value?(Lo.g=ch.g+256,Lo.value=ch.value):(Lo.g=0,Lo.value=0,No>>=In(ch,8,Lo),No>>=In(Fs.G[1][Fs.H[1]+No],16,Lo),No>>=In(Fs.G[2][Fs.H[2]+No],0,Lo),In(Fs.G[3][Fs.H[3]+No],24,Lo))}}}Hn.vc=tr,Hn.Wb=Nr,Hn.Ya=eh,Hn.yc=id,sn=1;break t}sn=0}if(!(D=sn)){b.a=3;break e}if(0<we){if(Q.ua=1<<we,!ie(Q.Wa,we)){b.a=1,D=0;break e}}else Q.ua=0;var ud=b,Om=V,nb=q,hd=ud.s,fd=hd.xc;if(ud.c=Om,ud.i=nb,hd.md=Re(Om,fd),hd.wc=fd==0?-1:(1<<fd)-1,y){b.xb=k_;break e}if((le=s(V*q))==null){b.a=1,D=0;break e}D=(D=Tr(b,le,0,V,q,q,null))&&!G.h;break e}return D?(N!=null?N[0]=le:(e(le==null),e(y)),b.$=0,y||Sr(Q)):Sr(Q),D}function ji(c,f){var y=c.c*c.i,b=y+f+16*f;return e(c.c<=f),c.V=s(b),c.V==null?(c.Ta=null,c.Ua=0,c.a=1,0):(c.Ta=c.V,c.Ua=c.Ba+y+f,1)}function Bi(c,f){var y=c.C,b=f-y,N=c.V,D=c.Ba+c.c*y;for(e(f<=c.l.o);0<b;){var V=16<b?16:b,q=c.l.ma,G=c.l.width,Q=G*V,le=q.ca,we=q.tb+G*y,Ae=c.Ta,ye=c.Ua;Dn(c,V,N,D),Sn(Ae,ye,le,we,Q),lr(q,y,y+V,le,we,G),b-=V,N+=V*c.c,y+=V}e(y==f),c.C=c.Ma=f}function qi(){this.ub=this.yd=this.td=this.Rb=0}function _s(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function bs(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Ya(){this.Yb=function(){var c=[];return function f(y,b,N){for(var D=N[b],V=0;V<D&&(y.push(N.length>b+1?[]:0),!(N.length<b+1));V++)f(y[V],b+1,N)}(c,0,[3,11]),c}()}function ro(){this.jb=s(3),this.Wc=a([4,8],Ya),this.Xc=a([4,17],Ya)}function Xa(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function Hi(){this.ld=this.La=this.dd=this.tc=0}function zi(){this.Na=this.la=0}function _i(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ws(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function mc(){this.uc=this.M=this.Nb=0,this.wa=Array(new Hi),this.Y=0,this.ya=Array(new ws),this.aa=0,this.l=new As}function ca(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Za(){this.cb=this.a=0,this.sc="",this.m=new Qe,this.Od=new qi,this.Kc=new _s,this.ed=new Xa,this.Qa=new bs,this.Ic=this.$c=this.Aa=0,this.D=new mc,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,Qe),this.ia=0,this.pb=o(4,_i),this.Pa=new ro,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new ca),this.Hd=0,this.rb=Array(new zi),this.sb=0,this.wa=Array(new Hi),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ws),this.L=this.aa=0,this.gd=a([4,2],Hi),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function As(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function ua(){var c=new Za;return c!=null&&(c.a=0,c.sc="OK",c.cb=0,c.Xb=0,Pc||(Pc=el)),c}function pn(c,f,y){return c.a==0&&(c.a=f,c.sc=y,c.cb=0),0}function ha(c,f,y){return 3<=y&&c[f+0]==157&&c[f+1]==1&&c[f+2]==42}function fa(c,f){if(c==null)return 0;if(c.a=0,c.sc="OK",f==null)return pn(c,2,"null VP8Io passed to VP8GetHeaders()");var y=f.data,b=f.w,N=f.ha;if(4>N)return pn(c,7,"Truncated header.");var D=y[b+0]|y[b+1]<<8|y[b+2]<<16,V=c.Od;if(V.Rb=!(1&D),V.td=D>>1&7,V.yd=D>>4&1,V.ub=D>>5,3<V.td)return pn(c,3,"Incorrect keyframe parameters.");if(!V.yd)return pn(c,4,"Frame not displayable.");b+=3,N-=3;var q=c.Kc;if(V.Rb){if(7>N)return pn(c,7,"cannot parse picture header");if(!ha(y,b,N))return pn(c,3,"Bad code word");q.c=16383&(y[b+4]<<8|y[b+3]),q.Td=y[b+4]>>6,q.i=16383&(y[b+6]<<8|y[b+5]),q.Ud=y[b+6]>>6,b+=7,N-=7,c.za=q.c+15>>4,c.Ub=q.i+15>>4,f.width=q.c,f.height=q.i,f.Da=0,f.j=0,f.v=0,f.va=f.width,f.o=f.height,f.da=0,f.ib=f.width,f.hb=f.height,f.U=f.width,f.T=f.height,i((D=c.Pa).jb,0,255,D.jb.length),e((D=c.Qa)!=null),D.Cb=0,D.Bb=0,D.Fb=1,i(D.Zb,0,0,D.Zb.length),i(D.Lb,0,0,D.Lb)}if(V.ub>N)return pn(c,7,"bad partition length");re(D=c.m,y,b,V.ub),b+=V.ub,N-=V.ub,V.Rb&&(q.Ld=se(D),q.Kd=se(D)),q=c.Qa;var G,Q=c.Pa;if(e(D!=null),e(q!=null),q.Cb=se(D),q.Cb){if(q.Bb=se(D),se(D)){for(q.Fb=se(D),G=0;4>G;++G)q.Zb[G]=se(D)?ge(D,7):0;for(G=0;4>G;++G)q.Lb[G]=se(D)?ge(D,6):0}if(q.Bb)for(G=0;3>G;++G)Q.jb[G]=se(D)?ae(D,8):255}else q.Bb=0;if(D.Ka)return pn(c,3,"cannot parse segment header");if((q=c.ed).zd=se(D),q.Tb=ae(D,6),q.wb=ae(D,3),q.Pc=se(D),q.Pc&&se(D)){for(Q=0;4>Q;++Q)se(D)&&(q.vd[Q]=ge(D,6));for(Q=0;4>Q;++Q)se(D)&&(q.od[Q]=ge(D,6))}if(c.L=q.Tb==0?0:q.zd?1:2,D.Ka)return pn(c,3,"cannot parse filter header");var le=N;if(N=G=b,b=G+le,q=le,c.Xb=(1<<ae(c.m,2))-1,le<3*(Q=c.Xb))y=7;else{for(G+=3*Q,q-=3*Q,le=0;le<Q;++le){var we=y[N+0]|y[N+1]<<8|y[N+2]<<16;we>q&&(we=q),re(c.Jc[+le],y,G,we),G+=we,q-=we,N+=3}re(c.Jc[+Q],y,G,q),y=G<b?0:5}if(y!=0)return pn(c,y,"cannot parse partitions");for(y=ae(G=c.m,7),N=se(G)?ge(G,4):0,b=se(G)?ge(G,4):0,q=se(G)?ge(G,4):0,Q=se(G)?ge(G,4):0,G=se(G)?ge(G,4):0,le=c.Qa,we=0;4>we;++we){if(le.Cb){var Ae=le.Zb[we];le.Fb||(Ae+=y)}else{if(0<we){c.pb[we]=c.pb[0];continue}Ae=y}var ye=c.pb[we];ye.Sc[0]=td[$t(Ae+N,127)],ye.Sc[1]=nd[$t(Ae+0,127)],ye.Eb[0]=2*td[$t(Ae+b,127)],ye.Eb[1]=101581*nd[$t(Ae+q,127)]>>16,8>ye.Eb[1]&&(ye.Eb[1]=8),ye.Qc[0]=td[$t(Ae+Q,117)],ye.Qc[1]=nd[$t(Ae+G,127)],ye.lc=Ae+G}if(!V.Rb)return pn(c,4,"Not a key frame.");for(se(D),V=c.Pa,y=0;4>y;++y){for(N=0;8>N;++N)for(b=0;3>b;++b)for(q=0;11>q;++q)Q=ne(D,L_[y][N][b][q])?ae(D,8):R_[y][N][b][q],V.Wc[y][N].Yb[b][q]=Q;for(N=0;17>N;++N)V.Xc[y][N]=V.Wc[y][C_[N]]}return c.kc=se(D),c.kc&&(c.Bd=ae(D,8)),c.cb=1}function el(c,f,y,b,N,D,V){var q=f[N].Yb[y];for(y=0;16>N;++N){if(!ne(c,q[y+0]))return N;for(;!ne(c,q[y+1]);)if(q=f[++N].Yb[0],y=0,N==16)return 16;var G=f[N+1].Yb;if(ne(c,q[y+2])){var Q=c,le=0;if(ne(Q,(Ae=q)[(we=y)+3]))if(ne(Q,Ae[we+6])){for(q=0,we=2*(le=ne(Q,Ae[we+8]))+(Ae=ne(Q,Ae[we+9+le])),le=0,Ae=x_[we];Ae[q];++q)le+=le+ne(Q,Ae[q]);le+=3+(8<<we)}else ne(Q,Ae[we+7])?(le=7+2*ne(Q,165),le+=ne(Q,145)):le=5+ne(Q,159);else le=ne(Q,Ae[we+4])?3+ne(Q,Ae[we+5]):2;q=G[2]}else le=1,q=G[1];G=V+P_[N],0>(Q=c).b&&Y(Q);var we,Ae=Q.b,ye=(we=Q.Ca>>1)-(Q.I>>Ae)>>31;--Q.b,Q.Ca+=ye,Q.Ca|=1,Q.I-=(we+1&ye)<<Ae,D[G]=((le^ye)-ye)*b[(0<N)+0]}return 16}function da(c){var f=c.rb[c.sb-1];f.la=0,f.Na=0,i(c.zc,0,0,c.zc.length),c.ja=0}function tl(c,f){if(c==null)return 0;if(f==null)return pn(c,2,"NULL VP8Io parameter in VP8Decode().");if(!c.cb&&!fa(c,f))return 0;if(e(c.cb),f.ac==null||f.ac(f)){f.ob&&(c.L=0);var y=Zu[c.L];if(c.L==2?(c.yb=0,c.zb=0):(c.yb=f.v-y>>4,c.zb=f.j-y>>4,0>c.yb&&(c.yb=0),0>c.zb&&(c.zb=0)),c.Va=f.o+15+y>>4,c.Hb=f.va+15+y>>4,c.Hb>c.za&&(c.Hb=c.za),c.Va>c.Ub&&(c.Va=c.Ub),0<c.L){var b=c.ed;for(y=0;4>y;++y){var N;if(c.Qa.Cb){var D=c.Qa.Lb[y];c.Qa.Fb||(D+=b.Tb)}else D=b.Tb;for(N=0;1>=N;++N){var V=c.gd[y][N],q=D;if(b.Pc&&(q+=b.vd[0],N&&(q+=b.od[0])),0<(q=0>q?0:63<q?63:q)){var G=q;0<b.wb&&(G=4<b.wb?G>>2:G>>1)>9-b.wb&&(G=9-b.wb),1>G&&(G=1),V.dd=G,V.tc=2*q+G,V.ld=40<=q?2:15<=q?1:0}else V.tc=0;V.La=N}}}y=0}else pn(c,6,"Frame setup failed"),y=c.a;if(y=y==0){if(y){c.$c=0,0<c.Aa||(c.Ic=G_);e:{y=c.Ic,b=4*(G=c.za);var Q=32*G,le=G+1,we=0<c.L?G*(0<c.Aa?2:1):0,Ae=(c.Aa==2?2:1)*G;if((V=b+832+(N=3*(16*y+Zu[c.L])/2*Q)+(D=c.Fa!=null&&0<c.Fa.length?c.Kc.c*c.Kc.i:0))!=V)y=0;else{if(V>c.Vb){if(c.Vb=0,c.Ec=s(V),c.Fc=0,c.Ec==null){y=pn(c,1,"no memory during frame initialization.");break e}c.Vb=V}V=c.Ec,q=c.Fc,c.Ac=V,c.Bc=q,q+=b,c.Gd=o(Q,ca),c.Hd=0,c.rb=o(le+1,zi),c.sb=1,c.wa=we?o(we,Hi):null,c.Y=0,c.D.Nb=0,c.D.wa=c.wa,c.D.Y=c.Y,0<c.Aa&&(c.D.Y+=G),e(!0),c.oc=V,c.pc=q,q+=832,c.ya=o(Ae,ws),c.aa=0,c.D.ya=c.ya,c.D.aa=c.aa,c.Aa==2&&(c.D.aa+=G),c.R=16*G,c.B=8*G,G=(Q=Zu[c.L])*c.R,Q=Q/2*c.B,c.sa=V,c.ta=q+G,c.qa=c.sa,c.ra=c.ta+16*y*c.R+Q,c.Ha=c.qa,c.Ia=c.ra+8*y*c.B+Q,c.$c=0,q+=N,c.mb=D?V:null,c.nb=D?q:null,e(q+D<=c.Fc+c.Vb),da(c),i(c.Ac,c.Bc,0,b),y=1}}if(y){if(f.ka=0,f.y=c.sa,f.O=c.ta,f.f=c.qa,f.N=c.ra,f.ea=c.Ha,f.Vd=c.Ia,f.fa=c.R,f.Rc=c.B,f.F=null,f.J=0,!zu){for(y=-255;255>=y;++y)Bn[255+y]=0>y?-y:y;for(y=-1020;1020>=y;++y)ks[1020+y]=-128>y?-128:127<y?127:y;for(y=-112;112>=y;++y)xc[112+y]=-16>y?-16:15<y?15:y;for(y=-255;510>=y;++y)ml[255+y]=0>y?0:255<y?255:y;zu=1}dl=Ts,Cs=so,Ec=pa,Rr=Qt,li=Es,Tn=Is,pl=fo,Hu=Ei,Tc=go,Ea=Aa,Ta=po,Io=xs,Sa=mo,gl=Ki,xa=Ss,Eo=Kr,Sc=jn,ci=ol,xi[0]=oi,xi[1]=yc,xi[2]=$i,xi[3]=_c,xi[4]=il,xi[5]=lo,xi[6]=$r,xi[7]=ma,xi[8]=uo,xi[9]=co,To[0]=Gi,To[1]=vc,To[2]=wi,To[3]=oo,To[4]=gn,To[5]=rl,To[6]=ga,Ds[0]=Ii,Ds[1]=nl,Ds[2]=sl,Ds[3]=Ai,Ds[4]=Gt,Ds[5]=ya,Ds[6]=va,y=1}else y=0}y&&(y=function(ye,Me){for(ye.M=0;ye.M<ye.Va;++ye.M){var Ne,ue=ye.Jc[ye.M&ye.Xb],de=ye.m,Oe=ye;for(Ne=0;Ne<Oe.za;++Ne){var Ue=de,Fe=Oe,nt=Fe.Ac,Xe=Fe.Bc+4*Ne,ft=Fe.zc,tt=Fe.ya[Fe.aa+Ne];if(Fe.Qa.Bb?tt.$b=ne(Ue,Fe.Pa.jb[0])?2+ne(Ue,Fe.Pa.jb[2]):ne(Ue,Fe.Pa.jb[1]):tt.$b=0,Fe.kc&&(tt.Ad=ne(Ue,Fe.Bd)),tt.Za=!ne(Ue,145)+0,tt.Za){var Bt=tt.Ob,Yt=0;for(Fe=0;4>Fe;++Fe){var Vt,Lt=ft[0+Fe];for(Vt=0;4>Vt;++Vt){Lt=N_[nt[Xe+Vt]][Lt];for(var sn=fm[ne(Ue,Lt[0])];0<sn;)sn=fm[2*sn+ne(Ue,Lt[sn])];Lt=-sn,nt[Xe+Vt]=Lt}r(Bt,Yt,nt,Xe,4),Yt+=4,ft[0+Fe]=Lt}}else Lt=ne(Ue,156)?ne(Ue,128)?1:3:ne(Ue,163)?2:0,tt.Ob[0]=Lt,i(nt,Xe,Lt,4),i(ft,0,Lt,4);tt.Dd=ne(Ue,142)?ne(Ue,114)?ne(Ue,183)?1:3:2:0}if(Oe.m.Ka)return pn(ye,7,"Premature end-of-partition0 encountered.");for(;ye.ja<ye.za;++ye.ja){if(Oe=ue,Ue=(de=ye).rb[de.sb-1],nt=de.rb[de.sb+de.ja],Ne=de.ya[de.aa+de.ja],Xe=de.kc?Ne.Ad:0)Ue.la=nt.la=0,Ne.Za||(Ue.Na=nt.Na=0),Ne.Hc=0,Ne.Gc=0,Ne.ia=0;else{var en,St;if(Ue=nt,nt=Oe,Xe=de.Pa.Xc,ft=de.ya[de.aa+de.ja],tt=de.pb[ft.$b],Fe=ft.ad,Bt=0,Yt=de.rb[de.sb-1],Lt=Vt=0,i(Fe,Bt,0,384),ft.Za)var On=0,Ur=Xe[3];else{sn=s(16);var Fn=Ue.Na+Yt.Na;if(Fn=Pc(nt,Xe[1],Fn,tt.Eb,0,sn,0),Ue.Na=Yt.Na=(0<Fn)+0,1<Fn)dl(sn,0,Fe,Bt);else{var jr=sn[0]+3>>3;for(sn=0;256>sn;sn+=16)Fe[Bt+sn]=jr}On=1,Ur=Xe[0]}var Xt=15&Ue.la,Qr=15&Yt.la;for(sn=0;4>sn;++sn){var Yr=1&Qr;for(jr=St=0;4>jr;++jr)Xt=Xt>>1|(Yr=(Fn=Pc(nt,Ur,Fn=Yr+(1&Xt),tt.Sc,On,Fe,Bt))>On)<<7,St=St<<2|(3<Fn?3:1<Fn?2:Fe[Bt+0]!=0),Bt+=16;Xt>>=4,Qr=Qr>>1|Yr<<7,Vt=(Vt<<8|St)>>>0}for(Ur=Xt,On=Qr>>4,en=0;4>en;en+=2){for(St=0,Xt=Ue.la>>4+en,Qr=Yt.la>>4+en,sn=0;2>sn;++sn){for(Yr=1&Qr,jr=0;2>jr;++jr)Fn=Yr+(1&Xt),Xt=Xt>>1|(Yr=0<(Fn=Pc(nt,Xe[2],Fn,tt.Qc,0,Fe,Bt)))<<3,St=St<<2|(3<Fn?3:1<Fn?2:Fe[Bt+0]!=0),Bt+=16;Xt>>=2,Qr=Qr>>1|Yr<<5}Lt|=St<<4*en,Ur|=Xt<<4<<en,On|=(240&Qr)<<en}Ue.la=Ur,Yt.la=On,ft.Hc=Vt,ft.Gc=Lt,ft.ia=43690&Lt?0:tt.ia,Xe=!(Vt|Lt)}if(0<de.L&&(de.wa[de.Y+de.ja]=de.gd[Ne.$b][Ne.Za],de.wa[de.Y+de.ja].La|=!Xe),Oe.Ka)return pn(ye,7,"Premature end-of-file encountered.")}if(da(ye),de=Me,Oe=1,Ne=(ue=ye).D,Ue=0<ue.L&&ue.M>=ue.zb&&ue.M<=ue.Va,ue.Aa==0)e:{if(Ne.M=ue.M,Ne.uc=Ue,Qi(ue,Ne),Oe=1,Ne=(St=ue.D).Nb,Ue=(Lt=Zu[ue.L])*ue.R,nt=Lt/2*ue.B,sn=16*Ne*ue.R,jr=8*Ne*ue.B,Xe=ue.sa,ft=ue.ta-Ue+sn,tt=ue.qa,Fe=ue.ra-nt+jr,Bt=ue.Ha,Yt=ue.Ia-nt+jr,Qr=(Xt=St.M)==0,Vt=Xt>=ue.Va-1,ue.Aa==2&&Qi(ue,St),St.uc)for(Yr=(Fn=ue).D.M,e(Fn.D.uc),St=Fn.yb;St<Fn.Hb;++St){On=St,Ur=Yr;var Hn=(tr=(bn=Fn).D).Nb;en=bn.R;var tr=tr.wa[tr.Y+On],Nr=bn.sa,di=bn.ta+16*Hn*en+16*On,Xi=tr.dd,zn=tr.tc;if(zn!=0)if(e(3<=zn),bn.L==1)0<On&&Eo(Nr,di,en,zn+4),tr.La&&ci(Nr,di,en,zn),0<Ur&&xa(Nr,di,en,zn+4),tr.La&&Sc(Nr,di,en,zn);else{var Os=bn.B,Pa=bn.qa,yl=bn.ra+8*Hn*Os+8*On,xo=bn.Ha,bn=bn.Ia+8*Hn*Os+8*On;Hn=tr.ld,0<On&&(Hu(Nr,di,en,zn+4,Xi,Hn),Ea(Pa,yl,xo,bn,Os,zn+4,Xi,Hn)),tr.La&&(Io(Nr,di,en,zn,Xi,Hn),gl(Pa,yl,xo,bn,Os,zn,Xi,Hn)),0<Ur&&(pl(Nr,di,en,zn+4,Xi,Hn),Tc(Pa,yl,xo,bn,Os,zn+4,Xi,Hn)),tr.La&&(Ta(Nr,di,en,zn,Xi,Hn),Sa(Pa,yl,xo,bn,Os,zn,Xi,Hn))}}if(ue.ia&&alert("todo:DitherRow"),de.put!=null){if(St=16*Xt,Xt=16*(Xt+1),Qr?(de.y=ue.sa,de.O=ue.ta+sn,de.f=ue.qa,de.N=ue.ra+jr,de.ea=ue.Ha,de.W=ue.Ia+jr):(St-=Lt,de.y=Xe,de.O=ft,de.f=tt,de.N=Fe,de.ea=Bt,de.W=Yt),Vt||(Xt-=Lt),Xt>de.o&&(Xt=de.o),de.F=null,de.J=null,ue.Fa!=null&&0<ue.Fa.length&&St<Xt&&(de.J=bo(ue,de,St,Xt-St),de.F=ue.mb,de.F==null&&de.F.length==0)){Oe=pn(ue,3,"Could not decode alpha data.");break e}St<de.j&&(Lt=de.j-St,St=de.j,e(!(1&Lt)),de.O+=ue.R*Lt,de.N+=ue.B*(Lt>>1),de.W+=ue.B*(Lt>>1),de.F!=null&&(de.J+=de.width*Lt)),St<Xt&&(de.O+=de.v,de.N+=de.v>>1,de.W+=de.v>>1,de.F!=null&&(de.J+=de.v),de.ka=St-de.j,de.U=de.va-de.v,de.T=Xt-St,Oe=de.put(de))}Ne+1!=ue.Ic||Vt||(r(ue.sa,ue.ta-Ue,Xe,ft+16*ue.R,Ue),r(ue.qa,ue.ra-nt,tt,Fe+8*ue.B,nt),r(ue.Ha,ue.Ia-nt,Bt,Yt+8*ue.B,nt))}if(!Oe)return pn(ye,6,"Output aborted.")}return 1}(c,f)),f.bc!=null&&f.bc(f),y&=1}return y?(c.cb=0,y):0}function Fr(c,f,y,b,N){N=c[f+y+32*b]+(N>>3),c[f+y+32*b]=-256&N?0>N?0:255:N}function io(c,f,y,b,N,D){Fr(c,f,0,y,b+N),Fr(c,f,1,y,b+D),Fr(c,f,2,y,b-D),Fr(c,f,3,y,b-N)}function _n(c){return(20091*c>>16)+c}function xr(c,f,y,b){var N,D=0,V=s(16);for(N=0;4>N;++N){var q=c[f+0]+c[f+8],G=c[f+0]-c[f+8],Q=(35468*c[f+4]>>16)-_n(c[f+12]),le=_n(c[f+4])+(35468*c[f+12]>>16);V[D+0]=q+le,V[D+1]=G+Q,V[D+2]=G-Q,V[D+3]=q-le,D+=4,f++}for(N=D=0;4>N;++N)q=(c=V[D+0]+4)+V[D+8],G=c-V[D+8],Q=(35468*V[D+4]>>16)-_n(V[D+12]),Fr(y,b,0,0,q+(le=_n(V[D+4])+(35468*V[D+12]>>16))),Fr(y,b,1,0,G+Q),Fr(y,b,2,0,G-Q),Fr(y,b,3,0,q-le),D++,b+=32}function Is(c,f,y,b){var N=c[f+0]+4,D=35468*c[f+4]>>16,V=_n(c[f+4]),q=35468*c[f+1]>>16;io(y,b,0,N+V,c=_n(c[f+1]),q),io(y,b,1,N+D,c,q),io(y,b,2,N-D,c,q),io(y,b,3,N-V,c,q)}function so(c,f,y,b,N){xr(c,f,y,b),N&&xr(c,f+16,y,b+4)}function pa(c,f,y,b){Cs(c,f+0,y,b,1),Cs(c,f+32,y,b+128,1)}function Qt(c,f,y,b){var N;for(c=c[f+0]+4,N=0;4>N;++N)for(f=0;4>f;++f)Fr(y,b,f,N,c)}function Es(c,f,y,b){c[f+0]&&Rr(c,f+0,y,b),c[f+16]&&Rr(c,f+16,y,b+4),c[f+32]&&Rr(c,f+32,y,b+128),c[f+48]&&Rr(c,f+48,y,b+128+4)}function Ts(c,f,y,b){var N,D=s(16);for(N=0;4>N;++N){var V=c[f+0+N]+c[f+12+N],q=c[f+4+N]+c[f+8+N],G=c[f+4+N]-c[f+8+N],Q=c[f+0+N]-c[f+12+N];D[0+N]=V+q,D[8+N]=V-q,D[4+N]=Q+G,D[12+N]=Q-G}for(N=0;4>N;++N)V=(c=D[0+4*N]+3)+D[3+4*N],q=D[1+4*N]+D[2+4*N],G=D[1+4*N]-D[2+4*N],Q=c-D[3+4*N],y[b+0]=V+q>>3,y[b+16]=Q+G>>3,y[b+32]=V-q>>3,y[b+48]=Q-G>>3,b+=64}function bi(c,f,y){var b,N=f-32,D=Jr,V=255-c[N-1];for(b=0;b<y;++b){var q,G=D,Q=V+c[f-1];for(q=0;q<y;++q)c[f+q]=G[Q+c[N+q]];f+=32}}function yc(c,f){bi(c,f,4)}function nl(c,f){bi(c,f,8)}function vc(c,f){bi(c,f,16)}function wi(c,f){var y;for(y=0;16>y;++y)r(c,f+32*y,c,f-32,16)}function oo(c,f){var y;for(y=16;0<y;--y)i(c,f,c[f-1],16),f+=32}function ao(c,f,y){var b;for(b=0;16>b;++b)i(f,y+32*b,c,16)}function Gi(c,f){var y,b=16;for(y=0;16>y;++y)b+=c[f-1+32*y]+c[f+y-32];ao(b>>5,c,f)}function gn(c,f){var y,b=8;for(y=0;16>y;++y)b+=c[f-1+32*y];ao(b>>4,c,f)}function rl(c,f){var y,b=8;for(y=0;16>y;++y)b+=c[f+y-32];ao(b>>4,c,f)}function ga(c,f){ao(128,c,f)}function yt(c,f,y){return c+2*f+y+2>>2}function $i(c,f){var y,b=f-32;for(b=new Uint8Array([yt(c[b-1],c[b+0],c[b+1]),yt(c[b+0],c[b+1],c[b+2]),yt(c[b+1],c[b+2],c[b+3]),yt(c[b+2],c[b+3],c[b+4])]),y=0;4>y;++y)r(c,f+32*y,b,0,b.length)}function _c(c,f){var y=c[f-1],b=c[f-1+32],N=c[f-1+64],D=c[f-1+96];Se(c,f+0,16843009*yt(c[f-1-32],y,b)),Se(c,f+32,16843009*yt(y,b,N)),Se(c,f+64,16843009*yt(b,N,D)),Se(c,f+96,16843009*yt(N,D,D))}function oi(c,f){var y,b=4;for(y=0;4>y;++y)b+=c[f+y-32]+c[f-1+32*y];for(b>>=3,y=0;4>y;++y)i(c,f+32*y,b,4)}function il(c,f){var y=c[f-1+0],b=c[f-1+32],N=c[f-1+64],D=c[f-1-32],V=c[f+0-32],q=c[f+1-32],G=c[f+2-32],Q=c[f+3-32];c[f+0+96]=yt(b,N,c[f-1+96]),c[f+1+96]=c[f+0+64]=yt(y,b,N),c[f+2+96]=c[f+1+64]=c[f+0+32]=yt(D,y,b),c[f+3+96]=c[f+2+64]=c[f+1+32]=c[f+0+0]=yt(V,D,y),c[f+3+64]=c[f+2+32]=c[f+1+0]=yt(q,V,D),c[f+3+32]=c[f+2+0]=yt(G,q,V),c[f+3+0]=yt(Q,G,q)}function $r(c,f){var y=c[f+1-32],b=c[f+2-32],N=c[f+3-32],D=c[f+4-32],V=c[f+5-32],q=c[f+6-32],G=c[f+7-32];c[f+0+0]=yt(c[f+0-32],y,b),c[f+1+0]=c[f+0+32]=yt(y,b,N),c[f+2+0]=c[f+1+32]=c[f+0+64]=yt(b,N,D),c[f+3+0]=c[f+2+32]=c[f+1+64]=c[f+0+96]=yt(N,D,V),c[f+3+32]=c[f+2+64]=c[f+1+96]=yt(D,V,q),c[f+3+64]=c[f+2+96]=yt(V,q,G),c[f+3+96]=yt(q,G,G)}function lo(c,f){var y=c[f-1+0],b=c[f-1+32],N=c[f-1+64],D=c[f-1-32],V=c[f+0-32],q=c[f+1-32],G=c[f+2-32],Q=c[f+3-32];c[f+0+0]=c[f+1+64]=D+V+1>>1,c[f+1+0]=c[f+2+64]=V+q+1>>1,c[f+2+0]=c[f+3+64]=q+G+1>>1,c[f+3+0]=G+Q+1>>1,c[f+0+96]=yt(N,b,y),c[f+0+64]=yt(b,y,D),c[f+0+32]=c[f+1+96]=yt(y,D,V),c[f+1+32]=c[f+2+96]=yt(D,V,q),c[f+2+32]=c[f+3+96]=yt(V,q,G),c[f+3+32]=yt(q,G,Q)}function ma(c,f){var y=c[f+0-32],b=c[f+1-32],N=c[f+2-32],D=c[f+3-32],V=c[f+4-32],q=c[f+5-32],G=c[f+6-32],Q=c[f+7-32];c[f+0+0]=y+b+1>>1,c[f+1+0]=c[f+0+64]=b+N+1>>1,c[f+2+0]=c[f+1+64]=N+D+1>>1,c[f+3+0]=c[f+2+64]=D+V+1>>1,c[f+0+32]=yt(y,b,N),c[f+1+32]=c[f+0+96]=yt(b,N,D),c[f+2+32]=c[f+1+96]=yt(N,D,V),c[f+3+32]=c[f+2+96]=yt(D,V,q),c[f+3+64]=yt(V,q,G),c[f+3+96]=yt(q,G,Q)}function co(c,f){var y=c[f-1+0],b=c[f-1+32],N=c[f-1+64],D=c[f-1+96];c[f+0+0]=y+b+1>>1,c[f+2+0]=c[f+0+32]=b+N+1>>1,c[f+2+32]=c[f+0+64]=N+D+1>>1,c[f+1+0]=yt(y,b,N),c[f+3+0]=c[f+1+32]=yt(b,N,D),c[f+3+32]=c[f+1+64]=yt(N,D,D),c[f+3+64]=c[f+2+64]=c[f+0+96]=c[f+1+96]=c[f+2+96]=c[f+3+96]=D}function uo(c,f){var y=c[f-1+0],b=c[f-1+32],N=c[f-1+64],D=c[f-1+96],V=c[f-1-32],q=c[f+0-32],G=c[f+1-32],Q=c[f+2-32];c[f+0+0]=c[f+2+32]=y+V+1>>1,c[f+0+32]=c[f+2+64]=b+y+1>>1,c[f+0+64]=c[f+2+96]=N+b+1>>1,c[f+0+96]=D+N+1>>1,c[f+3+0]=yt(q,G,Q),c[f+2+0]=yt(V,q,G),c[f+1+0]=c[f+3+32]=yt(y,V,q),c[f+1+32]=c[f+3+64]=yt(b,y,V),c[f+1+64]=c[f+3+96]=yt(N,b,y),c[f+1+96]=yt(D,N,b)}function sl(c,f){var y;for(y=0;8>y;++y)r(c,f+32*y,c,f-32,8)}function Ai(c,f){var y;for(y=0;8>y;++y)i(c,f,c[f-1],8),f+=32}function Wr(c,f,y){var b;for(b=0;8>b;++b)i(f,y+32*b,c,8)}function Ii(c,f){var y,b=8;for(y=0;8>y;++y)b+=c[f+y-32]+c[f-1+32*y];Wr(b>>4,c,f)}function ya(c,f){var y,b=4;for(y=0;8>y;++y)b+=c[f+y-32];Wr(b>>3,c,f)}function Gt(c,f){var y,b=4;for(y=0;8>y;++y)b+=c[f-1+32*y];Wr(b>>3,c,f)}function va(c,f){Wr(128,c,f)}function ho(c,f,y){var b=c[f-y],N=c[f+0],D=3*(N-b)+Qf[1020+c[f-2*y]-c[f+y]],V=Gu[112+(D+4>>3)];c[f-y]=Jr[255+b+Gu[112+(D+3>>3)]],c[f+0]=Jr[255+N-V]}function _a(c,f,y,b){var N=c[f+0],D=c[f+y];return hi[255+c[f-2*y]-c[f-y]]>b||hi[255+D-N]>b}function ba(c,f,y,b){return 4*hi[255+c[f-y]-c[f+0]]+hi[255+c[f-2*y]-c[f+y]]<=b}function wa(c,f,y,b,N){var D=c[f-3*y],V=c[f-2*y],q=c[f-y],G=c[f+0],Q=c[f+y],le=c[f+2*y],we=c[f+3*y];return 4*hi[255+q-G]+hi[255+V-Q]>b?0:hi[255+c[f-4*y]-D]<=N&&hi[255+D-V]<=N&&hi[255+V-q]<=N&&hi[255+we-le]<=N&&hi[255+le-Q]<=N&&hi[255+Q-G]<=N}function Ss(c,f,y,b){var N=2*b+1;for(b=0;16>b;++b)ba(c,f+b,y,N)&&ho(c,f+b,y)}function Kr(c,f,y,b){var N=2*b+1;for(b=0;16>b;++b)ba(c,f+b*y,1,N)&&ho(c,f+b*y,1)}function jn(c,f,y,b){var N;for(N=3;0<N;--N)Ss(c,f+=4*y,y,b)}function ol(c,f,y,b){var N;for(N=3;0<N;--N)Kr(c,f+=4,y,b)}function Wi(c,f,y,b,N,D,V,q){for(D=2*D+1;0<N--;){if(wa(c,f,y,D,V))if(_a(c,f,y,q))ho(c,f,y);else{var G=c,Q=f,le=y,we=G[Q-2*le],Ae=G[Q-le],ye=G[Q+0],Me=G[Q+le],Ne=G[Q+2*le],ue=27*(Oe=Qf[1020+3*(ye-Ae)+Qf[1020+we-Me]])+63>>7,de=18*Oe+63>>7,Oe=9*Oe+63>>7;G[Q-3*le]=Jr[255+G[Q-3*le]+Oe],G[Q-2*le]=Jr[255+we+de],G[Q-le]=Jr[255+Ae+ue],G[Q+0]=Jr[255+ye-ue],G[Q+le]=Jr[255+Me-de],G[Q+2*le]=Jr[255+Ne-Oe]}f+=b}}function Xn(c,f,y,b,N,D,V,q){for(D=2*D+1;0<N--;){if(wa(c,f,y,D,V))if(_a(c,f,y,q))ho(c,f,y);else{var G=c,Q=f,le=y,we=G[Q-le],Ae=G[Q+0],ye=G[Q+le],Me=Gu[112+((Ne=3*(Ae-we))+4>>3)],Ne=Gu[112+(Ne+3>>3)],ue=Me+1>>1;G[Q-2*le]=Jr[255+G[Q-2*le]+ue],G[Q-le]=Jr[255+we+Ne],G[Q+0]=Jr[255+Ae-Me],G[Q+le]=Jr[255+ye-ue]}f+=b}}function fo(c,f,y,b,N,D){Wi(c,f,y,1,16,b,N,D)}function Ei(c,f,y,b,N,D){Wi(c,f,1,y,16,b,N,D)}function po(c,f,y,b,N,D){var V;for(V=3;0<V;--V)Xn(c,f+=4*y,y,1,16,b,N,D)}function xs(c,f,y,b,N,D){var V;for(V=3;0<V;--V)Xn(c,f+=4,1,y,16,b,N,D)}function go(c,f,y,b,N,D,V,q){Wi(c,f,N,1,8,D,V,q),Wi(y,b,N,1,8,D,V,q)}function Aa(c,f,y,b,N,D,V,q){Wi(c,f,1,N,8,D,V,q),Wi(y,b,1,N,8,D,V,q)}function mo(c,f,y,b,N,D,V,q){Xn(c,f+4*N,N,1,8,D,V,q),Xn(y,b+4*N,N,1,8,D,V,q)}function Ki(c,f,y,b,N,D,V,q){Xn(c,f+4,1,N,8,D,V,q),Xn(y,b+4,1,N,8,D,V,q)}function Ps(){this.ba=new Yn,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new ln,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function yo(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Rs(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function vo(){this.ua=0,this.Wa=new H,this.vb=new H,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new z,this.yc=new E}function al(){this.xb=this.a=0,this.l=new As,this.ca=new Yn,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new C,this.Pb=0,this.wd=new C,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new vo,this.ab=0,this.gc=o(4,Rs),this.Oc=0}function Ti(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new As,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Ji(c,f,y,b,N,D,V){for(c=c==null?0:c[f+0],f=0;f<V;++f)N[D+f]=c+y[b+f]&255,c=N[D+f]}function _o(c,f,y,b,N,D,V){var q;if(c==null)Ji(null,null,y,b,N,D,V);else for(q=0;q<V;++q)N[D+q]=c[f+q]+y[b+q]&255}function cr(c,f,y,b,N,D,V){if(c==null)Ji(null,null,y,b,N,D,V);else{var q,G=c[f+0],Q=G,le=G;for(q=0;q<V;++q)Q=le+(G=c[f+q])-Q,le=y[b+q]+(-256&Q?0>Q?0:255:Q)&255,Q=G,N[D+q]=le}}function bo(c,f,y,b){var N=f.width,D=f.o;if(e(c!=null&&f!=null),0>y||0>=b||y+b>D)return null;if(!c.Cc){if(c.ga==null){var V;if(c.ga=new Ti,(V=c.ga==null)||(V=f.width*f.o,e(c.Gb.length==0),c.Gb=s(V),c.Uc=0,c.Gb==null?V=0:(c.mb=c.Gb,c.nb=c.Uc,c.rc=null,V=1),V=!V),!V){V=c.ga;var q=c.Fa,G=c.P,Q=c.qc,le=c.mb,we=c.nb,Ae=G+1,ye=Q-1,Me=V.l;if(e(q!=null&&le!=null&&f!=null),So[0]=null,So[1]=Ji,So[2]=_o,So[3]=cr,V.ca=le,V.tb=we,V.c=f.width,V.i=f.height,e(0<V.c&&0<V.i),1>=Q)f=0;else if(V.$a=q[G+0]>>0&3,V.Z=q[G+0]>>2&3,V.Lc=q[G+0]>>4&3,G=q[G+0]>>6&3,0>V.$a||1<V.$a||4<=V.Z||1<V.Lc||G)f=0;else if(Me.put=or,Me.ac=Cn,Me.bc=zr,Me.ma=V,Me.width=f.width,Me.height=f.height,Me.Da=f.Da,Me.v=f.v,Me.va=f.va,Me.j=f.j,Me.o=f.o,V.$a)e:{e(V.$a==1),f=En();t:for(;;){if(f==null){f=0;break e}if(e(V!=null),V.mc=f,f.c=V.c,f.i=V.i,f.l=V.l,f.l.ma=V,f.l.width=V.c,f.l.height=V.i,f.a=0,ce(f.m,q,Ae,ye),!Gr(V.c,V.i,1,f,null)||(f.ab==1&&f.gc[0].hc==3&&vi(f.s)?(V.ic=1,q=f.c*f.i,f.Ta=null,f.Ua=0,f.V=s(q),f.Ba=0,f.V==null?(f.a=1,f=0):f=1):(V.ic=0,f=ji(f,V.c)),!f))break t;f=1;break e}V.mc=null,f=0}else f=ye>=V.c*V.i;V=!f}if(V)return null;c.ga.Lc!=1?c.Ga=0:b=D-y}e(c.ga!=null),e(y+b<=D);e:{if(f=(q=c.ga).c,D=q.l.o,q.$a==0){if(Ae=c.rc,ye=c.Vc,Me=c.Fa,G=c.P+1+y*f,Q=c.mb,le=c.nb+y*f,e(G<=c.P+c.qc),q.Z!=0)for(e(So[q.Z]!=null),V=0;V<b;++V)So[q.Z](Ae,ye,Me,G,Q,le,f),Ae=Q,ye=le,le+=f,G+=f;else for(V=0;V<b;++V)r(Q,le,Me,G,f),Ae=Q,ye=le,le+=f,G+=f;c.rc=Ae,c.Vc=ye}else{if(e(q.mc!=null),f=y+b,e((V=q.mc)!=null),e(f<=V.i),V.C>=f)f=1;else if(q.ic||me(),q.ic){q=V.V,Ae=V.Ba,ye=V.c;var Ne=V.i,ue=(Me=1,G=V.$/ye,Q=V.$%ye,le=V.m,we=V.s,V.$),de=ye*Ne,Oe=ye*f,Ue=we.wc,Fe=ue<Oe?vn(we,Q,G):null;e(ue<=de),e(f<=Ne),e(vi(we));t:for(;;){for(;!le.h&&ue<Oe;){if(Q&Ue||(Fe=vn(we,Q,G)),e(Fe!=null),he(le),256>(Ne=kn(Fe.G[0],Fe.H[0],le)))q[Ae+ue]=Ne,++ue,++Q>=ye&&(Q=0,++G<=f&&!(G%16)&&Or(V,G));else{if(!(280>Ne)){Me=0;break t}Ne=Dr(Ne-256,le);var nt,Xe=kn(Fe.G[4],Fe.H[4],le);if(he(le),!(ue>=(Xe=ar(ye,Xe=Dr(Xe,le)))&&de-ue>=Ne)){Me=0;break t}for(nt=0;nt<Ne;++nt)q[Ae+ue+nt]=q[Ae+ue+nt-Xe];for(ue+=Ne,Q+=Ne;Q>=ye;)Q-=ye,++G<=f&&!(G%16)&&Or(V,G);ue<Oe&&Q&Ue&&(Fe=vn(we,Q,G))}e(le.h==K(le))}Or(V,G>f?f:G);break t}!Me||le.h&&ue<de?(Me=0,V.a=le.h?5:3):V.$=ue,f=Me}else f=Tr(V,V.V,V.Ba,V.c,V.i,f,Bi);if(!f){b=0;break e}}y+b>=D&&(c.Cc=1),b=1}if(!b)return null;if(c.Cc&&((b=c.ga)!=null&&(b.mc=null),c.ga=null,0<c.Ga))return alert("todo:WebPDequantizeLevels"),null}return c.nb+y*N}function m(c,f,y,b,N,D){for(;0<N--;){var V,q=c,G=f+(y?1:0),Q=c,le=f+(y?0:3);for(V=0;V<b;++V){var we=Q[le+4*V];we!=255&&(we*=32897,q[G+4*V+0]=q[G+4*V+0]*we>>23,q[G+4*V+1]=q[G+4*V+1]*we>>23,q[G+4*V+2]=q[G+4*V+2]*we>>23)}f+=D}}function R(c,f,y,b,N){for(;0<b--;){var D;for(D=0;D<y;++D){var V=c[f+2*D+0],q=15&(Q=c[f+2*D+1]),G=4369*q,Q=(240&Q|Q>>4)*G>>16;c[f+2*D+0]=(240&V|V>>4)*G>>16&240|(15&V|V<<4)*G>>16>>4&15,c[f+2*D+1]=240&Q|q}f+=N}}function X(c,f,y,b,N,D,V,q){var G,Q,le=255;for(Q=0;Q<N;++Q){for(G=0;G<b;++G){var we=c[f+G];D[V+4*G]=we,le&=we}f+=y,V+=q}return le!=255}function oe(c,f,y,b,N){var D;for(D=0;D<N;++D)y[b+D]=c[f+D]>>8}function me(){ui=m,cn=R,un=X,Sn=oe}function Ce(c,f,y){S[c]=function(b,N,D,V,q,G,Q,le,we,Ae,ye,Me,Ne,ue,de,Oe,Ue){var Fe,nt=Ue-1>>1,Xe=q[G+0]|Q[le+0]<<16,ft=we[Ae+0]|ye[Me+0]<<16;e(b!=null);var tt=3*Xe+ft+131074>>2;for(f(b[N+0],255&tt,tt>>16,Ne,ue),D!=null&&(tt=3*ft+Xe+131074>>2,f(D[V+0],255&tt,tt>>16,de,Oe)),Fe=1;Fe<=nt;++Fe){var Bt=q[G+Fe]|Q[le+Fe]<<16,Yt=we[Ae+Fe]|ye[Me+Fe]<<16,Vt=Xe+Bt+ft+Yt+524296,Lt=Vt+2*(Bt+ft)>>3;tt=Lt+Xe>>1,Xe=(Vt=Vt+2*(Xe+Yt)>>3)+Bt>>1,f(b[N+2*Fe-1],255&tt,tt>>16,Ne,ue+(2*Fe-1)*y),f(b[N+2*Fe-0],255&Xe,Xe>>16,Ne,ue+(2*Fe-0)*y),D!=null&&(tt=Vt+ft>>1,Xe=Lt+Yt>>1,f(D[V+2*Fe-1],255&tt,tt>>16,de,Oe+(2*Fe-1)*y),f(D[V+2*Fe+0],255&Xe,Xe>>16,de,Oe+(2*Fe+0)*y)),Xe=Bt,ft=Yt}1&Ue||(tt=3*Xe+ft+131074>>2,f(b[N+Ue-1],255&tt,tt>>16,Ne,ue+(Ue-1)*y),D!=null&&(tt=3*ft+Xe+131074>>2,f(D[V+Ue-1],255&tt,tt>>16,de,Oe+(Ue-1)*y)))}}function Be(){fi[$u]=D_,fi[Wu]=pm,fi[cm]=O_,fi[Ku]=gm,fi[Ju]=mm,fi[Yf]=ym,fi[um]=F_,fi[Xf]=pm,fi[Zf]=gm,fi[Qu]=mm,fi[ed]=ym}function Ze(c){return c&-16384?0>c?0:255:c>>M_}function u(c,f){return Ze((19077*c>>8)+(26149*f>>8)-14234)}function _(c,f,y){return Ze((19077*c>>8)-(6419*f>>8)-(13320*y>>8)+8708)}function A(c,f){return Ze((19077*c>>8)+(33050*f>>8)-17685)}function B(c,f,y,b,N){b[N+0]=u(c,y),b[N+1]=_(c,f,y),b[N+2]=A(c,f)}function pe(c,f,y,b,N){b[N+0]=A(c,f),b[N+1]=_(c,f,y),b[N+2]=u(c,y)}function Ee(c,f,y,b,N){var D=_(c,f,y);f=D<<3&224|A(c,f)>>3,b[N+0]=248&u(c,y)|D>>5,b[N+1]=f}function ze(c,f,y,b,N){var D=240&A(c,f)|15;b[N+0]=240&u(c,y)|_(c,f,y)>>4,b[N+1]=D}function bt(c,f,y,b,N){b[N+0]=255,B(c,f,y,b,N+1)}function Nt(c,f,y,b,N){pe(c,f,y,b,N),b[N+3]=255}function wt(c,f,y,b,N){B(c,f,y,b,N),b[N+3]=255}function $t(c,f){return 0>c?0:c>f?f:c}function rn(c,f,y){S[c]=function(b,N,D,V,q,G,Q,le,we){for(var Ae=le+(-2&we)*y;le!=Ae;)f(b[N+0],D[V+0],q[G+0],Q,le),f(b[N+1],D[V+0],q[G+0],Q,le+y),N+=2,++V,++G,le+=2*y;1&we&&f(b[N+0],D[V+0],q[G+0],Q,le)}}function Si(c,f,y){return y==0?c==0?f==0?6:5:f==0?4:0:y}function Zn(c,f,y,b,N){switch(c>>>30){case 3:Cs(f,y,b,N,0);break;case 2:Tn(f,y,b,N);break;case 1:Rr(f,y,b,N)}}function Qi(c,f){var y,b,N=f.M,D=f.Nb,V=c.oc,q=c.pc+40,G=c.oc,Q=c.pc+584,le=c.oc,we=c.pc+600;for(y=0;16>y;++y)V[q+32*y-1]=129;for(y=0;8>y;++y)G[Q+32*y-1]=129,le[we+32*y-1]=129;for(0<N?V[q-1-32]=G[Q-1-32]=le[we-1-32]=129:(i(V,q-32-1,127,21),i(G,Q-32-1,127,9),i(le,we-32-1,127,9)),b=0;b<c.za;++b){var Ae=f.ya[f.aa+b];if(0<b){for(y=-1;16>y;++y)r(V,q+32*y-4,V,q+32*y+12,4);for(y=-1;8>y;++y)r(G,Q+32*y-4,G,Q+32*y+4,4),r(le,we+32*y-4,le,we+32*y+4,4)}var ye=c.Gd,Me=c.Hd+b,Ne=Ae.ad,ue=Ae.Hc;if(0<N&&(r(V,q-32,ye[Me].y,0,16),r(G,Q-32,ye[Me].f,0,8),r(le,we-32,ye[Me].ea,0,8)),Ae.Za){var de=V,Oe=q-32+16;for(0<N&&(b>=c.za-1?i(de,Oe,ye[Me].y[15],4):r(de,Oe,ye[Me+1].y,0,4)),y=0;4>y;y++)de[Oe+128+y]=de[Oe+256+y]=de[Oe+384+y]=de[Oe+0+y];for(y=0;16>y;++y,ue<<=2)de=V,Oe=q+_m[y],xi[Ae.Ob[y]](de,Oe),Zn(ue,Ne,16*+y,de,Oe)}else if(de=Si(b,N,Ae.Ob[0]),To[de](V,q),ue!=0)for(y=0;16>y;++y,ue<<=2)Zn(ue,Ne,16*+y,V,q+_m[y]);for(y=Ae.Gc,de=Si(b,N,Ae.Dd),Ds[de](G,Q),Ds[de](le,we),ue=Ne,de=G,Oe=Q,255&(Ae=y>>0)&&(170&Ae?Ec(ue,256,de,Oe):li(ue,256,de,Oe)),Ae=le,ue=we,255&(y>>=8)&&(170&y?Ec(Ne,320,Ae,ue):li(Ne,320,Ae,ue)),N<c.Ub-1&&(r(ye[Me].y,0,V,q+480,16),r(ye[Me].f,0,G,Q+224,8),r(ye[Me].ea,0,le,we+224,8)),y=8*D*c.B,ye=c.sa,Me=c.ta+16*b+16*D*c.R,Ne=c.qa,Ae=c.ra+8*b+y,ue=c.Ha,de=c.Ia+8*b+y,y=0;16>y;++y)r(ye,Me+y*c.R,V,q+32*y,16);for(y=0;8>y;++y)r(Ne,Ae+y*c.B,G,Q+32*y,8),r(ue,de+y*c.B,le,we+32*y,8)}}function Yi(c,f,y,b,N,D,V,q,G){var Q=[0],le=[0],we=0,Ae=G!=null?G.kd:0,ye=G??new yo;if(c==null||12>y)return 7;ye.data=c,ye.w=f,ye.ha=y,f=[f],y=[y],ye.gb=[ye.gb];e:{var Me=f,Ne=y,ue=ye.gb;if(e(c!=null),e(Ne!=null),e(ue!=null),ue[0]=0,12<=Ne[0]&&!n(c,Me[0],"RIFF")){if(n(c,Me[0]+8,"WEBP")){ue=3;break e}var de=W(c,Me[0]+4);if(12>de||4294967286<de){ue=3;break e}if(Ae&&de>Ne[0]-8){ue=7;break e}ue[0]=de,Me[0]+=12,Ne[0]-=12}ue=0}if(ue!=0)return ue;for(de=0<ye.gb[0],y=y[0];;){e:{var Oe=c;Ne=f,ue=y;var Ue=Q,Fe=le,nt=Me=[0];if((tt=we=[we])[0]=0,8>ue[0])ue=7;else{if(!n(Oe,Ne[0],"VP8X")){if(W(Oe,Ne[0]+4)!=10){ue=3;break e}if(18>ue[0]){ue=7;break e}var Xe=W(Oe,Ne[0]+8),ft=1+$(Oe,Ne[0]+12);if(2147483648<=ft*(Oe=1+$(Oe,Ne[0]+15))){ue=3;break e}nt!=null&&(nt[0]=Xe),Ue!=null&&(Ue[0]=ft),Fe!=null&&(Fe[0]=Oe),Ne[0]+=18,ue[0]-=18,tt[0]=1}ue=0}}if(we=we[0],Me=Me[0],ue!=0)return ue;if(Ne=!!(2&Me),!de&&we)return 3;if(D!=null&&(D[0]=!!(16&Me)),V!=null&&(V[0]=Ne),q!=null&&(q[0]=0),V=Q[0],Me=le[0],we&&Ne&&G==null){ue=0;break}if(4>y){ue=7;break}if(de&&we||!de&&!we&&!n(c,f[0],"ALPH")){y=[y],ye.na=[ye.na],ye.P=[ye.P],ye.Sa=[ye.Sa];e:{Xe=c,ue=f,de=y;var tt=ye.gb;Ue=ye.na,Fe=ye.P,nt=ye.Sa,ft=22,e(Xe!=null),e(de!=null),Oe=ue[0];var Bt=de[0];for(e(Ue!=null),e(nt!=null),Ue[0]=null,Fe[0]=null,nt[0]=0;;){if(ue[0]=Oe,de[0]=Bt,8>Bt){ue=7;break e}var Yt=W(Xe,Oe+4);if(4294967286<Yt){ue=3;break e}var Vt=8+Yt+1&-2;if(ft+=Vt,0<tt&&ft>tt){ue=3;break e}if(!n(Xe,Oe,"VP8 ")||!n(Xe,Oe,"VP8L")){ue=0;break e}if(Bt[0]<Vt){ue=7;break e}n(Xe,Oe,"ALPH")||(Ue[0]=Xe,Fe[0]=Oe+8,nt[0]=Yt),Oe+=Vt,Bt-=Vt}}if(y=y[0],ye.na=ye.na[0],ye.P=ye.P[0],ye.Sa=ye.Sa[0],ue!=0)break}y=[y],ye.Ja=[ye.Ja],ye.xa=[ye.xa];e:if(tt=c,ue=f,de=y,Ue=ye.gb[0],Fe=ye.Ja,nt=ye.xa,Xe=ue[0],Oe=!n(tt,Xe,"VP8 "),ft=!n(tt,Xe,"VP8L"),e(tt!=null),e(de!=null),e(Fe!=null),e(nt!=null),8>de[0])ue=7;else{if(Oe||ft){if(tt=W(tt,Xe+4),12<=Ue&&tt>Ue-12){ue=3;break e}if(Ae&&tt>de[0]-8){ue=7;break e}Fe[0]=tt,ue[0]+=8,de[0]-=8,nt[0]=ft}else nt[0]=5<=de[0]&&tt[Xe+0]==47&&!(tt[Xe+4]>>5),Fe[0]=de[0];ue=0}if(y=y[0],ye.Ja=ye.Ja[0],ye.xa=ye.xa[0],f=f[0],ue!=0)break;if(4294967286<ye.Ja)return 3;if(q==null||Ne||(q[0]=ye.xa?2:1),V=[V],Me=[Me],ye.xa){if(5>y){ue=7;break}q=V,Ae=Me,Ne=D,c==null||5>y?c=0:5<=y&&c[f+0]==47&&!(c[f+4]>>5)?(de=[0],tt=[0],Ue=[0],ce(Fe=new C,c,f,y),rt(Fe,de,tt,Ue)?(q!=null&&(q[0]=de[0]),Ae!=null&&(Ae[0]=tt[0]),Ne!=null&&(Ne[0]=Ue[0]),c=1):c=0):c=0}else{if(10>y){ue=7;break}q=Me,c==null||10>y||!ha(c,f+3,y-3)?c=0:(Ae=c[f+0]|c[f+1]<<8|c[f+2]<<16,Ne=16383&(c[f+7]<<8|c[f+6]),c=16383&(c[f+9]<<8|c[f+8]),1&Ae||3<(Ae>>1&7)||!(Ae>>4&1)||Ae>>5>=ye.Ja||!Ne||!c?c=0:(V&&(V[0]=Ne),q&&(q[0]=c),c=1))}if(!c||(V=V[0],Me=Me[0],we&&(Q[0]!=V||le[0]!=Me)))return 3;G!=null&&(G[0]=ye,G.offset=f-G.w,e(4294967286>f-G.w),e(G.offset==G.ha-y));break}return ue==0||ue==7&&we&&G==null?(D!=null&&(D[0]|=ye.na!=null&&0<ye.na.length),b!=null&&(b[0]=V),N!=null&&(N[0]=Me),0):ue}function bc(c,f,y){var b=f.width,N=f.height,D=0,V=0,q=b,G=N;if(f.Da=c!=null&&0<c.Da,f.Da&&(q=c.cd,G=c.bd,D=c.v,V=c.j,11>y||(D&=-2,V&=-2),0>D||0>V||0>=q||0>=G||D+q>b||V+G>N))return 0;if(f.v=D,f.j=V,f.va=D+q,f.o=V+G,f.U=q,f.T=G,f.da=c!=null&&0<c.da,f.da){if(!Te(q,G,y=[c.ib],D=[c.hb]))return 0;f.ib=y[0],f.hb=D[0]}return f.ob=c!=null&&c.ob,f.Kb=c==null||!c.Sd,f.da&&(f.ob=f.ib<3*b/4&&f.hb<3*N/4,f.Kb=0),1}function wc(c){if(c==null)return 2;if(11>c.S){var f=c.f.RGBA;f.fb+=(c.height-1)*f.A,f.A=-f.A}else f=c.f.kb,c=c.height,f.O+=(c-1)*f.fa,f.fa=-f.fa,f.N+=(c-1>>1)*f.Ab,f.Ab=-f.Ab,f.W+=(c-1>>1)*f.Db,f.Db=-f.Db,f.F!=null&&(f.J+=(c-1)*f.lb,f.lb=-f.lb);return 0}function ll(c,f,y,b){if(b==null||0>=c||0>=f)return 2;if(y!=null){if(y.Da){var N=y.cd,D=y.bd,V=-2&y.v,q=-2&y.j;if(0>V||0>q||0>=N||0>=D||V+N>c||q+D>f)return 2;c=N,f=D}if(y.da){if(!Te(c,f,N=[y.ib],D=[y.hb]))return 2;c=N[0],f=D[0]}}b.width=c,b.height=f;e:{var G=b.width,Q=b.height;if(c=b.S,0>=G||0>=Q||!(c>=$u&&13>c))c=2;else{if(0>=b.Rd&&b.sd==null){V=D=N=f=0;var le=(q=G*bm[c])*Q;if(11>c||(D=(Q+1)/2*(f=(G+1)/2),c==12&&(V=(N=G)*Q)),(Q=s(le+2*D+V))==null){c=1;break e}b.sd=Q,11>c?((G=b.f.RGBA).eb=Q,G.fb=0,G.A=q,G.size=le):((G=b.f.kb).y=Q,G.O=0,G.fa=q,G.Fd=le,G.f=Q,G.N=0+le,G.Ab=f,G.Cd=D,G.ea=Q,G.W=0+le+D,G.Db=f,G.Ed=D,c==12&&(G.F=Q,G.J=0+le+2*D),G.Tc=V,G.lb=N)}if(f=1,N=b.S,D=b.width,V=b.height,N>=$u&&13>N)if(11>N)c=b.f.RGBA,f&=(q=Math.abs(c.A))*(V-1)+D<=c.size,f&=q>=D*bm[N],f&=c.eb!=null;else{c=b.f.kb,q=(D+1)/2,le=(V+1)/2,G=Math.abs(c.fa),Q=Math.abs(c.Ab);var we=Math.abs(c.Db),Ae=Math.abs(c.lb),ye=Ae*(V-1)+D;f&=G*(V-1)+D<=c.Fd,f&=Q*(le-1)+q<=c.Cd,f=(f&=we*(le-1)+q<=c.Ed)&G>=D&Q>=q&we>=q,f&=c.y!=null,f&=c.f!=null,f&=c.ea!=null,N==12&&(f&=Ae>=D,f&=ye<=c.Tc,f&=c.F!=null)}else f=0;c=f?0:2}}return c!=0||y!=null&&y.fd&&(c=wc(b)),c}var er=64,cl=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],ul=24,hl=32,Ac=8,Mr=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];be("Predictor0","PredictorAdd0"),S.Predictor0=function(){return 4278190080},S.Predictor1=function(c){return c},S.Predictor2=function(c,f,y){return f[y+0]},S.Predictor3=function(c,f,y){return f[y+1]},S.Predictor4=function(c,f,y){return f[y-1]},S.Predictor5=function(c,f,y){return ke(ke(c,f[y+1]),f[y+0])},S.Predictor6=function(c,f,y){return ke(c,f[y-1])},S.Predictor7=function(c,f,y){return ke(c,f[y+0])},S.Predictor8=function(c,f,y){return ke(f[y-1],f[y+0])},S.Predictor9=function(c,f,y){return ke(f[y+0],f[y+1])},S.Predictor10=function(c,f,y){return ke(ke(c,f[y-1]),ke(f[y+0],f[y+1]))},S.Predictor11=function(c,f,y){var b=f[y+0];return 0>=We(b>>24&255,c>>24&255,(f=f[y-1])>>24&255)+We(b>>16&255,c>>16&255,f>>16&255)+We(b>>8&255,c>>8&255,f>>8&255)+We(255&b,255&c,255&f)?b:c},S.Predictor12=function(c,f,y){var b=f[y+0];return(Le((c>>24&255)+(b>>24&255)-((f=f[y-1])>>24&255))<<24|Le((c>>16&255)+(b>>16&255)-(f>>16&255))<<16|Le((c>>8&255)+(b>>8&255)-(f>>8&255))<<8|Le((255&c)+(255&b)-(255&f)))>>>0},S.Predictor13=function(c,f,y){var b=f[y-1];return(He((c=ke(c,f[y+0]))>>24&255,b>>24&255)<<24|He(c>>16&255,b>>16&255)<<16|He(c>>8&255,b>>8&255)<<8|He(c>>0&255,b>>0&255))>>>0};var Jf=S.PredictorAdd0;S.PredictorAdd1=Ke,be("Predictor2","PredictorAdd2"),be("Predictor3","PredictorAdd3"),be("Predictor4","PredictorAdd4"),be("Predictor5","PredictorAdd5"),be("Predictor6","PredictorAdd6"),be("Predictor7","PredictorAdd7"),be("Predictor8","PredictorAdd8"),be("Predictor9","PredictorAdd9"),be("Predictor10","PredictorAdd10"),be("Predictor11","PredictorAdd11"),be("Predictor12","PredictorAdd12"),be("Predictor13","PredictorAdd13");var Ic=S.PredictorAdd2;ct("ColorIndexInverseTransform","MapARGB","32b",function(c){return c>>8&255},function(c){return c}),ct("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(c){return c},function(c){return c>>8&255});var ju,ai=S.ColorIndexInverseTransform,fl=S.MapARGB,Bu=S.VP8LColorIndexInverseTransformAlpha,qu=S.MapAlpha,wo=S.VP8LPredictorsAdd=[];wo.length=16,(S.VP8LPredictors=[]).length=16,(S.VP8LPredictorsAdd_C=[]).length=16,(S.VP8LPredictors_C=[]).length=16;var Ia,Vr,Pr,Ao,Ns,Ls,dl,Cs,Tn,Ec,Rr,li,pl,Hu,Tc,Ea,Ta,Io,Sa,gl,xa,Eo,Sc,ci,ui,cn,un,Sn,Bn=s(511),ks=s(2041),xc=s(225),ml=s(767),zu=0,Qf=ks,Gu=xc,Jr=ml,hi=Bn,$u=0,Wu=1,cm=2,Ku=3,Ju=4,Yf=5,um=6,Xf=7,Zf=8,Qu=9,ed=10,b_=[2,3,7],w_=[3,3,11],hm=[280,256,256,256,40],A_=[0,1,1,1,0],I_=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],E_=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],T_=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],S_=8,td=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],nd=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Pc=null,x_=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],P_=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],fm=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],R_=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],N_=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],L_=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],C_=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],To=[],xi=[],Ds=[],k_=1,dm=2,So=[],fi=[];Ce("UpsampleRgbLinePair",B,3),Ce("UpsampleBgrLinePair",pe,3),Ce("UpsampleRgbaLinePair",wt,4),Ce("UpsampleBgraLinePair",Nt,4),Ce("UpsampleArgbLinePair",bt,4),Ce("UpsampleRgba4444LinePair",ze,2),Ce("UpsampleRgb565LinePair",Ee,2);var D_=S.UpsampleRgbLinePair,O_=S.UpsampleBgrLinePair,pm=S.UpsampleRgbaLinePair,gm=S.UpsampleBgraLinePair,mm=S.UpsampleArgbLinePair,ym=S.UpsampleRgba4444LinePair,F_=S.UpsampleRgb565LinePair,Yu=16,Xu=1<<Yu-1,Rc=-227,rd=482,M_=6,vm=0,V_=s(256),U_=s(256),j_=s(256),B_=s(256),q_=s(rd-Rc),H_=s(rd-Rc);rn("YuvToRgbRow",B,3),rn("YuvToBgrRow",pe,3),rn("YuvToRgbaRow",wt,4),rn("YuvToBgraRow",Nt,4),rn("YuvToArgbRow",bt,4),rn("YuvToRgba4444Row",ze,2),rn("YuvToRgb565Row",Ee,2);var _m=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Zu=[0,2,8],z_=[8,7,6,4,4,2,2,2,1,1,1,1],G_=1;this.WebPDecodeRGBA=function(c,f,y,b,N){var D=Wu,V=new Ps,q=new Yn;V.ba=q,q.S=D,q.width=[q.width],q.height=[q.height];var G=q.width,Q=q.height,le=new Hr;if(le==null||c==null)var we=2;else e(le!=null),we=Yi(c,f,y,le.width,le.height,le.Pd,le.Qd,le.format,null);if(we!=0?G=0:(G!=null&&(G[0]=le.width[0]),Q!=null&&(Q[0]=le.height[0]),G=1),G){q.width=q.width[0],q.height=q.height[0],b!=null&&(b[0]=q.width),N!=null&&(N[0]=q.height);e:{if(b=new As,(N=new yo).data=c,N.w=f,N.ha=y,N.kd=1,f=[0],e(N!=null),((c=Yi(N.data,N.w,N.ha,null,null,null,f,null,N))==0||c==7)&&f[0]&&(c=4),(f=c)==0){if(e(V!=null),b.data=N.data,b.w=N.w+N.offset,b.ha=N.ha-N.offset,b.put=or,b.ac=Cn,b.bc=zr,b.ma=V,N.xa){if((c=En())==null){V=1;break e}if(function(Ae,ye){var Me=[0],Ne=[0],ue=[0];t:for(;;){if(Ae==null)return 0;if(ye==null)return Ae.a=2,0;if(Ae.l=ye,Ae.a=0,ce(Ae.m,ye.data,ye.w,ye.ha),!rt(Ae.m,Me,Ne,ue)){Ae.a=3;break t}if(Ae.xb=dm,ye.width=Me[0],ye.height=Ne[0],!Gr(Me[0],Ne[0],1,Ae,null))break t;return 1}return e(Ae.a!=0),0}(c,b)){if(b=(f=ll(b.width,b.height,V.Oa,V.ba))==0){t:{b=c;n:for(;;){if(b==null){b=0;break t}if(e(b.s.yc!=null),e(b.s.Ya!=null),e(0<b.s.Wb),e((y=b.l)!=null),e((N=y.ma)!=null),b.xb!=0){if(b.ca=N.ba,b.tb=N.tb,e(b.ca!=null),!bc(N.Oa,y,Ku)){b.a=2;break n}if(!ji(b,y.width)||y.da)break n;if((y.da||kt(b.ca.S))&&me(),11>b.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),b.ca.f.kb.F!=null&&me()),b.Pb&&0<b.s.ua&&b.s.vb.X==null&&!ie(b.s.vb,b.s.Wa.Xa)){b.a=1;break n}b.xb=0}if(!Tr(b,b.V,b.Ba,b.c,b.i,y.o,no))break n;N.Dc=b.Ma,b=1;break t}e(b.a!=0),b=0}b=!b}b&&(f=c.a)}else f=c.a}else{if((c=new ua)==null){V=1;break e}if(c.Fa=N.na,c.P=N.P,c.qc=N.Sa,fa(c,b)){if((f=ll(b.width,b.height,V.Oa,V.ba))==0){if(c.Aa=0,y=V.Oa,e((N=c)!=null),y!=null){if(0<(G=0>(G=y.Md)?0:100<G?255:255*G/100)){for(Q=le=0;4>Q;++Q)12>(we=N.pb[Q]).lc&&(we.ia=G*z_[0>we.lc?0:we.lc]>>3),le|=we.ia;le&&(alert("todo:VP8InitRandom"),N.ia=1)}N.Ga=y.Id,100<N.Ga?N.Ga=100:0>N.Ga&&(N.Ga=0)}tl(c,b)||(f=c.a)}}else f=c.a}f==0&&V.Oa!=null&&V.Oa.fd&&(f=wc(V.ba))}V=f}D=V!=0?null:11>D?q.f.RGBA.eb:q.f.kb.y}else D=null;return D};var bm=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function h(S,O){for(var F="",w=0;w<4;w++)F+=String.fromCharCode(S[O++]);return F}function d(S,O){return(S[O+0]<<0|S[O+1]<<8|S[O+2]<<16)>>>0}function p(S,O){return(S[O+0]<<0|S[O+1]<<8|S[O+2]<<16|S[O+3]<<24)>>>0}new l;var v=[0],g=[0],L=[],P=new l,j=t,x=function(S,O){var F={},w=0,E=!1,I=0,z=0;if(F.frames=[],!function(M,K,ee,he){for(var Y=0;Y<he;Y++)if(M[K+Y]!=ee.charCodeAt(Y))return!0;return!1}(S,O,"RIFF",4)){var re,ae;for(p(S,O+=4),O+=8;O<S.length;){var ge=h(S,O),ce=p(S,O+=4);O+=4;var xe=ce+(1&ce);switch(ge){case"VP8 ":case"VP8L":F.frames[w]===void 0&&(F.frames[w]={}),(C=F.frames[w]).src_off=E?z:O-8,C.src_size=I+ce+8,w++,E&&(E=!1,I=0,z=0);break;case"VP8X":(C=F.header={}).feature_flags=S[O];var Pe=O+4;C.canvas_width=1+d(S,Pe),Pe+=3,C.canvas_height=1+d(S,Pe),Pe+=3;break;case"ALPH":E=!0,I=xe+8,z=O-8;break;case"ANIM":(C=F.header).bgcolor=p(S,O),Pe=O+4,C.loop_count=(re=S)[(ae=Pe)+0]<<0|re[ae+1]<<8,Pe+=2;break;case"ANMF":var Qe,C;(C=F.frames[w]={}).offset_x=2*d(S,O),O+=3,C.offset_y=2*d(S,O),O+=3,C.width=1+d(S,O),O+=3,C.height=1+d(S,O),O+=3,C.duration=d(S,O),O+=3,Qe=S[O++],C.dispose=1&Qe,C.blend=Qe>>1&1}ge!="ANMF"&&(O+=xe)}return F}}(j,0);x.response=j,x.rgbaoutput=!0,x.dataurl=!1;var U=x.header?x.header:null,J=x.frames?x.frames:null;if(U){U.loop_counter=U.loop_count,v=[U.canvas_height],g=[U.canvas_width];for(var Z=0;Z<J.length&&J[Z].blend!=0;Z++);}var fe=J[0],Ie=P.WebPDecodeRGBA(j,fe.src_off,fe.src_size,g,v);fe.rgba=Ie,fe.imgwidth=g[0],fe.imgheight=v[0];for(var T=0;T<g[0]*v[0]*4;T++)L[T]=Ie[T];return this.width=g,this.height=v,this.data=L,this}(function(t){var e=function(){return typeof Up=="function"},n=function(v,g,L,P){var j=4,x=o;switch(P){case t.image_compression.FAST:j=1,x=s;break;case t.image_compression.MEDIUM:j=6,x=a;break;case t.image_compression.SLOW:j=9,x=l}v=r(v,g,L,x);var U=Up(v,{level:j});return t.__addimage__.arrayBufferToBinaryString(U)},r=function(v,g,L,P){for(var j,x,U,J=v.length/g,Z=new Uint8Array(v.length+J),fe=d(),Ie=0;Ie<J;Ie+=1){if(U=Ie*g,j=v.subarray(U,U+g),P)Z.set(P(j,L,x),U+Ie);else{for(var T,S=fe.length,O=[];T<S;T+=1)O[T]=fe[T](j,L,x);var F=p(O.concat());Z.set(O[F],U+Ie)}x=j}return Z},i=function(v){var g=Array.apply([],v);return g.unshift(0),g},s=function(v,g){var L,P=[],j=v.length;P[0]=1;for(var x=0;x<j;x+=1)L=v[x-g]||0,P[x+1]=v[x]-L+256&255;return P},o=function(v,g,L){var P,j=[],x=v.length;j[0]=2;for(var U=0;U<x;U+=1)P=L&&L[U]||0,j[U+1]=v[U]-P+256&255;return j},a=function(v,g,L){var P,j,x=[],U=v.length;x[0]=3;for(var J=0;J<U;J+=1)P=v[J-g]||0,j=L&&L[J]||0,x[J+1]=v[J]+256-(P+j>>>1)&255;return x},l=function(v,g,L){var P,j,x,U,J=[],Z=v.length;J[0]=4;for(var fe=0;fe<Z;fe+=1)P=v[fe-g]||0,j=L&&L[fe]||0,x=L&&L[fe-g]||0,U=h(P,j,x),J[fe+1]=v[fe]-U+256&255;return J},h=function(v,g,L){if(v===g&&g===L)return v;var P=Math.abs(g-L),j=Math.abs(v-L),x=Math.abs(v+g-L-L);return P<=j&&P<=x?v:j<=x?g:L},d=function(){return[i,s,o,a,l]},p=function(v){var g=v.map(function(L){return L.reduce(function(P,j){return P+Math.abs(j)},0)});return g.indexOf(Math.min.apply(null,g))};t.processPNG=function(v,g,L,P){var j,x,U,J,Z,fe,Ie,T,S,O,F,w,E,I,z,re=this.decode.FLATE_DECODE,ae="";if(this.__addimage__.isArrayBuffer(v)&&(v=new Uint8Array(v)),this.__addimage__.isArrayBufferView(v)){if(v=(U=new hR(v)).imgData,x=U.bits,j=U.colorSpace,Z=U.colors,[4,6].indexOf(U.colorType)!==-1){if(U.bits===8){S=(T=U.pixelBitlength==32?new Uint32Array(U.decodePixels().buffer):U.pixelBitlength==16?new Uint16Array(U.decodePixels().buffer):new Uint8Array(U.decodePixels().buffer)).length,F=new Uint8Array(S*U.colors),O=new Uint8Array(S);var ge,ce=U.pixelBitlength-U.bits;for(I=0,z=0;I<S;I++){for(E=T[I],ge=0;ge<ce;)F[z++]=E>>>ge&255,ge+=U.bits;O[I]=E>>>ge&255}}if(U.bits===16){S=(T=new Uint32Array(U.decodePixels().buffer)).length,F=new Uint8Array(S*(32/U.pixelBitlength)*U.colors),O=new Uint8Array(S*(32/U.pixelBitlength)),w=U.colors>1,I=0,z=0;for(var xe=0;I<S;)E=T[I++],F[z++]=E>>>0&255,w&&(F[z++]=E>>>16&255,E=T[I++],F[z++]=E>>>0&255),O[xe++]=E>>>16&255;x=8}P!==t.image_compression.NONE&&e()?(v=n(F,U.width*U.colors,U.colors,P),Ie=n(O,U.width,1,P)):(v=F,Ie=O,re=void 0)}if(U.colorType===3&&(j=this.color_spaces.INDEXED,fe=U.palette,U.transparency.indexed)){var Pe=U.transparency.indexed,Qe=0;for(I=0,S=Pe.length;I<S;++I)Qe+=Pe[I];if((Qe/=255)===S-1&&Pe.indexOf(0)!==-1)J=[Pe.indexOf(0)];else if(Qe!==S){for(T=U.decodePixels(),O=new Uint8Array(T.length),I=0,S=T.length;I<S;I++)O[I]=Pe[T[I]];Ie=n(O,U.width,1)}}var C=function(M){var K;switch(M){case t.image_compression.FAST:K=11;break;case t.image_compression.MEDIUM:K=13;break;case t.image_compression.SLOW:K=14;break;default:K=12}return K}(P);return re===this.decode.FLATE_DECODE&&(ae="/Predictor "+C+" "),ae+="/Colors "+Z+" /BitsPerComponent "+x+" /Columns "+U.width,(this.__addimage__.isArrayBuffer(v)||this.__addimage__.isArrayBufferView(v))&&(v=this.__addimage__.arrayBufferToBinaryString(v)),(Ie&&this.__addimage__.isArrayBuffer(Ie)||this.__addimage__.isArrayBufferView(Ie))&&(Ie=this.__addimage__.arrayBufferToBinaryString(Ie)),{alias:L,data:v,index:g,filter:re,decodeParameters:ae,transparency:J,palette:fe,sMask:Ie,predictor:C,width:U.width,height:U.height,bitsPerComponent:x,colorSpace:j}}}})(gt.API),function(t){t.processGIF89A=function(e,n,r,i){var s=new fR(e),o=s.width,a=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var h={data:l,width:o,height:a},d=new Kd(100).encode(h,100);return t.processJPEG.call(this,d,n,r,i)},t.processGIF87A=t.processGIF89A}(gt.API),Ni.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:n,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Ni.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){on.log("bit decode error:"+n)}},Ni.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var l=this.palette[s>>7-a&1];this.data[o+4*a]=l.blue,this.data[o+4*a+1]=l.green,this.data[o+4*a+2]=l.red,this.data[o+4*a+3]=255}n!==0&&(this.pos+=4-n)}},Ni.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<t;i++){var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*i*4,a=s>>4,l=15&s,h=this.palette[a];if(this.data[o]=h.blue,this.data[o+1]=h.green,this.data[o+2]=h.red,this.data[o+3]=255,2*i+1>=this.width)break;h=this.palette[l],this.data[o+4]=h.blue,this.data[o+4+1]=h.green,this.data[o+4+2]=h.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},Ni.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*r;if(i<this.palette.length){var o=this.palette[i];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},Ni.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,a=(s>>5&e)/e*255|0,l=(s>>10&e)/e*255|0,h=s>>15?255:0,d=r*this.width*4+4*i;this.data[d]=l,this.data[d+1]=a,this.data[d+2]=o,this.data[d+3]=h}this.pos+=t}},Ni.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&e)/e*255|0,l=(o>>5&n)/n*255|0,h=(o>>11)/e*255|0,d=i*this.width*4+4*s;this.data[d]=h,this.data[d+1]=l,this.data[d+2]=a,this.data[d+3]=255}this.pos+=t}},Ni.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*n;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},Ni.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*n;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=o}},Ni.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,n,r,i){var s=new Ni(e,!1),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},h=new Kd(100).encode(l,100);return t.processJPEG.call(this,h,n,r,i)}}(gt.API),y2.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,n,r,i){var s=new y2(e),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},h=new Kd(100).encode(l,100);return t.processJPEG.call(this,h,n,r,i)}}(gt.API),gt.API.processRGBA=function(t,e,n){for(var r=t.data,i=r.length,s=new Uint8Array(i/4*3),o=new Uint8Array(i/4),a=0,l=0,h=0;h<i;h+=4){var d=r[h],p=r[h+1],v=r[h+2],g=r[h+3];s[a++]=d,s[a++]=p,s[a++]=v,o[l++]=g}var L=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:L,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},gt.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Tl=gt.API,Ih=Tl.getCharWidthsArray=function(t,e){var n,r,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:i.metadata.Unicode.widths,l=a.fof?a.fof:1,h=e.kerning?e.kerning:i.metadata.Unicode.kerning,d=h.fof?h.fof:1,p=e.doKerning!==!1,v=0,g=t.length,L=0,P=a[0]||l,j=[];for(n=0;n<g;n++)r=t.charCodeAt(n),typeof i.metadata.widthOfString=="function"?j.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+o*(1e3/s)||0)/1e3):(v=p&&Zt(h[r])==="object"&&!isNaN(parseInt(h[r][L],10))?h[r][L]/d:0,j.push((a[r]||P)/l+v)),L=r;return j},d2=Tl.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return Tl.processArabic&&(t=Tl.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,i)/n:Ih.apply(this,arguments).reduce(function(s,o){return s+o},0)},p2=function(t,e,n,r){for(var i=[],s=0,o=t.length,a=0;s!==o&&a+e[s]<n;)a+=e[s],s++;i.push(t.slice(0,s));var l=s;for(a=0;s!==o;)a+e[s]>r&&(i.push(t.slice(l,s)),a=0,l=s),a+=e[s],s++;return l!==s&&i.push(t.slice(l,s)),i},g2=function(t,e,n){n||(n={});var r,i,s,o,a,l,h,d=[],p=[d],v=n.textIndent||0,g=0,L=0,P=t.split(" "),j=Ih.apply(this,[" ",n])[0];if(l=n.lineIndent===-1?P[0].length+2:n.lineIndent||0){var x=Array(l).join(" "),U=[];P.map(function(Z){(Z=Z.split(/\s*\n/)).length>1?U=U.concat(Z.map(function(fe,Ie){return(Ie&&fe.length?`
`:"")+fe})):U.push(Z[0])}),P=U,l=d2.apply(this,[x,n])}for(s=0,o=P.length;s<o;s++){var J=0;if(r=P[s],l&&r[0]==`
`&&(r=r.substr(1),J=1),v+g+(L=(i=Ih.apply(this,[r,n])).reduce(function(Z,fe){return Z+fe},0))>e||J){if(L>e){for(a=p2.apply(this,[r,i,e-(v+g),e]),d.push(a.shift()),d=[a.pop()];a.length;)p.push([a.shift()]);L=i.slice(r.length-(d[0]?d[0].length:0)).reduce(function(Z,fe){return Z+fe},0)}else d=[r];p.push(d),v=L+l,g=j}else d.push(r),v+=g+L,g=j}return h=l?function(Z,fe){return(fe?x:"")+Z.join(" ")}:function(Z){return Z.join(" ")},p.map(h)},Tl.splitTextToSize=function(t,e,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),s=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var p=this.internal.getFont(d.fontName,d.fontStyle);return p.metadata.Unicode?{widths:p.metadata.Unicode.widths||{0:1},kerning:p.metadata.Unicode.kerning||{}}:{font:p.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/i;s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=n.lineIndent;var a,l,h=[];for(a=0,l=r.length;a<l;a++)h=h.concat(g2.apply(this,[r[a],o,s]));return h},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",n={},r={},i=0;i<e.length;i++)n[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var s=function(p){return"0x"+parseInt(p,10).toString(16)},o=t.__fontmetrics__.compress=function(p){var v,g,L,P,j=["{"];for(var x in p){if(v=p[x],isNaN(parseInt(x,10))?g="'"+x+"'":(x=parseInt(x,10),g=(g=s(x).slice(2)).slice(0,-1)+r[g.slice(-1)]),typeof v=="number")v<0?(L=s(v).slice(3),P="-"):(L=s(v).slice(2),P=""),L=P+L.slice(0,-1)+r[L.slice(-1)];else{if(Zt(v)!=="object")throw new Error("Don't know what to do with value type "+Zt(v)+".");L=o(v)}j.push(g+L)}return j.push("}"),j.join("")},a=t.__fontmetrics__.uncompress=function(p){if(typeof p!="string")throw new Error("Invalid argument passed to uncompress.");for(var v,g,L,P,j={},x=1,U=j,J=[],Z="",fe="",Ie=p.length-1,T=1;T<Ie;T+=1)(P=p[T])=="'"?v?(L=v.join(""),v=void 0):v=[]:v?v.push(P):P=="{"?(J.push([U,L]),U={},L=void 0):P=="}"?((g=J.pop())[0][g[1]]=U,L=void 0,U=g[0]):P=="-"?x=-1:L===void 0?n.hasOwnProperty(P)?(Z+=n[P],L=parseInt(Z,16)*x,x=1,Z=""):Z+=P:n.hasOwnProperty(P)?(fe+=n[P],U[L]=parseInt(fe,16)*x,x=1,L=void 0,fe=""):fe+=P;return j},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},h={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},d={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(p){var v=p.font,g=d.Unicode[v.postScriptName];g&&(v.metadata.Unicode={},v.metadata.Unicode.widths=g.widths,v.metadata.Unicode.kerning=g.kerning);var L=h.Unicode[v.postScriptName];L&&(v.metadata.Unicode.encoding=L,v.encoding=L.codePages[0])}])}(gt.API),function(t){var e=function(n){for(var r=n.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=n.charCodeAt(s);return i};t.API.events.push(["addFont",function(n){var r=void 0,i=n.font,s=n.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(lu(a)),o.metadata=t.API.TTFFont.open(a),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,r)}}])}(gt),function(t){function e(){return(mt.canvg?Promise.resolve(mt.canvg):Dp(()=>import("./index.es-C21g1SNN.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}gt.API.addSvgAsImage=function(n,r,i,s,o,a,l,h){if(isNaN(r)||isNaN(i))throw on.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(o))throw on.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=s,d.height=o;var p=d.getContext("2d");p.fillStyle="#fff",p.fillRect(0,0,d.width,d.height);var v={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},g=this;return e().then(function(L){return L.fromString(p,n,v)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(L){return L.render(v)}).then(function(){g.addImage(d.toDataURL("image/jpeg",1),r,i,s,o,l,h)})}}(),gt.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,n);return this},gt.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,i,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(o),l=[],h=0,d=0,p=0;function v(L,P){var j,x=!1;for(j=0;j<L.length;j+=1)L[j]===P&&(x=!0);return x}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var g=a.length;for(p=0;p<g;p+=1)n[a[p]].value=n[a[p]].defaultValue,n[a[p]].explicitSet=!1}if(Zt(t)==="object"){for(i in t)if(s=t[i],v(a,i)&&s!==void 0){if(n[i].type==="boolean"&&typeof s=="boolean")n[i].value=s;else if(n[i].type==="name"&&v(n[i].valueSet,s))n[i].value=s;else if(n[i].type==="integer"&&Number.isInteger(s))n[i].value=s;else if(n[i].type==="array"){for(h=0;h<s.length;h+=1)if(r=!0,s[h].length===1&&typeof s[h][0]=="number")l.push(String(s[h]-1));else if(s[h].length>1){for(d=0;d<s[h].length;d+=1)typeof s[h][d]!="number"&&(r=!1);r===!0&&l.push([s[h][0]-1,s[h][1]-1].join(" "))}n[i].value="["+l.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var L,P=[];for(L in n)n[L].explicitSet===!0&&(n[L].type==="name"?P.push("/"+L+" /"+n[L].value):P.push("/"+L+" "+n[L].value));P.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+P.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),h=s.length+o.length+a.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+h+" >>"),this.internal.write("stream"),this.internal.write(i+s+o+a+l),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(gt.API),function(t){var e=t.API,n=e.pdfEscape16=function(s,o){for(var a,l=o.metadata.Unicode.widths,h=["","0","00","000","0000"],d=[""],p=0,v=s.length;p<v;++p){if(a=o.metadata.characterToGlyph(s.charCodeAt(p)),o.metadata.glyIdsUsed.push(a),o.metadata.toUnicode[a]=s.charCodeAt(p),l.indexOf(a)==-1&&(l.push(a),l.push([parseInt(o.metadata.widthOfGlyph(a),10)])),a=="0")return d.join("");a=a.toString(16),d.push(h[4-a.length],a)}return d.join("")},r=function(s){var o,a,l,h,d,p,v;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],p=0,v=(a=Object.keys(s).sort(function(g,L){return g-L})).length;p<v;p++)o=a[p],l.length>=100&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(h=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),l.push("<"+o+"><"+h+">"));return l.length&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),d+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,h=o.newObject,d=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="Identity-H"){for(var p=a.metadata.Unicode.widths,v=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),g="",L=0;L<v.length;L++)g+=String.fromCharCode(v[L]);var P=h();d({data:g,addLength1:!0,objectId:P}),l("endobj");var j=h();d({data:r(a.metadata.toUnicode),addLength1:!0,objectId:j}),l("endobj");var x=h();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+kl(a.fontName)),l("/FontFile2 "+P+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/Flags "+a.metadata.flags),l("/StemV "+a.metadata.stemV),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l(">>"),l("endobj");var U=h();l("<<"),l("/Type /Font"),l("/BaseFont /"+kl(a.fontName)),l("/FontDescriptor "+x+" 0 R"),l("/W "+t.API.PDFObject.convert(p)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+a.encoding+")"),l(">>"),l(">>"),l("endobj"),a.objectNumber=h(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+j+" 0 R"),l("/BaseFont /"+kl(a.fontName)),l("/Encoding /"+a.encoding),l("/DescendantFonts ["+U+" 0 R]"),l(">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,h=o.newObject,d=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var p=a.metadata.rawData,v="",g=0;g<p.length;g++)v+=String.fromCharCode(p[g]);var L=h();d({data:v,addLength1:!0,objectId:L}),l("endobj");var P=h();d({data:r(a.metadata.toUnicode),addLength1:!0,objectId:P}),l("endobj");var j=h();l("<<"),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l("/StemV "+a.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+L+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/FontName /"+kl(a.fontName)),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l(">>"),l("endobj"),a.objectNumber=h();for(var x=0;x<a.metadata.hmtx.widths.length;x++)a.metadata.hmtx.widths[x]=parseInt(a.metadata.hmtx.widths[x]*(1e3/a.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+P+" 0 R/BaseFont/"+kl(a.fontName)+"/FontDescriptor "+j+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]);var i=function(s){var o,a=s.text||"",l=s.x,h=s.y,d=s.options||{},p=s.mutex||{},v=p.pdfEscape,g=p.activeFontKey,L=p.fonts,P=g,j="",x=0,U="",J=L[P].encoding;if(L[P].encoding!=="Identity-H")return{text:a,x:l,y:h,options:d,mutex:p};for(U=a,P=g,Array.isArray(a)&&(U=a[0]),x=0;x<U.length;x+=1)L[P].metadata.hasOwnProperty("cmap")&&(o=L[P].metadata.cmap.unicode.codeMap[U[x].charCodeAt(0)]),o||U[x].charCodeAt(0)<256&&L[P].metadata.hasOwnProperty("Unicode")?j+=U[x]:j+="";var Z="";return parseInt(P.slice(1))<14||J==="WinAnsiEncoding"?Z=v(j,P).split("").map(function(fe){return fe.charCodeAt(0).toString(16)}).join(""):J==="Identity-H"&&(Z=n(j,L[P])),p.isHex=!0,{text:Z,x:l,y:h,options:d,mutex:p}};e.events.push(["postProcessText",function(s){var o=s.text||"",a=[],l={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var h=0;for(h=0;h<o.length;h+=1)Array.isArray(o[h])&&o[h].length===3?a.push([i(Object.assign({},l,{text:o[h][0]})).text,o[h][1],o[h][2]]):a.push(i(Object.assign({},l,{text:o[h]})).text);s.text=a}else s.text=i(Object.assign({},l,{text:o})).text}])}(gt),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(gt.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var i,s,o,a,l,h,d,p=e,v=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],g=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],L={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},P={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},j=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],x=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),U=!1,J=0;this.__bidiEngine__={};var Z=function(w){var E=w.charCodeAt(),I=E>>8,z=P[I];return z!==void 0?p[256*z+(255&E)]:I===252||I===253?"AL":x.test(I)?"L":I===8?"R":"N"},fe=function(w){for(var E,I=0;I<w.length;I++){if((E=Z(w.charAt(I)))==="L")return!1;if(E==="R")return!0}return!1},Ie=function(w,E,I,z){var re,ae,ge,ce,xe=E[z];switch(xe){case"L":case"R":U=!1;break;case"N":case"AN":break;case"EN":U&&(xe="AN");break;case"AL":U=!0,xe="R";break;case"WS":xe="N";break;case"CS":z<1||z+1>=E.length||(re=I[z-1])!=="EN"&&re!=="AN"||(ae=E[z+1])!=="EN"&&ae!=="AN"?xe="N":U&&(ae="AN"),xe=ae===re?ae:"N";break;case"ES":xe=(re=z>0?I[z-1]:"B")==="EN"&&z+1<E.length&&E[z+1]==="EN"?"EN":"N";break;case"ET":if(z>0&&I[z-1]==="EN"){xe="EN";break}if(U){xe="N";break}for(ge=z+1,ce=E.length;ge<ce&&E[ge]==="ET";)ge++;xe=ge<ce&&E[ge]==="EN"?"EN":"N";break;case"NSM":if(o&&!a){for(ce=E.length,ge=z+1;ge<ce&&E[ge]==="NSM";)ge++;if(ge<ce){var Pe=w[z],Qe=Pe>=1425&&Pe<=2303||Pe===64286;if(re=E[ge],Qe&&(re==="R"||re==="AL")){xe="R";break}}}xe=z<1||(re=E[z-1])==="B"?"N":I[z-1];break;case"B":U=!1,i=!0,xe=J;break;case"S":s=!0,xe="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":U=!1;break;case"BN":xe="N"}return xe},T=function(w,E,I){var z=w.split("");return I&&S(z,I,{hiLevel:J}),z.reverse(),E&&E.reverse(),z.join("")},S=function(w,E,I){var z,re,ae,ge,ce,xe=-1,Pe=w.length,Qe=0,C=[],M=J?g:v,K=[];for(U=!1,i=!1,s=!1,re=0;re<Pe;re++)K[re]=Z(w[re]);for(ae=0;ae<Pe;ae++){if(ce=Qe,C[ae]=Ie(w,K,C,ae),z=240&(Qe=M[ce][L[C[ae]]]),Qe&=15,E[ae]=ge=M[Qe][5],z>0)if(z===16){for(re=xe;re<ae;re++)E[re]=1;xe=-1}else xe=-1;if(M[Qe][6])xe===-1&&(xe=ae);else if(xe>-1){for(re=xe;re<ae;re++)E[re]=ge;xe=-1}K[ae]==="B"&&(E[ae]=0),I.hiLevel|=ge}s&&function(ee,he,Y){for(var se=0;se<Y;se++)if(ee[se]==="S"){he[se]=J;for(var ne=se-1;ne>=0&&ee[ne]==="WS";ne--)he[ne]=J}}(K,E,Pe)},O=function(w,E,I,z,re){if(!(re.hiLevel<w)){if(w===1&&J===1&&!i)return E.reverse(),void(I&&I.reverse());for(var ae,ge,ce,xe,Pe=E.length,Qe=0;Qe<Pe;){if(z[Qe]>=w){for(ce=Qe+1;ce<Pe&&z[ce]>=w;)ce++;for(xe=Qe,ge=ce-1;xe<ge;xe++,ge--)ae=E[xe],E[xe]=E[ge],E[ge]=ae,I&&(ae=I[xe],I[xe]=I[ge],I[ge]=ae);Qe=ce}Qe++}}},F=function(w,E,I){var z=w.split(""),re={hiLevel:J};return I||(I=[]),S(z,I,re),function(ae,ge,ce){if(ce.hiLevel!==0&&d)for(var xe,Pe=0;Pe<ae.length;Pe++)ge[Pe]===1&&(xe=j.indexOf(ae[Pe]))>=0&&(ae[Pe]=j[xe+1])}(z,I,re),O(2,z,E,I,re),O(1,z,E,I,re),z.join("")};return this.__bidiEngine__.doBidiReorder=function(w,E,I){if(function(re,ae){if(ae)for(var ge=0;ge<re.length;ge++)ae[ge]=ge;a===void 0&&(a=fe(re)),h===void 0&&(h=fe(re))}(w,E),o||!l||h)if(o&&l&&a^h)J=a?1:0,w=T(w,E,I);else if(!o&&l&&h)J=a?1:0,w=F(w,E,I),w=T(w,E);else if(!o||a||l||h){if(o&&!l&&a^h)w=T(w,E),a?(J=0,w=F(w,E,I)):(J=1,w=F(w,E,I),w=T(w,E));else if(o&&a&&!l&&h)J=1,w=F(w,E,I),w=T(w,E);else if(!o&&!l&&a^h){var z=d;a?(J=1,w=F(w,E,I),J=0,d=!1,w=F(w,E,I),d=z):(J=0,w=F(w,E,I),w=T(w,E),J=1,d=!1,w=F(w,E,I),d=z,w=T(w,E))}}else J=0,w=F(w,E,I);else J=a?1:0,w=F(w,E,I);return w},this.__bidiEngine__.setOptions=function(w){w&&(o=w.isInputVisual,l=w.isOutputVisual,a=w.isInputRtl,h=w.isOutputRtl,d=w.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var i=r.text,s=(r.x,r.y,r.options||{}),o=(r.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,n.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var a=0;for(o=[],a=0;a<i.length;a+=1)Object.prototype.toString.call(i[a])==="[object Array]"?o.push([n.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):o.push([n.doBidiReorder(i[a])]);r.text=o}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])}(gt),gt.API.TTFFont=function(){function t(e){var n;if(this.rawData=e,n=this.contents=new la(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new xR(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new dR(this.contents),this.head=new gR(this),this.name=new bR(this),this.cmap=new y_(this),this.toUnicode={},this.hhea=new mR(this),this.maxp=new wR(this),this.hmtx=new AR(this),this.post=new vR(this),this.os2=new yR(this),this.loca=new SR(this),this.glyf=new IR(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,a,l,h;for(h=[],o=0,a=(l=this.bbox).length;o<a;o++)e=l[o],h.push(Math.round(e*this.scaleFactor));return h}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(n=i>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var i,s,o,a;for(o=0,s=0,a=(e=""+e).length;0<=a?s<a:s>a;s=0<=a?++s:--s)i=e.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return o*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t}();var Vi,la=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,i;for(i=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(e.charCodeAt(n)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,i,s,o,a,l;return e=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),o=this.readByte(),a=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^o)+256*(255^a)+(255^l)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*i+16777216*s+65536*o+256*a+l},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,i,s;for(s=[],r=0,i=e.length;r<i;r++)n=e[r],s.push(this.writeByte(n));return s},t}(),dR=function(){var t;function e(n){var r,i,s;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,i,s,o,a,l,h,d,p,v,g,L,P;for(P in g=Object.keys(n).length,l=Math.log(2),p=16*Math.floor(Math.log(g)/l),o=Math.floor(p/l),d=16*g-p,(i=new la).writeInt(this.scalarType),i.writeShort(g),i.writeShort(p),i.writeShort(o),i.writeShort(d),s=16*g,h=i.pos+s,a=null,L=[],n)for(v=n[P],i.writeString(P),i.writeInt(t(v)),i.writeInt(h),i.writeInt(v.length),L=L.concat(v),P==="head"&&(a=h),h+=v.length;h%4;)L.push(0),h++;return i.write(L),r=2981146554-t(i.data),i.pos=a+8,i.writeUInt32(r),i.data},t=function(n){var r,i,s,o;for(n=v_.call(n);n.length%4;)n.push(0);for(s=new la(n),i=0,r=0,o=n.length;r<o;r=r+=4)i+=s.readUInt32();return 4294967295&i},e}(),pR={}.hasOwnProperty,vs=function(t,e){for(var n in e)pR.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};Vi=function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var gR=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return vs(e,Vi),e.prototype.tag="head",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},e.prototype.encode=function(n){var r;return(r=new la).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},e}(),v2=function(){function t(e,n){var r,i,s,o,a,l,h,d,p,v,g,L,P,j,x,U,J;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),p=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(g=e.readUInt16(),v=g/2,e.pos+=6,s=function(){var Z,fe;for(fe=[],l=Z=0;0<=v?Z<v:Z>v;l=0<=v?++Z:--Z)fe.push(e.readUInt16());return fe}(),e.pos+=2,P=function(){var Z,fe;for(fe=[],l=Z=0;0<=v?Z<v:Z>v;l=0<=v?++Z:--Z)fe.push(e.readUInt16());return fe}(),h=function(){var Z,fe;for(fe=[],l=Z=0;0<=v?Z<v:Z>v;l=0<=v?++Z:--Z)fe.push(e.readUInt16());return fe}(),d=function(){var Z,fe;for(fe=[],l=Z=0;0<=v?Z<v:Z>v;l=0<=v?++Z:--Z)fe.push(e.readUInt16());return fe}(),i=(this.length-e.pos+this.offset)/2,a=function(){var Z,fe;for(fe=[],l=Z=0;0<=i?Z<i:Z>i;l=0<=i?++Z:--Z)fe.push(e.readUInt16());return fe}(),l=x=0,J=s.length;x<J;l=++x)for(j=s[l],r=U=L=P[l];L<=j?U<=j:U>=j;r=L<=j?++U:--U)d[l]===0?o=r+h[l]:(o=a[d[l]/2+(r-L)-(v-l)]||0)!==0&&(o+=h[l]),this.codeMap[r]=65535&o}e.pos=p}return t.encode=function(e,n){var r,i,s,o,a,l,h,d,p,v,g,L,P,j,x,U,J,Z,fe,Ie,T,S,O,F,w,E,I,z,re,ae,ge,ce,xe,Pe,Qe,C,M,K,ee,he,Y,se,ne,Se,De,$;switch(z=new la,o=Object.keys(e).sort(function(W,ie){return W-ie}),n){case"macroman":for(P=0,j=function(){var W=[];for(L=0;L<256;++L)W.push(0);return W}(),U={0:0},s={},re=0,xe=o.length;re<xe;re++)U[ne=e[i=o[re]]]==null&&(U[ne]=++P),s[i]={old:e[i],new:U[e[i]]},j[i]=U[e[i]];return z.writeUInt16(1),z.writeUInt16(0),z.writeUInt32(12),z.writeUInt16(0),z.writeUInt16(262),z.writeUInt16(0),z.write(j),{charMap:s,subtable:z.data,maxGlyphID:P+1};case"unicode":for(E=[],p=[],J=0,U={},r={},x=h=null,ae=0,Pe=o.length;ae<Pe;ae++)U[fe=e[i=o[ae]]]==null&&(U[fe]=++J),r[i]={old:fe,new:U[fe]},a=U[fe]-i,x!=null&&a===h||(x&&p.push(x),E.push(i),h=a),x=i;for(x&&p.push(x),p.push(65535),E.push(65535),F=2*(O=E.length),S=2*Math.pow(Math.log(O)/Math.LN2,2),v=Math.log(S/2)/Math.LN2,T=2*O-S,l=[],Ie=[],g=[],L=ge=0,Qe=E.length;ge<Qe;L=++ge){if(w=E[L],d=p[L],w===65535){l.push(0),Ie.push(0);break}if(w-(I=r[w].new)>=32768)for(l.push(0),Ie.push(2*(g.length+O-L)),i=ce=w;w<=d?ce<=d:ce>=d;i=w<=d?++ce:--ce)g.push(r[i].new);else l.push(I-w),Ie.push(0)}for(z.writeUInt16(3),z.writeUInt16(1),z.writeUInt32(12),z.writeUInt16(4),z.writeUInt16(16+8*O+2*g.length),z.writeUInt16(0),z.writeUInt16(F),z.writeUInt16(S),z.writeUInt16(v),z.writeUInt16(T),Y=0,C=p.length;Y<C;Y++)i=p[Y],z.writeUInt16(i);for(z.writeUInt16(0),se=0,M=E.length;se<M;se++)i=E[se],z.writeUInt16(i);for(Se=0,K=l.length;Se<K;Se++)a=l[Se],z.writeUInt16(a);for(De=0,ee=Ie.length;De<ee;De++)Z=Ie[De],z.writeUInt16(Z);for($=0,he=g.length;$<he;$++)P=g[$],z.writeUInt16(P);return{charMap:r,subtable:z.data,maxGlyphID:J+1}}},t}(),y_=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return vs(e,Vi),e.prototype.tag="cmap",e.prototype.parse=function(n){var r,i,s;for(n.pos=this.offset,this.version=n.readUInt16(),s=n.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)r=new v2(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(n,r){var i,s;return r==null&&(r="macroman"),i=v2.encode(n,r),(s=new la).writeUInt16(0),s.writeUInt16(1),i.table=s.data.concat(i.subtable),i},e}(),mR=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return vs(e,Vi),e.prototype.tag="hhea",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},e}(),yR=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return vs(e,Vi),e.prototype.tag="OS/2",e.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(n.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(n.readInt());return i}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(n.readInt());return i}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},e}(),vR=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return vs(e,Vi),e.prototype.tag="post",e.prototype.parse=function(n){var r,i,s;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var o;for(i=n.readUInt16(),this.glyphNameIndex=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],s=[];n.pos<this.offset+this.length;)r=n.readByte(),s.push(this.names.push(n.readString(r)));return s;case 151552:return i=n.readUInt16(),this.offsets=n.read(i);case 196608:break;case 262144:return this.map=(function(){var a,l,h;for(h=[],o=a=0,l=this.file.maxp.numGlyphs;0<=l?a<l:a>l;o=0<=l?++a:--a)h.push(n.readUInt32());return h}).call(this)}},e}(),_R=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},bR=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return vs(e,Vi),e.prototype.tag="name",e.prototype.parse=function(n){var r,i,s,o,a,l,h,d,p,v,g;for(n.pos=this.offset,n.readShort(),r=n.readShort(),l=n.readShort(),i=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)i.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+l+n.readShort()});for(h={},o=p=0,v=i.length;p<v;o=++p)s=i[o],n.pos=s.offset,d=n.readString(s.length),a=new _R(d,s),h[g=s.nameID]==null&&(h[g]=[]),h[s.nameID].push(a);this.strings=h,this.copyright=h[0],this.fontFamily=h[1],this.fontSubfamily=h[2],this.uniqueSubfamily=h[3],this.fontName=h[4],this.version=h[5];try{this.postscriptName=h[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=h[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=h[7],this.manufacturer=h[8],this.designer=h[9],this.description=h[10],this.vendorUrl=h[11],this.designerUrl=h[12],this.license=h[13],this.licenseUrl=h[14],this.preferredFamily=h[15],this.preferredSubfamily=h[17],this.compatibleFull=h[18],this.sampleText=h[19]},e}(),wR=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return vs(e,Vi),e.prototype.tag="maxp",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},e}(),AR=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return vs(e,Vi),e.prototype.tag="hmtx",e.prototype.parse=function(n){var r,i,s,o,a,l,h;for(n.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var d,p;for(p=[],r=d=0;0<=s?d<s:d>s;r=0<=s?++d:--d)p.push(n.readInt16());return p}(),this.widths=(function(){var d,p,v,g;for(g=[],d=0,p=(v=this.metrics).length;d<p;d++)o=v[d],g.push(o.advance);return g}).call(this),i=this.widths[this.widths.length-1],h=[],r=a=0;0<=s?a<s:a>s;r=0<=s?++a:--a)h.push(this.widths.push(i));return h},e.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},e}(),v_=[].slice,IR=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return vs(e,Vi),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(n){var r,i,s,o,a,l,h,d,p,v;return n in this.cache?this.cache[n]:(o=this.file.loca,r=this.file.contents,i=o.indexOf(n),(s=o.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+i,a=(l=new la(r.read(s))).readShort(),d=l.readShort(),v=l.readShort(),h=l.readShort(),p=l.readShort(),this.cache[n]=a===-1?new TR(l,d,v,h,p):new ER(l,a,d,v,h,p),this.cache[n]))},e.prototype.encode=function(n,r,i){var s,o,a,l,h;for(a=[],o=[],l=0,h=r.length;l<h;l++)s=n[r[l]],o.push(a.length),s&&(a=a.concat(s.encode(i)));return o.push(a.length),{table:a,offsets:o}},e}(),ER=function(){function t(e,n,r,i,s,o){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=o,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),TR=function(){function t(e,n,r,i,s){var o,a;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;a=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&a;)o.pos+=1&a?4:2,128&a?o.pos+=8:64&a?o.pos+=4:8&a&&(o.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new la(v_.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t}(),SR=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return vs(e,Vi),e.prototype.tag="loca",e.prototype.parse=function(n){var r,i;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=2)o.push(2*n.readUInt16());return o}).call(this):(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=4)o.push(n.readUInt32());return o}).call(this)},e.prototype.indexOf=function(n){return this.offsets[n]},e.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},e.prototype.encode=function(n,r){for(var i=new Uint32Array(this.offsets.length),s=0,o=0,a=0;a<i.length;++a)if(i[a]=s,o<r.length&&r[o]==a){++o,i[a]=s;var l=this.offsets[a],h=this.offsets[a+1]-l;h>0&&(s+=h)}for(var d=new Array(4*i.length),p=0;p<i.length;++p)d[4*p+3]=255&i[p],d[4*p+2]=(65280&i[p])>>8,d[4*p+1]=(16711680&i[p])>>16,d[4*p]=(4278190080&i[p])>>24;return d},e}(),xR=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,i,s;for(n in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)r=s[n],e[n]=i[r];return e},t.prototype.glyphsFor=function(e){var n,r,i,s,o,a,l;for(i={},o=0,a=e.length;o<a;o++)i[s=e[o]]=this.font.glyf.glyphFor(s);for(s in n=[],i)(r=i[s])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(s in l=this.glyphsFor(n))r=l[s],i[s]=r;return i},t.prototype.encode=function(e,n){var r,i,s,o,a,l,h,d,p,v,g,L,P,j,x;for(i in r=y_.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),g={0:0},x=r.charMap)g[(l=x[i]).old]=l.new;for(L in v=r.maxGlyphID,o)L in g||(g[L]=v++);return d=function(U){var J,Z;for(J in Z={},U)Z[U[J]]=J;return Z}(g),p=Object.keys(d).sort(function(U,J){return U-J}),P=function(){var U,J,Z;for(Z=[],U=0,J=p.length;U<J;U++)a=p[U],Z.push(d[a]);return Z}(),s=this.font.glyf.encode(o,P,g),h=this.font.loca.encode(s.offsets,P),j={cmap:this.font.cmap.raw(),glyf:s.table,loca:h,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(j["OS/2"]=this.font.os2.raw()),this.font.directory.encode(j)},t}();gt.API.PDFObject=function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,i,s,o;if(Array.isArray(n))return"["+function(){var a,l,h;for(h=[],a=0,l=n.length;a<l;a++)r=n[a],h.push(e.convert(r));return h}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in s=["<<"],n)o=n[i],s.push("/"+i+" "+e.convert(o));return s.push(">>"),s.join(`
`)}return""+n},e}();const PR="1F727f-TTYnFjl93DQiSXvvY9DJaJEaNX",_2=.6,pi=150,RR=5,gf={async generateProfilesPDF(t,e={}){try{if(!t||t.length===0)throw new Error("No profiles selected for PDF generation");const n={includeImages:!0,includeLoanHistory:!0,includeGrantHistory:!0,...e};console.log(` Starting PDF generation for ${t.length} profiles`);const r=await this.loadProfilesInBatches(t,n);if(r.length===0)throw new Error("No valid profiles found for PDF generation");return console.log(` Loaded ${r.length} profiles, generating PDF content`),{success:!0,data:{content:await this.createPDFContent(r,n),count:r.length,filename:`Profiles_Report_${new Date().toISOString().slice(0,10)}.pdf`}}}catch(n){return console.error("Error generating PDF:",n),{success:!1,message:n.message,error:n}}},async loadProfilesInBatches(t,e){const n=[],r=this.chunkArray(t,RR);console.log(` Processing ${t.length} profiles in ${r.length} batches`);for(let i=0;i<r.length;i++){const s=r[i];console.log(` Processing batch ${i+1}/${r.length} with ${s.length} profiles`);const o=s.map(async l=>{try{const h=await ni.getProfileByRegId(l);if(h){const[d,p]=await Promise.all([ni.getProfileLoans(l),ni.getRFReturnHistory(l)]);return{...h,loans:d,rfReturnHistory:p}}else return console.warn(`Profile not found for Reg_ID: ${l}`),null}catch(h){return console.error(`Error loading profile ${l}:`,h),null}}),a=await Promise.all(o);n.push(...a.filter(l=>l!==null)),i<r.length-1&&await new Promise(l=>setTimeout(l,100))}return n},chunkArray(t,e){const n=[];for(let r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n},filterRFHistoryByDateRange(t,e,n){return!e&&!n?t:t.filter(i=>{let s=null;if(i.parsedDate)s=new Date(i.parsedDate);else if(i.dateKey)try{const o=i.dateKey.split("_");if(o.length>=3){const a=o[0],l=o[1],h=o[2];s=new Date(a,l-1,h)}}catch{console.warn("Could not parse date key:",i.dateKey)}if(!s)return!1;if(e&&n){const o=new Date(e),a=new Date(n);return s>=o&&s<=a}else if(e){const o=new Date(e);return s>=o}else if(n){const o=new Date(n);return s<=o}return!0})},async createPDFContent(t,e={}){const n=new gt,r=n.internal.pageSize.getWidth(),i=n.internal.pageSize.getHeight(),s=12,o=r-2*s;let a=s,l=1;a=await this.addHeader(n,a,r,s);for(let h=0;h<t.length;h++){const d=t[h];a>i-60&&(n.addPage(),l++,a=s,a=await this.addHeader(n,a,r,s,l)),a=await this.addProfileToPDF(n,d,a,r,s,o,e),h<t.length-1&&(a+=3)}return n},async addHeader(t,e,n,r,i=1){const s=e;try{au(PR,"w200")&&(t.setFontSize(12),t.setTextColor(26,115,232),t.text("WERESL",n/2,s,{align:"center"}))}catch(o){console.warn("Could not load logo:",o)}return t.setFontSize(16),t.setTextColor(26,115,232),t.text("Profiles Report",n/2,s+10,{align:"center"}),t.setFontSize(8),t.setTextColor(100,100,100),t.text(`Generated: ${new Date().toLocaleDateString()}`,n/2,s+16,{align:"center"}),i>1&&t.text(`Page ${i}`,n-r,s+16,{align:"right"}),t.setDrawColor(200,200,200),t.line(r,s+20,n-r,s+20),s+25},async addProfileToPDF(t,e,n,r,i,s,o={}){t.setFontSize(12),t.setTextColor(26,115,232);const a=this.getProfileField(e,["fullName","Name","basicInfo.name"]),l=this.getProfileField(e,["Reg_ID","id"]);let h=0;if(o.includeImages!==!1){const d=this.getProfileField(e,["profileImageDriveId","Image","basicInfo.profileImageDriveId"]);d&&(h=await this.addProfileImageInline(t,d,n,r,i))}if(t.text(`${a||"Unknown"} (${l||"No ID"})`,i,n+6),n+=Math.max(16,h+3),n=this.addProfileDetailsTable(t,e,n,r,i,s,o),o.includeRFLoans!==!1&&e.loans&&e.loans.length>0&&(n=this.addLoanDetails(t,e.loans,n,r,i,s)),o.includeRFHistory!==!1&&e.rfReturnHistory)if(Array.isArray(e.rfReturnHistory)){const d={};e.rfReturnHistory.forEach((p,v)=>{const g=p.dateKey||p.timestamp||`entry_${v}`;d[g]=p}),n=this.addRFReturnHistoryTable(t,d,n,r,i,s)}else typeof e.rfReturnHistory=="object"&&e.rfReturnHistory!==null&&(n=this.addRFReturnHistoryTable(t,e.rfReturnHistory,n,r,i,s));return n+=3,t.setDrawColor(200,200,200),t.line(i,n,r-i,n),n+=8,n},getProfileField(t,e){for(const n of e)if(n.includes(".")){const r=n.split(".");let i=t;for(const s of r)if(i&&typeof i=="object"&&i[s]!==void 0)i=i[s];else{i=null;break}if(i!=null&&i!=="")return i}else if(t[n]!==void 0&&t[n]!==null&&t[n]!=="")return t[n];return null},addProfileDetailsTable(t,e,n,r,i,s,o={}){const l=s*.35,h=s*.65;t.setFontSize(9),t.setTextColor(100,100,100),t.setFillColor(240,240,240),t.rect(i,n-3,s,7,"F"),t.setTextColor(26,115,232),t.text("Field",i+2,n),t.text("Value",i+l+2,n),n+=9;const d=[{keys:["basicInfo.District","District","district"],label:"District"},{keys:["basicInfo.age","Age","yearOfBirth"],label:"Age"},{keys:["basicInfo.address","Address","address"],label:"Address"},{keys:["basicInfo.nic","NIC","nic"],label:"NIC"},{keys:["basicInfo.phone","Contact","phoneNumber","contact"],label:"Contact"},{keys:["Description","description","basicInfo.description"],label:"Description"},{keys:["basicInfo.occupation","Occupation","occupation"],label:"Occupation"},{keys:["RF_Loan"],label:"RF Loan"},{keys:["RF_Paid_History"],label:"RF Paid History"},{keys:["RF_Cur_Prj"],label:"RF Current Project"},{keys:["Com_prjs"],label:"Completed Projects"},{keys:["GRANT"],label:"Grant"},{keys:["GIFor"],label:"GIF"},{keys:["GRANT_Cur_Prj"],label:"Grant Current Project"}];for(const p of d){const v=this.getProfileField(e,p.keys);if(v!=null&&v!==""){n>t.internal.pageSize.getHeight()-40&&(t.addPage(),n=20),t.setFontSize(8),t.setTextColor(100,100,100),t.text(p.label,i+2,n),t.setFontSize(8),t.setTextColor(0,0,0);const g=String(v),L=t.splitTextToSize(g,h-4);t.text(L,i+l+2,n);const P=Math.max(6,L.length*3);n+=P}}return n},addLoanDetails(t,e,n,r,i,s){n>t.internal.pageSize.getHeight()-80&&(t.addPage(),n=20),t.setFontSize(12),t.setTextColor(26,115,232),t.text("Loan Details",i,n),n+=10;const o=8,a=s*.15,l=s*.15,h=s*.15,d=s*.15,p=s*.15,v=s*.25;t.setFontSize(9),t.setTextColor(100,100,100),t.setFillColor(240,240,240),t.rect(i,n-3,s,o+1,"F"),t.setTextColor(26,115,232),t.text("Type",i+2,n),t.text("Loan Amount",i+a+2,n),t.text("Current Balance",i+a+l+2,n),t.text("Date",i+a+l+h+2,n),t.text("Status",i+a+l+h+d+2,n),t.text("Purpose",i+a+l+h+d+p+2,n),n+=o+3;for(const g of e){n>t.internal.pageSize.getHeight()-40&&(t.addPage(),n=20),t.setFontSize(8),t.setTextColor(100,100,100),t.text(g.type||"Unknown",i+2,n),t.setTextColor(0,0,0);let L="N/A",P="N/A";g.type==="RF"?(L=g[tn.AMOUNT]||g.amount||"N/A",P=g[tn.CURRENT_BALANCE]||g.currentBalance||"N/A"):g.type==="GRANT"&&(L=g[Kn.AMOUNT]||g[Kn.APPROVED_AMOUNT]||g.amount||"N/A",P="N/A"),t.text(String(L),i+a+2,n),t.text(String(P),i+a+l+2,n);let j="N/A";if(g.type==="RF"){const fe=g[tn.INITIATION_DATE]||g[tn.APPROVED_AT]||g.initiationDate||g.approvedAt;j=this.formatDateForPDF(fe)}else if(g.type==="GRANT"){const fe=g[Kn.REQUESTED_DATE]||g[Kn.APPROVED_AT]||g.requestedDate||g.approvedAt;j=this.formatDateForPDF(fe)}t.text(j,i+a+l+h+2,n);const x=g[tn.STATUS]||g.status||"N/A";t.text(String(x),i+a+l+h+d+2,n);const U=g[tn.PURPOSE]||g.purpose||g[Kn.PURPOSE]||"N/A",J=String(U),Z=t.splitTextToSize(J,v-4);t.text(Z,i+a+l+h+d+p+2,n),n+=Math.max(o,Z.length*2.5)}return n+5},addRFReturnHistoryTable(t,e,n,r,i,s){n>t.internal.pageSize.getHeight()-100&&(t.addPage(),n=20),t.setFontSize(12),t.setTextColor(26,115,232),t.text("RF Return History",i,n),n+=15;const o=12,a=[s*.25,s*.2,s*.25,s*.15,s*.15];t.setFontSize(9),t.setTextColor(100,100,100),t.setFillColor(240,240,240),t.rect(i,n-3,s,o+1,"F"),t.setTextColor(26,115,232);let l=i+2;if(t.text("Date",l,n),l+=a[0],t.text("Amount",l,n),l+=a[1],t.text("Receiver",l,n),l+=a[2],t.text("Reduced Loan",l,n),l+=a[3],t.text("Effect",l,n),n+=o+3,typeof e=="object"&&e!==null){const h=Object.entries(e);for(const[d,p]of h){n>t.internal.pageSize.getHeight()-40&&(t.addPage(),n=20);let v="N/A",g="N/A",L="N/A",P="N/A",j="N/A";typeof p=="object"&&p!==null?(p[_h.APPROVED_DATE]?v=this.formatDateForPDF(p[_h.APPROVED_DATE]):p.approvedDate?v=this.formatDateForPDF(p.approvedDate):p[Vc.TIMESTAMP]?v=this.formatDateForPDF(p[Vc.TIMESTAMP]):p.timestamp?v=this.formatDateForPDF(p.timestamp):v=this.parseTimestampKey(d),g=p[_h.AMOUNT]||p[Vc.PAID_AMOUNT]||p[Vc.AMOUNT]||p.amount||"N/A",L=p[_h.RECEIVER]||p[Vc.RECEIVER]||p.receiver||"N/A",typeof g=="number"&&(g=`LKR ${g.toLocaleString()}`)):(g=typeof p=="number"?`LKR ${p.toLocaleString()}`:p,v=this.parseTimestampKey(d)),t.setFontSize(8),t.setTextColor(0,0,0),l=i+2,t.text(v,l,n),l+=a[0],t.text(String(g),l,n),l+=a[1],t.text(String(L),l,n),l+=a[2],t.text(String(P),l,n),l+=a[3],t.text(String(j),l,n),n+=o+1}}return n+10},formatDateForPDF(t){if(!t)return"N/A";try{return(t.toDate?t.toDate():new Date(t)).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"})}catch{return String(t)}},parseTimestampKey(t){try{if(t.includes("-")&&t.includes("RRH"))return"Date N/A";if(t.includes("_")){const e=t.split("_");if(e.length>=3){const n=e[0],r=e[1];return`${e[2].padStart(2,"0")}-${r.padStart(2,"0")}-${n}`}}else{if(t.length===13)return new Date(parseInt(t)).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"});{const e=new Date(t);if(!isNaN(e.getTime()))return e.toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"})}}}catch{console.warn("Could not parse timestamp:",t)}return t},async addProfileImageInline(t,e,n,r,i){try{console.log(" Starting optimized inline image processing for:",e);let s=await this.getImageAsBase64(e);if(s||(console.log(" Failed to load image, creating optimized placeholder"),s=this.createOptimizedPlaceholderImage(),s||(console.log(" Optimized placeholder failed, creating simple text placeholder"),s=this.createSimpleTextPlaceholder())),s){console.log(" Optimized image ready for PDF");const o=pi*.3,a=pi*.3,l=r-i-o,h=n;return t.addImage(s,"JPEG",l,h,o,a),t.setFontSize(6),t.setTextColor(100,100,100),t.text("Photo",l+o/2,h+a+2,{align:"center"}),console.log(" Optimized inline image added to PDF successfully"),a+6}else return console.log(" Failed to create optimized placeholder image"),0}catch(s){return console.warn(" Could not add optimized inline profile image:",s),0}},async addProfileImage(t,e,n,r,i){try{console.log(" Starting image processing for:",e);let s=await this.getImageAsBase64(e);if(s||(console.log(" Failed to load image, creating placeholder"),s=this.createPlaceholderImage()),s){console.log(" Image ready for PDF (original or placeholder)");const o=60,a=60,l=r-i-o,h=n-10;return t.addImage(s,"JPEG",l,h,o,a),t.setFontSize(8),t.setTextColor(100,100,100),t.text("Profile Image",l,h+a+5),console.log(" Image added to PDF successfully"),n+a+15}else return console.log(" Failed to create placeholder image"),t.setFontSize(10),t.setTextColor(100,100,100),t.text("Profile Image: [Image not available]",i,n),n+15}catch(s){return console.warn(" Could not add profile image:",s),t.setFontSize(10),t.setTextColor(100,100,100),t.text("Profile Image: [Image not available]",i,n),n+15}},async getImageAsBase64(t){try{console.log(" Converting image to base64 with optimization:",t);let e=t;if(t&&!t.includes("http")&&!t.includes("drive.google.com")){const n=t.trim();if(console.log(" Detected file ID:",n),n&&n.length>10){const r=[async()=>{const i=au(n,`w${pi}`);return console.log(" Trying utility function URL:",i),await this.loadImageViaFetch(i)},async()=>{const i=`https://drive.google.com/thumbnail?id=${n}&sz=w${pi}`;return console.log(" Trying thumbnail format:",i),await this.loadImageViaFetch(i)},async()=>{const i=`https://cors-anywhere.herokuapp.com/https://drive.google.com/thumbnail?id=${n}&sz=w${pi}`;return console.log(" Trying CORS proxy:",i),await this.loadImageViaFetch(i)},async()=>{const i=`https://api.allorigins.win/raw?url=${encodeURIComponent(`https://drive.google.com/thumbnail?id=${n}&sz=w${pi}`)}`;return console.log(" Trying allorigins proxy:",i),await this.loadImageViaFetch(i)},async()=>{const i=`https://drive.google.com/uc?export=view&id=${n}`;return console.log(" Trying export view format:",i),await this.loadImageViaFetch(i)},async()=>{const i=`https://corsproxy.io/?${encodeURIComponent(`https://drive.google.com/thumbnail?id=${n}&sz=w${pi}`)}`;return console.log(" Trying corsproxy.io:",i),await this.loadImageViaFetch(i)}];for(let i=0;i<r.length;i++)try{console.log(` Trying approach ${i+1}/${r.length}`);const s=await r[i]();if(s)return console.log(` Approach ${i+1} succeeded`),s}catch(s){console.log(` Approach ${i+1} failed:`,s.message)}return console.log(" All approaches failed, will use placeholder"),null}else return console.log(" Invalid file ID length:",n),null}else if(t.includes("drive.google.com")){e=au(t,`w${pi}`),console.log(" Converted Google Drive URL with optimization:",e);try{const n=await this.loadImageViaFetch(e);if(n)return n}catch(n){console.log(" Fetch approach failed for URL:",e,n.message)}}return console.log(" No valid URL generated or all methods failed"),null}catch(e){return console.warn(" Error converting image to base64:",e),null}},async loadImageViaFetch(t){try{console.log(" Loading image via fetch:",t);const e=[async()=>{const n=await fetch(t,{method:"GET",mode:"cors",credentials:"omit",headers:{Accept:"image/*","Cache-Control":"no-cache"}});if(!n.ok)throw new Error(`CORS fetch failed: ${n.status}`);const r=await n.blob();if(console.log(" Blob size from CORS fetch:",r.size,"bytes"),r.size===0)throw new Error("Empty blob received");return await this.blobToBase64(r)},async()=>{const n=await fetch(t,{method:"GET",mode:"no-cors",credentials:"omit",headers:{Accept:"image/*"}});if(console.log(" No-CORS response type:",n.type),n.type==="opaque")throw new Error("Opaque response received, cannot read content");const r=await n.blob();return await this.blobToBase64(r)},async()=>new Promise((n,r)=>{const i=new XMLHttpRequest;i.open("GET",t,!0),i.responseType="blob",i.withCredentials=!1,i.onload=async function(){if(this.status===200)try{const s=await this.blobToBase64(this.response);n(s)}catch(s){r(s)}else r(new Error(`XHR failed: ${this.status}`))},i.onerror=()=>r(new Error("XHR network error")),i.ontimeout=()=>r(new Error("XHR timeout")),i.timeout=1e4,i.send()}),async()=>{const n=await fetch(t,{method:"GET",mode:"cors",credentials:"omit",headers:{Accept:"image/*","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36"}});if(!n.ok)throw new Error(`Fetch with custom UA failed: ${n.status}`);const r=await n.blob();return await this.blobToBase64(r)}];for(let n=0;n<e.length;n++)try{console.log(` Trying fetch approach ${n+1}/${e.length}`);const r=await e[n]();if(r)return console.log(` Fetch approach ${n+1} succeeded`),r}catch(r){console.log(` Fetch approach ${n+1} failed:`,r.message)}return console.log(" All fetch approaches failed"),null}catch(e){return console.log(" Fetch approach failed:",e.message),null}},async blobToBase64(t){return new Promise((e,n)=>{const r=new FileReader;r.onloadend=()=>{try{const i=r.result.split(",")[1];i&&i.length>0?(console.log(" Blob to base64 conversion successful, length:",i.length),e(i)):n(new Error("Empty base64 result"))}catch(i){n(i)}},r.onerror=i=>{console.error(" FileReader error:",i),n(i)},r.readAsDataURL(t)})},async loadImageViaProxy(t){try{console.log(" Loading image via proxy:",t);const e=await fetch(t,{method:"GET",headers:{Accept:"image/*","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36"}});if(!e.ok)throw new Error(`Proxy request failed: ${e.status} ${e.statusText}`);const n=await e.blob();return console.log(" Blob size from proxy:",n.size,"bytes"),new Promise(r=>{const i=new FileReader;i.onloadend=()=>{const s=i.result.split(",")[1];console.log(" Proxy conversion successful, length:",s.length),r(s)},i.onerror=s=>{console.error(" FileReader error:",s),r(null)},i.readAsDataURL(n)})}catch(e){return console.log(" Proxy approach failed:",e.message),null}},createOptimizedPlaceholderImage(){try{console.log(" Creating optimized placeholder image");const t=document.createElement("canvas"),e=t.getContext("2d");t.width=pi,t.height=pi,e.fillStyle="#f0f0f0",e.fillRect(0,0,t.width,t.height),e.strokeStyle="#cccccc",e.lineWidth=1,e.strokeRect(2,2,t.width-4,t.height-4),e.fillStyle="#999999",e.font=`${Math.floor(t.width*.3)}px Arial`,e.textAlign="center",e.textBaseline="middle",e.fillText("",t.width/2,t.height/2-5),e.fillStyle="#666666",e.font=`${Math.floor(t.width*.12)}px Arial`,e.fillText("Photo",t.width/2,t.height/2+15);const r=t.toDataURL("image/jpeg",_2).split(",")[1];return console.log(" Optimized placeholder image created successfully"),r}catch(t){return console.log(" Failed to create optimized placeholder image:",t.message),null}},createSimpleTextPlaceholder(){try{console.log(" Creating simple text placeholder");const t=document.createElement("canvas"),e=t.getContext("2d");t.width=pi,t.height=pi,e.fillStyle="#f8f9fa",e.fillRect(0,0,t.width,t.height),e.strokeStyle="#dee2e6",e.lineWidth=1,e.strokeRect(1,1,t.width-2,t.height-2),e.fillStyle="#6c757d",e.font="12px Arial",e.textAlign="center",e.textBaseline="middle",e.fillText("No Image",t.width/2,t.height/2);const r=t.toDataURL("image/jpeg",_2).split(",")[1];return console.log(" Simple text placeholder created successfully"),r}catch(t){return console.log(" Failed to create simple text placeholder:",t.message),null}},downloadPDF(t,e){try{if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)){const r=t.output("blob"),i=URL.createObjectURL(r),s=document.createElement("a");return s.href=i,s.download=e,s.style.display="none",document.body.appendChild(s),s.click(),document.body.removeChild(s),setTimeout(()=>{URL.revokeObjectURL(i)},100),{success:!0}}else return t.save(e),{success:!0}}catch(n){console.error("Error downloading PDF:",n);try{const r=t.output("blob"),i=URL.createObjectURL(r),s=document.createElement("a");return s.href=i,s.download=e,s.style.display="none",document.body.appendChild(s),s.click(),document.body.removeChild(s),setTimeout(()=>{URL.revokeObjectURL(i)},100),{success:!0}}catch(r){return console.error("Fallback download also failed:",r),{success:!1,message:r.message}}}}},NR={name:"PdfExportModal",props:{isVisible:{type:Boolean,default:!1}},emits:["close"],setup(t,{emit:e}){const n=It([]),r=It([]),i=It([]),s=It(!1),o=It(!1),a=It(""),l=It(""),h=It([]),d=It(!1),p=It(!1);uc(()=>{v(),window.addEventListener("resize",v)});const v=()=>{p.value=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||window.innerWidth<=768},g=cc({includeImages:!0,includeRFLoans:!1,includeRFHistory:!1,rfHistoryFrom:"",rfHistoryTo:"",includeGrantHistory:!0});Xc(()=>t.isVisible,async I=>{I&&await L()});const L=async()=>{s.value=!0;try{const I=await im.getProfiles();if(I&&Array.isArray(I)){n.value=I,r.value=I;const z=[...new Set(I.map(re=>{var ae;return((ae=re.basicInfo)==null?void 0:ae.District)||re.District||"Unknown District"}))].sort();h.value=z}}catch(I){console.error("Error loading profiles:",I)}finally{s.value=!1}},P=()=>{let I=n.value;if(a.value.trim()){const z=a.value.toLowerCase().trim();I=I.filter(re=>{var xe,Pe;const ae=((xe=re.basicInfo)==null?void 0:xe.name)||re.Name||"",ge=((Pe=re.basicInfo)==null?void 0:Pe.nic)||re.NIC||"",ce=re.id||re.Reg_ID||"";return ae.toLowerCase().includes(z)||ge.toLowerCase().includes(z)||ce.toLowerCase().includes(z)})}l.value&&(I=I.filter(z=>{var ae;return(((ae=z.basicInfo)==null?void 0:ae.District)||z.District||"Unknown District")===l.value})),r.value=I},j=()=>{i.value=r.value.map(I=>I.id||I.Reg_ID)},x=()=>{i.value=[]},U=I=>{const z=i.value.indexOf(I);z>-1?i.value.splice(z,1):i.value.push(I)},J=I=>i.value.includes(I),Z=I=>{var re,ae;const z=((re=I.basicInfo)==null?void 0:re.profileImageDriveId)||I.Image||I.profileImageDriveId;if(!z)return"/placeholder-profile.jpg";if(z&&!z.includes("http")&&!z.includes("drive.google.com")){const ge=z.trim();if(ge&&ge.length>10)return`https://drive.google.com/thumbnail?id=${ge}&sz=w200-h200`}if(z.includes("drive.google.com"))try{const ge=(ae=z.match(/[-\w]{25,}/))==null?void 0:ae[0];if(ge)return`https://drive.google.com/thumbnail?id=${ge}&sz=w200-h200`}catch(ge){console.warn("Could not extract file ID from Google Drive URL:",ge)}return z},fe=I=>{I.target.src="/placeholder-profile.jpg"},Ie=I=>{var z;return((z=I.loans)==null?void 0:z.some(re=>re.type==="RF"))||I.RF_Loan},T=I=>{var z;return((z=I.grants)==null?void 0:z.length)>0||I.GRANT},S=I=>{var z;return((z=I.loans)==null?void 0:z.some(re=>re.type==="GIF"))||I.GIFor},O=async()=>{if(i.value.length===0){alert("Please select at least one profile");return}o.value=!0;try{const I=await gf.generateProfilesPDF(i.value,g);if(I.success)gf.downloadPDF(I.data.content,I.data.filename),alert(`PDF generated successfully with ${I.data.count} profiles!`),F();else throw new Error(I.message||"Failed to generate PDF")}catch(I){console.error("Error generating PDF:",I),alert(`Error generating PDF: ${I.message}`)}finally{o.value=!1}},F=()=>{i.value=[],a.value="",l.value="",e("close")};return{allProfiles:n,filteredProfiles:r,selectedProfiles:i,loading:s,generating:o,searchQuery:a,districtFilter:l,districts:h,exportOptions:g,showExportOptions:d,isMobile:p,loadProfiles:L,filterProfiles:P,selectAll:j,deselectAll:x,toggleProfileSelection:U,isProfileSelected:J,getProfileImageUrl:Z,handleImageError:fe,hasRF:Ie,hasGrant:T,hasGIF:S,generatePDF:O,closeModal:F,handleTouchStart:I=>{I.currentTarget.style.transform="scale(0.98)"},handleTouchEnd:I=>{I.currentTarget.style.transform="scale(1)"}}}},LR={class:"modal-header"},CR={class:"modal-content"},kR={key:0,class:"selection-info"},DR={class:"info-card"},OR={class:"profile-selection"},FR={class:"selection-header"},MR={class:"selection-controls"},VR=["disabled"],UR=["disabled"],jR={class:"search-filters"},BR={class:"search-container"},qR={class:"filter-container"},HR=["value"],zR={class:"export-options-toggle"},GR={key:0,class:"export-options-dropdown"},$R={class:"options-grid"},WR={class:"option-item"},KR={class:"option-label"},JR={class:"option-item"},QR={class:"option-label"},YR={class:"option-item"},XR={class:"option-label"},ZR={key:0,class:"year-range-selector"},eN={class:"date-input-group"},tN=["max"],nN={class:"date-input-group"},rN=["min"],iN={class:"option-item"},sN={class:"option-label"},oN={class:"profiles-list"},aN={key:0,class:"loading"},lN={key:1,class:"no-profiles"},cN={key:2,class:"profiles-grid"},uN=["onClick"],hN={class:"profile-image"},fN=["src","alt"],dN={class:"profile-info"},pN={class:"reg-id"},gN={class:"profile-tags"},mN={key:0,class:"tag rf-tag"},yN={key:1,class:"tag grant-tag"},vN={key:2,class:"tag gif-tag"},_N={class:"selection-indicator"},bN={key:0,class:"fas fa-check-circle"},wN={key:1,class:"far fa-circle"},AN={class:"modal-footer"},IN=["disabled","title"],EN={key:0,class:"fas fa-spinner fa-spin"},TN={key:1,class:"fas fa-file-pdf"},SN={key:2,class:"btn-text"};function xN(t,e,n,r,i,s){return n.isVisible?(Ve(),je("div",{key:0,class:"pdf-export-modal-overlay",onClick:e[22]||(e[22]=(...o)=>r.closeModal&&r.closeModal(...o))},[k("div",{class:"pdf-export-modal",onClick:e[19]||(e[19]=Id(()=>{},["stop"])),onTouchstart:e[20]||(e[20]=Id(()=>{},["stop"])),onTouchmove:e[21]||(e[21]=Id(()=>{},["stop"]))},[k("div",LR,[e[24]||(e[24]=k("h2",null,[k("i",{class:"fas fa-file-pdf",style:{color:"#dc3545","margin-right":"10px"}}),zs(" PDF Export ")],-1)),k("button",{class:"close-btn",onClick:e[0]||(e[0]=(...o)=>r.closeModal&&r.closeModal(...o))},e[23]||(e[23]=[k("i",{class:"fas fa-times"},null,-1)]))]),k("div",CR,[r.selectedProfiles.length>0?(Ve(),je("div",kR,[k("div",DR,[e[25]||(e[25]=k("i",{class:"fas fa-info-circle",style:{color:"#1565c0","margin-right":"8px"}},null,-1)),k("span",null,qe(r.selectedProfiles.length)+" profile"+qe(r.selectedProfiles.length!==1?"s":"")+" selected",1)])])):jt("",!0),k("div",OR,[k("div",FR,[k("div",MR,[k("button",{class:"btn btn-secondary mobile-btn icon-only",onClick:e[1]||(e[1]=(...o)=>r.selectAll&&r.selectAll(...o)),disabled:r.allProfiles.length===0,title:"Select All"},e[26]||(e[26]=[k("i",{class:"fas fa-check-double"},null,-1)]),8,VR),k("button",{class:"btn btn-secondary mobile-btn icon-only",onClick:e[2]||(e[2]=(...o)=>r.deselectAll&&r.deselectAll(...o)),disabled:r.selectedProfiles.length===0,title:"Deselect All"},e[27]||(e[27]=[k("i",{class:"fas fa-times"},null,-1)]),8,UR)])]),k("div",jR,[k("div",BR,[e[28]||(e[28]=k("i",{class:"fas fa-search search-icon"},null,-1)),$n(k("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>r.searchQuery=o),onInput:e[4]||(e[4]=(...o)=>r.filterProfiles&&r.filterProfiles(...o)),type:"text",placeholder:"Search...",class:"search-input"},null,544),[[Ma,r.searchQuery]])]),k("div",qR,[e[30]||(e[30]=k("i",{class:"fas fa-filter filter-icon"},null,-1)),$n(k("select",{"onUpdate:modelValue":e[5]||(e[5]=o=>r.districtFilter=o),onChange:e[6]||(e[6]=(...o)=>r.filterProfiles&&r.filterProfiles(...o)),class:"filter-select"},[e[29]||(e[29]=k("option",{value:""},"All",-1)),(Ve(!0),je(nn,null,qn(r.districts,o=>(Ve(),je("option",{key:o,value:o},qe(o),9,HR))),128))],544),[[ug,r.districtFilter]])]),k("div",zR,[k("button",{class:"btn btn-secondary mobile-btn icon-only",onClick:e[7]||(e[7]=o=>r.showExportOptions=!r.showExportOptions),title:"Export Options"},e[31]||(e[31]=[k("i",{class:"fas fa-ellipsis-v"},null,-1)]))])]),r.showExportOptions?(Ve(),je("div",GR,[k("div",$R,[k("div",WR,[k("label",KR,[$n(k("input",{type:"checkbox","onUpdate:modelValue":e[8]||(e[8]=o=>r.exportOptions.includeImages=o),class:"option-checkbox"},null,512),[[Go,r.exportOptions.includeImages]]),e[32]||(e[32]=k("span",{class:"option-text"},"Profile Images",-1))]),e[33]||(e[33]=k("small",{class:"option-hint"},"May affect performance due to CORS restrictions",-1))]),k("div",JR,[k("label",QR,[$n(k("input",{type:"checkbox","onUpdate:modelValue":e[9]||(e[9]=o=>r.exportOptions.includeRFLoans=o),class:"option-checkbox"},null,512),[[Go,r.exportOptions.includeRFLoans]]),e[34]||(e[34]=k("span",{class:"option-text"},"RF Loans",-1))])]),k("div",YR,[k("label",XR,[$n(k("input",{type:"checkbox","onUpdate:modelValue":e[10]||(e[10]=o=>r.exportOptions.includeRFHistory=o),class:"option-checkbox"},null,512),[[Go,r.exportOptions.includeRFHistory]]),e[35]||(e[35]=k("span",{class:"option-text"},"RF History",-1))]),r.exportOptions.includeRFHistory?(Ve(),je("div",ZR,[k("div",eN,[e[36]||(e[36]=k("label",null,"From:",-1)),$n(k("input",{type:"month","onUpdate:modelValue":e[11]||(e[11]=o=>r.exportOptions.rfHistoryFrom=o),class:"date-input",max:r.exportOptions.rfHistoryTo},null,8,tN),[[Ma,r.exportOptions.rfHistoryFrom]])]),k("div",nN,[e[37]||(e[37]=k("label",null,"To:",-1)),$n(k("input",{type:"month","onUpdate:modelValue":e[12]||(e[12]=o=>r.exportOptions.rfHistoryTo=o),class:"date-input",min:r.exportOptions.rfHistoryFrom},null,8,rN),[[Ma,r.exportOptions.rfHistoryTo]])])])):jt("",!0)]),k("div",iN,[k("label",sN,[$n(k("input",{type:"checkbox","onUpdate:modelValue":e[13]||(e[13]=o=>r.exportOptions.includeGrantHistory=o),class:"option-checkbox"},null,512),[[Go,r.exportOptions.includeGrantHistory]]),e[38]||(e[38]=k("span",{class:"option-text"},"Grant History",-1))])])])])):jt("",!0),k("div",oN,[r.loading?(Ve(),je("div",aN,e[39]||(e[39]=[k("div",{class:"spinner"},null,-1),k("span",null,"Loading profiles...",-1)]))):r.filteredProfiles.length===0?(Ve(),je("div",lN,e[40]||(e[40]=[k("i",{class:"fas fa-search",style:{"font-size":"24px",color:"#ccc","margin-bottom":"10px"}},null,-1),k("p",null,"No profiles found",-1)]))):(Ve(),je("div",cN,[(Ve(!0),je(nn,null,qn(r.filteredProfiles,o=>{var a,l;return Ve(),je("div",{key:o.id,class:Zr(["profile-item",{selected:r.isProfileSelected(o.id),"mobile-profile":r.isMobile}]),onClick:h=>r.toggleProfileSelection(o.id),onTouchstart:e[15]||(e[15]=(...h)=>r.handleTouchStart&&r.handleTouchStart(...h)),onTouchend:e[16]||(e[16]=(...h)=>r.handleTouchEnd&&r.handleTouchEnd(...h))},[k("div",hN,[k("img",{src:r.getProfileImageUrl(o),alt:((a=o.basicInfo)==null?void 0:a.name)||"Profile",onError:e[14]||(e[14]=(...h)=>r.handleImageError&&r.handleImageError(...h))},null,40,fN)]),k("div",dN,[k("h4",null,qe(((l=o.basicInfo)==null?void 0:l.name)||o.Name||"Unknown"),1),k("p",pN,qe(o.id||o.Reg_ID||"No ID"),1),k("div",gN,[r.hasRF(o)?(Ve(),je("span",mN,"RF")):jt("",!0),r.hasGrant(o)?(Ve(),je("span",yN,"GRANT")):jt("",!0),r.hasGIF(o)?(Ve(),je("span",vN,"GIF")):jt("",!0)])]),k("div",_N,[r.isProfileSelected(o.id)?(Ve(),je("i",bN)):(Ve(),je("i",wN))])],42,uN)}),128))]))])])]),k("div",AN,[k("button",{class:"btn btn-secondary mobile-btn icon-only",onClick:e[17]||(e[17]=(...o)=>r.closeModal&&r.closeModal(...o)),title:"Cancel"},e[41]||(e[41]=[k("i",{class:"fas fa-times"},null,-1)])),k("button",{class:"btn btn-primary mobile-btn",onClick:e[18]||(e[18]=(...o)=>r.generatePDF&&r.generatePDF(...o)),disabled:r.selectedProfiles.length===0||r.generating,title:r.generating?"Generating PDF...":`Generate PDF (${r.selectedProfiles.length})`},[r.generating?(Ve(),je("i",EN)):(Ve(),je("i",TN)),r.generating?jt("",!0):(Ve(),je("span",SN,qe(r.selectedProfiles.length),1))],8,IN)])],32)])):jt("",!0)}const PN=Ka(NR,[["render",xN],["__scopeId","data-v-b4c2a0f3"]]),zo=t=>{if(!t&&t!==0)return"0.00";const e=parseFloat(t);return isNaN(e)?"0.00":new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e)},__=t=>{if(!t)return"N/A";try{let e;if(t.toDate)e=t.toDate();else if(t.seconds&&typeof t.seconds=="number")e=new Date(t.seconds*1e3);else if(typeof t=="number")e=new Date(t*1e3);else if(typeof t=="string")if(t.includes("-")&&t.split("-").length===3){const n=t.split("-");n[0].length===2&&n[1].length===2&&n[2].length===4?e=new Date(`${n[2]}-${n[1]}-${n[0]}`):e=new Date(t)}else e=new Date(t);else e=new Date(t);return isNaN(e.getTime())?"Invalid Date":e.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Invalid Date"}},RN={name:"HomePage",components:{PdfExportModal:PN},setup(){const t=Nf(),e=It([]),n=It(!0),r=It(null),i=It(""),s=It({District:""}),o=It(!1),a=zt(()=>{let x=e.value;if(i.value){const U=i.value.toLowerCase();x=x.filter(J=>{var T,S,O,F,w,E;const Z=((S=(T=J.basicInfo)==null?void 0:T.name)==null?void 0:S.toLowerCase())||"",fe=((O=J.id)==null?void 0:O.toLowerCase())||((F=J.Reg_ID)==null?void 0:F.toLowerCase())||"",Ie=((E=(w=J.basicInfo)==null?void 0:w.NIC)==null?void 0:E.toLowerCase())||"";return Z.includes(U)||fe.includes(U)||Ie.includes(U)})}return s.value.District&&(x=x.filter(U=>{var J;return((J=U.basicInfo)==null?void 0:J.District)===s.value.District})),x}),l=zt(()=>{const x=new Set;return e.value.forEach(U=>{var J;(J=U.basicInfo)!=null&&J.District&&x.add(U.basicInfo.District)}),Array.from(x).sort()}),h=async()=>{try{n.value=!0,r.value=null;const x=await ni.getAllProfiles();e.value=x||[]}catch(x){console.error("Error loading profiles:",x),r.value="Failed to load profiles"}finally{n.value=!1}},d=()=>{},p=x=>{const U=x.id||x.Reg_ID;U&&t.push(`/${U}`)},v=x=>{var J;if(!x)return"/placeholder-profile.jpg";const U=x.Image||x.imageUrl||((J=x.basicInfo)==null?void 0:J.imageUrl);if(!U)return"/placeholder-profile.jpg";if(U&&!U.includes("http")&&!U.includes("drive.google.com")){const Z=U.trim();if(Z&&Z.length>10)return`https://drive.google.com/thumbnail?id=${Z}&sz=w400-h400`}return U},g=x=>x?im.getProfileTypes(x):[],L=x=>{switch(x){case"RF":return"text-primary bg-primary/10 dark:bg-primary/20";case"GRANT":return"text-success bg-success/10 dark:bg-success/20";case"GIF":return"text-warning bg-warning/10 dark:bg-warning/20";default:return"text-neutral bg-neutral/10 dark:bg-neutral/20"}},P=()=>{o.value=!0},j=()=>{o.value=!1};return uc(()=>{h(),If(()=>{document.querySelectorAll(".card-glow").forEach(U=>{U.addEventListener("mousemove",J=>{const Z=U.getBoundingClientRect(),fe=J.clientX-Z.left,Ie=J.clientY-Z.top;U.style.setProperty("--glow-x",`${fe}px`),U.style.setProperty("--glow-y",`${Ie}px`)})})})}),{profiles:e,profilesLoading:n,profilesError:r,profilesSearchQuery:i,profilesFilters:s,filteredProfiles:a,districts:l,showPdfExportModal:o,loadProfiles:h,handleProfilesSearch:d,openProfile:p,getProfileImageUrl:v,getProfileTypes:g,getProfileTypeClass:L,openPdfExportModal:P,closePdfExportModal:j,formatAmount:zo,ProfileField:$e}}},NN={class:"relative flex h-auto min-h-screen w-full flex-col group/design-root overflow-x-hidden bg-background-light dark:bg-background-dark font-display text-neutral-800 dark:text-neutral-200"},LN={class:"flex items-center bg-transparent p-4 pb-2 justify-between sticky top-0 z-20 backdrop-blur-lg border-b border-neutral-200/50 dark:border-neutral-800/50"},CN={class:"flex items-center gap-2"},kN={class:"bg-transparent p-4 sticky top-[68px] z-10 backdrop-blur-lg -mt-1"},DN={class:"flex gap-2 items-center"},ON={class:"relative flex-1"},FN=["value"],MN={class:"flex-1 bg-background-light dark:bg-background-dark px-4 pb-4"},VN={class:"pt-4"},UN={class:"text-neutral-500 dark:text-neutral-400 text-sm font-medium mb-4"},jN={key:0,class:"flex flex-col items-center justify-center py-12"},BN={key:1,class:"bg-white dark:bg-neutral-800 rounded-lg shadow-sm flex flex-col items-center justify-center p-8 text-center"},qN={class:"text-sm text-neutral-600 dark:text-neutral-400"},HN={key:2,class:"flex flex-col gap-4"},zN=["onClick"],GN={class:"flex flex-1 flex-col justify-center"},$N={class:"text-neutral-800 dark:text-white text-lg font-bold leading-tight"},WN={class:"text-neutral-500 dark:text-neutral-400 text-sm font-normal leading-normal mt-1"},KN={class:"text-neutral-500 dark:text-neutral-400 text-xs font-normal leading-normal"},JN={class:"mt-2 flex items-center gap-2"};function QN(t,e,n,r,i,s){const o=og("PdfExportModal");return Ve(),je("div",NN,[k("header",LN,[e[8]||(e[8]=k("h1",{class:"text-primary dark:text-white text-xl font-bold leading-tight tracking-[-0.015em] flex-1"},"WERESL",-1)),k("div",CN,[k("button",{onClick:e[0]||(e[0]=(...a)=>r.openPdfExportModal&&r.openPdfExportModal(...a)),class:"flex items-center gap-2 px-3 py-2 bg-primary text-white text-sm font-medium rounded-lg hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary dark:focus:ring-offset-neutral-800 transition-colors"},e[6]||(e[6]=[k("span",{class:"material-symbols-outlined text-lg"},"picture_as_pdf",-1),zs(" PDF Export ")])),e[7]||(e[7]=k("div",{class:"bg-center bg-no-repeat aspect-square bg-cover h-8 w-8 rounded-full",style:{"background-image":"url('/placeholder-profile.jpg')"}},null,-1))])]),k("div",kN,[k("div",DN,[k("div",ON,[$n(k("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>r.profilesSearchQuery=a),onInput:e[2]||(e[2]=(...a)=>r.handleProfilesSearch&&r.handleProfilesSearch(...a)),class:"form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-full text-neutral-800 dark:text-white focus:outline-0 focus:ring-2 focus:ring-primary/50 border border-neutral-300 dark:border-neutral-700 bg-white/70 dark:bg-neutral-800/70 h-12 placeholder:text-neutral-500/70 dark:placeholder:text-neutral-400/70 pl-12 pr-4 text-base font-normal leading-normal shadow-soft transition-all duration-300",placeholder:"Search by Name, Reg_ID..."},null,544),[[Ma,r.profilesSearchQuery]]),e[9]||(e[9]=k("div",{class:"text-neutral-500 dark:text-neutral-400 absolute left-4 top-1/2 -translate-y-1/2"},[k("span",{class:"material-symbols-outlined"},"search")],-1))]),$n(k("select",{"onUpdate:modelValue":e[3]||(e[3]=a=>r.profilesFilters.District=a),onChange:e[4]||(e[4]=(...a)=>r.loadProfiles&&r.loadProfiles(...a)),class:"flex h-12 shrink-0 items-center justify-center gap-x-1.5 rounded-full bg-white/70 dark:bg-neutral-800/70 px-4 border border-neutral-300 dark:border-neutral-700 shadow-soft transition-colors hover:bg-neutral-100 dark:hover:bg-neutral-700 text-neutral-600 dark:text-neutral-300 text-sm font-medium leading-normal"},[e[10]||(e[10]=k("option",{value:""},"District",-1)),(Ve(!0),je(nn,null,qn(r.districts,a=>(Ve(),je("option",{key:a,value:a},qe(a),9,FN))),128))],544),[[ug,r.profilesFilters.District]])])]),k("main",MN,[k("div",VN,[k("p",UN,"Results: "+qe(r.filteredProfiles.length),1)]),r.profilesLoading?(Ve(),je("div",jN,e[11]||(e[11]=[k("div",{class:"loading-spinner"},null,-1),k("p",{class:"mt-4 text-neutral-600 dark:text-neutral-400"},"Loading profiles...",-1)]))):r.profilesError?(Ve(),je("div",BN,[e[12]||(e[12]=k("span",{class:"material-symbols-outlined text-5xl text-warning-500"},"error",-1)),e[13]||(e[13]=k("p",{class:"mt-4 font-semibold text-neutral-800 dark:text-neutral-200"},"Failed to load profiles",-1)),k("p",qN,qe(r.profilesError),1),k("button",{onClick:e[5]||(e[5]=(...a)=>r.loadProfiles&&r.loadProfiles(...a)),class:"mt-4 px-4 py-2 bg-primary text-white text-sm font-medium rounded-lg hover:bg-primary/90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary dark:focus:ring-offset-neutral-800"}," Retry ")])):(Ve(),je("div",HN,[(Ve(!0),je(nn,null,qn(r.filteredProfiles,a=>{var l,h,d;return Ve(),je("div",{key:a.id,onClick:p=>r.openProfile(a),class:"card-glow flex gap-4 bg-white dark:bg-neutral-800/50 p-4 rounded-xl shadow-soft-lg border border-neutral-200/80 dark:border-neutral-700/50 backdrop-blur-xl transition-transform duration-300 ease-in-out hover:scale-[1.02] cursor-pointer"},[k("div",{class:"bg-center bg-no-repeat aspect-square bg-cover h-20 w-20 rounded-lg shadow-md",style:bf({backgroundImage:`url(${r.getProfileImageUrl(a)})`})},null,4),k("div",GN,[k("p",$N,qe(((l=a.basicInfo)==null?void 0:l.name)||"Unknown"),1),k("p",WN," Reg_ID: "+qe(a.id||a.Reg_ID||"N/A"),1),k("p",KN," District: "+qe(((h=a.basicInfo)==null?void 0:h.District)||"N/A")+", Age: "+qe(((d=a.basicInfo)==null?void 0:d.age)||"N/A"),1),k("div",JN,[(Ve(!0),je(nn,null,qn(r.getProfileTypes(a),p=>(Ve(),je("span",{key:p,class:Zr([r.getProfileTypeClass(p),"text-xs font-semibold inline-block py-1 px-2.5 uppercase rounded-full w-fit"])},qe(p),3))),128))])]),e[14]||(e[14]=k("span",{class:"material-symbols-outlined self-center text-neutral-400 dark:text-neutral-500"}," chevron_right ",-1))],8,zN)}),128))]))]),kr(o,{isVisible:r.showPdfExportModal,onClose:r.closePdfExportModal},null,8,["isVisible","onClose"])])}const YN=Ka(RN,[["render",QN],["__scopeId","data-v-fb3aac28"]]),XN={name:"PdfExportPage",setup(){const t=Nf(),e=It([]),n=It([]),r=It([]),i=It(!1),s=It(!1),o=It(""),a=It(""),l=It([]),h=It(!1),d=cc({includeImages:!0,includeRFLoans:!1,includeRFHistory:!1,rfHistoryFrom:"",rfHistoryTo:"",includeGrantHistory:!0});uc(async()=>{await p()});const p=async()=>{i.value=!0;try{const F=await im.getProfiles();if(F&&Array.isArray(F)){e.value=F,n.value=F;const w=[...new Set(F.map(E=>{var I;return((I=E.basicInfo)==null?void 0:I.District)||E.District||"Unknown District"}))].sort();l.value=w}}catch(F){console.error("Error loading profiles:",F)}finally{i.value=!1}},v=()=>{let F=e.value;if(o.value.trim()){const w=o.value.toLowerCase().trim();F=F.filter(E=>{var ae,ge;const I=((ae=E.basicInfo)==null?void 0:ae.name)||E.Name||"",z=((ge=E.basicInfo)==null?void 0:ge.nic)||E.NIC||"",re=E.id||E.Reg_ID||"";return I.toLowerCase().includes(w)||z.toLowerCase().includes(w)||re.toLowerCase().includes(w)})}a.value&&(F=F.filter(w=>{var I;return(((I=w.basicInfo)==null?void 0:I.District)||w.District||"Unknown District")===a.value})),n.value=F},g=()=>{r.value=n.value.map(F=>F.id||F.Reg_ID)},L=()=>{r.value=[]},P=F=>{const w=r.value.indexOf(F);w>-1?r.value.splice(w,1):r.value.push(F)},j=F=>r.value.includes(F),x=F=>{var E,I;const w=((E=F.basicInfo)==null?void 0:E.profileImageDriveId)||F.Image||F.profileImageDriveId;if(!w)return"/placeholder-profile.jpg";if(w&&!w.includes("http")&&!w.includes("drive.google.com")){const z=w.trim();if(z&&z.length>10)return`https://drive.google.com/thumbnail?id=${z}&sz=w200-h200`}if(w.includes("drive.google.com"))try{const z=(I=w.match(/[-\w]{25,}/))==null?void 0:I[0];if(z)return`https://drive.google.com/thumbnail?id=${z}&sz=w200-h200`}catch(z){console.warn("Could not extract file ID from Google Drive URL:",z)}return w},U=F=>{F.target.src="/placeholder-profile.jpg"},J=F=>{var w;return((w=F.loans)==null?void 0:w.some(E=>E.type==="RF"))||F.RF_Loan},Z=F=>{var w;return((w=F.grants)==null?void 0:w.length)>0||F.GRANT},fe=F=>{var w;return((w=F.loans)==null?void 0:w.some(E=>E.type==="GIF"))||F.GIFor},Ie=async()=>{if(r.value.length===0){alert("Please select at least one profile");return}s.value=!0;try{const F=await gf.generateProfilesPDF(r.value,d);if(F.success)gf.downloadPDF(F.data.content,F.data.filename),alert(`PDF generated successfully with ${F.data.count} profiles!`),T();else throw new Error(F.message||"Failed to generate PDF")}catch(F){console.error("Error generating PDF:",F),alert(`Error generating PDF: ${F.message}`)}finally{s.value=!1}},T=()=>{t.push("/")};return{allProfiles:e,filteredProfiles:n,selectedProfiles:r,loading:i,generating:s,searchQuery:o,districtFilter:a,districts:l,exportOptions:d,showExportOptions:h,loadProfiles:p,filterProfiles:v,selectAll:g,deselectAll:L,toggleProfileSelection:P,isProfileSelected:j,getProfileImageUrl:x,handleImageError:U,hasRF:J,hasGrant:Z,hasGIF:fe,generatePDF:Ie,goBack:T,handleTouchStart:F=>{F.currentTarget.style.transform="scale(0.98)"},handleTouchEnd:F=>{F.currentTarget.style.transform="scale(1)"}}}},ZN={class:"pdf-export-page"},e6={class:"page-header"},t6={class:"header-left"},n6={class:"header-right"},r6=["disabled"],i6={key:0,class:"fas fa-spinner fa-spin"},s6={key:1,class:"fas fa-file-pdf"},o6={key:2},a6={class:"controls-bar"},l6={class:"search-section"},c6={class:"search-container"},u6={class:"filter-container"},h6=["value"],f6={class:"selection-controls"},d6=["disabled"],p6=["disabled"],g6={key:0,class:"export-options-dropdown"},m6={class:"options-grid"},y6={class:"option-item"},v6={class:"option-label"},_6={class:"option-item"},b6={class:"option-label"},w6={class:"option-item"},A6={class:"option-label"},I6={key:0,class:"year-range-selector"},E6={class:"date-input-group"},T6=["max"],S6={class:"date-input-group"},x6=["min"],P6={class:"option-item"},R6={class:"option-label"},N6={key:1,class:"selection-info"},L6={class:"info-card"},C6={class:"profiles-container"},k6={key:0,class:"loading"},D6={key:1,class:"no-profiles"},O6={key:2,class:"profiles-grid"},F6=["onClick"],M6={class:"profile-image"},V6=["src","alt"],U6={class:"profile-info"},j6={class:"reg-id"},B6={class:"profile-tags"},q6={key:0,class:"tag rf-tag"},H6={key:1,class:"tag grant-tag"},z6={key:2,class:"tag gif-tag"},G6={class:"selection-indicator"},$6={key:0,class:"fas fa-check-circle"},W6={key:1,class:"far fa-circle"};function K6(t,e,n,r,i,s){return Ve(),je("div",ZN,[k("div",e6,[k("div",t6,[k("button",{class:"back-btn",onClick:e[0]||(e[0]=(...o)=>r.goBack&&r.goBack(...o))},e[19]||(e[19]=[k("i",{class:"fas fa-arrow-left"},null,-1)])),e[20]||(e[20]=k("h1",null,"PDF Export",-1))]),k("div",n6,[k("button",{class:"export-btn",onClick:e[1]||(e[1]=(...o)=>r.generatePDF&&r.generatePDF(...o)),disabled:r.selectedProfiles.length===0||r.generating},[r.generating?(Ve(),je("i",i6)):(Ve(),je("i",s6)),r.generating?jt("",!0):(Ve(),je("span",o6,qe(r.selectedProfiles.length),1))],8,r6)])]),k("div",a6,[k("div",l6,[k("div",c6,[e[21]||(e[21]=k("i",{class:"fas fa-search search-icon"},null,-1)),$n(k("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>r.searchQuery=o),onInput:e[3]||(e[3]=(...o)=>r.filterProfiles&&r.filterProfiles(...o)),type:"text",placeholder:"Search...",class:"search-input"},null,544),[[Ma,r.searchQuery]])]),k("div",u6,[e[23]||(e[23]=k("i",{class:"fas fa-filter filter-icon"},null,-1)),$n(k("select",{"onUpdate:modelValue":e[4]||(e[4]=o=>r.districtFilter=o),onChange:e[5]||(e[5]=(...o)=>r.filterProfiles&&r.filterProfiles(...o)),class:"filter-select"},[e[22]||(e[22]=k("option",{value:""},"All",-1)),(Ve(!0),je(nn,null,qn(r.districts,o=>(Ve(),je("option",{key:o,value:o},qe(o),9,h6))),128))],544),[[ug,r.districtFilter]])])]),k("div",f6,[k("button",{class:"control-btn",onClick:e[6]||(e[6]=(...o)=>r.selectAll&&r.selectAll(...o)),disabled:r.allProfiles.length===0,title:"Select All"},e[24]||(e[24]=[k("i",{class:"fas fa-check-double"},null,-1)]),8,d6),k("button",{class:"control-btn",onClick:e[7]||(e[7]=(...o)=>r.deselectAll&&r.deselectAll(...o)),disabled:r.selectedProfiles.length===0,title:"Deselect All"},e[25]||(e[25]=[k("i",{class:"fas fa-times"},null,-1)]),8,p6),k("button",{class:"control-btn",onClick:e[8]||(e[8]=o=>r.showExportOptions=!r.showExportOptions),title:"Export Options"},e[26]||(e[26]=[k("i",{class:"fas fa-ellipsis-v"},null,-1)])),k("button",{class:"control-btn close-btn",onClick:e[9]||(e[9]=(...o)=>r.goBack&&r.goBack(...o)),title:"Close"},e[27]||(e[27]=[k("i",{class:"fas fa-times"},null,-1)]))])]),r.showExportOptions?(Ve(),je("div",g6,[k("div",m6,[k("div",y6,[k("label",v6,[$n(k("input",{type:"checkbox","onUpdate:modelValue":e[10]||(e[10]=o=>r.exportOptions.includeImages=o),class:"option-checkbox"},null,512),[[Go,r.exportOptions.includeImages]]),e[28]||(e[28]=k("span",{class:"option-text"},"Profile Images",-1))]),e[29]||(e[29]=k("small",{class:"option-hint"},"May affect performance due to CORS restrictions",-1))]),k("div",_6,[k("label",b6,[$n(k("input",{type:"checkbox","onUpdate:modelValue":e[11]||(e[11]=o=>r.exportOptions.includeRFLoans=o),class:"option-checkbox"},null,512),[[Go,r.exportOptions.includeRFLoans]]),e[30]||(e[30]=k("span",{class:"option-text"},"RF Loans",-1))])]),k("div",w6,[k("label",A6,[$n(k("input",{type:"checkbox","onUpdate:modelValue":e[12]||(e[12]=o=>r.exportOptions.includeRFHistory=o),class:"option-checkbox"},null,512),[[Go,r.exportOptions.includeRFHistory]]),e[31]||(e[31]=k("span",{class:"option-text"},"RF History",-1))]),r.exportOptions.includeRFHistory?(Ve(),je("div",I6,[k("div",E6,[e[32]||(e[32]=k("label",null,"From:",-1)),$n(k("input",{type:"month","onUpdate:modelValue":e[13]||(e[13]=o=>r.exportOptions.rfHistoryFrom=o),class:"date-input",max:r.exportOptions.rfHistoryTo},null,8,T6),[[Ma,r.exportOptions.rfHistoryFrom]])]),k("div",S6,[e[33]||(e[33]=k("label",null,"To:",-1)),$n(k("input",{type:"month","onUpdate:modelValue":e[14]||(e[14]=o=>r.exportOptions.rfHistoryTo=o),class:"date-input",min:r.exportOptions.rfHistoryFrom},null,8,x6),[[Ma,r.exportOptions.rfHistoryTo]])])])):jt("",!0)]),k("div",P6,[k("label",R6,[$n(k("input",{type:"checkbox","onUpdate:modelValue":e[15]||(e[15]=o=>r.exportOptions.includeGrantHistory=o),class:"option-checkbox"},null,512),[[Go,r.exportOptions.includeGrantHistory]]),e[34]||(e[34]=k("span",{class:"option-text"},"Grant History",-1))])])])])):jt("",!0),r.selectedProfiles.length>0?(Ve(),je("div",N6,[k("div",L6,[e[35]||(e[35]=k("i",{class:"fas fa-info-circle"},null,-1)),k("span",null,qe(r.selectedProfiles.length)+" profile"+qe(r.selectedProfiles.length!==1?"s":"")+" selected",1)])])):jt("",!0),k("div",C6,[r.loading?(Ve(),je("div",k6,e[36]||(e[36]=[k("div",{class:"spinner"},null,-1),k("span",null,"Loading profiles...",-1)]))):r.filteredProfiles.length===0?(Ve(),je("div",D6,e[37]||(e[37]=[k("i",{class:"fas fa-search"},null,-1),k("p",null,"No profiles found",-1)]))):(Ve(),je("div",O6,[(Ve(!0),je(nn,null,qn(r.filteredProfiles,o=>{var a,l;return Ve(),je("div",{key:o.id,class:Zr(["profile-item",{selected:r.isProfileSelected(o.id)}]),onClick:h=>r.toggleProfileSelection(o.id),onTouchstart:e[17]||(e[17]=(...h)=>r.handleTouchStart&&r.handleTouchStart(...h)),onTouchend:e[18]||(e[18]=(...h)=>r.handleTouchEnd&&r.handleTouchEnd(...h))},[k("div",M6,[k("img",{src:r.getProfileImageUrl(o),alt:((a=o.basicInfo)==null?void 0:a.name)||"Profile",onError:e[16]||(e[16]=(...h)=>r.handleImageError&&r.handleImageError(...h))},null,40,V6)]),k("div",U6,[k("h4",null,qe(((l=o.basicInfo)==null?void 0:l.name)||o.Name||"Unknown"),1),k("p",j6,qe(o.id||o.Reg_ID||"No ID"),1),k("div",B6,[r.hasRF(o)?(Ve(),je("span",q6,"RF")):jt("",!0),r.hasGrant(o)?(Ve(),je("span",H6,"GRANT")):jt("",!0),r.hasGIF(o)?(Ve(),je("span",z6,"GIF")):jt("",!0)])]),k("div",G6,[r.isProfileSelected(o.id)?(Ve(),je("i",$6)):(Ve(),je("i",W6))])],42,F6)}),128))]))])])}const J6=Ka(XN,[["render",K6],["__scopeId","data-v-b73c7199"]]),Q6={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-gray-100"},Y6={class:"print-modal bg-white p-4 shadow-lg border border-gray-200 w-full max-w-md mx-4"},X6={class:"flex items-start gap-4 mb-4 pb-4 border-b border-gray-200"},Z6={class:"w-24 h-24 flex-shrink-0"},eL=["src","alt"],tL={class:"flex-grow pt-2"},nL={class:"font-bold text-lg"},rL={class:"text-xs text-gray-600"},iL={class:"text-xs text-gray-600"},sL={class:"text-xs text-gray-600"},oL={class:"text-xs text-gray-600"},aL={key:0,class:"mt-4"},lL={class:"p-3 bg-white border border-gray-200 rounded-b-md"},cL={class:"space-y-3 text-xs"},uL={class:"flex justify-between items-center"},hL={class:"text-gray-500"},fL={class:"flex justify-between items-center"},dL={class:"text-gray-500"},pL={class:"flex justify-between items-center"},gL={class:"flex justify-between items-center"},mL={class:"text-gray-500"},yL={class:"text-gray-500"},vL={key:1,class:"mt-4"},_L={class:"p-3 bg-white border border-gray-200 rounded-b-md"},bL={class:"space-y-3 text-xs"},wL={class:"text-gray-500"},AL={key:2,class:"mt-4"},IL={class:"p-3 bg-white border border-gray-200 rounded-b-md"},EL={class:"space-y-3 text-xs"},TL={key:3,class:"mt-4"},SL={class:"space-y-2 text-xs p-3 bg-white border border-gray-200 rounded-b-md"},xL={class:"text-gray-600"},PL={__name:"PrintModal",props:{show:{type:Boolean,default:!1},profile:{type:Object,default:()=>({})},profileImageUrl:{type:String,default:""},activeRFLoans:{type:Array,default:()=>[]},completedRFLoans:{type:Array,default:()=>[]},grantProjects:{type:Array,default:()=>[]},rfReturnHistory:{type:Array,default:()=>[]},gifItems:{type:Array,default:()=>[]}},emits:["close"],setup(t,{emit:e}){const n=t,r=e,i=zt(()=>n.rfReturnHistory?n.rfReturnHistory.filter(h=>{if(!h.approvedDate)return!0;const d=new Date(h.approvedDate),p=new Date("2001-01-01T00:00:00+06:00");return d.getTime()!==p.getTime()}):[]),s=zt(()=>i.value?[...i.value].sort((h,d)=>{const p=o(h.approvedDate);return o(d.approvedDate).getTime()-p.getTime()}):[]),o=h=>{if(!h)return new Date(0);try{let d;if(h.toDate)d=h.toDate();else if(h.seconds&&typeof h.seconds=="number")d=new Date(h.seconds*1e3);else if(typeof h=="number")d=new Date(h*1e3);else if(typeof h=="string")if(h.includes("-")&&h.split("-").length===3){const p=h.split("-");p[0].length===2&&p[1].length===2&&p[2].length===4?d=new Date(`${p[2]}-${p[1]}-${p[0]}`):d=new Date(h)}else d=new Date(h);else d=new Date(h);return isNaN(d.getTime())?new Date(0):d}catch{return new Date(0)}},a=h=>{if(!h)return"N/A";try{let d;if(h.toDate)d=h.toDate();else if(h.seconds&&typeof h.seconds=="number")d=new Date(h.seconds*1e3);else if(typeof h=="number")d=new Date(h*1e3);else if(typeof h=="string")if(h.includes("-")&&h.split("-").length===3){const p=h.split("-");p[0].length===2&&p[1].length===2&&p[2].length===4?d=new Date(`${p[2]}-${p[1]}-${p[0]}`):d=new Date(h)}else d=new Date(h);else d=new Date(h);return isNaN(d.getTime())?"Invalid Date":d.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"Invalid Date"}},l=()=>{r("close")};return(h,d)=>t.show?(Ve(),je("div",Q6,[k("div",Y6,[k("div",X6,[k("div",Z6,[k("img",{src:t.profileImageUrl,alt:`Profile picture of ${t.profile[qt($e).FULL_NAME]}`,class:"w-full h-full object-cover rounded-md"},null,8,eL)]),k("div",tL,[k("h1",nL,qe(t.profile[qt($e).FULL_NAME]||"Unknown"),1),k("p",rL,"Reg_ID: "+qe(t.profile[qt($e).REG_ID]||"N/A"),1),k("p",iL,"NIC: "+qe(t.profile[qt($e).NIC]||"N/A"),1),k("p",sL,"District: "+qe(t.profile[qt($e).DISTRICT]||"N/A"),1),k("p",oL,"Contact: "+qe(t.profile[qt($e).PHONE_NUMBER]||"N/A"),1)])]),t.activeRFLoans.length>0||t.completedRFLoans.length>0?(Ve(),je("div",aL,[d[2]||(d[2]=k("h2",{class:"font-bold text-sm bg-gray-100 p-2 rounded-t-md"},"RF Loans",-1)),k("div",lL,[k("div",cL,[(Ve(!0),je(nn,null,qn(t.activeRFLoans,p=>(Ve(),je("div",{key:p.id,class:"space-y-1"},[k("div",uL,[k("p",null,qe(p[qt(tn).PURPOSE]||"RF Loan")+" - LKR "+qe(qt(zo)(p[qt(tn).AMOUNT])),1),k("p",hL,qe(a(p[qt(tn).APPROVED_AT]||p[qt(tn).INITIATION_DATE])),1)]),k("div",fL,[k("p",dL,"LKR "+qe(qt(zo)(p[qt(tn).CURRENT_BALANCE])),1),d[0]||(d[0]=k("span",{class:"text-green-600 bg-green-100 px-2 py-1 rounded-full font-semibold"},"Active",-1))])]))),128)),(Ve(!0),je(nn,null,qn(t.completedRFLoans,p=>(Ve(),je("div",{key:p.id,class:"space-y-1"},[k("div",pL,[k("p",null,qe(p[qt(tn).PURPOSE]||"RF Loan")+" - LKR "+qe(qt(zo)(p[qt(tn).AMOUNT])),1),d[1]||(d[1]=k("span",{class:"text-blue-600 bg-blue-100 px-2 py-1 rounded-full font-semibold"},"Completed",-1))]),k("div",gL,[k("p",mL,qe(a(p[qt(tn).APPROVED_AT]||p[qt(tn).INITIATION_DATE])),1),k("p",yL,qe(p.id),1)])]))),128))])])])):jt("",!0),t.grantProjects.length>0?(Ve(),je("div",vL,[d[3]||(d[3]=k("h2",{class:"font-bold text-sm bg-gray-100 p-2 rounded-t-md"},"Grants",-1)),k("div",_L,[k("div",bL,[(Ve(!0),je(nn,null,qn(t.grantProjects,p=>(Ve(),je("div",{key:p.id,class:"flex justify-between items-start"},[k("p",null,qe(p[qt(Kn).PURPOSE]||"Grant")+" - LKR "+qe(qt(zo)(p[qt(Kn).AMOUNT]||p[qt(Kn).APPROVED_AMOUNT])),1),k("p",wL,qe(a(p[qt(Kn).APPROVED_AT]||p[qt(Kn).REQUESTED_DATE])),1)]))),128))])])])):jt("",!0),t.gifItems.length>0?(Ve(),je("div",AL,[d[4]||(d[4]=k("h2",{class:"font-bold text-sm bg-gray-100 p-2 rounded-t-md"},"GIF Projects",-1)),k("div",IL,[k("div",EL,[(Ve(!0),je(nn,null,qn(t.gifItems,(p,v)=>(Ve(),je("div",{key:v,class:"flex justify-between items-start"},[k("p",null,qe(p.description||p),1)]))),128))])])])):jt("",!0),s.value.length>0?(Ve(),je("div",TL,[d[5]||(d[5]=k("h2",{class:"font-bold text-sm bg-gray-100 p-2 rounded-t-md"},"RF Paid History",-1)),k("div",SL,[(Ve(!0),je(nn,null,qn(s.value,p=>(Ve(),je("div",{key:p.RRH_ID,class:"flex justify-between"},[k("p",xL,qe(a(p.approvedDate)),1),k("p",null,"LKR "+qe(qt(zo)(p.amount)),1)]))),128))])])):jt("",!0),k("div",{class:"no-print mt-6 flex justify-end gap-2"},[k("button",{onClick:l,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300"}," Close ")])])])):jt("",!0)}},RL=Ka(PL,[["__scopeId","data-v-e464105f"]]),NL={name:"ProfilePage",components:{PrintModal:RL},setup(){const t=U5(),e=Nf(),n=It(!0),r=It(null),i=It(null),s=It("/placeholder-profile.jpg"),o=It([]),a=It([]),l=It([]),h=It([]),d=It(!1),p={RF:"RF",GRANT:"GRANT",GIF:"GIF"},v=zt(()=>t.params.regId),g=zt(()=>{const M=[];return L.value&&M.push(p.RF),P.value&&M.push(p.GRANT),x.value&&M.push(p.GIF),M}),L=zt(()=>o.value.length>0),P=zt(()=>a.value.length>0),j=zt(()=>l.value.length>0),x=zt(()=>h.value.length>0),U=zt(()=>o.value.filter(M=>M[tn.STATUS]==="active")),J=zt(()=>o.value.filter(M=>M[tn.STATUS]==="completed")),Z=zt(()=>!l.value||l.value.length===0?[]:[...l.value].sort((M,K)=>{const ee=ae(M.approvedDate);return ae(K.approvedDate).getTime()-ee.getTime()})),fe=async()=>{if(!v.value){r.value="Missing profile ID",n.value=!1;return}try{n.value=!0,r.value=null;const M=await ni.getProfileByRegId(v.value);if(!M){r.value="Profile not found";return}i.value=M,await Ie(),await T(),await S(),await O()}catch{r.value="Failed to load profile"}finally{n.value=!1}},Ie=async()=>{var M,K,ee,he;try{const Y=((M=i.value)==null?void 0:M.Image)||((K=i.value)==null?void 0:K.imageUrl)||((he=(ee=i.value)==null?void 0:ee.basicInfo)==null?void 0:he.imageUrl);if(!Y){s.value="/placeholder-profile.jpg";return}if(Y&&!Y.includes("http")&&!Y.includes("drive.google.com")){const ne=Y.trim();if(ne&&ne.length>10){const Se=`https://drive.google.com/thumbnail?id=${ne}&sz=w400-h400`;s.value=Se;return}}const se=await Yv.debugImageUrl(Y);s.value=se}catch{s.value="/placeholder-profile.jpg"}},T=async()=>{try{const M=await ni.getProfileLoans(v.value);o.value=M.filter(K=>K.type===p.RF),a.value=M.filter(K=>K.type===p.GRANT)}catch{o.value=[],a.value=[]}},S=async()=>{try{const M=await ni.getRFReturnHistory(v.value);if(M&&typeof M=="object"){const K=Object.values(M).map(ee=>({RRH_ID:ee.RRH_ID||"-",DRIVE_LINK_ID:ee.DRIVE_LINK_ID||null,amount:ee.amount||0,approvedDate:ee.approvedDate||null,change:ee.change||"-",receiver:ee.receiver||"-",regID:ee.regID||v.value,targetLoan:ee.targetLoan||"-",opacity:!1}));l.value=K}else l.value=[]}catch{l.value=[]}},O=async()=>{var M;try{const K=(M=i.value)==null?void 0:M[$e.GIF];K&&Array.isArray(K)?h.value=K.map(ee=>({description:ee.description||ee,timestamp:ee.timestamp||new Date})):h.value=[]}catch{h.value=[]}},F=M=>M?new Date().getFullYear()-M:"N/A",w=M=>{switch(M){case p.RF:return"bg-green-100 text-green-800";case p.GRANT:return"bg-red-100 text-red-800";case p.GIF:return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},E=M=>{switch(M){case"active":return"bg-green-100 text-green-600";case"pending":return"bg-red-100 text-red-600";case"completed":return"bg-gray-100 text-gray-600";default:return"bg-gray-100 text-gray-600"}},I=M=>{switch(M){case"active":return"Active";case"pending":return"Pending";case"completed":return"Completed";default:return"Unknown"}},z=M=>{if(!M)return"#";if(M.includes("drive.google.com")){const K=M.match(/\/file\/d\/([a-zA-Z0-9_-]+)/);return K&&K[1]?`https://drive.google.com/file/d/${K[1]}/view`:"#"}return`https://drive.google.com/file/d/${M}/view`},re=M=>{if(!M)return"-";const K=o.value.find(ee=>ee.id===M);return K?K[tn.PURPOSE]:M},ae=M=>{if(!M)return new Date(0);try{let K;if(M.toDate)K=M.toDate();else if(M.seconds&&typeof M.seconds=="number")K=new Date(M.seconds*1e3);else if(typeof M=="number")K=new Date(M*1e3);else if(typeof M=="string")if(M.includes("T")&&M.includes("Z"))K=new Date(M);else if(M.includes("-")&&M.split("-").length===3){const ee=M.split("-");ee[0].length===2&&ee[1].length===2&&ee[2].length===4?K=new Date(`${ee[2]}-${ee[1]}-${ee[0]}`):K=new Date(M)}else K=new Date(M);else K=new Date(M);return isNaN(K.getTime())?new Date(0):K}catch{return new Date(0)}},ge=M=>{if(!M)return"N/A";try{let K;if(M.toDate)K=M.toDate();else if(M.seconds&&typeof M.seconds=="number")K=new Date(M.seconds*1e3);else if(typeof M=="number")K=new Date(M*1e3);else if(typeof M=="string")if(M.includes("T")&&M.includes("Z"))K=new Date(M);else if(M.includes("-")&&M.split("-").length===3){const ee=M.split("-");ee[0].length===2&&ee[1].length===2&&ee[2].length===4?K=new Date(`${ee[2]}-${ee[1]}-${ee[0]}`):K=new Date(M)}else K=new Date(M);else K=new Date(M);return isNaN(K.getTime())?"Invalid Date":K.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"Invalid Date"}},ce=()=>{s.value="/placeholder-profile.jpg"},xe=()=>{e.push("/")},Pe=(M,K)=>{e.push(`/${v.value}/${K}/${M}`)},Qe=()=>{d.value=!0},C=()=>{d.value=!1};return uc(()=>{fe()}),{loading:n,error:r,profile:i,profileImageUrl:s,rfLoans:o,grantLoans:a,rfReturnHistory:l,gifItems:h,showPrintModal:d,regId:v,profileTypes:g,hasRFLoans:L,hasGrantLoans:P,hasRFPaymentHistory:j,hasGifItems:x,activeRFLoans:U,completedRFLoans:J,sortedRFReturnHistory:Z,loadProfile:fe,calculateAge:F,getProfileTypeClass:w,getLoanStatusClass:E,getLoanStatusText:I,getReceiptUrl:z,getProjectName:re,parseDateForSorting:ae,formatDateOnly:ge,handleImageError:ce,goBack:xe,openLoanDetails:Pe,openPrintModal:Qe,closePrintModal:C,formatAmount:zo,formatDate:__,ProfileField:$e,RF_LOAN_FIELD:tn,GRANT_FIELD:Kn,LOAN_TYPES:p}}},LL={class:"bg-gray-50 text-gray-800"},CL={class:"max-w-4xl mx-auto bg-white min-h-screen"},kL={class:"no-print bg-blue-600 text-white p-4 flex justify-between items-center sticky top-0 z-10 shadow-md"},DL={class:"flex items-center gap-2"},OL={key:0,class:"no-print bg-gray-100 text-sm text-gray-600 px-4 py-2"},FL={class:"list-none p-0 inline-flex"},ML={class:"flex items-center"},VL={class:"flex items-center"},UL={class:"p-4 sm:p-6"},jL={key:0,class:"flex flex-col items-center justify-center py-12"},BL={key:1,class:"bg-white rounded-xl shadow-md flex flex-col items-center justify-center p-8 text-center"},qL={class:"text-sm text-gray-600"},HL={key:2},zL={class:"text-center mb-8"},GL=["src","alt"],$L={class:"text-2xl font-bold mt-4"},WL={class:"text-gray-500"},KL={class:"flex justify-center items-center gap-2 mt-2"},JL={class:"flex justify-center items-center gap-4 text-gray-500 mt-2 text-sm"},QL={class:"mb-8"},YL={class:"bg-white p-4 rounded-lg tile-shadow print-shadow-none border border-gray-200"},XL={class:"grid grid-cols-2 gap-4 text-sm"},ZL={class:"font-medium"},eC={class:"font-medium"},tC={class:"col-span-2"},nC={class:"font-medium"},rC={class:"font-medium"},iC={key:0,class:"mb-8"},sC={open:""},oC={class:"space-y-4"},aC=["onClick"],lC={class:"flex justify-between items-start"},cC={class:"font-bold text-base"},uC={class:"text-sm text-gray-500"},hC={key:0,class:"text-sm font-semibold text-red-600"},fC={key:1,class:"text-sm font-semibold text-orange-600"},dC={key:2,class:"text-sm font-semibold text-green-600"},pC={class:"text-xs text-gray-500 mt-3 pt-3 border-t flex justify-between"},gC={key:1,class:"mb-8"},mC={open:""},yC={class:"bg-white p-4 rounded-lg tile-shadow print-shadow-none border border-gray-200"},vC={class:"space-y-4"},_C={class:"text-gray-500"},bC={class:"font-medium text-center text-xs"},wC={class:"font-medium text-center"},AC=["href"],IC={key:1,class:"text-gray-500 justify-end font-semibold text-right"},EC={key:2},TC={open:""},SC={class:"bg-white p-4 rounded-lg tile-shadow print-shadow-none border border-gray-200"},xC={class:"space-y-4"},PC={class:"text-sm font-semibold text-gray-800"},RC={class:"text-sm text-gray-500 text-center"},NC={class:"text-sm text-gray-500 text-right"},LC={key:3},CC={open:""},kC={class:"bg-white p-4 rounded-lg tile-shadow print-shadow-none border border-gray-200"},DC={class:"space-y-4"},OC={class:"text-sm font-semibold text-gray-800"};function FC(t,e,n,r,i,s){const o=og("PrintModal");return Ve(),je("div",LL,[k("div",CL,[k("header",kL,[k("button",{onClick:e[0]||(e[0]=(...a)=>r.goBack&&r.goBack(...a)),class:"p-2 hover:bg-blue-700 rounded-full transition-colors"},e[6]||(e[6]=[k("span",{class:"material-symbols-outlined"},"arrow_back",-1)])),e[8]||(e[8]=k("h1",{class:"text-xl font-bold"},"Profile Details",-1)),k("div",DL,[k("button",{onClick:e[1]||(e[1]=(...a)=>r.openPrintModal&&r.openPrintModal(...a)),class:"p-2 hover:bg-blue-700 rounded-full transition-colors",title:"Print Summary"},e[7]||(e[7]=[k("span",{class:"material-symbols-outlined"},"print",-1)]))])]),r.profile?(Ve(),je("nav",OL,[k("ol",FL,[k("li",ML,[k("a",{onClick:e[2]||(e[2]=(...a)=>r.goBack&&r.goBack(...a)),class:"hover:text-blue-600 cursor-pointer"},"Home"),e[9]||(e[9]=k("span",{class:"material-symbols-outlined mx-2 text-sm"},"chevron_right",-1))]),k("li",VL,[k("a",{onClick:e[3]||(e[3]=(...a)=>r.goBack&&r.goBack(...a)),class:"hover:text-blue-600 cursor-pointer"},"Users"),e[10]||(e[10]=k("span",{class:"material-symbols-outlined mx-2 text-sm"},"chevron_right",-1))]),k("li",null,qe(r.profile[r.ProfileField.FULL_NAME]||"Unknown"),1)])])):jt("",!0),k("main",UL,[r.loading?(Ve(),je("div",jL,e[11]||(e[11]=[k("div",{class:"loading-spinner"},null,-1),k("p",{class:"mt-4 text-gray-600"},"Loading profile...",-1)]))):r.error?(Ve(),je("div",BL,[e[12]||(e[12]=k("span",{class:"material-symbols-outlined text-5xl text-red-500"},"error",-1)),e[13]||(e[13]=k("p",{class:"mt-4 font-semibold text-gray-800"},"Failed to load profile",-1)),k("p",qL,qe(r.error),1),k("button",{onClick:e[4]||(e[4]=(...a)=>r.loadProfile&&r.loadProfile(...a)),class:"mt-4 px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Retry ")])):r.profile?(Ve(),je("div",HL,[k("section",zL,[k("img",{src:r.profileImageUrl,alt:`Profile picture of ${r.profile[r.ProfileField.FULL_NAME]}`,class:"w-36 h-36 mx-auto rounded-lg object-cover shadow-lg border-4 border-white",onError:e[5]||(e[5]=(...a)=>r.handleImageError&&r.handleImageError(...a))},null,40,GL),k("h2",$L,qe(r.profile[r.ProfileField.FULL_NAME]||"Unknown"),1),k("p",WL,"Reg_ID: "+qe(r.profile[r.ProfileField.REG_ID]||"N/A"),1),k("div",KL,[(Ve(!0),je(nn,null,qn(r.profileTypes,a=>(Ve(),je("span",{key:a,class:Zr([r.getProfileTypeClass(a),"text-xs font-semibold px-2.5 py-0.5 rounded-full"])},qe(a),3))),128))]),k("div",JL,[k("span",null,"District: "+qe(r.profile[r.ProfileField.DISTRICT]||"N/A"),1),k("span",null,"Age: "+qe(r.calculateAge(r.profile[r.ProfileField.YEAR_OF_BIRTH])),1)])]),k("section",QL,[k("div",YL,[e[18]||(e[18]=k("h3",{class:"font-bold text-lg mb-4 text-blue-600"},"Basic Information",-1)),k("div",XL,[k("div",null,[e[14]||(e[14]=k("label",{class:"text-xs text-gray-500"},"Phone",-1)),k("p",ZL,qe(r.profile[r.ProfileField.PHONE_NUMBER]||"-"),1)]),k("div",null,[e[15]||(e[15]=k("label",{class:"text-xs text-gray-500"},"NIC",-1)),k("p",eC,qe(r.profile[r.ProfileField.NIC]||"-"),1)]),k("div",tC,[e[16]||(e[16]=k("label",{class:"text-xs text-gray-500"},"Address",-1)),k("p",nC,qe(r.profile[r.ProfileField.ADDRESS]||"-"),1)]),k("div",null,[e[17]||(e[17]=k("label",{class:"text-xs text-gray-500"},"Occupation",-1)),k("p",rC,qe(r.profile[r.ProfileField.OCCUPATION]||"-"),1)])])])]),r.hasRFLoans?(Ve(),je("section",iC,[k("details",sC,[e[19]||(e[19]=k("summary",{class:"flex justify-between items-center cursor-pointer mb-4"},[k("h3",{class:"font-bold text-lg text-green-600"},"RF Projects"),k("span",{class:"material-symbols-outlined transition-transform duration-300"},"expand_more")],-1)),k("div",oC,[(Ve(!0),je(nn,null,qn(r.rfLoans,a=>(Ve(),je("div",{key:a.id,onClick:l=>r.openLoanDetails(a.id,r.LOAN_TYPES.RF),class:Zr(["bg-white p-4 rounded-lg tile-shadow print-shadow-none border border-l-4 cursor-pointer hover:shadow-lg transition-shadow",a[r.RF_LOAN_FIELD.STATUS]==="active"?"border-green-500":a[r.RF_LOAN_FIELD.STATUS]==="pending"?"border-red-500":"border-gray-400 opacity-80"])},[k("div",lC,[k("div",null,[k("h4",cC,qe(a[r.RF_LOAN_FIELD.PURPOSE]||"RF Loan"),1),k("p",uC,"Amount: LKR "+qe(r.formatAmount(a[r.RF_LOAN_FIELD.AMOUNT])),1),a[r.RF_LOAN_FIELD.STATUS]==="active"?(Ve(),je("p",hC," Balance: LKR "+qe(r.formatAmount(a[r.RF_LOAN_FIELD.CURRENT_BALANCE])),1)):a[r.RF_LOAN_FIELD.STATUS]==="pending"?(Ve(),je("p",fC," Pending Approval ")):(Ve(),je("p",dC,"Completed"))]),k("span",{class:Zr([r.getLoanStatusClass(a[r.RF_LOAN_FIELD.STATUS]),"text-xs font-bold px-3 py-1 rounded-full"])},qe(r.getLoanStatusText(a[r.RF_LOAN_FIELD.STATUS])),3)]),k("div",pC,[k("span",null,"Approved: "+qe(r.formatDateOnly(a[r.RF_LOAN_FIELD.APPROVED_AT]||a[r.RF_LOAN_FIELD.INITIATION_DATE])),1),k("span",null,qe(a.id),1)])],10,aC))),128))])])])):jt("",!0),r.hasRFPaymentHistory?(Ve(),je("section",gC,[k("details",mC,[e[22]||(e[22]=k("summary",{class:"flex justify-between items-center cursor-pointer mb-4"},[k("h3",{class:"font-bold text-lg text-gray-700 flex items-center gap-2"},[k("span",{class:"material-symbols-outlined text-gray-500"},"folder"),zs("RF Payment History ")]),k("span",{class:"material-symbols-outlined transition-transform duration-300"},"expand_more")],-1)),k("div",yC,[k("div",vC,[e[21]||(e[21]=k("div",{class:"grid grid-cols-4 items-center text-sm font-bold text-gray-500 border-b pb-2"},[k("p",null,"Date"),k("p",{class:"text-center"},"Project"),k("p",{class:"text-center"},"Receiver"),k("p",{class:"text-right"},"Amount")],-1)),(Ve(!0),je(nn,null,qn(r.sortedRFReturnHistory,a=>(Ve(),je("div",{key:a.RRH_ID,class:Zr(["grid grid-cols-4 items-center text-sm py-2 border-b",a.opacity?"opacity-60":""])},[k("p",_C,qe(r.formatDateOnly(a.approvedDate)),1),k("p",bC,qe(r.getProjectName(a.targetLoan)||"-"),1),k("p",wC,qe(a.receiver||"-"),1),a.DRIVE_LINK_ID?(Ve(),je("a",{key:0,href:r.getReceiptUrl(a.DRIVE_LINK_ID),target:"_blank",class:"flex items-center gap-1 text-blue-600 hover:underline justify-end font-semibold"},[k("span",null,qe(r.formatAmount(a.amount)),1),e[20]||(e[20]=k("span",{class:"material-symbols-outlined text-sm no-print"},"open_in_new",-1))],8,AC)):(Ve(),je("span",IC,qe(r.formatAmount(a.amount)),1))],2))),128))])])])])):jt("",!0),r.hasGrantLoans?(Ve(),je("section",EC,[k("details",TC,[e[23]||(e[23]=k("summary",{class:"flex justify-between items-center cursor-pointer mb-4"},[k("h3",{class:"font-bold text-lg text-red-600"},"Grant Projects"),k("span",{class:"material-symbols-outlined transition-transform duration-300"},"expand_more")],-1)),k("div",SC,[k("div",xC,[(Ve(!0),je(nn,null,qn(r.grantLoans,a=>(Ve(),je("div",{key:a.id,class:"grid grid-cols-3 items-center text-sm py-2 border-b"},[k("span",PC,qe(a[r.GRANT_FIELD.PURPOSE]||"Grant"),1),k("span",RC,"LKR "+qe(r.formatAmount(a[r.GRANT_FIELD.AMOUNT]||a[r.GRANT_FIELD.APPROVED_AMOUNT])),1),k("span",NC,qe(r.formatDateOnly(a[r.GRANT_FIELD.APPROVED_AT]||a[r.GRANT_FIELD.REQUESTED_DATE])),1)]))),128))])])])])):jt("",!0),r.hasGifItems?(Ve(),je("section",LC,[k("details",CC,[e[24]||(e[24]=k("summary",{class:"flex justify-between items-center cursor-pointer mb-4"},[k("h3",{class:"font-bold text-lg text-blue-600"},"GIF Projects"),k("span",{class:"material-symbols-outlined transition-transform duration-300"},"expand_more")],-1)),k("div",kC,[k("div",DC,[(Ve(!0),je(nn,null,qn(r.gifItems,(a,l)=>(Ve(),je("div",{key:l,class:"grid grid-cols-1 items-center text-sm py-2 border-b"},[k("span",OC,qe(a.description||a),1)]))),128))])])])])):jt("",!0)])):jt("",!0)])]),r.showPrintModal?(Ve(),b5(o,{key:0,show:r.showPrintModal,profile:r.profile,profileImageUrl:r.profileImageUrl,activeRFLoans:r.activeRFLoans,completedRFLoans:r.completedRFLoans,grantProjects:r.grantLoans,rfReturnHistory:r.rfReturnHistory,gifItems:r.gifItems,onClose:r.closePrintModal},null,8,["show","profile","profileImageUrl","activeRFLoans","completedRFLoans","grantProjects","rfReturnHistory","gifItems","onClose"])):jt("",!0)])}const MC=Ka(NL,[["render",FC],["__scopeId","data-v-4fcd4f2d"]]),VC={name:"LoanDetailsPage",setup(){const t=U5(),e=Nf(),n=It(!0),r=It(null),i=It(null),s=It(null),o=It("/placeholder-profile.jpg"),a=It([]),l=It(!1),h=zt(()=>t.params.regId),d=zt(()=>t.params.loanId),p={RF:"RF",GRANT:"GRANT"},v=zt(()=>t.params.loanType||p.RF),g=zt(()=>v.value===p.RF),L=zt(()=>v.value===p.GRANT),P=zt(()=>g.value?tn:Kn),j=zt(()=>!a.value||a.value.length===0?[]:[...a.value].sort((z,re)=>{const ae=T(z.approvedDate);return T(re.approvedDate).getTime()-ae.getTime()})),x=async()=>{if(!h.value||!d.value){r.value="Missing profile ID or loan ID",n.value=!1;return}try{n.value=!0,r.value=null;const z=await ni.getProfileByRegId(h.value);if(!z){r.value="Profile not found";return}s.value=z;const re=await ni.getLoanById(h.value,d.value,v.value);if(!re){r.value="Loan not found";return}i.value=re,await U(),await J()}catch{r.value="Failed to load loan details"}finally{n.value=!1}},U=async()=>{var z,re,ae,ge;try{const ce=((z=s.value)==null?void 0:z.Image)||((re=s.value)==null?void 0:re.imageUrl)||((ge=(ae=s.value)==null?void 0:ae.basicInfo)==null?void 0:ge.imageUrl);if(!ce){o.value="/placeholder-profile.jpg";return}if(ce&&!ce.includes("http")&&!ce.includes("drive.google.com")){const Pe=ce.trim();if(Pe&&Pe.length>10){const Qe=`https://drive.google.com/thumbnail?id=${Pe}&sz=w400-h400`;o.value=Qe;return}}const xe=await Yv.debugImageUrl(ce);o.value=xe}catch{o.value="/placeholder-profile.jpg"}},J=async()=>{var z;try{if(g.value)if((z=i.value)!=null&&z.loanHistory&&Array.isArray(i.value.loanHistory))a.value=i.value.loanHistory.map(re=>({...re,approvedDate:re.date||re.approvedDate||re.timestamp||new Date,DRIVE_LINK_ID:re.receipt_link_ID||re.DRIVE_LINK_ID,amount:parseFloat(re.amount)||0,receiver:re.receiver||"SYSTEM"})).sort((re,ae)=>new Date(ae.approvedDate)-new Date(re.approvedDate));else{const re=await ni.getLoanById(h.value,d.value,v.value);re!=null&&re.loanHistory&&Array.isArray(re.loanHistory)?a.value=re.loanHistory.map(ae=>({...ae,approvedDate:ae.date||ae.approvedDate||ae.timestamp||new Date,DRIVE_LINK_ID:ae.receipt_link_ID||ae.DRIVE_LINK_ID,amount:parseFloat(ae.amount)||0,receiver:ae.receiver||"SYSTEM"})).sort((ae,ge)=>new Date(ge.approvedDate)-new Date(ae.approvedDate)):a.value=[]}}catch{a.value=[]}},Z=()=>{if(!i.value)return"Unknown";const z=i.value[P.value.STATUS];return z==="active"||z==="Active"?"Active":z==="completed"||z==="Completed"?"Completed":z==="pending"||z==="Pending"?"Pending":"Active"},fe=()=>{switch(Z()){case"Active":return"bg-active-green";case"Completed":return"bg-completed-blue";case"Pending":return"bg-yellow-500";default:return"bg-gray-500"}},Ie=z=>{if(!z)return"#";if(z.includes("drive.google.com")){const re=z.match(/\/file\/d\/([a-zA-Z0-9_-]+)/);return re&&re[1]?`https://drive.google.com/file/d/${re[1]}/view`:"#"}return`https://drive.google.com/file/d/${z}/view`},T=z=>{if(!z)return new Date(0);try{let re;if(z.toDate)re=z.toDate();else if(z.seconds&&typeof z.seconds=="number")re=new Date(z.seconds*1e3);else if(typeof z=="number")re=new Date(z*1e3);else if(typeof z=="string")if(z.includes("-")&&z.split("-").length===3){const ae=z.split("-");ae[0].length===2&&ae[1].length===2&&ae[2].length===4?re=new Date(`${ae[2]}-${ae[1]}-${ae[0]}`):re=new Date(z)}else re=new Date(z);else re=new Date(z);return isNaN(re.getTime())?new Date(0):re}catch{return new Date(0)}},S=z=>{if(!z)return"N/A";try{let re;if(z.toDate)re=z.toDate();else if(z.seconds&&typeof z.seconds=="number")re=new Date(z.seconds*1e3);else if(typeof z=="number")re=new Date(z*1e3);else if(typeof z=="string")if(z.includes("-")&&z.split("-").length===3){const ae=z.split("-");ae[0].length===2&&ae[1].length===2&&ae[2].length===4?re=new Date(`${ae[2]}-${ae[1]}-${ae[0]}`):re=new Date(z)}else re=new Date(z);else re=new Date(z);return isNaN(re.getTime())?"Invalid Date":re.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"Invalid Date"}},O=()=>{l.value=!0},F=()=>{l.value=!1},w=()=>{switch(Z()){case"Active":return"text-green-700 bg-green-100/80 border-green-200/80";case"Completed":return"text-blue-700 bg-blue-100/80 border-blue-200/80";case"Pending":return"text-yellow-700 bg-yellow-100/80 border-yellow-200/80";default:return"text-gray-700 bg-gray-100/80 border-gray-200/80"}},E=async()=>{try{const z=await ni.getRFBillDriveFolderLink(h.value);z&&window.open(z,"_blank")}catch{}},I=()=>{e.push(`/${h.value}`)};return uc(()=>{x()}),{loading:n,error:r,loan:i,profile:s,profileImageUrl:o,loanSettlementHistory:a,sortedLoanSettlementHistory:j,showPrintModal:l,regId:h,loanId:d,loanType:v,isRFLoan:g,isGrantLoan:L,loanField:P,loadLoanDetails:x,getLoanStatus:Z,getStatusClass:fe,getReceiptUrl:Ie,parseDateForSorting:T,formatDateOnly:S,openPrintModal:O,closePrintModal:F,getPrintStatusClass:w,openReceiptFolder:E,goBack:I,formatAmount:zo,formatDate:__,ProfileField:$e,RF_LOAN_FIELD:tn,GRANT_FIELD:Kn,LOAN_TYPES:p}}},UC={class:"relative min-h-screen w-full bg-gradient-to-br from-gray-100 to-gray-200 font-display text-gray-800"},jC={class:"sticky top-0 z-10 bg-white/80 backdrop-blur-sm shadow-sm"},BC={class:"flex items-center justify-between p-4"},qC={class:"flex items-center gap-2"},HC={class:"space-y-0"},zC={key:0,class:"flex flex-col items-center justify-center py-12"},GC={key:1,class:"bg-white rounded-xl shadow-md flex flex-col items-center justify-center p-8 text-center"},$C={class:"text-sm text-gray-600"},WC={key:2,class:"p-4"},KC={class:"max-w-2xl mx-auto"},JC={class:"flex items-start gap-5 mb-6 pb-6 border-b border-gray-200/80"},QC={class:"w-28 h-28 flex-shrink-0"},YC=["src","alt"],XC={class:"flex-grow pt-2"},ZC={class:"font-extrabold text-2xl text-gray-800 tracking-tight"},ek={class:"text-sm text-gray-500 mt-1"},tk={class:"mt-2 text-sm space-y-0.5"},nk={class:"text-gray-500"},rk={class:"text-gray-500"},ik={class:"text-gray-500"},sk={class:"space-y-6"},ok={class:"tile"},ak={class:"gradient-header flex justify-between items-center p-4 rounded-t-2xl border-b border-gray-200/80"},lk={class:"font-bold text-base text-gray-700"},ck={class:"p-4"},uk={class:"space-y-4 text-sm"},hk={class:"space-y-2"},fk={class:"flex justify-between items-center"},dk={class:"font-medium text-gray-800"},pk={class:"text-gray-500 text-xs"},gk={class:"flex justify-between items-center"},mk={key:0,class:"font-semibold text-lg text-red-600"},yk={key:1,class:"font-semibold text-lg text-green-600"},vk={class:"text-gray-500 text-xs"},_k={class:"flex justify-between text-xs pt-2 border-t border-gray-100"},bk={class:"text-gray-500"},wk={class:"font-medium text-gray-600"},Ak={class:"text-gray-500"},Ik={class:"font-medium text-gray-600"},Ek={key:0,class:"tile"},Tk={class:"gradient-header flex justify-between items-center p-4 rounded-t-2xl border-b border-gray-200/80"},Sk={class:"font-bold text-base text-gray-700"},xk={class:"p-4"},Pk={class:"space-y-4 text-sm relative pl-4"},Rk={class:"text-gray-500 text-xs"},Nk=["href"],Lk={class:"font-semibold text-sm"},Ck={key:1,class:"flex items-center gap-1.5 text-gray-500 justify-end"},kk={class:"font-semibold text-sm"},Dk={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-gray-100"},Ok={class:"print-modal bg-white p-4 shadow-lg border border-gray-200 w-full max-w-md mx-4"},Fk={class:"flex items-start gap-4 mb-4 pb-4 border-b border-gray-200"},Mk={class:"w-24 h-24 flex-shrink-0"},Vk=["src","alt"],Uk={class:"flex-grow pt-2"},jk={class:"font-bold text-lg"},Bk={class:"text-xs text-gray-600"},qk={class:"text-xs text-gray-600"},Hk={class:"text-xs text-gray-600"},zk={class:"text-xs text-gray-600"},Gk={class:"mt-4"},$k={class:"flex justify-between items-center bg-gray-100 p-2 rounded-t-md"},Wk={class:"font-bold text-sm"},Kk={class:"p-3 bg-white border border-gray-200 rounded-b-md"},Jk={class:"space-y-3 text-xs"},Qk={class:"space-y-1"},Yk={class:"flex justify-between items-center"},Xk={class:"text-gray-500"},Zk={key:0,class:"flex justify-between items-center"},eD={class:"font-semibold text-red-600"},tD={class:"text-gray-500"},nD={key:1,class:"flex justify-between items-center"},rD={class:"text-gray-500"},iD={class:"flex justify-between"},sD={class:"text-gray-500"},oD={class:"text-gray-500"},aD={key:0,class:"mt-4"},lD={class:"flex justify-between items-center bg-gray-100 p-2 rounded-t-md"},cD={class:"font-bold text-sm"},uD={class:"space-y-2 text-xs p-3 bg-white border border-gray-200 rounded-b-md"},hD={class:"text-gray-600 text-left"},fD={class:"text-right text-gray-800"},dD={class:"no-print mt-6 flex justify-end gap-2"};function pD(t,e,n,r,i,s){return Ve(),je("div",UC,[k("header",jC,[k("div",BC,[k("button",{onClick:e[0]||(e[0]=(...o)=>r.goBack&&r.goBack(...o)),class:"p-2 rounded-full hover:bg-gray-200 transition-colors"},e[6]||(e[6]=[k("span",{class:"material-symbols-outlined"},"arrow_back",-1)])),k("div",qC,[k("span",{class:Zr([r.getStatusClass(),"px-3 py-1 text-sm font-semibold text-white rounded-full"])},qe(r.getLoanStatus()),3),k("button",{onClick:e[1]||(e[1]=(...o)=>r.openPrintModal&&r.openPrintModal(...o)),class:"p-2 rounded-full hover:bg-gray-200 transition-colors",title:"Print Summary"},e[7]||(e[7]=[k("span",{class:"material-symbols-outlined"},"print",-1)])),k("button",{onClick:e[2]||(e[2]=(...o)=>r.goBack&&r.goBack(...o)),class:"p-2 rounded-full hover:bg-gray-200 transition-colors"},e[8]||(e[8]=[k("span",{class:"material-symbols-outlined"},"close",-1)]))])])]),k("main",HC,[r.loading?(Ve(),je("div",zC,e[9]||(e[9]=[k("div",{class:"loading-spinner"},null,-1),k("p",{class:"mt-4 text-gray-600"},"Loading loan details...",-1)]))):r.error?(Ve(),je("div",GC,[e[10]||(e[10]=k("span",{class:"material-symbols-outlined text-5xl text-red-500"},"error",-1)),e[11]||(e[11]=k("p",{class:"mt-4 font-semibold text-gray-800"},"Failed to load loan details",-1)),k("p",$C,qe(r.error),1),k("button",{onClick:e[3]||(e[3]=(...o)=>r.loadLoanDetails&&r.loadLoanDetails(...o)),class:"mt-4 px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Retry ")])):r.loan&&r.profile?(Ve(),je("div",WC,[k("div",KC,[k("div",JC,[k("div",QC,[k("img",{src:r.profileImageUrl,alt:`Profile picture of ${r.profile[r.ProfileField.FULL_NAME]}`,class:"w-full h-full object-cover rounded-2xl shadow-lg"},null,8,YC)]),k("div",XC,[k("h1",ZC,qe(r.profile[r.ProfileField.FULL_NAME]||"Unknown"),1),k("p",ek,"Reg_ID: "+qe(r.profile[r.ProfileField.REG_ID]||"N/A"),1),k("div",tk,[k("p",nk,[e[12]||(e[12]=k("span",{class:"font-medium text-gray-700"},"NIC:",-1)),zs(" "+qe(r.profile[r.ProfileField.NIC]||"N/A"),1)]),k("p",rk,[e[13]||(e[13]=k("span",{class:"font-medium text-gray-700"},"District:",-1)),zs(" "+qe(r.profile[r.ProfileField.DISTRICT]||"N/A"),1)]),k("p",ik,[e[14]||(e[14]=k("span",{class:"font-medium text-gray-700"},"Contact:",-1)),zs(" "+qe(r.profile[r.ProfileField.PHONE_NUMBER]||"N/A"),1)])])])]),k("div",sk,[k("div",ok,[k("div",ak,[k("h2",lk,qe(r.isRFLoan?"RF Loan Details":"Grant Details"),1),k("span",{class:Zr([r.getPrintStatusClass(),"px-3 py-1 rounded-full font-semibold text-xs border"])},qe(r.getLoanStatus()),3)]),k("div",ck,[k("div",uk,[k("div",hk,[k("div",fk,[k("p",dk,qe(r.loan[r.loanField.PURPOSE]||"Loan")+" - LKR "+qe(r.formatAmount(r.loan[r.loanField.AMOUNT]||r.loan[r.loanField.APPROVED_AMOUNT])),1),k("p",pk,qe(r.formatDateOnly(r.loan[r.loanField.APPROVED_AT]||r.loan[r.loanField.INITIATION_DATE]||r.loan[r.loanField.REQUESTED_DATE])),1)]),k("div",gk,[r.loan[r.loanField.STATUS]!=="completed"?(Ve(),je("p",mk,"LKR "+qe(r.formatAmount(r.loan[r.loanField.CURRENT_BALANCE]||r.loan[r.loanField.AMOUNT]||r.loan[r.loanField.APPROVED_AMOUNT])),1)):(Ve(),je("p",yk,"Completed")),k("p",vk,qe(r.loanId),1)]),k("div",_k,[k("p",bk,[e[15]||(e[15]=zs("ARMS: ")),k("span",wk,qe(r.loan[r.loanField.ARMS]||"N/A"),1)]),k("p",Ak,[e[16]||(e[16]=zs("Source: ")),k("span",Ik,qe(r.loan[r.loanField.SOURCE]||"N/A"),1)])])])])])]),r.sortedLoanSettlementHistory.length>0?(Ve(),je("div",Ek,[k("div",Tk,[k("h2",Sk,qe(r.isRFLoan?"RF Payment History":"Payment History"),1),k("button",{onClick:e[4]||(e[4]=(...o)=>r.openReceiptFolder&&r.openReceiptFolder(...o)),class:"material-symbols-outlined text-gray-500 hover:text-gray-700 transition-colors",title:"Open Receipt Folder"}," folder_open ")]),k("div",xk,[k("div",Pk,[(Ve(!0),je(nn,null,qn(r.sortedLoanSettlementHistory,o=>(Ve(),je("div",{key:o.RRH_ID||o.id,class:"timeline-item grid grid-cols-2 items-center relative"},[k("p",Rk,qe(r.formatDateOnly(o.approvedDate)),1),o.DRIVE_LINK_ID?(Ve(),je("a",{key:0,href:r.getReceiptUrl(o.DRIVE_LINK_ID),target:"_blank",class:"flex items-center gap-1.5 text-blue-600 hover:text-blue-800 justify-end group transition-colors duration-200"},[k("span",Lk,"LKR "+qe(r.formatAmount(o.amount)),1),e[17]||(e[17]=k("span",{class:"material-symbols-outlined text-base transform group-hover:translate-x-0.5 transition-transform duration-200"},"arrow_forward",-1))],8,Nk)):(Ve(),je("span",Ck,[k("span",kk,"LKR "+qe(r.formatAmount(o.amount)),1)]))]))),128))])])])):jt("",!0)])])])):jt("",!0)]),r.showPrintModal?(Ve(),je("div",Dk,[k("div",Ok,[k("div",Fk,[k("div",Mk,[k("img",{src:r.profileImageUrl,alt:`Profile picture of ${r.profile[r.ProfileField.FULL_NAME]}`,class:"w-full h-full object-cover rounded-md"},null,8,Vk)]),k("div",Uk,[k("h1",jk,qe(r.profile[r.ProfileField.FULL_NAME]||"Unknown"),1),k("p",Bk,"Reg_ID: "+qe(r.profile[r.ProfileField.REG_ID]||"N/A"),1),k("p",qk,"NIC: "+qe(r.profile[r.ProfileField.NIC]||"N/A"),1),k("p",Hk,"District: "+qe(r.profile[r.ProfileField.DISTRICT]||"N/A"),1),k("p",zk,"Contact: "+qe(r.profile[r.ProfileField.PHONE_NUMBER]||"N/A"),1)])]),k("div",Gk,[k("div",$k,[k("h2",Wk,qe(r.isRFLoan?"RF Loan":"Grant"),1),k("span",{class:Zr([r.getPrintStatusClass(),"px-2 py-1 rounded-full font-semibold text-xs"])},qe(r.getLoanStatus()),3)]),k("div",Kk,[k("div",Jk,[k("div",Qk,[k("div",Yk,[k("p",null,qe(r.loan[r.loanField.PURPOSE]||"Loan")+" - LKR "+qe(r.formatAmount(r.loan[r.loanField.AMOUNT]||r.loan[r.loanField.APPROVED_AMOUNT])),1),k("p",Xk,qe(r.formatDateOnly(r.loan[r.loanField.APPROVED_AT]||r.loan[r.loanField.INITIATION_DATE]||r.loan[r.loanField.REQUESTED_DATE])),1)]),r.isRFLoan&&r.loan[r.loanField.STATUS]!=="completed"?(Ve(),je("div",Zk,[k("p",eD,"LKR "+qe(r.formatAmount(r.loan[r.loanField.CURRENT_BALANCE])),1),k("p",tD,qe(r.loanId),1)])):r.isRFLoan&&r.loan[r.loanField.STATUS]==="completed"?(Ve(),je("div",nD,[e[18]||(e[18]=k("p",{class:"font-semibold text-green-600"},"Completed",-1)),k("p",rD,qe(r.loanId),1)])):jt("",!0),k("div",iD,[k("p",sD,"ARMS: "+qe(r.loan[r.loanField.ARMS]||"N/A"),1),k("p",oD,"Source: "+qe(r.loan[r.loanField.SOURCE]||"N/A"),1)])])])])]),r.sortedLoanSettlementHistory.length>0?(Ve(),je("div",aD,[k("div",lD,[k("h2",cD,qe(r.isRFLoan?"RF Paid History":"Payment History"),1)]),k("div",uD,[(Ve(!0),je(nn,null,qn(r.sortedLoanSettlementHistory,o=>(Ve(),je("div",{key:o.RRH_ID||o.id,class:"grid grid-cols-2 items-center text-center"},[k("p",hD,qe(r.formatDateOnly(o.approvedDate)),1),k("p",fD,"LKR "+qe(r.formatAmount(o.amount)),1)]))),128))])])):jt("",!0),k("div",dD,[k("button",{onClick:e[5]||(e[5]=(...o)=>r.closePrintModal&&r.closePrintModal(...o)),class:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300"}," Close ")])])])):jt("",!0)])}const gD=Ka(VC,[["render",pD],["__scopeId","data-v-c3bf3605"]]),mD=[{path:"/",name:"Home",component:YN},{path:"/pdf-export",name:"PdfExport",component:J6},{path:"/:regId/:loanType/:loanId",name:"LoanDetails",component:gD,props:!0},{path:"/:regId",name:"Profile",component:MC,props:!0}],yD=E4({history:ZA(),routes:mD}),vD=x4(),lm=bA(L4);lm.use(yD);lm.use(vD);lm.mount("#app");export{Zt as _};
